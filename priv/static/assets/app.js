var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __objRest = (source, exclude) => {
  var target = {};
  for (var prop in source)
    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)
      target[prop] = source[prop];
  if (source != null && __getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(source)) {
      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))
        target[prop] = source[prop];
    }
  return target;
};
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));

// node_modules/@maskito/core/index.umd.js
var require_index_umd = __commonJS({
  "node_modules/@maskito/core/index.umd.js"(exports, module2) {
    (function(global2, factory) {
      typeof exports === "object" && typeof module2 !== "undefined" ? factory(exports) : typeof define === "function" && define.amd ? define(["exports"], factory) : (global2 = typeof globalThis !== "undefined" ? globalThis : global2 || self, factory(global2.Core = {}));
    })(exports, function(exports2) {
      "use strict";
      var MASKITO_DEFAULT_ELEMENT_PREDICATE = function(e) {
        return e.querySelector("input,textarea") || e;
      };
      var MASKITO_DEFAULT_OPTIONS = {
        mask: /^.*$/,
        preprocessors: [],
        postprocessors: [],
        plugins: [],
        overwriteMode: "shift"
      };
      var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
          d2.__proto__ = b2;
        } || function(d2, b2) {
          for (var p in b2)
            if (Object.prototype.hasOwnProperty.call(b2, p))
              d2[p] = b2[p];
        };
        return extendStatics(d, b);
      };
      function __extends(d, b) {
        if (typeof b !== "function" && b !== null)
          throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
          this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
      }
      var __assign = function() {
        __assign = Object.assign || function __assign2(t) {
          for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s)
              if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
          }
          return t;
        };
        return __assign.apply(this, arguments);
      };
      function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m)
          return o;
        var i = m.call(o), r, ar = [], e;
        try {
          while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
            ar.push(r.value);
        } catch (error) {
          e = { error };
        } finally {
          try {
            if (r && !r.done && (m = i["return"]))
              m.call(i);
          } finally {
            if (e)
              throw e.error;
          }
        }
        return ar;
      }
      function __spreadArray(to, from, pack) {
        if (pack || arguments.length === 2)
          for (var i = 0, l = from.length, ar; i < l; i++) {
            if (ar || !(i in from)) {
              if (!ar)
                ar = Array.prototype.slice.call(from, 0, i);
              ar[i] = from[i];
            }
          }
        return to.concat(ar || Array.prototype.slice.call(from));
      }
      typeof SuppressedError === "function" ? SuppressedError : function(error, suppressed, message) {
        var e = new Error(message);
        return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
      };
      var MaskHistory = (
        /** @class */
        function() {
          function MaskHistory2() {
            this.now = null;
            this.past = [];
            this.future = [];
          }
          MaskHistory2.prototype.undo = function() {
            var state = this.past.pop();
            if (state && this.now) {
              this.future.push(this.now);
              this.updateElement(state, "historyUndo");
            }
          };
          MaskHistory2.prototype.redo = function() {
            var state = this.future.pop();
            if (state && this.now) {
              this.past.push(this.now);
              this.updateElement(state, "historyRedo");
            }
          };
          MaskHistory2.prototype.updateHistory = function(state) {
            if (!this.now) {
              this.now = state;
              return;
            }
            var isValueChanged = this.now.value !== state.value;
            var isSelectionChanged = this.now.selection.some(function(item, index) {
              return item !== state.selection[index];
            });
            if (!isValueChanged && !isSelectionChanged) {
              return;
            }
            if (isValueChanged) {
              this.past.push(this.now);
              this.future = [];
            }
            this.now = state;
          };
          MaskHistory2.prototype.updateElement = function(state, inputType) {
            this.now = state;
            this.updateElementState(state, {
              inputType,
              data: null
            });
          };
          return MaskHistory2;
        }()
      );
      function areElementValuesEqual(sampleState) {
        var states = [];
        for (var _i = 1; _i < arguments.length; _i++) {
          states[_i - 1] = arguments[_i];
        }
        return states.every(function(_a) {
          var value = _a.value;
          return value === sampleState.value;
        });
      }
      function areElementStatesEqual(sampleState) {
        var states = [];
        for (var _i = 1; _i < arguments.length; _i++) {
          states[_i - 1] = arguments[_i];
        }
        return states.every(function(_a) {
          var value = _a.value, selection = _a.selection;
          return value === sampleState.value && selection[0] === sampleState.selection[0] && selection[1] === sampleState.selection[1];
        });
      }
      function applyOverwriteMode(_a, newCharacters, mode) {
        var value = _a.value, selection = _a.selection;
        var _b = __read(selection, 2), from = _b[0], to = _b[1];
        var computedMode = typeof mode === "function" ? mode({
          value,
          selection
        }) : mode;
        return {
          value,
          selection: computedMode === "replace" ? [from, from + newCharacters.length] : [from, to]
        };
      }
      function isFixedCharacter(char) {
        return typeof char === "string";
      }
      function getLeadingFixedCharacters(mask, validatedValuePart, newCharacter, initialElementState) {
        var leadingFixedCharacters = "";
        for (var i = validatedValuePart.length; i < mask.length; i++) {
          var charConstraint = mask[i];
          var isInitiallyExisted = (initialElementState === null || initialElementState === void 0 ? void 0 : initialElementState.value[i]) === charConstraint;
          if (!isFixedCharacter(charConstraint) || charConstraint === newCharacter && !isInitiallyExisted) {
            return leadingFixedCharacters;
          }
          leadingFixedCharacters += charConstraint;
        }
        return leadingFixedCharacters;
      }
      function validateValueWithMask(value, maskExpression) {
        if (Array.isArray(maskExpression)) {
          return value.length === maskExpression.length && Array.from(value).every(function(char, i) {
            var charConstraint = maskExpression[i];
            return isFixedCharacter(charConstraint) ? char === charConstraint : char.match(charConstraint);
          });
        }
        return maskExpression.test(value);
      }
      function guessValidValueByPattern(elementState, mask, initialElementState) {
        var maskedFrom = null;
        var maskedTo = null;
        var maskedValue = Array.from(elementState.value).reduce(function(validatedCharacters, char, charIndex) {
          var leadingCharacters = getLeadingFixedCharacters(mask, validatedCharacters, char, initialElementState);
          var newValidatedChars = validatedCharacters + leadingCharacters;
          var charConstraint = mask[newValidatedChars.length];
          if (isFixedCharacter(charConstraint)) {
            return newValidatedChars + charConstraint;
          }
          if (!char.match(charConstraint)) {
            return newValidatedChars;
          }
          if (maskedFrom === null && charIndex >= elementState.selection[0]) {
            maskedFrom = newValidatedChars.length;
          }
          if (maskedTo === null && charIndex >= elementState.selection[1]) {
            maskedTo = newValidatedChars.length;
          }
          return newValidatedChars + char;
        }, "");
        var trailingFixedCharacters = getLeadingFixedCharacters(mask, maskedValue, "", initialElementState);
        return {
          value: validateValueWithMask(maskedValue + trailingFixedCharacters, mask) ? maskedValue + trailingFixedCharacters : maskedValue,
          selection: [maskedFrom !== null && maskedFrom !== void 0 ? maskedFrom : maskedValue.length, maskedTo !== null && maskedTo !== void 0 ? maskedTo : maskedValue.length]
        };
      }
      function guessValidValueByRegExp(_a, maskRegExp) {
        var value = _a.value, selection = _a.selection;
        var _b = __read(selection, 2), from = _b[0], to = _b[1];
        var newFrom = from;
        var newTo = to;
        var validatedValue = Array.from(value).reduce(function(validatedValuePart, char, i) {
          var newPossibleValue = validatedValuePart + char;
          if (from === i) {
            newFrom = validatedValuePart.length;
          }
          if (to === i) {
            newTo = validatedValuePart.length;
          }
          return newPossibleValue.match(maskRegExp) ? newPossibleValue : validatedValuePart;
        }, "");
        return {
          value: validatedValue,
          selection: [newFrom, newTo]
        };
      }
      function calibrateValueByMask(elementState, mask, initialElementState) {
        if (initialElementState === void 0) {
          initialElementState = null;
        }
        if (validateValueWithMask(elementState.value, mask)) {
          return elementState;
        }
        var _a = Array.isArray(mask) ? guessValidValueByPattern(elementState, mask, initialElementState) : guessValidValueByRegExp(elementState, mask), value = _a.value, selection = _a.selection;
        return {
          selection,
          value: Array.isArray(mask) ? value.slice(0, mask.length) : value
        };
      }
      function removeFixedMaskCharacters(initialElementState, mask) {
        if (!Array.isArray(mask)) {
          return initialElementState;
        }
        var _a = __read(initialElementState.selection, 2), from = _a[0], to = _a[1];
        var selection = [];
        var unmaskedValue = Array.from(initialElementState.value).reduce(function(rawValue, char, i) {
          var charConstraint = mask[i];
          if (i === from) {
            selection.push(rawValue.length);
          }
          if (i === to) {
            selection.push(rawValue.length);
          }
          return isFixedCharacter(charConstraint) && charConstraint === char ? rawValue : rawValue + char;
        }, "");
        if (selection.length < 2) {
          selection.push.apply(selection, __spreadArray([], __read(new Array(2 - selection.length).fill(unmaskedValue.length))));
        }
        return {
          value: unmaskedValue,
          selection: [selection[0], selection[1]]
        };
      }
      var MaskModel = (
        /** @class */
        function() {
          function MaskModel2(initialElementState, maskOptions) {
            this.initialElementState = initialElementState;
            this.maskOptions = maskOptions;
            this.value = "";
            this.selection = [0, 0];
            var _a = calibrateValueByMask(initialElementState, this.getMaskExpression(initialElementState)), value = _a.value, selection = _a.selection;
            this.value = value;
            this.selection = selection;
          }
          MaskModel2.prototype.addCharacters = function(_a, newCharacters) {
            var _b = __read(_a, 2), from = _b[0], to = _b[1];
            var value = this.value;
            var maskExpression = this.getMaskExpression({
              value: value.slice(0, from) + newCharacters + value.slice(to),
              selection: [from + newCharacters.length, from + newCharacters.length]
            });
            var initialElementState = {
              value,
              selection: [from, to]
            };
            var unmaskedElementState = removeFixedMaskCharacters(initialElementState, maskExpression);
            var _c = __read(applyOverwriteMode(unmaskedElementState, newCharacters, this.maskOptions.overwriteMode).selection, 2), unmaskedFrom = _c[0], unmaskedTo = _c[1];
            var newUnmaskedLeadingValuePart = unmaskedElementState.value.slice(0, unmaskedFrom) + newCharacters;
            var newCaretIndex = newUnmaskedLeadingValuePart.length;
            var maskedElementState = calibrateValueByMask({
              value: newUnmaskedLeadingValuePart + unmaskedElementState.value.slice(unmaskedTo),
              selection: [newCaretIndex, newCaretIndex]
            }, maskExpression, initialElementState);
            var isInvalidCharsInsertion = (
              // eslint-disable-next-line @typescript-eslint/prefer-string-starts-ends-with
              value.slice(0, unmaskedFrom) === calibrateValueByMask({
                value: newUnmaskedLeadingValuePart,
                selection: [newCaretIndex, newCaretIndex]
              }, maskExpression, initialElementState).value
            );
            if (isInvalidCharsInsertion || areElementStatesEqual(this, maskedElementState)) {
              throw new Error("Invalid mask value");
            }
            this.value = maskedElementState.value;
            this.selection = maskedElementState.selection;
          };
          MaskModel2.prototype.deleteCharacters = function(_a) {
            var _b = __read(_a, 2), from = _b[0], to = _b[1];
            if (from === to || !to) {
              return;
            }
            var value = this.value;
            var maskExpression = this.getMaskExpression({
              value: value.slice(0, from) + value.slice(to),
              selection: [from, from]
            });
            var initialElementState = {
              value,
              selection: [from, to]
            };
            var unmaskedElementState = removeFixedMaskCharacters(initialElementState, maskExpression);
            var _c = __read(unmaskedElementState.selection, 2), unmaskedFrom = _c[0], unmaskedTo = _c[1];
            var newUnmaskedValue = unmaskedElementState.value.slice(0, unmaskedFrom) + unmaskedElementState.value.slice(unmaskedTo);
            var maskedElementState = calibrateValueByMask({
              value: newUnmaskedValue,
              selection: [unmaskedFrom, unmaskedFrom]
            }, maskExpression, initialElementState);
            this.value = maskedElementState.value;
            this.selection = maskedElementState.selection;
          };
          MaskModel2.prototype.getMaskExpression = function(elementState) {
            var mask = this.maskOptions.mask;
            return typeof mask === "function" ? mask(elementState) : mask;
          };
          return MaskModel2;
        }()
      );
      var EventListener = (
        /** @class */
        function() {
          function EventListener2(element) {
            this.element = element;
            this.listeners = [];
          }
          EventListener2.prototype.listen = function(eventType, fn, options) {
            var _this = this;
            var untypedFn = fn;
            this.element.addEventListener(eventType, untypedFn, options);
            this.listeners.push(function() {
              return _this.element.removeEventListener(eventType, untypedFn);
            });
          };
          EventListener2.prototype.destroy = function() {
            this.listeners.forEach(function(stopListen) {
              return stopListen();
            });
          };
          return EventListener2;
        }()
      );
      function isHotkey(event, modifiers, hotkeyCode) {
        return event.ctrlKey === !!(modifiers & 1) && event.altKey === !!(modifiers & 2) && event.shiftKey === !!(modifiers & 4) && event.metaKey === !!(modifiers & 8) && event.keyCode === hotkeyCode;
      }
      function isRedo(event) {
        return isHotkey(
          event,
          1,
          89
          /* Y */
        ) || // Windows
        isHotkey(
          event,
          1 | 4,
          90
          /* Z */
        ) || // Windows & Android
        isHotkey(
          event,
          8 | 4,
          90
          /* Z */
        );
      }
      function isUndo(event) {
        return isHotkey(
          event,
          1,
          90
          /* Z */
        ) || // Windows & Android
        isHotkey(
          event,
          8,
          90
          /* Z */
        );
      }
      function isBeforeInputEventSupported(element) {
        return "onbeforeinput" in element;
      }
      function isEventProducingCharacter(_a) {
        var key = _a.key, ctrlKey = _a.ctrlKey, metaKey = _a.metaKey, altKey = _a.altKey;
        var isSystemKeyCombinations = ctrlKey || metaKey || altKey;
        var isSingleUnicodeChar = /^.$/u.test(key);
        return !isSystemKeyCombinations && key !== "Backspace" && isSingleUnicodeChar;
      }
      function getLineSelection(_a, isForward) {
        var value = _a.value, selection = _a.selection;
        var _b = __read(selection, 2), from = _b[0], to = _b[1];
        if (from !== to) {
          return [from, to];
        }
        var nearestBreak = isForward ? value.slice(from).indexOf("\n") + 1 || value.length : value.slice(0, to).lastIndexOf("\n") + 1;
        var selectFrom = isForward ? from : nearestBreak;
        var selectTo = isForward ? nearestBreak : to;
        return [selectFrom, selectTo];
      }
      function getNotEmptySelection(_a, isForward) {
        var value = _a.value, selection = _a.selection;
        var _b = __read(selection, 2), from = _b[0], to = _b[1];
        if (from !== to) {
          return [from, to];
        }
        var notEmptySelection = isForward ? [from, to + 1] : [from - 1, to];
        return notEmptySelection.map(function(x) {
          return Math.min(Math.max(x, 0), value.length);
        });
      }
      var TRAILING_SPACES_REG = /\s+$/g;
      var LEADING_SPACES_REG = /^\s+/g;
      var SPACE_REG = /\s/;
      function getWordSelection(_a, isForward) {
        var value = _a.value, selection = _a.selection;
        var _b = __read(selection, 2), from = _b[0], to = _b[1];
        if (from !== to) {
          return [from, to];
        }
        if (isForward) {
          var valueAfterSelectionStart = value.slice(from);
          var _c = __read(valueAfterSelectionStart.match(LEADING_SPACES_REG) || [""], 1), leadingSpaces = _c[0];
          var nearestWordEndIndex = valueAfterSelectionStart.replace(LEADING_SPACES_REG, "").search(SPACE_REG);
          return [from, nearestWordEndIndex !== -1 ? from + leadingSpaces.length + nearestWordEndIndex : value.length];
        }
        var valueBeforeSelectionEnd = value.slice(0, to);
        var _d = __read(valueBeforeSelectionEnd.match(TRAILING_SPACES_REG) || [""], 1), trailingSpaces = _d[0];
        var selectedWordLength = valueBeforeSelectionEnd.replace(TRAILING_SPACES_REG, "").split("").reverse().findIndex(function(char) {
          return char.match(SPACE_REG);
        });
        return [selectedWordLength !== -1 ? to - trailingSpaces.length - selectedWordLength : 0, to];
      }
      function maskitoPipe(processors) {
        if (processors === void 0) {
          processors = [];
        }
        return function(initialData) {
          var readonlyArgs = [];
          for (var _i = 1; _i < arguments.length; _i++) {
            readonlyArgs[_i - 1] = arguments[_i];
          }
          return processors.reduce(function(data, fn) {
            return __assign(__assign({}, data), fn.apply(void 0, __spreadArray([data], __read(readonlyArgs))));
          }, initialData);
        };
      }
      function maskitoTransform(valueOrState, maskitoOptions) {
        var options = __assign(__assign({}, MASKITO_DEFAULT_OPTIONS), maskitoOptions);
        var preprocessor = maskitoPipe(options.preprocessors);
        var postprocessor = maskitoPipe(options.postprocessors);
        var initialElementState = typeof valueOrState === "string" ? {
          value: valueOrState,
          selection: [0, 0]
        } : valueOrState;
        var elementState = preprocessor({
          elementState: initialElementState,
          data: ""
        }, "validation").elementState;
        var maskModel = new MaskModel(elementState, options);
        var _a = postprocessor(maskModel, initialElementState), value = _a.value, selection = _a.selection;
        return typeof valueOrState === "string" ? value : {
          value,
          selection
        };
      }
      var Maskito2 = (
        /** @class */
        function(_super) {
          __extends(Maskito3, _super);
          function Maskito3(element, maskitoOptions) {
            var _this = _super.call(this) || this;
            _this.element = element;
            _this.maskitoOptions = maskitoOptions;
            _this.isTextArea = _this.element.nodeName === "TEXTAREA";
            _this.eventListener = new EventListener(_this.element);
            _this.options = __assign(__assign({}, MASKITO_DEFAULT_OPTIONS), _this.maskitoOptions);
            _this.preprocessor = maskitoPipe(_this.options.preprocessors);
            _this.postprocessor = maskitoPipe(_this.options.postprocessors);
            _this.teardowns = _this.options.plugins.map(function(plugin) {
              return plugin(_this.element, _this.options);
            });
            _this.ensureValueFitsMask();
            _this.updateHistory(_this.elementState);
            _this.eventListener.listen("keydown", function(event) {
              if (isRedo(event)) {
                event.preventDefault();
                return _this.redo();
              }
              if (isUndo(event)) {
                event.preventDefault();
                return _this.undo();
              }
            });
            if (isBeforeInputEventSupported(element)) {
              _this.eventListener.listen("beforeinput", function(event) {
                var isForward = event.inputType.includes("Forward");
                _this.updateHistory(_this.elementState);
                switch (event.inputType) {
                  case "historyUndo":
                    event.preventDefault();
                    return _this.undo();
                  case "historyRedo":
                    event.preventDefault();
                    return _this.redo();
                  case "deleteByCut":
                  case "deleteContentBackward":
                  case "deleteContentForward":
                    return _this.handleDelete({
                      event,
                      isForward,
                      selection: getNotEmptySelection(_this.elementState, isForward)
                    });
                  case "deleteWordForward":
                  case "deleteWordBackward":
                    return _this.handleDelete({
                      event,
                      isForward,
                      selection: getWordSelection(_this.elementState, isForward),
                      force: true
                    });
                  case "deleteSoftLineBackward":
                  case "deleteSoftLineForward":
                  case "deleteHardLineBackward":
                  case "deleteHardLineForward":
                    return _this.handleDelete({
                      event,
                      isForward,
                      selection: getLineSelection(_this.elementState, isForward),
                      force: true
                    });
                  case "insertCompositionText":
                    return;
                  case "insertLineBreak":
                    return _this.handleEnter(event);
                  case "insertFromPaste":
                  case "insertText":
                  case "insertFromDrop":
                  default:
                    return _this.handleInsert(event, event.data || "");
                }
              });
            } else {
              _this.eventListener.listen("keydown", function(event) {
                return _this.handleKeydown(event);
              });
              _this.eventListener.listen("paste", function(event) {
                var _a;
                return _this.handleInsert(event, ((_a = event.clipboardData) === null || _a === void 0 ? void 0 : _a.getData("text/plain")) || "");
              });
            }
            _this.eventListener.listen("input", function(_a) {
              var inputType = _a.inputType;
              if (inputType === "insertCompositionText") {
                return;
              }
              _this.ensureValueFitsMask();
              _this.updateHistory(_this.elementState);
            });
            _this.eventListener.listen("compositionend", function() {
              _this.ensureValueFitsMask();
              _this.updateHistory(_this.elementState);
            });
            return _this;
          }
          Object.defineProperty(Maskito3.prototype, "elementState", {
            get: function() {
              var _a = this.element, value = _a.value, selectionStart = _a.selectionStart, selectionEnd = _a.selectionEnd;
              return {
                value,
                selection: [selectionStart || 0, selectionEnd || 0]
              };
            },
            enumerable: false,
            configurable: true
          });
          Object.defineProperty(Maskito3.prototype, "maxLength", {
            get: function() {
              var maxLength = this.element.maxLength;
              return maxLength === -1 ? Infinity : maxLength;
            },
            enumerable: false,
            configurable: true
          });
          Maskito3.prototype.destroy = function() {
            this.eventListener.destroy();
            this.teardowns.forEach(function(teardown) {
              return teardown === null || teardown === void 0 ? void 0 : teardown();
            });
          };
          Maskito3.prototype.updateElementState = function(_a, eventInit) {
            var value = _a.value, selection = _a.selection;
            if (eventInit === void 0) {
              eventInit = {
                inputType: "insertText",
                data: null
              };
            }
            var initialValue = this.elementState.value;
            this.updateValue(value);
            this.updateSelectionRange(selection);
            if (initialValue !== value) {
              this.dispatchInputEvent(eventInit);
            }
          };
          Maskito3.prototype.updateSelectionRange = function(_a) {
            var _b, _c;
            var _d = __read(_a, 2), from = _d[0], to = _d[1];
            if (this.element.selectionStart !== from || this.element.selectionEnd !== to) {
              (_c = (_b = this.element).setSelectionRange) === null || _c === void 0 ? void 0 : _c.call(_b, from, to);
            }
          };
          Maskito3.prototype.updateValue = function(value) {
            this.element.value = value;
          };
          Maskito3.prototype.ensureValueFitsMask = function() {
            this.updateElementState(maskitoTransform(this.elementState, this.options));
          };
          Maskito3.prototype.dispatchInputEvent = function(eventInit) {
            if (eventInit === void 0) {
              eventInit = {
                inputType: "insertText",
                data: null
              };
            }
            var globalObject = typeof window !== "undefined" ? window : globalThis;
            if (globalObject === null || globalObject === void 0 ? void 0 : globalObject.InputEvent) {
              this.element.dispatchEvent(new InputEvent("input", __assign(__assign({}, eventInit), {
                bubbles: true,
                cancelable: false
              })));
            }
          };
          Maskito3.prototype.handleKeydown = function(event) {
            var pressedKey = event.key;
            var isForward = pressedKey === "Delete";
            switch (pressedKey) {
              case "Backspace":
              case "Delete":
                return this.handleDelete({
                  event,
                  isForward,
                  selection: getNotEmptySelection(this.elementState, isForward)
                });
              case "Enter":
                return this.handleEnter(event);
            }
            if (!isEventProducingCharacter(event)) {
              return;
            }
            this.handleInsert(event, pressedKey);
          };
          Maskito3.prototype.handleDelete = function(_a) {
            var event = _a.event, selection = _a.selection, isForward = _a.isForward, _b = _a.force, force = _b === void 0 ? false : _b;
            var initialState = {
              value: this.elementState.value,
              selection
            };
            var _c = __read(initialState.selection, 2), initialFrom = _c[0], initialTo = _c[1];
            var elementState = this.preprocessor({
              elementState: initialState,
              data: ""
            }, isForward ? "deleteForward" : "deleteBackward").elementState;
            var maskModel = new MaskModel(elementState, this.options);
            var _d = __read(elementState.selection, 2), from = _d[0], to = _d[1];
            maskModel.deleteCharacters([from, to]);
            var newElementState = this.postprocessor(maskModel, initialState);
            var newPossibleValue = initialState.value.slice(0, initialFrom) + initialState.value.slice(initialTo);
            if (newPossibleValue === newElementState.value && !force) {
              return;
            }
            event.preventDefault();
            if (areElementValuesEqual(initialState, elementState, maskModel, newElementState)) {
              return this.updateSelectionRange(isForward ? [to, to] : [from, from]);
            }
            var inputTypeFallback = isForward ? "deleteContentForward" : "deleteContentBackward";
            this.updateElementState(newElementState, {
              inputType: "inputType" in event ? event.inputType : inputTypeFallback,
              data: null
            });
            this.updateHistory(newElementState);
          };
          Maskito3.prototype.handleInsert = function(event, data) {
            var initialElementState = this.elementState;
            var _a = this.preprocessor({
              data,
              elementState: initialElementState
            }, "insert"), elementState = _a.elementState, _b = _a.data, insertedText = _b === void 0 ? data : _b;
            var maskModel = new MaskModel(elementState, this.options);
            try {
              maskModel.addCharacters(elementState.selection, insertedText);
            } catch (_c) {
              return event.preventDefault();
            }
            var _d = __read(elementState.selection, 2), from = _d[0], to = _d[1];
            var newPossibleValue = elementState.value.slice(0, from) + data + elementState.value.slice(to);
            var newElementState = this.postprocessor(maskModel, initialElementState);
            if (newElementState.value.length > this.maxLength) {
              return event.preventDefault();
            }
            if (newPossibleValue !== newElementState.value) {
              event.preventDefault();
              this.updateElementState(newElementState, {
                data,
                inputType: "inputType" in event ? event.inputType : "insertText"
              });
              this.updateHistory(newElementState);
            }
          };
          Maskito3.prototype.handleEnter = function(event) {
            if (this.isTextArea) {
              this.handleInsert(event, "\n");
            }
          };
          return Maskito3;
        }(MaskHistory)
      );
      exports2.MASKITO_DEFAULT_ELEMENT_PREDICATE = MASKITO_DEFAULT_ELEMENT_PREDICATE;
      exports2.MASKITO_DEFAULT_OPTIONS = MASKITO_DEFAULT_OPTIONS;
      exports2.Maskito = Maskito2;
      exports2.maskitoPipe = maskitoPipe;
      exports2.maskitoTransform = maskitoTransform;
      Object.defineProperty(exports2, "__esModule", { value: true });
    });
  }
});

// node_modules/@maskito/kit/index.umd.js
var require_index_umd2 = __commonJS({
  "node_modules/@maskito/kit/index.umd.js"(exports, module2) {
    (function(global2, factory) {
      typeof exports === "object" && typeof module2 !== "undefined" ? factory(exports, require_index_umd()) : typeof define === "function" && define.amd ? define(["exports", "@maskito/core"], factory) : (global2 = typeof globalThis !== "undefined" ? globalThis : global2 || self, factory(global2.Kit = {}, global2.core));
    })(exports, function(exports2, core) {
      "use strict";
      var __assign = function() {
        __assign = Object.assign || function __assign2(t) {
          for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s)
              if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
          }
          return t;
        };
        return __assign.apply(this, arguments);
      };
      function __values(o) {
        var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
        if (m)
          return m.call(o);
        if (o && typeof o.length === "number")
          return {
            next: function() {
              if (o && i >= o.length)
                o = void 0;
              return { value: o && o[i++], done: !o };
            }
          };
        throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
      }
      function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m)
          return o;
        var i = m.call(o), r, ar = [], e;
        try {
          while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
            ar.push(r.value);
        } catch (error) {
          e = { error };
        } finally {
          try {
            if (r && !r.done && (m = i["return"]))
              m.call(i);
          } finally {
            if (e)
              throw e.error;
          }
        }
        return ar;
      }
      function __spreadArray(to, from, pack) {
        if (pack || arguments.length === 2)
          for (var i = 0, l = from.length, ar; i < l; i++) {
            if (ar || !(i in from)) {
              if (!ar)
                ar = Array.prototype.slice.call(from, 0, i);
              ar[i] = from[i];
            }
          }
        return to.concat(ar || Array.prototype.slice.call(from));
      }
      typeof SuppressedError === "function" ? SuppressedError : function(error, suppressed, message) {
        var e = new Error(message);
        return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
      };
      var DEFAULT_DECIMAL_PSEUDO_SEPARATORS = [".", ",", "\u0431", "\u044E"];
      var DEFAULT_MIN_DATE = /* @__PURE__ */ new Date("0001-01-01");
      var DEFAULT_MAX_DATE = /* @__PURE__ */ new Date("9999-12-31");
      var DEFAULT_TIME_SEGMENT_MAX_VALUES = {
        hours: 23,
        minutes: 59,
        seconds: 59,
        milliseconds: 999
      };
      var CHAR_NO_BREAK_SPACE = "\xA0";
      var CHAR_EN_DASH = "\u2013";
      var CHAR_EM_DASH = "\u2014";
      var CHAR_HYPHEN = "-";
      var CHAR_MINUS = "\u2212";
      var POSSIBLE_DATE_RANGE_SEPARATOR = [CHAR_HYPHEN, CHAR_EN_DASH, CHAR_EM_DASH, CHAR_MINUS];
      var POSSIBLE_DATE_TIME_SEPARATOR = [",", " "];
      var TIME_FIXED_CHARACTERS = [":", "."];
      var TIME_SEGMENT_VALUE_LENGTHS = {
        hours: 2,
        minutes: 2,
        seconds: 2,
        milliseconds: 3
      };
      function clamp(value, min, max) {
        var clampedValue = Math.min(Number(max), Math.max(Number(min), Number(value)));
        return value instanceof Date ? new Date(clampedValue) : clampedValue;
      }
      function appendDate(initialDate, _a) {
        var _b = _a === void 0 ? {} : _a, day = _b.day, month = _b.month, year = _b.year;
        var date = new Date(initialDate);
        if (day) {
          date.setDate(date.getDate() + day);
        }
        if (month) {
          date.setMonth(date.getMonth() + month);
        }
        if (year) {
          date.setFullYear(date.getFullYear() + year);
        }
        return date;
      }
      var getDateSegmentValueLength = function(dateString) {
        var _a, _b, _c;
        return {
          day: ((_a = dateString.match(/d/g)) === null || _a === void 0 ? void 0 : _a.length) || 0,
          month: ((_b = dateString.match(/m/g)) === null || _b === void 0 ? void 0 : _b.length) || 0,
          year: ((_c = dateString.match(/y/g)) === null || _c === void 0 ? void 0 : _c.length) || 0
        };
      };
      function dateToSegments(date) {
        return {
          day: String(date.getDate()).padStart(2, "0"),
          month: String(date.getMonth() + 1).padStart(2, "0"),
          year: String(date.getFullYear()).padStart(4, "0"),
          hours: String(date.getHours()).padStart(2, "0"),
          minutes: String(date.getMinutes()).padStart(2, "0"),
          seconds: String(date.getSeconds()).padStart(2, "0"),
          milliseconds: String(date.getMilliseconds()).padStart(3, "0")
        };
      }
      function isDateStringComplete(dateString, dateModeTemplate) {
        if (dateString.length < dateModeTemplate.length) {
          return false;
        }
        return dateString.split(/\D/).every(function(segment) {
          return !segment.match(/^0+$/);
        });
      }
      function parseDateRangeString(dateRange, dateModeTemplate, rangeSeparator) {
        var digitsInDate = dateModeTemplate.replace(/\W/g, "").length;
        return dateRange.replace(rangeSeparator, "").match(new RegExp("(\\D*\\d[^\\d\\s]*){1," + digitsInDate + "}", "g")) || [];
      }
      function getObjectFromEntries(keyValuePairs) {
        return keyValuePairs.reduce(function(obj, _a) {
          var _b;
          var _c = __read(_a, 2), key = _c[0], val = _c[1];
          return __assign(__assign({}, obj), (_b = {}, _b[key] = val, _b));
        }, {});
      }
      function parseDateString(dateString, fullMode) {
        var cleanMode = fullMode.replace(/[^dmy]/g, "");
        var onlyDigitsDate = dateString.replace(/\D+/g, "");
        var dateSegments = {
          day: onlyDigitsDate.slice(cleanMode.indexOf("d"), cleanMode.lastIndexOf("d") + 1),
          month: onlyDigitsDate.slice(cleanMode.indexOf("m"), cleanMode.lastIndexOf("m") + 1),
          year: onlyDigitsDate.slice(cleanMode.indexOf("y"), cleanMode.lastIndexOf("y") + 1)
        };
        return getObjectFromEntries(Object.entries(dateSegments).filter(function(_a) {
          var _b = __read(_a, 2);
          _b[0];
          var value = _b[1];
          return Boolean(value);
        }).sort(function(_a, _b) {
          var _c = __read(_a, 1), a = _c[0];
          var _d = __read(_b, 1), b = _d[0];
          return fullMode.toLowerCase().indexOf(a[0]) > fullMode.toLowerCase().indexOf(b[0]) ? 1 : -1;
        }));
      }
      function segmentsToDate(parsedDate, parsedTime) {
        var _a, _b, _c, _d, _e, _f, _g;
        var year = ((_a = parsedDate.year) === null || _a === void 0 ? void 0 : _a.length) === 2 ? "20" + parsedDate.year : parsedDate.year;
        var date = new Date(Number(year !== null && year !== void 0 ? year : "0"), Number((_b = parsedDate.month) !== null && _b !== void 0 ? _b : "1") - 1, Number((_c = parsedDate.day) !== null && _c !== void 0 ? _c : "1"), Number((_d = parsedTime === null || parsedTime === void 0 ? void 0 : parsedTime.hours) !== null && _d !== void 0 ? _d : "0"), Number((_e = parsedTime === null || parsedTime === void 0 ? void 0 : parsedTime.minutes) !== null && _e !== void 0 ? _e : "0"), Number((_f = parsedTime === null || parsedTime === void 0 ? void 0 : parsedTime.seconds) !== null && _f !== void 0 ? _f : "0"), Number((_g = parsedTime === null || parsedTime === void 0 ? void 0 : parsedTime.milliseconds) !== null && _g !== void 0 ? _g : "0"));
        date.setFullYear(Number(year !== null && year !== void 0 ? year : "0"));
        return date;
      }
      var DATE_TIME_SEPARATOR = ", ";
      function toDateString(_a, dateMode, timeMode) {
        var _b;
        var day = _a.day, month = _a.month, year = _a.year, hours = _a.hours, minutes = _a.minutes, seconds = _a.seconds, milliseconds = _a.milliseconds;
        var safeYear = ((_b = dateMode.match(/y/g)) === null || _b === void 0 ? void 0 : _b.length) === 2 ? year === null || year === void 0 ? void 0 : year.slice(-2) : year;
        var fullMode = dateMode + (timeMode ? DATE_TIME_SEPARATOR + timeMode : "");
        return fullMode.replace(/d+/g, day !== null && day !== void 0 ? day : "").replace(/m+/g, month !== null && month !== void 0 ? month : "").replace(/y+/g, safeYear !== null && safeYear !== void 0 ? safeYear : "").replace(/H+/g, hours !== null && hours !== void 0 ? hours : "").replace(/MSS/g, milliseconds !== null && milliseconds !== void 0 ? milliseconds : "").replace(/M+/g, minutes !== null && minutes !== void 0 ? minutes : "").replace(/S+/g, seconds !== null && seconds !== void 0 ? seconds : "").replace(/^\D+/g, "").replace(/\D+$/g, "");
      }
      function padWithZeroesUntilValid(segmentValue, paddedMaxValue, prefixedZeroesCount) {
        if (prefixedZeroesCount === void 0) {
          prefixedZeroesCount = 0;
        }
        if (Number(segmentValue.padEnd(paddedMaxValue.length, "0")) <= Number(paddedMaxValue)) {
          return {
            validatedSegmentValue: segmentValue,
            prefixedZeroesCount
          };
        }
        if (segmentValue.endsWith("0")) {
          return padWithZeroesUntilValid("0" + segmentValue.slice(0, paddedMaxValue.length - 1), paddedMaxValue, prefixedZeroesCount + 1);
        }
        return padWithZeroesUntilValid(segmentValue.slice(0, paddedMaxValue.length - 1) + "0", paddedMaxValue, prefixedZeroesCount);
      }
      var dateMaxValues = {
        day: 31,
        month: 12,
        year: 9999
      };
      function validateDateString(_a) {
        var e_1, _b;
        var dateString = _a.dateString, dateModeTemplate = _a.dateModeTemplate, offset = _a.offset, _c = __read(_a.selection, 2), from = _c[0], to = _c[1];
        var parsedDate = parseDateString(dateString, dateModeTemplate);
        var dateSegments = Object.entries(parsedDate);
        var validatedDateSegments = {};
        var paddedZeroes = 0;
        try {
          for (var dateSegments_1 = __values(dateSegments), dateSegments_1_1 = dateSegments_1.next(); !dateSegments_1_1.done; dateSegments_1_1 = dateSegments_1.next()) {
            var _d = __read(dateSegments_1_1.value, 2), segmentName = _d[0], segmentValue = _d[1];
            var validatedDate = toDateString(validatedDateSegments, dateModeTemplate);
            var maxSegmentValue = dateMaxValues[segmentName];
            var fantomSeparator = validatedDate.length && 1;
            var lastSegmentDigitIndex = offset + validatedDate.length + fantomSeparator + getDateSegmentValueLength(dateModeTemplate)[segmentName];
            var isLastSegmentDigitAdded = lastSegmentDigitIndex >= from && lastSegmentDigitIndex === to;
            if (isLastSegmentDigitAdded && Number(segmentValue) > Number(maxSegmentValue)) {
              return {
                validatedDateString: "",
                updatedSelection: [from, to]
              };
            }
            if (isLastSegmentDigitAdded && Number(segmentValue) < 1) {
              return {
                validatedDateString: "",
                updatedSelection: [from, to]
              };
            }
            var _e = padWithZeroesUntilValid(segmentValue, "" + maxSegmentValue), validatedSegmentValue = _e.validatedSegmentValue, prefixedZeroesCount = _e.prefixedZeroesCount;
            paddedZeroes += prefixedZeroesCount;
            validatedDateSegments[segmentName] = validatedSegmentValue;
          }
        } catch (e_1_1) {
          e_1 = {
            error: e_1_1
          };
        } finally {
          try {
            if (dateSegments_1_1 && !dateSegments_1_1.done && (_b = dateSegments_1.return))
              _b.call(dateSegments_1);
          } finally {
            if (e_1)
              throw e_1.error;
          }
        }
        var validatedDateString = toDateString(validatedDateSegments, dateModeTemplate);
        var addedDateSegmentSeparators = validatedDateString.length - dateString.length;
        return {
          validatedDateString,
          updatedSelection: [from + paddedZeroes + addedDateSegmentSeparators, to + paddedZeroes + addedDateSegmentSeparators]
        };
      }
      var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
      var reHasRegExpChar = new RegExp(reRegExpChar.source);
      function escapeRegExp(str) {
        return str && reHasRegExpChar.test(str) ? str.replace(reRegExpChar, "\\$&") : str;
      }
      function findCommonBeginningSubstr(a, b) {
        var res = "";
        for (var i = 0; i < a.length; i++) {
          if (a[i] !== b[i]) {
            return res;
          }
          res += a[i];
        }
        return res;
      }
      function getFocused(_a) {
        var activeElement = _a.activeElement;
        if (!(activeElement === null || activeElement === void 0 ? void 0 : activeElement.shadowRoot)) {
          return activeElement;
        }
        var element = activeElement.shadowRoot.activeElement;
        while (element === null || element === void 0 ? void 0 : element.shadowRoot) {
          element = element.shadowRoot.activeElement;
        }
        return element;
      }
      function identity(x) {
        return x;
      }
      function isEmpty2(entity) {
        return !entity || typeof entity === "object" && Object.keys(entity).length === 0;
      }
      function raiseSegmentValueToMin(segments, fullMode) {
        var segmentsLength = getDateSegmentValueLength(fullMode);
        return getObjectFromEntries(Object.entries(segments).map(function(_a) {
          var _b = __read(_a, 2), key = _b[0], value = _b[1];
          var segmentLength = segmentsLength[key];
          return [key, value.length === segmentLength && value.match(/^0+$/) ? "1".padStart(segmentLength, "0") : value];
        }));
      }
      function createMinMaxDatePostprocessor(_a) {
        var dateModeTemplate = _a.dateModeTemplate, _b = _a.min, min = _b === void 0 ? DEFAULT_MIN_DATE : _b, _c = _a.max, max = _c === void 0 ? DEFAULT_MAX_DATE : _c, _d = _a.rangeSeparator, rangeSeparator = _d === void 0 ? "" : _d, _e = _a.dateSegmentSeparator, dateSegmentSeparator = _e === void 0 ? "." : _e;
        return function(_a2) {
          var e_1, _b2;
          var value = _a2.value, selection = _a2.selection;
          var endsWithRangeSeparator = rangeSeparator && value.endsWith(rangeSeparator);
          var dateStrings = parseDateRangeString(value, dateModeTemplate, rangeSeparator);
          var validatedValue = "";
          try {
            for (var dateStrings_1 = __values(dateStrings), dateStrings_1_1 = dateStrings_1.next(); !dateStrings_1_1.done; dateStrings_1_1 = dateStrings_1.next()) {
              var dateString = dateStrings_1_1.value;
              validatedValue += validatedValue ? rangeSeparator : "";
              var parsedDate = parseDateString(dateString, dateModeTemplate);
              if (!isDateStringComplete(dateString, dateModeTemplate)) {
                var fixedDate = raiseSegmentValueToMin(parsedDate, dateModeTemplate);
                var fixedValue = toDateString(fixedDate, dateModeTemplate);
                var tail = dateString.endsWith(dateSegmentSeparator) ? dateSegmentSeparator : "";
                validatedValue += fixedValue + tail;
                continue;
              }
              var date = segmentsToDate(parsedDate);
              var clampedDate = clamp(date, min, max);
              validatedValue += toDateString(dateToSegments(clampedDate), dateModeTemplate);
            }
          } catch (e_1_1) {
            e_1 = {
              error: e_1_1
            };
          } finally {
            try {
              if (dateStrings_1_1 && !dateStrings_1_1.done && (_b2 = dateStrings_1.return))
                _b2.call(dateStrings_1);
            } finally {
              if (e_1)
                throw e_1.error;
            }
          }
          return {
            selection,
            value: validatedValue + (endsWithRangeSeparator ? rangeSeparator : "")
          };
        };
      }
      function normalizeDatePreprocessor(_a) {
        var dateModeTemplate = _a.dateModeTemplate, dateSegmentsSeparator = _a.dateSegmentsSeparator, _b = _a.rangeSeparator, rangeSeparator = _b === void 0 ? "" : _b;
        return function(_a2) {
          var elementState = _a2.elementState, data = _a2.data;
          var separator = rangeSeparator ? new RegExp(rangeSeparator + "|-") : DATE_TIME_SEPARATOR;
          var possibleDates = data.split(separator);
          var dates = data.includes(DATE_TIME_SEPARATOR) ? [possibleDates[0]] : possibleDates;
          if (dates.every(function(date) {
            return date.trim().split(/\D/).length === dateModeTemplate.split(dateSegmentsSeparator).length;
          })) {
            var newData = dates.map(function(date) {
              return normalizeDateString(date, dateModeTemplate, dateSegmentsSeparator);
            }).join(rangeSeparator);
            return {
              elementState,
              data: "" + newData + (data.includes(DATE_TIME_SEPARATOR) ? DATE_TIME_SEPARATOR + possibleDates[1] || "" : "")
            };
          }
          return {
            elementState,
            data
          };
        };
      }
      function normalizeDateString(dateString, template, separator) {
        var dateSegments = dateString.split(/\D/);
        var templateSegments = template.split(separator);
        var normalizedSegments = dateSegments.map(function(segment, index) {
          return index === templateSegments.length - 1 ? segment : segment.padStart(templateSegments[index].length, "0");
        });
        return normalizedSegments.join(separator);
      }
      function maskitoPostfixPostprocessorGenerator(postfix) {
        var postfixRE = new RegExp(escapeRegExp(postfix) + "$");
        return postfix ? function(_a, initialElementState) {
          var value = _a.value, selection = _a.selection;
          if (!value && !initialElementState.value.endsWith(postfix)) {
            return {
              value,
              selection
            };
          }
          if (!value.endsWith(postfix) && !initialElementState.value.endsWith(postfix)) {
            return {
              selection,
              value: value + postfix
            };
          }
          var initialValueBeforePostfix = initialElementState.value.replace(postfixRE, "");
          var postfixWasModified = initialElementState.selection[1] >= initialValueBeforePostfix.length;
          var alreadyExistedValueBeforePostfix = findCommonBeginningSubstr(initialValueBeforePostfix, value);
          return {
            selection,
            value: Array.from(postfix).reverse().reduce(function(newValue, char, index) {
              var i = newValue.length - 1 - index;
              var isInitiallyMirroredChar = alreadyExistedValueBeforePostfix[i] === char && postfixWasModified;
              return newValue[i] !== char || isInitiallyMirroredChar ? newValue.slice(0, i + 1) + char + newValue.slice(i + 1) : newValue;
            }, value)
          };
        } : identity;
      }
      function maskitoPrefixPostprocessorGenerator(prefix) {
        return prefix ? function(_a, initialElementState) {
          var value = _a.value, selection = _a.selection;
          if (value.startsWith(prefix) || // already valid
          !value && !initialElementState.value.startsWith(prefix)) {
            return {
              value,
              selection
            };
          }
          var _b = __read(selection, 2), from = _b[0], to = _b[1];
          var requiredPrefix = Array.from(prefix).reduce(function(computedPrefix, char, i) {
            var newValue = computedPrefix + value;
            return newValue[i] === char ? computedPrefix : computedPrefix + char;
          }, "");
          return {
            selection: [from + requiredPrefix.length, to + requiredPrefix.length],
            value: requiredPrefix + value
          };
        } : identity;
      }
      function createValidDatePreprocessor(_a) {
        var dateModeTemplate = _a.dateModeTemplate, dateSegmentsSeparator = _a.dateSegmentsSeparator, _b = _a.rangeSeparator, rangeSeparator = _b === void 0 ? "" : _b;
        return function(_a2) {
          var e_1, _b2;
          var elementState = _a2.elementState, data = _a2.data;
          var value = elementState.value, selection = elementState.selection;
          if (data === dateSegmentsSeparator) {
            return {
              elementState,
              data: selection[0] === value.length ? data : ""
            };
          }
          if (POSSIBLE_DATE_RANGE_SEPARATOR.includes(data)) {
            return {
              elementState,
              data: rangeSeparator
            };
          }
          var newCharacters = data.replace(new RegExp("[^\\d" + escapeRegExp(dateSegmentsSeparator) + rangeSeparator + "]", "g"), "");
          if (!newCharacters) {
            return {
              elementState,
              data: ""
            };
          }
          var _c = __read(selection, 2), from = _c[0], rawTo = _c[1];
          var to = rawTo + data.length;
          var newPossibleValue = value.slice(0, from) + newCharacters + value.slice(to);
          var dateStrings = parseDateRangeString(newPossibleValue, dateModeTemplate, rangeSeparator);
          var validatedValue = "";
          var hasRangeSeparator = Boolean(rangeSeparator) && newPossibleValue.includes(rangeSeparator);
          try {
            for (var dateStrings_1 = __values(dateStrings), dateStrings_1_1 = dateStrings_1.next(); !dateStrings_1_1.done; dateStrings_1_1 = dateStrings_1.next()) {
              var dateString = dateStrings_1_1.value;
              var _d = validateDateString({
                dateString,
                dateModeTemplate,
                offset: validatedValue ? validatedValue.length + rangeSeparator.length : 0,
                selection: [from, to]
              }), validatedDateString = _d.validatedDateString, updatedSelection = _d.updatedSelection;
              if (dateString && !validatedDateString) {
                return {
                  elementState,
                  data: ""
                };
              }
              to = updatedSelection[1];
              validatedValue += hasRangeSeparator && validatedValue ? rangeSeparator + validatedDateString : validatedDateString;
            }
          } catch (e_1_1) {
            e_1 = {
              error: e_1_1
            };
          } finally {
            try {
              if (dateStrings_1_1 && !dateStrings_1_1.done && (_b2 = dateStrings_1.return))
                _b2.call(dateStrings_1);
            } finally {
              if (e_1)
                throw e_1.error;
            }
          }
          var newData = validatedValue.slice(from, to);
          return {
            elementState: {
              selection,
              value: validatedValue.slice(0, from) + newData.split(dateSegmentsSeparator).map(function(segment) {
                return "0".repeat(segment.length);
              }).join(dateSegmentsSeparator) + validatedValue.slice(to)
            },
            data: newData
          };
        };
      }
      function maskitoEventHandler(name, handler, eventListenerOptions) {
        return function(element, maskitoOptions) {
          var listener = function() {
            return handler(element, maskitoOptions);
          };
          element.addEventListener(name, listener, eventListenerOptions);
          return function() {
            return element.removeEventListener(name, listener, eventListenerOptions);
          };
        };
      }
      function maskitoAddOnFocusPlugin(value) {
        return maskitoEventHandler("focus", function(element) {
          if (!element.value) {
            element.value = value;
            element.dispatchEvent(new Event("input"));
          }
        });
      }
      function maskitoCaretGuard(guard) {
        return function(element) {
          var document2 = element.ownerDocument;
          var isPointerDown = 0;
          var onPointerDown = function() {
            return isPointerDown++;
          };
          var onPointerUp = function() {
            isPointerDown = Math.max(--isPointerDown, 0);
          };
          var listener = function() {
            if (getFocused(document2) !== element) {
              return;
            }
            if (isPointerDown) {
              return document2.addEventListener("mouseup", listener, {
                once: true,
                passive: true
              });
            }
            var start = element.selectionStart || 0;
            var end = element.selectionEnd || 0;
            var _a = __read(guard(element.value, [start, end]), 2), fromLimit = _a[0], toLimit = _a[1];
            if (fromLimit > start || toLimit < end) {
              element.setSelectionRange(clamp(start, fromLimit, toLimit), clamp(end, fromLimit, toLimit));
            }
          };
          document2.addEventListener("selectionchange", listener, {
            passive: true
          });
          element.addEventListener("mousedown", onPointerDown, {
            passive: true
          });
          document2.addEventListener("mouseup", onPointerUp, {
            passive: true
          });
          return function() {
            document2.removeEventListener("selectionchange", listener);
            document2.removeEventListener("mousedown", onPointerDown);
            document2.removeEventListener("mouseup", onPointerUp);
          };
        };
      }
      function maskitoRejectEvent(element) {
        var listener = function() {
          var value = element.value;
          element.addEventListener("beforeinput", function(event) {
            if (event.defaultPrevented && value === element.value) {
              element.dispatchEvent(new CustomEvent("maskitoReject", {
                bubbles: true
              }));
            }
          }, {
            once: true
          });
        };
        element.addEventListener("beforeinput", listener, true);
        return function() {
          return element.removeEventListener("beforeinput", listener, true);
        };
      }
      function maskitoRemoveOnBlurPlugin(value) {
        return maskitoEventHandler("blur", function(element) {
          if (element.value === value) {
            element.value = "";
            element.dispatchEvent(new Event("input"));
          }
        });
      }
      function maskitoWithPlaceholder(placeholder, focusedOnly) {
        if (focusedOnly === void 0) {
          focusedOnly = false;
        }
        var removePlaceholder = function(value) {
          for (var i = value.length - 1; i >= 0; i--) {
            if (value[i] !== placeholder[i]) {
              return value.slice(0, i + 1);
            }
          }
          return "";
        };
        var plugins = [maskitoCaretGuard(function(value) {
          return [0, removePlaceholder(value).length];
        })];
        var focused = false;
        if (focusedOnly) {
          var focus_1 = maskitoEventHandler("focus", function(element) {
            focused = true;
            element.value += placeholder.slice(element.value.length);
            element.dispatchEvent(new Event("input"));
          }, {
            capture: true
          });
          var blur_1 = maskitoEventHandler("blur", function(element) {
            focused = false;
            element.value = removePlaceholder(element.value);
            element.dispatchEvent(new Event("input"));
          }, {
            capture: true
          });
          plugins.push(focus_1, blur_1);
        }
        return {
          plugins,
          removePlaceholder,
          preprocessors: [function(_a) {
            var elementState = _a.elementState, data = _a.data;
            var value = elementState.value, selection = elementState.selection;
            return {
              elementState: {
                selection,
                value: removePlaceholder(value)
              },
              data
            };
          }],
          postprocessors: [function(_a, initialElementState) {
            var value = _a.value, selection = _a.selection;
            return initialElementState.value && (focused || !focusedOnly) ? {
              value: value + placeholder.slice(value.length),
              selection
            } : {
              value,
              selection
            };
          }]
        };
      }
      function createZeroPlaceholdersPreprocessor() {
        return function(_a, actionType) {
          var elementState = _a.elementState;
          var value = elementState.value, selection = elementState.selection;
          if (!value || isLastChar(value, selection)) {
            return {
              elementState
            };
          }
          var _b = __read(selection, 2), from = _b[0], to = _b[1];
          var zeroes = value.slice(from, to).replace(/\d/g, "0");
          var newValue = value.slice(0, from) + zeroes + value.slice(to);
          if (actionType === "validation" || actionType === "insert" && from === to) {
            return {
              elementState: {
                selection,
                value: newValue
              }
            };
          }
          return {
            elementState: {
              selection: actionType === "deleteBackward" || actionType === "insert" ? [from, from] : [to, to],
              value: newValue
            }
          };
        };
      }
      function isLastChar(value, _a) {
        var _b = __read(_a, 2);
        _b[0];
        var to = _b[1];
        return to === value.length;
      }
      function maskitoDateOptionsGenerator(_a) {
        var mode = _a.mode, _b = _a.separator, separator = _b === void 0 ? "." : _b, max = _a.max, min = _a.min;
        var dateModeTemplate = mode.split("/").join(separator);
        return __assign(__assign({}, core.MASKITO_DEFAULT_OPTIONS), {
          mask: Array.from(dateModeTemplate).map(function(char) {
            return char === separator ? char : /\d/;
          }),
          overwriteMode: "replace",
          preprocessors: [createZeroPlaceholdersPreprocessor(), normalizeDatePreprocessor({
            dateModeTemplate,
            dateSegmentsSeparator: separator
          }), createValidDatePreprocessor({
            dateModeTemplate,
            dateSegmentsSeparator: separator
          })],
          postprocessors: [createMinMaxDatePostprocessor({
            min,
            max,
            dateModeTemplate,
            dateSegmentSeparator: separator
          })]
        });
      }
      function createMinMaxRangeLengthPostprocessor(_a) {
        var dateModeTemplate = _a.dateModeTemplate, rangeSeparator = _a.rangeSeparator, minLength = _a.minLength, maxLength = _a.maxLength, _b = _a.max, max = _b === void 0 ? DEFAULT_MAX_DATE : _b;
        if (isEmpty2(minLength) && isEmpty2(maxLength)) {
          return identity;
        }
        return function(_a2) {
          var value = _a2.value, selection = _a2.selection;
          var dateStrings = parseDateRangeString(value, dateModeTemplate, rangeSeparator);
          if (dateStrings.length !== 2 || dateStrings.some(function(date) {
            return !isDateStringComplete(date, dateModeTemplate);
          })) {
            return {
              value,
              selection
            };
          }
          var _b2 = __read(dateStrings.map(function(dateString) {
            return segmentsToDate(parseDateString(dateString, dateModeTemplate));
          }), 2), fromDate = _b2[0], toDate = _b2[1];
          var minDistantToDate = appendDate(fromDate, __assign(__assign({}, minLength), {
            // 06.02.2023 - 07.02.2023 => {minLength: {day: 3}} => 06.02.2023 - 08.02.2023
            // "from"-day is included in the range
            day: (minLength === null || minLength === void 0 ? void 0 : minLength.day) && minLength.day - 1
          }));
          var maxDistantToDate = !isEmpty2(maxLength) ? appendDate(fromDate, __assign(__assign({}, maxLength), {
            day: (maxLength === null || maxLength === void 0 ? void 0 : maxLength.day) && maxLength.day - 1
          })) : max;
          var minLengthClampedToDate = clamp(toDate, minDistantToDate, max);
          var minMaxLengthClampedToDate = minLengthClampedToDate > maxDistantToDate ? maxDistantToDate : minLengthClampedToDate;
          return {
            selection,
            value: dateStrings[0] + rangeSeparator + toDateString(dateToSegments(minMaxLengthClampedToDate), dateModeTemplate)
          };
        };
      }
      function createSwapDatesPostprocessor(_a) {
        var dateModeTemplate = _a.dateModeTemplate, rangeSeparator = _a.rangeSeparator;
        return function(_a2) {
          var value = _a2.value, selection = _a2.selection;
          var dateStrings = parseDateRangeString(value, dateModeTemplate, rangeSeparator);
          var isDateRangeComplete = dateStrings.length === 2 && dateStrings.every(function(date) {
            return isDateStringComplete(date, dateModeTemplate);
          });
          var _b = __read(selection, 2), from = _b[0], to = _b[1];
          var caretAtTheEnd = from >= value.length;
          var allValueSelected = from === 0 && to >= value.length;
          if (!(caretAtTheEnd || allValueSelected) || !isDateRangeComplete) {
            return {
              value,
              selection
            };
          }
          var _c = __read(dateStrings.map(function(dateString) {
            return segmentsToDate(parseDateString(dateString, dateModeTemplate));
          }), 2), fromDate = _c[0], toDate = _c[1];
          return {
            selection,
            value: fromDate > toDate ? dateStrings.reverse().join(rangeSeparator) : value
          };
        };
      }
      function maskitoDateRangeOptionsGenerator(_a) {
        var mode = _a.mode, _b = _a.separator, separator = _b === void 0 ? "." : _b, min = _a.min, max = _a.max, minLength = _a.minLength, maxLength = _a.maxLength, _c = _a.dateSeparator, dateSeparator = _c === void 0 ? separator : _c, _d = _a.rangeSeparator, rangeSeparator = _d === void 0 ? "" + CHAR_NO_BREAK_SPACE + CHAR_EN_DASH + CHAR_NO_BREAK_SPACE : _d;
        var dateModeTemplate = mode.split("/").join(dateSeparator);
        var dateMask = Array.from(dateModeTemplate).map(function(char) {
          return char === dateSeparator ? char : /\d/;
        });
        return __assign(__assign({}, core.MASKITO_DEFAULT_OPTIONS), {
          mask: __spreadArray(__spreadArray(__spreadArray([], __read(dateMask)), __read(Array.from(rangeSeparator))), __read(dateMask)),
          overwriteMode: "replace",
          preprocessors: [createZeroPlaceholdersPreprocessor(), normalizeDatePreprocessor({
            dateModeTemplate,
            rangeSeparator,
            dateSegmentsSeparator: dateSeparator
          }), createValidDatePreprocessor({
            dateModeTemplate,
            rangeSeparator,
            dateSegmentsSeparator: dateSeparator
          })],
          postprocessors: [createMinMaxDatePostprocessor({
            min,
            max,
            dateModeTemplate,
            rangeSeparator,
            dateSegmentSeparator: dateSeparator
          }), createMinMaxRangeLengthPostprocessor({
            dateModeTemplate,
            minLength,
            maxLength,
            max,
            rangeSeparator
          }), createSwapDatesPostprocessor({
            dateModeTemplate,
            rangeSeparator
          })]
        });
      }
      function padTimeSegments(timeSegments) {
        return getObjectFromEntries(Object.entries(timeSegments).map(function(_a) {
          var _b = __read(_a, 2), segmentName = _b[0], segmentValue = _b[1];
          return [segmentName, ("" + segmentValue).padEnd(TIME_SEGMENT_VALUE_LENGTHS[segmentName], "0")];
        }));
      }
      function parseTimeString(timeString) {
        var onlyDigits = timeString.replace(/\D+/g, "");
        var timeSegments = {
          hours: onlyDigits.slice(0, 2),
          minutes: onlyDigits.slice(2, 4),
          seconds: onlyDigits.slice(4, 6),
          milliseconds: onlyDigits.slice(6, 9)
        };
        return getObjectFromEntries(Object.entries(timeSegments).filter(function(_a) {
          var _b = __read(_a, 2);
          _b[0];
          var value = _b[1];
          return Boolean(value);
        }));
      }
      function toTimeString(_a) {
        var _b = _a.hours, hours = _b === void 0 ? "" : _b, _c = _a.minutes, minutes = _c === void 0 ? "" : _c, _d = _a.seconds, seconds = _d === void 0 ? "" : _d, _e = _a.milliseconds, milliseconds = _e === void 0 ? "" : _e;
        var mm = minutes && ":" + minutes;
        var ss = seconds && ":" + seconds;
        var ms = milliseconds && "." + milliseconds;
        return "" + hours + mm + ss + ms;
      }
      var TRAILING_TIME_SEGMENT_SEPARATOR_REG = new RegExp("[" + TIME_FIXED_CHARACTERS.map(escapeRegExp).join("") + "]$");
      function validateTimeString(_a) {
        var e_1, _b;
        var timeString = _a.timeString, paddedMaxValues = _a.paddedMaxValues, offset = _a.offset, _c = __read(_a.selection, 2), from = _c[0], to = _c[1];
        var parsedTime = parseTimeString(timeString);
        var possibleTimeSegments = Object.entries(parsedTime);
        var validatedTimeSegments = {};
        var paddedZeroes = 0;
        try {
          for (var possibleTimeSegments_1 = __values(possibleTimeSegments), possibleTimeSegments_1_1 = possibleTimeSegments_1.next(); !possibleTimeSegments_1_1.done; possibleTimeSegments_1_1 = possibleTimeSegments_1.next()) {
            var _d = __read(possibleTimeSegments_1_1.value, 2), segmentName = _d[0], segmentValue = _d[1];
            var validatedTime = toTimeString(validatedTimeSegments);
            var maxSegmentValue = paddedMaxValues[segmentName];
            var fantomSeparator = validatedTime.length && 1;
            var lastSegmentDigitIndex = offset + validatedTime.length + fantomSeparator + TIME_SEGMENT_VALUE_LENGTHS[segmentName];
            var isLastSegmentDigitAdded = lastSegmentDigitIndex >= from && lastSegmentDigitIndex <= to;
            if (isLastSegmentDigitAdded && Number(segmentValue) > Number(maxSegmentValue)) {
              return {
                validatedTimeString: "",
                updatedTimeSelection: [from, to]
              };
            }
            var _e = padWithZeroesUntilValid(segmentValue, "" + maxSegmentValue), validatedSegmentValue = _e.validatedSegmentValue, prefixedZeroesCount = _e.prefixedZeroesCount;
            paddedZeroes += prefixedZeroesCount;
            validatedTimeSegments[segmentName] = validatedSegmentValue;
          }
        } catch (e_1_1) {
          e_1 = {
            error: e_1_1
          };
        } finally {
          try {
            if (possibleTimeSegments_1_1 && !possibleTimeSegments_1_1.done && (_b = possibleTimeSegments_1.return))
              _b.call(possibleTimeSegments_1);
          } finally {
            if (e_1)
              throw e_1.error;
          }
        }
        var _f = __read(timeString.match(TRAILING_TIME_SEGMENT_SEPARATOR_REG) || [], 1), _g = _f[0], trailingSegmentSeparator = _g === void 0 ? "" : _g;
        var validatedTimeString = toTimeString(validatedTimeSegments) + trailingSegmentSeparator;
        var addedDateSegmentSeparators = Math.max(validatedTimeString.length - timeString.length, 0);
        return {
          validatedTimeString,
          updatedTimeSelection: [from + paddedZeroes + addedDateSegmentSeparators, to + paddedZeroes + addedDateSegmentSeparators]
        };
      }
      function isDateTimeStringComplete(dateTimeString, dateMode, timeMode) {
        return dateTimeString.length >= dateMode.length + timeMode.length + DATE_TIME_SEPARATOR.length && dateTimeString.split(DATE_TIME_SEPARATOR)[0].split(/\D/).every(function(segment) {
          return !segment.match(/^0+$/);
        });
      }
      function parseDateTimeString(dateTime, dateModeTemplate) {
        var hasSeparator = dateTime.includes(DATE_TIME_SEPARATOR);
        return [dateTime.slice(0, dateModeTemplate.length), dateTime.slice(hasSeparator ? dateModeTemplate.length + DATE_TIME_SEPARATOR.length : dateModeTemplate.length)];
      }
      function createMinMaxDateTimePostprocessor(_a) {
        var dateModeTemplate = _a.dateModeTemplate, timeMode = _a.timeMode, _b = _a.min, min = _b === void 0 ? DEFAULT_MIN_DATE : _b, _c = _a.max, max = _c === void 0 ? DEFAULT_MAX_DATE : _c;
        return function(_a2) {
          var value = _a2.value, selection = _a2.selection;
          var _b2 = __read(parseDateTimeString(value, dateModeTemplate), 2), dateString = _b2[0], timeString = _b2[1];
          var parsedDate = parseDateString(dateString, dateModeTemplate);
          var parsedTime = parseTimeString(timeString);
          if (!isDateTimeStringComplete(value, dateModeTemplate, timeMode)) {
            var fixedDate = raiseSegmentValueToMin(parsedDate, dateModeTemplate);
            var _c2 = isDateStringComplete(dateString, dateModeTemplate) ? dateToSegments(clamp(segmentsToDate(fixedDate), min, max)) : fixedDate, year = _c2.year, month = _c2.month, day = _c2.day;
            var fixedValue = toDateString(__assign({
              year,
              month,
              day
            }, parsedTime), dateModeTemplate, timeMode);
            var tail = value.slice(fixedValue.length);
            return {
              selection,
              value: fixedValue + tail
            };
          }
          var date = segmentsToDate(parsedDate, parsedTime);
          var clampedDate = clamp(date, min, max);
          var validatedValue = toDateString(dateToSegments(clampedDate), dateModeTemplate, timeMode);
          return {
            selection,
            value: validatedValue
          };
        };
      }
      function createValidDateTimePreprocessor(_a) {
        var dateModeTemplate = _a.dateModeTemplate, dateSegmentsSeparator = _a.dateSegmentsSeparator;
        var invalidCharsRegExp = new RegExp("[^\\d" + TIME_FIXED_CHARACTERS.map(escapeRegExp).join("") + escapeRegExp(dateSegmentsSeparator) + "]+");
        return function(_a2) {
          var elementState = _a2.elementState, data = _a2.data;
          var value = elementState.value, selection = elementState.selection;
          if (data === dateSegmentsSeparator) {
            return {
              elementState,
              data: selection[0] === value.length ? data : ""
            };
          }
          if (POSSIBLE_DATE_TIME_SEPARATOR.includes(data)) {
            return {
              elementState,
              data: DATE_TIME_SEPARATOR
            };
          }
          var newCharacters = data.replace(invalidCharsRegExp, "");
          if (!newCharacters) {
            return {
              elementState,
              data: ""
            };
          }
          var _b = __read(selection, 2), from = _b[0], rawTo = _b[1];
          var to = rawTo + data.length;
          var newPossibleValue = value.slice(0, from) + newCharacters + value.slice(to);
          var _c = __read(parseDateTimeString(newPossibleValue, dateModeTemplate), 2), dateString = _c[0], timeString = _c[1];
          var validatedValue = "";
          var hasDateTimeSeparator = newPossibleValue.includes(DATE_TIME_SEPARATOR);
          var _d = validateDateString({
            dateString,
            dateModeTemplate,
            offset: 0,
            selection: [from, to]
          }), validatedDateString = _d.validatedDateString, updatedSelection = _d.updatedSelection;
          if (dateString && !validatedDateString) {
            return {
              elementState,
              data: ""
            };
          }
          to = updatedSelection[1];
          validatedValue += validatedDateString;
          var paddedMaxValues = padTimeSegments(DEFAULT_TIME_SEGMENT_MAX_VALUES);
          var _e = validateTimeString({
            timeString,
            paddedMaxValues,
            offset: validatedValue.length + DATE_TIME_SEPARATOR.length,
            selection: [from, to]
          }), validatedTimeString = _e.validatedTimeString, updatedTimeSelection = _e.updatedTimeSelection;
          if (timeString && !validatedTimeString) {
            return {
              elementState,
              data: ""
            };
          }
          to = updatedTimeSelection[1];
          validatedValue += hasDateTimeSeparator ? DATE_TIME_SEPARATOR + validatedTimeString : validatedTimeString;
          var newData = validatedValue.slice(from, to);
          return {
            elementState: {
              selection,
              value: validatedValue.slice(0, from) + newData.split(dateSegmentsSeparator).map(function(segment) {
                return "0".repeat(segment.length);
              }).join(dateSegmentsSeparator) + validatedValue.slice(to)
            },
            data: newData
          };
        };
      }
      function maskitoDateTimeOptionsGenerator(_a) {
        var dateMode = _a.dateMode, timeMode = _a.timeMode, _b = _a.dateSeparator, dateSeparator = _b === void 0 ? "." : _b, min = _a.min, max = _a.max;
        var dateModeTemplate = dateMode.split("/").join(dateSeparator);
        return __assign(__assign({}, core.MASKITO_DEFAULT_OPTIONS), {
          mask: __spreadArray(__spreadArray(__spreadArray([], __read(Array.from(dateModeTemplate).map(function(char) {
            return char === dateSeparator ? char : /\d/;
          }))), __read(DATE_TIME_SEPARATOR.split(""))), __read(Array.from(timeMode).map(function(char) {
            return TIME_FIXED_CHARACTERS.includes(char) ? char : /\d/;
          }))),
          overwriteMode: "replace",
          preprocessors: [createZeroPlaceholdersPreprocessor(), normalizeDatePreprocessor({
            dateModeTemplate,
            dateSegmentsSeparator: dateSeparator
          }), createValidDateTimePreprocessor({
            dateModeTemplate,
            dateSegmentsSeparator: dateSeparator
          })],
          postprocessors: [createMinMaxDateTimePostprocessor({
            min,
            max,
            dateModeTemplate,
            timeMode
          })]
        });
      }
      function generateMaskExpression(_a) {
        var decimalSeparator = _a.decimalSeparator, isNegativeAllowed = _a.isNegativeAllowed, precision = _a.precision, thousandSeparator = _a.thousandSeparator, prefix = _a.prefix, postfix = _a.postfix, _b = _a.decimalPseudoSeparators, decimalPseudoSeparators = _b === void 0 ? [] : _b, _c = _a.pseudoMinuses, pseudoMinuses = _c === void 0 ? [] : _c;
        var computedPrefix = computeAllOptionalCharsRegExp(prefix);
        var digit = "\\d";
        var optionalMinus = isNegativeAllowed ? "[" + CHAR_MINUS + pseudoMinuses.map(function(x) {
          return "\\" + x;
        }).join("") + "]?" : "";
        var integerPart = thousandSeparator ? "[" + digit + escapeRegExp(thousandSeparator).replace(/\s/g, "\\s") + "]*" : "[" + digit + "]*";
        var decimalPart = precision > 0 ? "([" + escapeRegExp(decimalSeparator) + decimalPseudoSeparators.map(escapeRegExp).join("") + "]" + digit + "{0," + (Number.isFinite(precision) ? precision : "") + "})?" : "";
        var computedPostfix = computeAllOptionalCharsRegExp(postfix);
        return new RegExp("^" + computedPrefix + optionalMinus + integerPart + decimalPart + computedPostfix + "$");
      }
      function computeAllOptionalCharsRegExp(str) {
        return str ? "" + str.split("").map(function(char) {
          return escapeRegExp(char) + "?";
        }).join("") : "";
      }
      function maskitoParseNumber(maskedNumber, decimalSeparator) {
        if (decimalSeparator === void 0) {
          decimalSeparator = ".";
        }
        var hasNegativeSign = !!maskedNumber.match(new RegExp("^\\D*[" + CHAR_MINUS + "\\" + CHAR_HYPHEN + CHAR_EN_DASH + CHAR_EM_DASH + "]"));
        var unmaskedNumber = maskedNumber.replace(new RegExp("[^\\d" + escapeRegExp(decimalSeparator) + "]", "g"), "").replace(decimalSeparator, ".");
        return unmaskedNumber ? Number((hasNegativeSign ? CHAR_HYPHEN : "") + unmaskedNumber) : NaN;
      }
      function stringifyNumberWithoutExp(value) {
        var valueAsString = String(value);
        var _a = __read(valueAsString.split("e-"), 2), numberPart = _a[0], expPart = _a[1];
        var valueWithoutExp = valueAsString;
        if (expPart) {
          var _b = __read(numberPart.split("."), 2), fractionalPart = _b[1];
          var decimalDigits = Number(expPart) + ((fractionalPart === null || fractionalPart === void 0 ? void 0 : fractionalPart.length) || 0);
          valueWithoutExp = value.toFixed(decimalDigits);
        }
        return valueWithoutExp;
      }
      function validateDecimalPseudoSeparators(_a) {
        var decimalSeparator = _a.decimalSeparator, thousandSeparator = _a.thousandSeparator, _b = _a.decimalPseudoSeparators, decimalPseudoSeparators = _b === void 0 ? DEFAULT_DECIMAL_PSEUDO_SEPARATORS : _b;
        return decimalPseudoSeparators.filter(function(char) {
          return char !== thousandSeparator && char !== decimalSeparator;
        });
      }
      function createDecimalZeroPaddingPostprocessor(_a) {
        var decimalSeparator = _a.decimalSeparator, precision = _a.precision, decimalZeroPadding = _a.decimalZeroPadding, postfix = _a.postfix;
        if (precision <= 0 || !decimalZeroPadding) {
          return identity;
        }
        var trailingPostfixRegExp = new RegExp(escapeRegExp(postfix) + "$");
        return function(_a2) {
          var value = _a2.value, selection = _a2.selection;
          if (Number.isNaN(maskitoParseNumber(value, decimalSeparator))) {
            return {
              value,
              selection
            };
          }
          var _b = __read(value.replace(trailingPostfixRegExp, "").split(decimalSeparator), 2), integerPart = _b[0], _c = _b[1], decimalPart = _c === void 0 ? "" : _c;
          return {
            value: integerPart + decimalSeparator + decimalPart.padEnd(precision, "0") + postfix,
            selection
          };
        };
      }
      function createInitializationOnlyPreprocessor(_a) {
        var decimalSeparator = _a.decimalSeparator, decimalPseudoSeparators = _a.decimalPseudoSeparators, pseudoMinuses = _a.pseudoMinuses;
        var isInitializationPhase = true;
        var cleanNumberMask = generateMaskExpression({
          decimalSeparator,
          decimalPseudoSeparators,
          pseudoMinuses,
          prefix: "",
          postfix: "",
          thousandSeparator: "",
          precision: Infinity,
          isNegativeAllowed: true
        });
        return function(_a2) {
          var elementState = _a2.elementState, data = _a2.data;
          if (!isInitializationPhase) {
            return {
              elementState,
              data
            };
          }
          isInitializationPhase = false;
          return {
            elementState: core.maskitoTransform(elementState, {
              mask: cleanNumberMask
            }),
            data
          };
        };
      }
      function createLeadingZeroesValidationPostprocessor(decimalSeparator, thousandSeparator) {
        var trimLeadingZeroes = function(value) {
          var escapedThousandSeparator = escapeRegExp(thousandSeparator);
          return value.replace(
            // all leading zeroes followed by another zero
            new RegExp("^(\\D+)?[0" + escapedThousandSeparator + "]+(?=0)"),
            "$1"
          ).replace(
            // zero followed by not-zero digit
            new RegExp("^(\\D+)?[0" + escapedThousandSeparator + "]+(?=[1-9])"),
            "$1"
          );
        };
        var countTrimmedZeroesBefore = function(value, index) {
          var valueBefore = value.slice(0, index);
          var followedByZero = value.slice(index).startsWith("0");
          return valueBefore.length - trimLeadingZeroes(valueBefore).length + (followedByZero ? 1 : 0);
        };
        return function(_a) {
          var value = _a.value, selection = _a.selection;
          var _b = __read(selection, 2), from = _b[0], to = _b[1];
          var hasDecimalSeparator = value.includes(decimalSeparator);
          var _c = __read(value.split(decimalSeparator), 2), integerPart = _c[0], _d = _c[1], decimalPart = _d === void 0 ? "" : _d;
          var zeroTrimmedIntegerPart = trimLeadingZeroes(integerPart);
          if (integerPart === zeroTrimmedIntegerPart) {
            return {
              value,
              selection
            };
          }
          var newFrom = from - countTrimmedZeroesBefore(value, from);
          var newTo = to - countTrimmedZeroesBefore(value, to);
          return {
            value: zeroTrimmedIntegerPart + (hasDecimalSeparator ? decimalSeparator : "") + decimalPart,
            selection: [Math.max(newFrom, 0), Math.max(newTo, 0)]
          };
        };
      }
      function createMinMaxPostprocessor(_a) {
        var min = _a.min, max = _a.max, decimalSeparator = _a.decimalSeparator;
        return function(_a2) {
          var value = _a2.value, selection = _a2.selection;
          var parsedNumber = maskitoParseNumber(value, decimalSeparator);
          var limitedValue = (
            /**
             * We cannot limit lower bound if user enters positive number.
             * The same for upper bound and negative number.
             * ___
             * @example (min = 5)
             * Empty input => Without this condition user cannot type 42 (the first digit will be rejected)
             * ___
             * @example (max = -10)
             * Value is -10 => Without this condition user cannot delete 0 to enter another digit
             */
            parsedNumber > 0 ? Math.min(parsedNumber, max) : Math.max(parsedNumber, min)
          );
          if (!Number.isNaN(parsedNumber) && limitedValue !== parsedNumber) {
            var newValue = ("" + limitedValue).replace(".", decimalSeparator).replace(CHAR_HYPHEN, CHAR_MINUS);
            return {
              value: newValue,
              selection: [newValue.length, newValue.length]
            };
          }
          return {
            value,
            selection
          };
        };
      }
      function createNonRemovableCharsDeletionPreprocessor(_a) {
        var decimalSeparator = _a.decimalSeparator, thousandSeparator = _a.thousandSeparator, decimalZeroPadding = _a.decimalZeroPadding;
        return function(_a2, actionType) {
          var elementState = _a2.elementState, data = _a2.data;
          var value = elementState.value, selection = elementState.selection;
          var _b = __read(selection, 2), from = _b[0], to = _b[1];
          var selectedCharacters = value.slice(from, to);
          var nonRemovableSeparators = decimalZeroPadding ? [decimalSeparator, thousandSeparator] : [thousandSeparator];
          var areNonRemovableZeroesSelected = decimalZeroPadding && from > value.indexOf(decimalSeparator) && Boolean(selectedCharacters.match(/^0+$/gi));
          if (actionType !== "deleteBackward" && actionType !== "deleteForward" || !nonRemovableSeparators.includes(selectedCharacters) && !areNonRemovableZeroesSelected) {
            return {
              elementState,
              data
            };
          }
          return {
            elementState: {
              value,
              selection: actionType === "deleteForward" ? [to, to] : [from, from]
            },
            data
          };
        };
      }
      function createNotEmptyIntegerPartPreprocessor(_a) {
        var decimalSeparator = _a.decimalSeparator, precision = _a.precision;
        var startWithDecimalSepRegExp = new RegExp("^\\D*" + escapeRegExp(decimalSeparator));
        return function(_a2) {
          var elementState = _a2.elementState, data = _a2.data;
          var value = elementState.value, selection = elementState.selection;
          var _b = __read(selection, 1), from = _b[0];
          if (precision <= 0 || value.includes(decimalSeparator) || !data.match(startWithDecimalSepRegExp)) {
            return {
              elementState,
              data
            };
          }
          var digitsBeforeCursor = value.slice(0, from).match(/\d+/);
          return {
            elementState,
            data: digitsBeforeCursor ? data : "0" + data
          };
        };
      }
      function createPseudoCharactersPreprocessor(validCharacter, pseudoCharacters) {
        var pseudoCharactersRegExp = new RegExp("[" + pseudoCharacters.join("") + "]", "gi");
        return function(_a) {
          var elementState = _a.elementState, data = _a.data;
          var value = elementState.value, selection = elementState.selection;
          return {
            elementState: {
              selection,
              value: value.replace(pseudoCharactersRegExp, validCharacter)
            },
            data: data.replace(pseudoCharactersRegExp, validCharacter)
          };
        };
      }
      function createRepeatedDecimalSeparatorPreprocessor(decimalSeparator) {
        return function(_a) {
          var elementState = _a.elementState, data = _a.data;
          var value = elementState.value, selection = elementState.selection;
          var _b = __read(selection, 2), from = _b[0], to = _b[1];
          return {
            elementState,
            data: !value.includes(decimalSeparator) || value.slice(from, to + 1).includes(decimalSeparator) ? data : data.replace(new RegExp(escapeRegExp(decimalSeparator), "gi"), "")
          };
        };
      }
      function createThousandSeparatorPostprocessor(_a) {
        var thousandSeparator = _a.thousandSeparator, decimalSeparator = _a.decimalSeparator, prefix = _a.prefix, postfix = _a.postfix;
        if (!thousandSeparator) {
          return identity;
        }
        var prefixReg = new RegExp("^" + escapeRegExp(prefix) + CHAR_MINUS + "?");
        var postfixReg = new RegExp(escapeRegExp(postfix) + "$");
        var isAllSpaces = function() {
          var chars = [];
          for (var _i = 0; _i < arguments.length; _i++) {
            chars[_i] = arguments[_i];
          }
          return chars.every(function(x) {
            return /\s/.test(x);
          });
        };
        return function(_a2) {
          var value = _a2.value, selection = _a2.selection;
          var _b = __read(value.split(decimalSeparator), 2), integerPart = _b[0], _c = _b[1], decimalPart = _c === void 0 ? "" : _c;
          var _d = __read(selection, 2), initialFrom = _d[0], initialTo = _d[1];
          var _e = __read(selection, 2), from = _e[0], to = _e[1];
          var cleanIntegerPart = integerPart.replace(prefixReg, "").replace(postfixReg, "");
          var _f = __read(integerPart.match(prefixReg) || [], 1), _g = _f[0], integerPartPrefix = _g === void 0 ? "" : _g;
          var _h = __read(integerPart.match(postfixReg) || [], 1), _j = _h[0], integerPartPostfix = _j === void 0 ? "" : _j;
          var processedIntegerPart = Array.from(cleanIntegerPart).reduceRight(function(formattedValuePart, char, i) {
            var isLeadingThousandSeparator = !i && char === thousandSeparator;
            var isPositionForSeparator = !isLeadingThousandSeparator && formattedValuePart.length && (formattedValuePart.length + 1) % 4 === 0;
            if (isPositionForSeparator && (char === thousandSeparator || isAllSpaces(char, thousandSeparator))) {
              return thousandSeparator + formattedValuePart;
            }
            if (char === thousandSeparator && !isPositionForSeparator) {
              if (i && i <= initialFrom) {
                from--;
              }
              if (i && i <= initialTo) {
                to--;
              }
              return formattedValuePart;
            }
            if (!isPositionForSeparator) {
              return char + formattedValuePart;
            }
            if (i <= initialFrom) {
              from++;
            }
            if (i <= initialTo) {
              to++;
            }
            return char + thousandSeparator + formattedValuePart;
          }, "");
          return {
            value: integerPartPrefix + processedIntegerPart + integerPartPostfix + (value.includes(decimalSeparator) ? decimalSeparator : "") + decimalPart,
            selection: [from, to]
          };
        };
      }
      function createZeroPrecisionPreprocessor(precision, decimalSeparator) {
        if (precision > 0) {
          return identity;
        }
        var decimalPartRegExp = new RegExp(escapeRegExp(decimalSeparator) + ".*$", "g");
        return function(_a) {
          var elementState = _a.elementState, data = _a.data;
          var value = elementState.value, selection = elementState.selection;
          var _b = __read(selection, 2), from = _b[0], to = _b[1];
          var newValue = value.replace(decimalPartRegExp, "");
          return {
            elementState: {
              selection: [Math.min(from, newValue.length), Math.min(to, newValue.length)],
              value: newValue
            },
            data: data.replace(decimalPartRegExp, "")
          };
        };
      }
      var DUMMY_SELECTION = [0, 0];
      function createLeadingZeroesValidationPlugin(decimalSeparator, thousandSeparator) {
        var dropRepeatedLeadingZeroes = createLeadingZeroesValidationPostprocessor(decimalSeparator, thousandSeparator);
        return maskitoEventHandler("blur", function(element) {
          var newValue = dropRepeatedLeadingZeroes({
            value: element.value,
            selection: DUMMY_SELECTION
          }, {
            value: "",
            selection: DUMMY_SELECTION
          }).value;
          if (element.value !== newValue) {
            element.value = newValue;
            element.dispatchEvent(new Event("input"));
          }
        }, {
          capture: true
        });
      }
      function createMinMaxPlugin(_a) {
        var min = _a.min, max = _a.max, decimalSeparator = _a.decimalSeparator;
        return maskitoEventHandler("blur", function(element, options) {
          var parsedNumber = maskitoParseNumber(element.value, decimalSeparator);
          var clampedNumber = clamp(parsedNumber, min, max);
          if (!Number.isNaN(parsedNumber) && parsedNumber !== clampedNumber) {
            element.value = core.maskitoTransform(stringifyNumberWithoutExp(clampedNumber), options);
            element.dispatchEvent(new Event("input"));
          }
        }, {
          capture: true
        });
      }
      function createNotEmptyIntegerPlugin(decimalSeparator) {
        return maskitoEventHandler("blur", function(element) {
          var newValue = element.value.replace(new RegExp("^(\\D+)?" + escapeRegExp(decimalSeparator)), "$10" + decimalSeparator);
          if (newValue !== element.value) {
            element.value = newValue;
            element.dispatchEvent(new Event("input"));
          }
        }, {
          capture: true
        });
      }
      function maskitoNumberOptionsGenerator2(_a) {
        var _b = _a === void 0 ? {} : _a, _c = _b.max, max = _c === void 0 ? Number.MAX_SAFE_INTEGER : _c, _d = _b.min, min = _d === void 0 ? Number.MIN_SAFE_INTEGER : _d, _e = _b.precision, precision = _e === void 0 ? 0 : _e, _f = _b.thousandSeparator, thousandSeparator = _f === void 0 ? CHAR_NO_BREAK_SPACE : _f, _g = _b.decimalSeparator, decimalSeparator = _g === void 0 ? "." : _g, decimalPseudoSeparators = _b.decimalPseudoSeparators, _h = _b.decimalZeroPadding, decimalZeroPadding = _h === void 0 ? false : _h, _j = _b.prefix, prefix = _j === void 0 ? "" : _j, _k = _b.postfix, postfix = _k === void 0 ? "" : _k;
        var pseudoMinuses = [CHAR_HYPHEN, CHAR_EN_DASH, CHAR_EM_DASH].filter(function(char) {
          return char !== thousandSeparator && char !== decimalSeparator;
        });
        var validatedDecimalPseudoSeparators = validateDecimalPseudoSeparators({
          decimalSeparator,
          thousandSeparator,
          decimalPseudoSeparators
        });
        return __assign(__assign({}, core.MASKITO_DEFAULT_OPTIONS), {
          mask: generateMaskExpression({
            decimalSeparator,
            precision,
            thousandSeparator,
            prefix,
            postfix,
            isNegativeAllowed: min < 0
          }),
          preprocessors: [createInitializationOnlyPreprocessor({
            decimalSeparator,
            decimalPseudoSeparators: validatedDecimalPseudoSeparators,
            pseudoMinuses
          }), createPseudoCharactersPreprocessor(CHAR_MINUS, pseudoMinuses), createPseudoCharactersPreprocessor(decimalSeparator, validatedDecimalPseudoSeparators), createNotEmptyIntegerPartPreprocessor({
            decimalSeparator,
            precision
          }), createNonRemovableCharsDeletionPreprocessor({
            decimalSeparator,
            decimalZeroPadding,
            thousandSeparator
          }), createZeroPrecisionPreprocessor(precision, decimalSeparator), createRepeatedDecimalSeparatorPreprocessor(decimalSeparator)],
          postprocessors: [createMinMaxPostprocessor({
            decimalSeparator,
            min,
            max
          }), maskitoPrefixPostprocessorGenerator(prefix), maskitoPostfixPostprocessorGenerator(postfix), createThousandSeparatorPostprocessor({
            decimalSeparator,
            thousandSeparator,
            prefix,
            postfix
          }), createDecimalZeroPaddingPostprocessor({
            decimalSeparator,
            decimalZeroPadding,
            precision,
            postfix
          })],
          plugins: [createLeadingZeroesValidationPlugin(decimalSeparator, thousandSeparator), createNotEmptyIntegerPlugin(decimalSeparator), createMinMaxPlugin({
            min,
            max,
            decimalSeparator
          })],
          overwriteMode: decimalZeroPadding ? function(_a2) {
            var value = _a2.value, _b2 = __read(_a2.selection, 1), from = _b2[0];
            return from <= value.indexOf(decimalSeparator) ? "shift" : "replace";
          } : "shift"
        });
      }
      function createMaxValidationPreprocessor(timeSegmentMaxValues) {
        var paddedMaxValues = padTimeSegments(timeSegmentMaxValues);
        var invalidCharsRegExp = new RegExp("[^\\d" + TIME_FIXED_CHARACTERS.map(escapeRegExp).join("") + "]+");
        return function(_a, actionType) {
          var elementState = _a.elementState, data = _a.data;
          if (actionType === "deleteBackward" || actionType === "deleteForward") {
            return {
              elementState,
              data
            };
          }
          var value = elementState.value, selection = elementState.selection;
          if (actionType === "validation") {
            var _b = validateTimeString({
              timeString: value,
              paddedMaxValues,
              offset: 0,
              selection
            }), validatedTimeString_1 = _b.validatedTimeString, updatedTimeSelection_1 = _b.updatedTimeSelection;
            return {
              elementState: {
                value: validatedTimeString_1,
                selection: updatedTimeSelection_1
              },
              data
            };
          }
          var newCharacters = data.replace(invalidCharsRegExp, "");
          var _c = __read(selection, 2), from = _c[0], rawTo = _c[1];
          var to = rawTo + newCharacters.length;
          var newPossibleValue = value.slice(0, from) + newCharacters + value.slice(to);
          var _d = validateTimeString({
            timeString: newPossibleValue,
            paddedMaxValues,
            offset: 0,
            selection: [from, to]
          }), validatedTimeString = _d.validatedTimeString, updatedTimeSelection = _d.updatedTimeSelection;
          if (newPossibleValue && !validatedTimeString) {
            return {
              elementState,
              data: ""
            };
          }
          to = updatedTimeSelection[1];
          var newData = validatedTimeString.slice(from, to);
          return {
            elementState: {
              selection,
              value: validatedTimeString.slice(0, from) + "0".repeat(newData.length) + validatedTimeString.slice(to)
            },
            data: newData
          };
        };
      }
      function maskitoTimeOptionsGenerator(_a) {
        var mode = _a.mode, _b = _a.timeSegmentMaxValues, timeSegmentMaxValues = _b === void 0 ? {} : _b;
        var enrichedTimeSegmentMaxValues = __assign(__assign({}, DEFAULT_TIME_SEGMENT_MAX_VALUES), timeSegmentMaxValues);
        return __assign(__assign({}, core.MASKITO_DEFAULT_OPTIONS), {
          mask: Array.from(mode).map(function(char) {
            return TIME_FIXED_CHARACTERS.includes(char) ? char : /\d/;
          }),
          preprocessors: [createZeroPlaceholdersPreprocessor(), createMaxValidationPreprocessor(enrichedTimeSegmentMaxValues)],
          overwriteMode: "replace"
        });
      }
      exports2.maskitoAddOnFocusPlugin = maskitoAddOnFocusPlugin;
      exports2.maskitoCaretGuard = maskitoCaretGuard;
      exports2.maskitoDateOptionsGenerator = maskitoDateOptionsGenerator;
      exports2.maskitoDateRangeOptionsGenerator = maskitoDateRangeOptionsGenerator;
      exports2.maskitoDateTimeOptionsGenerator = maskitoDateTimeOptionsGenerator;
      exports2.maskitoEventHandler = maskitoEventHandler;
      exports2.maskitoNumberOptionsGenerator = maskitoNumberOptionsGenerator2;
      exports2.maskitoParseNumber = maskitoParseNumber;
      exports2.maskitoPostfixPostprocessorGenerator = maskitoPostfixPostprocessorGenerator;
      exports2.maskitoPrefixPostprocessorGenerator = maskitoPrefixPostprocessorGenerator;
      exports2.maskitoRejectEvent = maskitoRejectEvent;
      exports2.maskitoRemoveOnBlurPlugin = maskitoRemoveOnBlurPlugin;
      exports2.maskitoTimeOptionsGenerator = maskitoTimeOptionsGenerator;
      exports2.maskitoWithPlaceholder = maskitoWithPlaceholder;
      Object.defineProperty(exports2, "__esModule", { value: true });
    });
  }
});

// node_modules/topbar/topbar.min.js
var require_topbar_min = __commonJS({
  "node_modules/topbar/topbar.min.js"(exports, module2) {
    (function(window2, document2) {
      "use strict";
      !function() {
        for (var lastTime = 0, vendors = ["ms", "moz", "webkit", "o"], x = 0; x < vendors.length && !window2.requestAnimationFrame; ++x)
          window2.requestAnimationFrame = window2[vendors[x] + "RequestAnimationFrame"], window2.cancelAnimationFrame = window2[vendors[x] + "CancelAnimationFrame"] || window2[vendors[x] + "CancelRequestAnimationFrame"];
        window2.requestAnimationFrame || (window2.requestAnimationFrame = function(callback, element) {
          var currTime = (/* @__PURE__ */ new Date()).getTime(), timeToCall = Math.max(0, 16 - (currTime - lastTime)), id = window2.setTimeout(function() {
            callback(currTime + timeToCall);
          }, timeToCall);
          return lastTime = currTime + timeToCall, id;
        }), window2.cancelAnimationFrame || (window2.cancelAnimationFrame = function(id) {
          clearTimeout(id);
        });
      }();
      function repaint() {
        canvas.width = window2.innerWidth, canvas.height = 5 * options.barThickness;
        var ctx = canvas.getContext("2d");
        ctx.shadowBlur = options.shadowBlur, ctx.shadowColor = options.shadowColor;
        var stop, lineGradient = ctx.createLinearGradient(0, 0, canvas.width, 0);
        for (stop in options.barColors)
          lineGradient.addColorStop(stop, options.barColors[stop]);
        ctx.lineWidth = options.barThickness, ctx.beginPath(), ctx.moveTo(0, options.barThickness / 2), ctx.lineTo(Math.ceil(currentProgress * canvas.width), options.barThickness / 2), ctx.strokeStyle = lineGradient, ctx.stroke();
      }
      var canvas, progressTimerId, fadeTimerId, currentProgress, showing, options = { autoRun: true, barThickness: 3, barColors: { 0: "rgba(26,  188, 156, .9)", ".25": "rgba(52,  152, 219, .9)", ".50": "rgba(241, 196, 15,  .9)", ".75": "rgba(230, 126, 34,  .9)", "1.0": "rgba(211, 84,  0,   .9)" }, shadowBlur: 10, shadowColor: "rgba(0,   0,   0,   .6)", className: null }, topbar2 = { config: function(opts) {
        for (var key in opts)
          options.hasOwnProperty(key) && (options[key] = opts[key]);
      }, show: function() {
        var type, handler, elem;
        showing || (showing = true, null !== fadeTimerId && window2.cancelAnimationFrame(fadeTimerId), canvas || ((elem = (canvas = document2.createElement("canvas")).style).position = "fixed", elem.top = elem.left = elem.right = elem.margin = elem.padding = 0, elem.zIndex = 100001, elem.display = "none", options.className && canvas.classList.add(options.className), document2.body.appendChild(canvas), type = "resize", handler = repaint, (elem = window2).addEventListener ? elem.addEventListener(type, handler, false) : elem.attachEvent ? elem.attachEvent("on" + type, handler) : elem["on" + type] = handler), canvas.style.opacity = 1, canvas.style.display = "block", topbar2.progress(0), options.autoRun && function loop() {
          progressTimerId = window2.requestAnimationFrame(loop), topbar2.progress("+" + 0.05 * Math.pow(1 - Math.sqrt(currentProgress), 2));
        }());
      }, progress: function(to) {
        return void 0 === to || ("string" == typeof to && (to = (0 <= to.indexOf("+") || 0 <= to.indexOf("-") ? currentProgress : 0) + parseFloat(to)), currentProgress = 1 < to ? 1 : to, repaint()), currentProgress;
      }, hide: function() {
        showing && (showing = false, null != progressTimerId && (window2.cancelAnimationFrame(progressTimerId), progressTimerId = null), function loop() {
          return 1 <= topbar2.progress("+.1") && (canvas.style.opacity -= 0.05, canvas.style.opacity <= 0.05) ? (canvas.style.display = "none", void (fadeTimerId = null)) : void (fadeTimerId = window2.requestAnimationFrame(loop));
        }());
      } };
      "object" == typeof module2 && "object" == typeof module2.exports ? module2.exports = topbar2 : "function" == typeof define && define.amd ? define(function() {
        return topbar2;
      }) : this.topbar = topbar2;
    }).call(exports, window, document);
  }
});

// ../deps/phoenix_html/priv/static/phoenix_html.js
(function() {
  var PolyfillEvent = eventConstructor();
  function eventConstructor() {
    if (typeof window.CustomEvent === "function")
      return window.CustomEvent;
    function CustomEvent2(event, params) {
      params = params || { bubbles: false, cancelable: false, detail: void 0 };
      var evt = document.createEvent("CustomEvent");
      evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
      return evt;
    }
    CustomEvent2.prototype = window.Event.prototype;
    return CustomEvent2;
  }
  function buildHiddenInput(name, value) {
    var input = document.createElement("input");
    input.type = "hidden";
    input.name = name;
    input.value = value;
    return input;
  }
  function handleClick(element, targetModifierKey) {
    var to = element.getAttribute("data-to"), method = buildHiddenInput("_method", element.getAttribute("data-method")), csrf = buildHiddenInput("_csrf_token", element.getAttribute("data-csrf")), form = document.createElement("form"), submit = document.createElement("input"), target = element.getAttribute("target");
    form.method = element.getAttribute("data-method") === "get" ? "get" : "post";
    form.action = to;
    form.style.display = "none";
    if (target)
      form.target = target;
    else if (targetModifierKey)
      form.target = "_blank";
    form.appendChild(csrf);
    form.appendChild(method);
    document.body.appendChild(form);
    submit.type = "submit";
    form.appendChild(submit);
    submit.click();
  }
  window.addEventListener("click", function(e) {
    var element = e.target;
    if (e.defaultPrevented)
      return;
    while (element && element.getAttribute) {
      var phoenixLinkEvent = new PolyfillEvent("phoenix.link.click", {
        "bubbles": true,
        "cancelable": true
      });
      if (!element.dispatchEvent(phoenixLinkEvent)) {
        e.preventDefault();
        e.stopImmediatePropagation();
        return false;
      }
      if (element.getAttribute("data-method")) {
        handleClick(element, e.metaKey || e.shiftKey);
        e.preventDefault();
        return false;
      } else {
        element = element.parentNode;
      }
    }
  }, false);
  window.addEventListener("phoenix.link.click", function(e) {
    var message = e.target.getAttribute("data-confirm");
    if (message && !window.confirm(message)) {
      e.preventDefault();
    }
  }, false);
})();

// js/app.js
var import_core = __toESM(require_index_umd());
var import_kit = __toESM(require_index_umd2());

// ../deps/phoenix/priv/static/phoenix.mjs
var closure = (value) => {
  if (typeof value === "function") {
    return value;
  } else {
    let closure22 = function() {
      return value;
    };
    return closure22;
  }
};
var globalSelf = typeof self !== "undefined" ? self : null;
var phxWindow = typeof window !== "undefined" ? window : null;
var global = globalSelf || phxWindow || global;
var DEFAULT_VSN = "2.0.0";
var SOCKET_STATES = { connecting: 0, open: 1, closing: 2, closed: 3 };
var DEFAULT_TIMEOUT = 1e4;
var WS_CLOSE_NORMAL = 1e3;
var CHANNEL_STATES = {
  closed: "closed",
  errored: "errored",
  joined: "joined",
  joining: "joining",
  leaving: "leaving"
};
var CHANNEL_EVENTS = {
  close: "phx_close",
  error: "phx_error",
  join: "phx_join",
  reply: "phx_reply",
  leave: "phx_leave"
};
var TRANSPORTS = {
  longpoll: "longpoll",
  websocket: "websocket"
};
var XHR_STATES = {
  complete: 4
};
var Push = class {
  constructor(channel, event, payload, timeout) {
    this.channel = channel;
    this.event = event;
    this.payload = payload || function() {
      return {};
    };
    this.receivedResp = null;
    this.timeout = timeout;
    this.timeoutTimer = null;
    this.recHooks = [];
    this.sent = false;
  }
  /**
   *
   * @param {number} timeout
   */
  resend(timeout) {
    this.timeout = timeout;
    this.reset();
    this.send();
  }
  /**
   *
   */
  send() {
    if (this.hasReceived("timeout")) {
      return;
    }
    this.startTimeout();
    this.sent = true;
    this.channel.socket.push({
      topic: this.channel.topic,
      event: this.event,
      payload: this.payload(),
      ref: this.ref,
      join_ref: this.channel.joinRef()
    });
  }
  /**
   *
   * @param {*} status
   * @param {*} callback
   */
  receive(status, callback) {
    if (this.hasReceived(status)) {
      callback(this.receivedResp.response);
    }
    this.recHooks.push({ status, callback });
    return this;
  }
  /**
   * @private
   */
  reset() {
    this.cancelRefEvent();
    this.ref = null;
    this.refEvent = null;
    this.receivedResp = null;
    this.sent = false;
  }
  /**
   * @private
   */
  matchReceive({ status, response, _ref }) {
    this.recHooks.filter((h) => h.status === status).forEach((h) => h.callback(response));
  }
  /**
   * @private
   */
  cancelRefEvent() {
    if (!this.refEvent) {
      return;
    }
    this.channel.off(this.refEvent);
  }
  /**
   * @private
   */
  cancelTimeout() {
    clearTimeout(this.timeoutTimer);
    this.timeoutTimer = null;
  }
  /**
   * @private
   */
  startTimeout() {
    if (this.timeoutTimer) {
      this.cancelTimeout();
    }
    this.ref = this.channel.socket.makeRef();
    this.refEvent = this.channel.replyEventName(this.ref);
    this.channel.on(this.refEvent, (payload) => {
      this.cancelRefEvent();
      this.cancelTimeout();
      this.receivedResp = payload;
      this.matchReceive(payload);
    });
    this.timeoutTimer = setTimeout(() => {
      this.trigger("timeout", {});
    }, this.timeout);
  }
  /**
   * @private
   */
  hasReceived(status) {
    return this.receivedResp && this.receivedResp.status === status;
  }
  /**
   * @private
   */
  trigger(status, response) {
    this.channel.trigger(this.refEvent, { status, response });
  }
};
var Timer = class {
  constructor(callback, timerCalc) {
    this.callback = callback;
    this.timerCalc = timerCalc;
    this.timer = null;
    this.tries = 0;
  }
  reset() {
    this.tries = 0;
    clearTimeout(this.timer);
  }
  /**
   * Cancels any previous scheduleTimeout and schedules callback
   */
  scheduleTimeout() {
    clearTimeout(this.timer);
    this.timer = setTimeout(() => {
      this.tries = this.tries + 1;
      this.callback();
    }, this.timerCalc(this.tries + 1));
  }
};
var Channel = class {
  constructor(topic, params, socket) {
    this.state = CHANNEL_STATES.closed;
    this.topic = topic;
    this.params = closure(params || {});
    this.socket = socket;
    this.bindings = [];
    this.bindingRef = 0;
    this.timeout = this.socket.timeout;
    this.joinedOnce = false;
    this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);
    this.pushBuffer = [];
    this.stateChangeRefs = [];
    this.rejoinTimer = new Timer(() => {
      if (this.socket.isConnected()) {
        this.rejoin();
      }
    }, this.socket.rejoinAfterMs);
    this.stateChangeRefs.push(this.socket.onError(() => this.rejoinTimer.reset()));
    this.stateChangeRefs.push(
      this.socket.onOpen(() => {
        this.rejoinTimer.reset();
        if (this.isErrored()) {
          this.rejoin();
        }
      })
    );
    this.joinPush.receive("ok", () => {
      this.state = CHANNEL_STATES.joined;
      this.rejoinTimer.reset();
      this.pushBuffer.forEach((pushEvent) => pushEvent.send());
      this.pushBuffer = [];
    });
    this.joinPush.receive("error", () => {
      this.state = CHANNEL_STATES.errored;
      if (this.socket.isConnected()) {
        this.rejoinTimer.scheduleTimeout();
      }
    });
    this.onClose(() => {
      this.rejoinTimer.reset();
      if (this.socket.hasLogger())
        this.socket.log("channel", `close ${this.topic} ${this.joinRef()}`);
      this.state = CHANNEL_STATES.closed;
      this.socket.remove(this);
    });
    this.onError((reason) => {
      if (this.socket.hasLogger())
        this.socket.log("channel", `error ${this.topic}`, reason);
      if (this.isJoining()) {
        this.joinPush.reset();
      }
      this.state = CHANNEL_STATES.errored;
      if (this.socket.isConnected()) {
        this.rejoinTimer.scheduleTimeout();
      }
    });
    this.joinPush.receive("timeout", () => {
      if (this.socket.hasLogger())
        this.socket.log("channel", `timeout ${this.topic} (${this.joinRef()})`, this.joinPush.timeout);
      let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), this.timeout);
      leavePush.send();
      this.state = CHANNEL_STATES.errored;
      this.joinPush.reset();
      if (this.socket.isConnected()) {
        this.rejoinTimer.scheduleTimeout();
      }
    });
    this.on(CHANNEL_EVENTS.reply, (payload, ref) => {
      this.trigger(this.replyEventName(ref), payload);
    });
  }
  /**
   * Join the channel
   * @param {integer} timeout
   * @returns {Push}
   */
  join(timeout = this.timeout) {
    if (this.joinedOnce) {
      throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");
    } else {
      this.timeout = timeout;
      this.joinedOnce = true;
      this.rejoin();
      return this.joinPush;
    }
  }
  /**
   * Hook into channel close
   * @param {Function} callback
   */
  onClose(callback) {
    this.on(CHANNEL_EVENTS.close, callback);
  }
  /**
   * Hook into channel errors
   * @param {Function} callback
   */
  onError(callback) {
    return this.on(CHANNEL_EVENTS.error, (reason) => callback(reason));
  }
  /**
   * Subscribes on channel events
   *
   * Subscription returns a ref counter, which can be used later to
   * unsubscribe the exact event listener
   *
   * @example
   * const ref1 = channel.on("event", do_stuff)
   * const ref2 = channel.on("event", do_other_stuff)
   * channel.off("event", ref1)
   * // Since unsubscription, do_stuff won't fire,
   * // while do_other_stuff will keep firing on the "event"
   *
   * @param {string} event
   * @param {Function} callback
   * @returns {integer} ref
   */
  on(event, callback) {
    let ref = this.bindingRef++;
    this.bindings.push({ event, ref, callback });
    return ref;
  }
  /**
   * Unsubscribes off of channel events
   *
   * Use the ref returned from a channel.on() to unsubscribe one
   * handler, or pass nothing for the ref to unsubscribe all
   * handlers for the given event.
   *
   * @example
   * // Unsubscribe the do_stuff handler
   * const ref1 = channel.on("event", do_stuff)
   * channel.off("event", ref1)
   *
   * // Unsubscribe all handlers from event
   * channel.off("event")
   *
   * @param {string} event
   * @param {integer} ref
   */
  off(event, ref) {
    this.bindings = this.bindings.filter((bind) => {
      return !(bind.event === event && (typeof ref === "undefined" || ref === bind.ref));
    });
  }
  /**
   * @private
   */
  canPush() {
    return this.socket.isConnected() && this.isJoined();
  }
  /**
   * Sends a message `event` to phoenix with the payload `payload`.
   * Phoenix receives this in the `handle_in(event, payload, socket)`
   * function. if phoenix replies or it times out (default 10000ms),
   * then optionally the reply can be received.
   *
   * @example
   * channel.push("event")
   *   .receive("ok", payload => console.log("phoenix replied:", payload))
   *   .receive("error", err => console.log("phoenix errored", err))
   *   .receive("timeout", () => console.log("timed out pushing"))
   * @param {string} event
   * @param {Object} payload
   * @param {number} [timeout]
   * @returns {Push}
   */
  push(event, payload, timeout = this.timeout) {
    payload = payload || {};
    if (!this.joinedOnce) {
      throw new Error(`tried to push '${event}' to '${this.topic}' before joining. Use channel.join() before pushing events`);
    }
    let pushEvent = new Push(this, event, function() {
      return payload;
    }, timeout);
    if (this.canPush()) {
      pushEvent.send();
    } else {
      pushEvent.startTimeout();
      this.pushBuffer.push(pushEvent);
    }
    return pushEvent;
  }
  /** Leaves the channel
   *
   * Unsubscribes from server events, and
   * instructs channel to terminate on server
   *
   * Triggers onClose() hooks
   *
   * To receive leave acknowledgements, use the `receive`
   * hook to bind to the server ack, ie:
   *
   * @example
   * channel.leave().receive("ok", () => alert("left!") )
   *
   * @param {integer} timeout
   * @returns {Push}
   */
  leave(timeout = this.timeout) {
    this.rejoinTimer.reset();
    this.joinPush.cancelTimeout();
    this.state = CHANNEL_STATES.leaving;
    let onClose = () => {
      if (this.socket.hasLogger())
        this.socket.log("channel", `leave ${this.topic}`);
      this.trigger(CHANNEL_EVENTS.close, "leave");
    };
    let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), timeout);
    leavePush.receive("ok", () => onClose()).receive("timeout", () => onClose());
    leavePush.send();
    if (!this.canPush()) {
      leavePush.trigger("ok", {});
    }
    return leavePush;
  }
  /**
   * Overridable message hook
   *
   * Receives all events for specialized message handling
   * before dispatching to the channel callbacks.
   *
   * Must return the payload, modified or unmodified
   * @param {string} event
   * @param {Object} payload
   * @param {integer} ref
   * @returns {Object}
   */
  onMessage(_event, payload, _ref) {
    return payload;
  }
  /**
   * @private
   */
  isMember(topic, event, payload, joinRef) {
    if (this.topic !== topic) {
      return false;
    }
    if (joinRef && joinRef !== this.joinRef()) {
      if (this.socket.hasLogger())
        this.socket.log("channel", "dropping outdated message", { topic, event, payload, joinRef });
      return false;
    } else {
      return true;
    }
  }
  /**
   * @private
   */
  joinRef() {
    return this.joinPush.ref;
  }
  /**
   * @private
   */
  rejoin(timeout = this.timeout) {
    if (this.isLeaving()) {
      return;
    }
    this.socket.leaveOpenTopic(this.topic);
    this.state = CHANNEL_STATES.joining;
    this.joinPush.resend(timeout);
  }
  /**
   * @private
   */
  trigger(event, payload, ref, joinRef) {
    let handledPayload = this.onMessage(event, payload, ref, joinRef);
    if (payload && !handledPayload) {
      throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");
    }
    let eventBindings = this.bindings.filter((bind) => bind.event === event);
    for (let i = 0; i < eventBindings.length; i++) {
      let bind = eventBindings[i];
      bind.callback(handledPayload, ref, joinRef || this.joinRef());
    }
  }
  /**
   * @private
   */
  replyEventName(ref) {
    return `chan_reply_${ref}`;
  }
  /**
   * @private
   */
  isClosed() {
    return this.state === CHANNEL_STATES.closed;
  }
  /**
   * @private
   */
  isErrored() {
    return this.state === CHANNEL_STATES.errored;
  }
  /**
   * @private
   */
  isJoined() {
    return this.state === CHANNEL_STATES.joined;
  }
  /**
   * @private
   */
  isJoining() {
    return this.state === CHANNEL_STATES.joining;
  }
  /**
   * @private
   */
  isLeaving() {
    return this.state === CHANNEL_STATES.leaving;
  }
};
var Ajax = class {
  static request(method, endPoint, accept, body, timeout, ontimeout, callback) {
    if (global.XDomainRequest) {
      let req = new global.XDomainRequest();
      return this.xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback);
    } else {
      let req = new global.XMLHttpRequest();
      return this.xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback);
    }
  }
  static xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback) {
    req.timeout = timeout;
    req.open(method, endPoint);
    req.onload = () => {
      let response = this.parseJSON(req.responseText);
      callback && callback(response);
    };
    if (ontimeout) {
      req.ontimeout = ontimeout;
    }
    req.onprogress = () => {
    };
    req.send(body);
    return req;
  }
  static xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback) {
    req.open(method, endPoint, true);
    req.timeout = timeout;
    req.setRequestHeader("Content-Type", accept);
    req.onerror = () => callback && callback(null);
    req.onreadystatechange = () => {
      if (req.readyState === XHR_STATES.complete && callback) {
        let response = this.parseJSON(req.responseText);
        callback(response);
      }
    };
    if (ontimeout) {
      req.ontimeout = ontimeout;
    }
    req.send(body);
    return req;
  }
  static parseJSON(resp) {
    if (!resp || resp === "") {
      return null;
    }
    try {
      return JSON.parse(resp);
    } catch (e) {
      console && console.log("failed to parse JSON response", resp);
      return null;
    }
  }
  static serialize(obj, parentKey) {
    let queryStr = [];
    for (var key in obj) {
      if (!Object.prototype.hasOwnProperty.call(obj, key)) {
        continue;
      }
      let paramKey = parentKey ? `${parentKey}[${key}]` : key;
      let paramVal = obj[key];
      if (typeof paramVal === "object") {
        queryStr.push(this.serialize(paramVal, paramKey));
      } else {
        queryStr.push(encodeURIComponent(paramKey) + "=" + encodeURIComponent(paramVal));
      }
    }
    return queryStr.join("&");
  }
  static appendParams(url, params) {
    if (Object.keys(params).length === 0) {
      return url;
    }
    let prefix = url.match(/\?/) ? "&" : "?";
    return `${url}${prefix}${this.serialize(params)}`;
  }
};
var arrayBufferToBase64 = (buffer) => {
  let binary = "";
  let bytes = new Uint8Array(buffer);
  let len = bytes.byteLength;
  for (let i = 0; i < len; i++) {
    binary += String.fromCharCode(bytes[i]);
  }
  return btoa(binary);
};
var LongPoll = class {
  constructor(endPoint) {
    this.endPoint = null;
    this.token = null;
    this.skipHeartbeat = true;
    this.reqs = /* @__PURE__ */ new Set();
    this.awaitingBatchAck = false;
    this.currentBatch = null;
    this.currentBatchTimer = null;
    this.batchBuffer = [];
    this.onopen = function() {
    };
    this.onerror = function() {
    };
    this.onmessage = function() {
    };
    this.onclose = function() {
    };
    this.pollEndpoint = this.normalizeEndpoint(endPoint);
    this.readyState = SOCKET_STATES.connecting;
    this.poll();
  }
  normalizeEndpoint(endPoint) {
    return endPoint.replace("ws://", "http://").replace("wss://", "https://").replace(new RegExp("(.*)/" + TRANSPORTS.websocket), "$1/" + TRANSPORTS.longpoll);
  }
  endpointURL() {
    return Ajax.appendParams(this.pollEndpoint, { token: this.token });
  }
  closeAndRetry(code, reason, wasClean) {
    this.close(code, reason, wasClean);
    this.readyState = SOCKET_STATES.connecting;
  }
  ontimeout() {
    this.onerror("timeout");
    this.closeAndRetry(1005, "timeout", false);
  }
  isActive() {
    return this.readyState === SOCKET_STATES.open || this.readyState === SOCKET_STATES.connecting;
  }
  poll() {
    this.ajax("GET", "application/json", null, () => this.ontimeout(), (resp) => {
      if (resp) {
        var { status, token, messages } = resp;
        this.token = token;
      } else {
        status = 0;
      }
      switch (status) {
        case 200:
          messages.forEach((msg) => {
            setTimeout(() => this.onmessage({ data: msg }), 0);
          });
          this.poll();
          break;
        case 204:
          this.poll();
          break;
        case 410:
          this.readyState = SOCKET_STATES.open;
          this.onopen({});
          this.poll();
          break;
        case 403:
          this.onerror(403);
          this.close(1008, "forbidden", false);
          break;
        case 0:
        case 500:
          this.onerror(500);
          this.closeAndRetry(1011, "internal server error", 500);
          break;
        default:
          throw new Error(`unhandled poll status ${status}`);
      }
    });
  }
  // we collect all pushes within the current event loop by
  // setTimeout 0, which optimizes back-to-back procedural
  // pushes against an empty buffer
  send(body) {
    if (typeof body !== "string") {
      body = arrayBufferToBase64(body);
    }
    if (this.currentBatch) {
      this.currentBatch.push(body);
    } else if (this.awaitingBatchAck) {
      this.batchBuffer.push(body);
    } else {
      this.currentBatch = [body];
      this.currentBatchTimer = setTimeout(() => {
        this.batchSend(this.currentBatch);
        this.currentBatch = null;
      }, 0);
    }
  }
  batchSend(messages) {
    this.awaitingBatchAck = true;
    this.ajax("POST", "application/x-ndjson", messages.join("\n"), () => this.onerror("timeout"), (resp) => {
      this.awaitingBatchAck = false;
      if (!resp || resp.status !== 200) {
        this.onerror(resp && resp.status);
        this.closeAndRetry(1011, "internal server error", false);
      } else if (this.batchBuffer.length > 0) {
        this.batchSend(this.batchBuffer);
        this.batchBuffer = [];
      }
    });
  }
  close(code, reason, wasClean) {
    for (let req of this.reqs) {
      req.abort();
    }
    this.readyState = SOCKET_STATES.closed;
    let opts = Object.assign({ code: 1e3, reason: void 0, wasClean: true }, { code, reason, wasClean });
    this.batchBuffer = [];
    clearTimeout(this.currentBatchTimer);
    this.currentBatchTimer = null;
    if (typeof CloseEvent !== "undefined") {
      this.onclose(new CloseEvent("close", opts));
    } else {
      this.onclose(opts);
    }
  }
  ajax(method, contentType, body, onCallerTimeout, callback) {
    let req;
    let ontimeout = () => {
      this.reqs.delete(req);
      onCallerTimeout();
    };
    req = Ajax.request(method, this.endpointURL(), contentType, body, this.timeout, ontimeout, (resp) => {
      this.reqs.delete(req);
      if (this.isActive()) {
        callback(resp);
      }
    });
    this.reqs.add(req);
  }
};
var serializer_default = {
  HEADER_LENGTH: 1,
  META_LENGTH: 4,
  KINDS: { push: 0, reply: 1, broadcast: 2 },
  encode(msg, callback) {
    if (msg.payload.constructor === ArrayBuffer) {
      return callback(this.binaryEncode(msg));
    } else {
      let payload = [msg.join_ref, msg.ref, msg.topic, msg.event, msg.payload];
      return callback(JSON.stringify(payload));
    }
  },
  decode(rawPayload, callback) {
    if (rawPayload.constructor === ArrayBuffer) {
      return callback(this.binaryDecode(rawPayload));
    } else {
      let [join_ref, ref, topic, event, payload] = JSON.parse(rawPayload);
      return callback({ join_ref, ref, topic, event, payload });
    }
  },
  // private
  binaryEncode(message) {
    let { join_ref, ref, event, topic, payload } = message;
    let metaLength = this.META_LENGTH + join_ref.length + ref.length + topic.length + event.length;
    let header = new ArrayBuffer(this.HEADER_LENGTH + metaLength);
    let view = new DataView(header);
    let offset = 0;
    view.setUint8(offset++, this.KINDS.push);
    view.setUint8(offset++, join_ref.length);
    view.setUint8(offset++, ref.length);
    view.setUint8(offset++, topic.length);
    view.setUint8(offset++, event.length);
    Array.from(join_ref, (char) => view.setUint8(offset++, char.charCodeAt(0)));
    Array.from(ref, (char) => view.setUint8(offset++, char.charCodeAt(0)));
    Array.from(topic, (char) => view.setUint8(offset++, char.charCodeAt(0)));
    Array.from(event, (char) => view.setUint8(offset++, char.charCodeAt(0)));
    var combined = new Uint8Array(header.byteLength + payload.byteLength);
    combined.set(new Uint8Array(header), 0);
    combined.set(new Uint8Array(payload), header.byteLength);
    return combined.buffer;
  },
  binaryDecode(buffer) {
    let view = new DataView(buffer);
    let kind = view.getUint8(0);
    let decoder = new TextDecoder();
    switch (kind) {
      case this.KINDS.push:
        return this.decodePush(buffer, view, decoder);
      case this.KINDS.reply:
        return this.decodeReply(buffer, view, decoder);
      case this.KINDS.broadcast:
        return this.decodeBroadcast(buffer, view, decoder);
    }
  },
  decodePush(buffer, view, decoder) {
    let joinRefSize = view.getUint8(1);
    let topicSize = view.getUint8(2);
    let eventSize = view.getUint8(3);
    let offset = this.HEADER_LENGTH + this.META_LENGTH - 1;
    let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize));
    offset = offset + joinRefSize;
    let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
    offset = offset + topicSize;
    let event = decoder.decode(buffer.slice(offset, offset + eventSize));
    offset = offset + eventSize;
    let data = buffer.slice(offset, buffer.byteLength);
    return { join_ref: joinRef, ref: null, topic, event, payload: data };
  },
  decodeReply(buffer, view, decoder) {
    let joinRefSize = view.getUint8(1);
    let refSize = view.getUint8(2);
    let topicSize = view.getUint8(3);
    let eventSize = view.getUint8(4);
    let offset = this.HEADER_LENGTH + this.META_LENGTH;
    let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize));
    offset = offset + joinRefSize;
    let ref = decoder.decode(buffer.slice(offset, offset + refSize));
    offset = offset + refSize;
    let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
    offset = offset + topicSize;
    let event = decoder.decode(buffer.slice(offset, offset + eventSize));
    offset = offset + eventSize;
    let data = buffer.slice(offset, buffer.byteLength);
    let payload = { status: event, response: data };
    return { join_ref: joinRef, ref, topic, event: CHANNEL_EVENTS.reply, payload };
  },
  decodeBroadcast(buffer, view, decoder) {
    let topicSize = view.getUint8(1);
    let eventSize = view.getUint8(2);
    let offset = this.HEADER_LENGTH + 2;
    let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
    offset = offset + topicSize;
    let event = decoder.decode(buffer.slice(offset, offset + eventSize));
    offset = offset + eventSize;
    let data = buffer.slice(offset, buffer.byteLength);
    return { join_ref: null, ref: null, topic, event, payload: data };
  }
};
var Socket = class {
  constructor(endPoint, opts = {}) {
    this.stateChangeCallbacks = { open: [], close: [], error: [], message: [] };
    this.channels = [];
    this.sendBuffer = [];
    this.ref = 0;
    this.timeout = opts.timeout || DEFAULT_TIMEOUT;
    this.transport = opts.transport || global.WebSocket || LongPoll;
    this.establishedConnections = 0;
    this.defaultEncoder = serializer_default.encode.bind(serializer_default);
    this.defaultDecoder = serializer_default.decode.bind(serializer_default);
    this.closeWasClean = false;
    this.binaryType = opts.binaryType || "arraybuffer";
    this.connectClock = 1;
    if (this.transport !== LongPoll) {
      this.encode = opts.encode || this.defaultEncoder;
      this.decode = opts.decode || this.defaultDecoder;
    } else {
      this.encode = this.defaultEncoder;
      this.decode = this.defaultDecoder;
    }
    let awaitingConnectionOnPageShow = null;
    if (phxWindow && phxWindow.addEventListener) {
      phxWindow.addEventListener("pagehide", (_e) => {
        if (this.conn) {
          this.disconnect();
          awaitingConnectionOnPageShow = this.connectClock;
        }
      });
      phxWindow.addEventListener("pageshow", (_e) => {
        if (awaitingConnectionOnPageShow === this.connectClock) {
          awaitingConnectionOnPageShow = null;
          this.connect();
        }
      });
    }
    this.heartbeatIntervalMs = opts.heartbeatIntervalMs || 3e4;
    this.rejoinAfterMs = (tries) => {
      if (opts.rejoinAfterMs) {
        return opts.rejoinAfterMs(tries);
      } else {
        return [1e3, 2e3, 5e3][tries - 1] || 1e4;
      }
    };
    this.reconnectAfterMs = (tries) => {
      if (opts.reconnectAfterMs) {
        return opts.reconnectAfterMs(tries);
      } else {
        return [10, 50, 100, 150, 200, 250, 500, 1e3, 2e3][tries - 1] || 5e3;
      }
    };
    this.logger = opts.logger || null;
    this.longpollerTimeout = opts.longpollerTimeout || 2e4;
    this.params = closure(opts.params || {});
    this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;
    this.vsn = opts.vsn || DEFAULT_VSN;
    this.heartbeatTimeoutTimer = null;
    this.heartbeatTimer = null;
    this.pendingHeartbeatRef = null;
    this.reconnectTimer = new Timer(() => {
      this.teardown(() => this.connect());
    }, this.reconnectAfterMs);
  }
  /**
   * Returns the LongPoll transport reference
   */
  getLongPollTransport() {
    return LongPoll;
  }
  /**
   * Disconnects and replaces the active transport
   *
   * @param {Function} newTransport - The new transport class to instantiate
   *
   */
  replaceTransport(newTransport) {
    this.connectClock++;
    this.closeWasClean = true;
    this.reconnectTimer.reset();
    this.sendBuffer = [];
    if (this.conn) {
      this.conn.close();
      this.conn = null;
    }
    this.transport = newTransport;
  }
  /**
   * Returns the socket protocol
   *
   * @returns {string}
   */
  protocol() {
    return location.protocol.match(/^https/) ? "wss" : "ws";
  }
  /**
   * The fully qualified socket url
   *
   * @returns {string}
   */
  endPointURL() {
    let uri = Ajax.appendParams(
      Ajax.appendParams(this.endPoint, this.params()),
      { vsn: this.vsn }
    );
    if (uri.charAt(0) !== "/") {
      return uri;
    }
    if (uri.charAt(1) === "/") {
      return `${this.protocol()}:${uri}`;
    }
    return `${this.protocol()}://${location.host}${uri}`;
  }
  /**
   * Disconnects the socket
   *
   * See https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes for valid status codes.
   *
   * @param {Function} callback - Optional callback which is called after socket is disconnected.
   * @param {integer} code - A status code for disconnection (Optional).
   * @param {string} reason - A textual description of the reason to disconnect. (Optional)
   */
  disconnect(callback, code, reason) {
    this.connectClock++;
    this.closeWasClean = true;
    this.reconnectTimer.reset();
    this.teardown(callback, code, reason);
  }
  /**
   *
   * @param {Object} params - The params to send when connecting, for example `{user_id: userToken}`
   *
   * Passing params to connect is deprecated; pass them in the Socket constructor instead:
   * `new Socket("/socket", {params: {user_id: userToken}})`.
   */
  connect(params) {
    if (params) {
      console && console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor");
      this.params = closure(params);
    }
    if (this.conn) {
      return;
    }
    this.connectClock++;
    this.closeWasClean = false;
    this.conn = new this.transport(this.endPointURL());
    this.conn.binaryType = this.binaryType;
    this.conn.timeout = this.longpollerTimeout;
    this.conn.onopen = () => this.onConnOpen();
    this.conn.onerror = (error) => this.onConnError(error);
    this.conn.onmessage = (event) => this.onConnMessage(event);
    this.conn.onclose = (event) => this.onConnClose(event);
  }
  /**
   * Logs the message. Override `this.logger` for specialized logging. noops by default
   * @param {string} kind
   * @param {string} msg
   * @param {Object} data
   */
  log(kind, msg, data) {
    this.logger(kind, msg, data);
  }
  /**
   * Returns true if a logger has been set on this socket.
   */
  hasLogger() {
    return this.logger !== null;
  }
  /**
   * Registers callbacks for connection open events
   *
   * @example socket.onOpen(function(){ console.info("the socket was opened") })
   *
   * @param {Function} callback
   */
  onOpen(callback) {
    let ref = this.makeRef();
    this.stateChangeCallbacks.open.push([ref, callback]);
    return ref;
  }
  /**
   * Registers callbacks for connection close events
   * @param {Function} callback
   */
  onClose(callback) {
    let ref = this.makeRef();
    this.stateChangeCallbacks.close.push([ref, callback]);
    return ref;
  }
  /**
   * Registers callbacks for connection error events
   *
   * @example socket.onError(function(error){ alert("An error occurred") })
   *
   * @param {Function} callback
   */
  onError(callback) {
    let ref = this.makeRef();
    this.stateChangeCallbacks.error.push([ref, callback]);
    return ref;
  }
  /**
   * Registers callbacks for connection message events
   * @param {Function} callback
   */
  onMessage(callback) {
    let ref = this.makeRef();
    this.stateChangeCallbacks.message.push([ref, callback]);
    return ref;
  }
  /**
   * Pings the server and invokes the callback with the RTT in milliseconds
   * @param {Function} callback
   *
   * Returns true if the ping was pushed or false if unable to be pushed.
   */
  ping(callback) {
    if (!this.isConnected()) {
      return false;
    }
    let ref = this.makeRef();
    let startTime = Date.now();
    this.push({ topic: "phoenix", event: "heartbeat", payload: {}, ref });
    let onMsgRef = this.onMessage((msg) => {
      if (msg.ref === ref) {
        this.off([onMsgRef]);
        callback(Date.now() - startTime);
      }
    });
    return true;
  }
  /**
   * @private
   */
  clearHeartbeats() {
    clearTimeout(this.heartbeatTimer);
    clearTimeout(this.heartbeatTimeoutTimer);
  }
  onConnOpen() {
    if (this.hasLogger())
      this.log("transport", `connected to ${this.endPointURL()}`);
    this.closeWasClean = false;
    this.establishedConnections++;
    this.flushSendBuffer();
    this.reconnectTimer.reset();
    this.resetHeartbeat();
    this.stateChangeCallbacks.open.forEach(([, callback]) => callback());
  }
  /**
   * @private
   */
  heartbeatTimeout() {
    if (this.pendingHeartbeatRef) {
      this.pendingHeartbeatRef = null;
      if (this.hasLogger()) {
        this.log("transport", "heartbeat timeout. Attempting to re-establish connection");
      }
      this.triggerChanError();
      this.closeWasClean = false;
      this.teardown(() => this.reconnectTimer.scheduleTimeout(), WS_CLOSE_NORMAL, "heartbeat timeout");
    }
  }
  resetHeartbeat() {
    if (this.conn && this.conn.skipHeartbeat) {
      return;
    }
    this.pendingHeartbeatRef = null;
    this.clearHeartbeats();
    this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);
  }
  teardown(callback, code, reason) {
    if (!this.conn) {
      return callback && callback();
    }
    this.waitForBufferDone(() => {
      if (this.conn) {
        if (code) {
          this.conn.close(code, reason || "");
        } else {
          this.conn.close();
        }
      }
      this.waitForSocketClosed(() => {
        if (this.conn) {
          this.conn.onopen = function() {
          };
          this.conn.onerror = function() {
          };
          this.conn.onmessage = function() {
          };
          this.conn.onclose = function() {
          };
          this.conn = null;
        }
        callback && callback();
      });
    });
  }
  waitForBufferDone(callback, tries = 1) {
    if (tries === 5 || !this.conn || !this.conn.bufferedAmount) {
      callback();
      return;
    }
    setTimeout(() => {
      this.waitForBufferDone(callback, tries + 1);
    }, 150 * tries);
  }
  waitForSocketClosed(callback, tries = 1) {
    if (tries === 5 || !this.conn || this.conn.readyState === SOCKET_STATES.closed) {
      callback();
      return;
    }
    setTimeout(() => {
      this.waitForSocketClosed(callback, tries + 1);
    }, 150 * tries);
  }
  onConnClose(event) {
    let closeCode = event && event.code;
    if (this.hasLogger())
      this.log("transport", "close", event);
    this.triggerChanError();
    this.clearHeartbeats();
    if (!this.closeWasClean && closeCode !== 1e3) {
      this.reconnectTimer.scheduleTimeout();
    }
    this.stateChangeCallbacks.close.forEach(([, callback]) => callback(event));
  }
  /**
   * @private
   */
  onConnError(error) {
    if (this.hasLogger())
      this.log("transport", error);
    let transportBefore = this.transport;
    let establishedBefore = this.establishedConnections;
    this.stateChangeCallbacks.error.forEach(([, callback]) => {
      callback(error, transportBefore, establishedBefore);
    });
    if (transportBefore === this.transport || establishedBefore > 0) {
      this.triggerChanError();
    }
  }
  /**
   * @private
   */
  triggerChanError() {
    this.channels.forEach((channel) => {
      if (!(channel.isErrored() || channel.isLeaving() || channel.isClosed())) {
        channel.trigger(CHANNEL_EVENTS.error);
      }
    });
  }
  /**
   * @returns {string}
   */
  connectionState() {
    switch (this.conn && this.conn.readyState) {
      case SOCKET_STATES.connecting:
        return "connecting";
      case SOCKET_STATES.open:
        return "open";
      case SOCKET_STATES.closing:
        return "closing";
      default:
        return "closed";
    }
  }
  /**
   * @returns {boolean}
   */
  isConnected() {
    return this.connectionState() === "open";
  }
  /**
   * @private
   *
   * @param {Channel}
   */
  remove(channel) {
    this.off(channel.stateChangeRefs);
    this.channels = this.channels.filter((c) => c.joinRef() !== channel.joinRef());
  }
  /**
   * Removes `onOpen`, `onClose`, `onError,` and `onMessage` registrations.
   *
   * @param {refs} - list of refs returned by calls to
   *                 `onOpen`, `onClose`, `onError,` and `onMessage`
   */
  off(refs) {
    for (let key in this.stateChangeCallbacks) {
      this.stateChangeCallbacks[key] = this.stateChangeCallbacks[key].filter(([ref]) => {
        return refs.indexOf(ref) === -1;
      });
    }
  }
  /**
   * Initiates a new channel for the given topic
   *
   * @param {string} topic
   * @param {Object} chanParams - Parameters for the channel
   * @returns {Channel}
   */
  channel(topic, chanParams = {}) {
    let chan = new Channel(topic, chanParams, this);
    this.channels.push(chan);
    return chan;
  }
  /**
   * @param {Object} data
   */
  push(data) {
    if (this.hasLogger()) {
      let { topic, event, payload, ref, join_ref } = data;
      this.log("push", `${topic} ${event} (${join_ref}, ${ref})`, payload);
    }
    if (this.isConnected()) {
      this.encode(data, (result) => this.conn.send(result));
    } else {
      this.sendBuffer.push(() => this.encode(data, (result) => this.conn.send(result)));
    }
  }
  /**
   * Return the next message ref, accounting for overflows
   * @returns {string}
   */
  makeRef() {
    let newRef = this.ref + 1;
    if (newRef === this.ref) {
      this.ref = 0;
    } else {
      this.ref = newRef;
    }
    return this.ref.toString();
  }
  sendHeartbeat() {
    if (this.pendingHeartbeatRef && !this.isConnected()) {
      return;
    }
    this.pendingHeartbeatRef = this.makeRef();
    this.push({ topic: "phoenix", event: "heartbeat", payload: {}, ref: this.pendingHeartbeatRef });
    this.heartbeatTimeoutTimer = setTimeout(() => this.heartbeatTimeout(), this.heartbeatIntervalMs);
  }
  flushSendBuffer() {
    if (this.isConnected() && this.sendBuffer.length > 0) {
      this.sendBuffer.forEach((callback) => callback());
      this.sendBuffer = [];
    }
  }
  onConnMessage(rawMessage) {
    this.decode(rawMessage.data, (msg) => {
      let { topic, event, payload, ref, join_ref } = msg;
      if (ref && ref === this.pendingHeartbeatRef) {
        this.clearHeartbeats();
        this.pendingHeartbeatRef = null;
        this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);
      }
      if (this.hasLogger())
        this.log("receive", `${payload.status || ""} ${topic} ${event} ${ref && "(" + ref + ")" || ""}`, payload);
      for (let i = 0; i < this.channels.length; i++) {
        const channel = this.channels[i];
        if (!channel.isMember(topic, event, payload, join_ref)) {
          continue;
        }
        channel.trigger(event, payload, ref, join_ref);
      }
      for (let i = 0; i < this.stateChangeCallbacks.message.length; i++) {
        let [, callback] = this.stateChangeCallbacks.message[i];
        callback(msg);
      }
    });
  }
  leaveOpenTopic(topic) {
    let dupChannel = this.channels.find((c) => c.topic === topic && (c.isJoined() || c.isJoining()));
    if (dupChannel) {
      if (this.hasLogger())
        this.log("transport", `leaving duplicate topic "${topic}"`);
      dupChannel.leave();
    }
  }
};

// ../deps/phoenix_live_view/priv/static/phoenix_live_view.esm.js
var CONSECUTIVE_RELOADS = "consecutive-reloads";
var MAX_RELOADS = 10;
var RELOAD_JITTER_MIN = 5e3;
var RELOAD_JITTER_MAX = 1e4;
var FAILSAFE_JITTER = 3e4;
var PHX_EVENT_CLASSES = [
  "phx-click-loading",
  "phx-change-loading",
  "phx-submit-loading",
  "phx-keydown-loading",
  "phx-keyup-loading",
  "phx-blur-loading",
  "phx-focus-loading"
];
var PHX_COMPONENT = "data-phx-component";
var PHX_LIVE_LINK = "data-phx-link";
var PHX_TRACK_STATIC = "track-static";
var PHX_LINK_STATE = "data-phx-link-state";
var PHX_REF = "data-phx-ref";
var PHX_REF_SRC = "data-phx-ref-src";
var PHX_TRACK_UPLOADS = "track-uploads";
var PHX_UPLOAD_REF = "data-phx-upload-ref";
var PHX_PREFLIGHTED_REFS = "data-phx-preflighted-refs";
var PHX_DONE_REFS = "data-phx-done-refs";
var PHX_DROP_TARGET = "drop-target";
var PHX_ACTIVE_ENTRY_REFS = "data-phx-active-refs";
var PHX_LIVE_FILE_UPDATED = "phx:live-file:updated";
var PHX_SKIP = "data-phx-skip";
var PHX_PRUNE = "data-phx-prune";
var PHX_PAGE_LOADING = "page-loading";
var PHX_CONNECTED_CLASS = "phx-connected";
var PHX_LOADING_CLASS = "phx-loading";
var PHX_NO_FEEDBACK_CLASS = "phx-no-feedback";
var PHX_ERROR_CLASS = "phx-error";
var PHX_CLIENT_ERROR_CLASS = "phx-client-error";
var PHX_SERVER_ERROR_CLASS = "phx-server-error";
var PHX_PARENT_ID = "data-phx-parent-id";
var PHX_MAIN = "data-phx-main";
var PHX_ROOT_ID = "data-phx-root-id";
var PHX_VIEWPORT_TOP = "viewport-top";
var PHX_VIEWPORT_BOTTOM = "viewport-bottom";
var PHX_TRIGGER_ACTION = "trigger-action";
var PHX_FEEDBACK_FOR = "feedback-for";
var PHX_HAS_FOCUSED = "phx-has-focused";
var FOCUSABLE_INPUTS = ["text", "textarea", "number", "email", "password", "search", "tel", "url", "date", "time", "datetime-local", "color", "range"];
var CHECKABLE_INPUTS = ["checkbox", "radio"];
var PHX_HAS_SUBMITTED = "phx-has-submitted";
var PHX_SESSION = "data-phx-session";
var PHX_VIEW_SELECTOR = `[${PHX_SESSION}]`;
var PHX_STICKY = "data-phx-sticky";
var PHX_STATIC = "data-phx-static";
var PHX_READONLY = "data-phx-readonly";
var PHX_DISABLED = "data-phx-disabled";
var PHX_DISABLE_WITH = "disable-with";
var PHX_DISABLE_WITH_RESTORE = "data-phx-disable-with-restore";
var PHX_HOOK = "hook";
var PHX_DEBOUNCE = "debounce";
var PHX_THROTTLE = "throttle";
var PHX_UPDATE = "update";
var PHX_STREAM = "stream";
var PHX_STREAM_REF = "data-phx-stream";
var PHX_KEY = "key";
var PHX_PRIVATE = "phxPrivate";
var PHX_AUTO_RECOVER = "auto-recover";
var PHX_LV_DEBUG = "phx:live-socket:debug";
var PHX_LV_PROFILE = "phx:live-socket:profiling";
var PHX_LV_LATENCY_SIM = "phx:live-socket:latency-sim";
var PHX_PROGRESS = "progress";
var PHX_MOUNTED = "mounted";
var LOADER_TIMEOUT = 1;
var BEFORE_UNLOAD_LOADER_TIMEOUT = 200;
var BINDING_PREFIX = "phx-";
var PUSH_TIMEOUT = 3e4;
var DEBOUNCE_TRIGGER = "debounce-trigger";
var THROTTLED = "throttled";
var DEBOUNCE_PREV_KEY = "debounce-prev-key";
var DEFAULTS = {
  debounce: 300,
  throttle: 300
};
var DYNAMICS = "d";
var STATIC = "s";
var COMPONENTS = "c";
var EVENTS = "e";
var REPLY = "r";
var TITLE = "t";
var TEMPLATES = "p";
var STREAM = "stream";
var EntryUploader = class {
  constructor(entry, chunkSize, liveSocket2) {
    this.liveSocket = liveSocket2;
    this.entry = entry;
    this.offset = 0;
    this.chunkSize = chunkSize;
    this.chunkTimer = null;
    this.errored = false;
    this.uploadChannel = liveSocket2.channel(`lvu:${entry.ref}`, { token: entry.metadata() });
  }
  error(reason) {
    if (this.errored) {
      return;
    }
    this.errored = true;
    clearTimeout(this.chunkTimer);
    this.entry.error(reason);
  }
  upload() {
    this.uploadChannel.onError((reason) => this.error(reason));
    this.uploadChannel.join().receive("ok", (_data) => this.readNextChunk()).receive("error", (reason) => this.error(reason));
  }
  isDone() {
    return this.offset >= this.entry.file.size;
  }
  readNextChunk() {
    let reader = new window.FileReader();
    let blob = this.entry.file.slice(this.offset, this.chunkSize + this.offset);
    reader.onload = (e) => {
      if (e.target.error === null) {
        this.offset += e.target.result.byteLength;
        this.pushChunk(e.target.result);
      } else {
        return logError("Read error: " + e.target.error);
      }
    };
    reader.readAsArrayBuffer(blob);
  }
  pushChunk(chunk) {
    if (!this.uploadChannel.isJoined()) {
      return;
    }
    this.uploadChannel.push("chunk", chunk).receive("ok", () => {
      this.entry.progress(this.offset / this.entry.file.size * 100);
      if (!this.isDone()) {
        this.chunkTimer = setTimeout(() => this.readNextChunk(), this.liveSocket.getLatencySim() || 0);
      }
    }).receive("error", ({ reason }) => this.error(reason));
  }
};
var logError = (msg, obj) => console.error && console.error(msg, obj);
var isCid = (cid) => {
  let type = typeof cid;
  return type === "number" || type === "string" && /^(0|[1-9]\d*)$/.test(cid);
};
function detectDuplicateIds() {
  let ids = /* @__PURE__ */ new Set();
  let elems = document.querySelectorAll("*[id]");
  for (let i = 0, len = elems.length; i < len; i++) {
    if (ids.has(elems[i].id)) {
      console.error(`Multiple IDs detected: ${elems[i].id}. Ensure unique element ids.`);
    } else {
      ids.add(elems[i].id);
    }
  }
}
var debug = (view, kind, msg, obj) => {
  if (view.liveSocket.isDebugEnabled()) {
    console.log(`${view.id} ${kind}: ${msg} - `, obj);
  }
};
var closure2 = (val) => typeof val === "function" ? val : function() {
  return val;
};
var clone = (obj) => {
  return JSON.parse(JSON.stringify(obj));
};
var closestPhxBinding = (el, binding, borderEl) => {
  do {
    if (el.matches(`[${binding}]`) && !el.disabled) {
      return el;
    }
    el = el.parentElement || el.parentNode;
  } while (el !== null && el.nodeType === 1 && !(borderEl && borderEl.isSameNode(el) || el.matches(PHX_VIEW_SELECTOR)));
  return null;
};
var isObject = (obj) => {
  return obj !== null && typeof obj === "object" && !(obj instanceof Array);
};
var isEqualObj = (obj1, obj2) => JSON.stringify(obj1) === JSON.stringify(obj2);
var isEmpty = (obj) => {
  for (let x in obj) {
    return false;
  }
  return true;
};
var maybe = (el, callback) => el && callback(el);
var channelUploader = function(entries, onError, resp, liveSocket2) {
  entries.forEach((entry) => {
    let entryUploader = new EntryUploader(entry, resp.config.chunk_size, liveSocket2);
    entryUploader.upload();
  });
};
var Browser = {
  canPushState() {
    return typeof history.pushState !== "undefined";
  },
  dropLocal(localStorage, namespace, subkey) {
    return localStorage.removeItem(this.localKey(namespace, subkey));
  },
  updateLocal(localStorage, namespace, subkey, initial, func) {
    let current = this.getLocal(localStorage, namespace, subkey);
    let key = this.localKey(namespace, subkey);
    let newVal = current === null ? initial : func(current);
    localStorage.setItem(key, JSON.stringify(newVal));
    return newVal;
  },
  getLocal(localStorage, namespace, subkey) {
    return JSON.parse(localStorage.getItem(this.localKey(namespace, subkey)));
  },
  updateCurrentState(callback) {
    if (!this.canPushState()) {
      return;
    }
    history.replaceState(callback(history.state || {}), "", window.location.href);
  },
  pushState(kind, meta, to) {
    if (this.canPushState()) {
      if (to !== window.location.href) {
        if (meta.type == "redirect" && meta.scroll) {
          let currentState = history.state || {};
          currentState.scroll = meta.scroll;
          history.replaceState(currentState, "", window.location.href);
        }
        delete meta.scroll;
        history[kind + "State"](meta, "", to || null);
        let hashEl = this.getHashTargetEl(window.location.hash);
        if (hashEl) {
          hashEl.scrollIntoView();
        } else if (meta.type === "redirect") {
          window.scroll(0, 0);
        }
      }
    } else {
      this.redirect(to);
    }
  },
  setCookie(name, value) {
    document.cookie = `${name}=${value}`;
  },
  getCookie(name) {
    return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${name}s*=s*([^;]*).*$)|^.*$`), "$1");
  },
  redirect(toURL, flash) {
    if (flash) {
      Browser.setCookie("__phoenix_flash__", flash + "; max-age=60000; path=/");
    }
    window.location = toURL;
  },
  localKey(namespace, subkey) {
    return `${namespace}-${subkey}`;
  },
  getHashTargetEl(maybeHash) {
    let hash = maybeHash.toString().substring(1);
    if (hash === "") {
      return;
    }
    return document.getElementById(hash) || document.querySelector(`a[name="${hash}"]`);
  }
};
var browser_default = Browser;
var DOM = {
  byId(id) {
    return document.getElementById(id) || logError(`no id found for ${id}`);
  },
  removeClass(el, className) {
    el.classList.remove(className);
    if (el.classList.length === 0) {
      el.removeAttribute("class");
    }
  },
  all(node, query, callback) {
    if (!node) {
      return [];
    }
    let array = Array.from(node.querySelectorAll(query));
    return callback ? array.forEach(callback) : array;
  },
  childNodeLength(html) {
    let template = document.createElement("template");
    template.innerHTML = html;
    return template.content.childElementCount;
  },
  isUploadInput(el) {
    return el.type === "file" && el.getAttribute(PHX_UPLOAD_REF) !== null;
  },
  isAutoUpload(inputEl) {
    return inputEl.hasAttribute("data-phx-auto-upload");
  },
  findUploadInputs(node) {
    return this.all(node, `input[type="file"][${PHX_UPLOAD_REF}]`);
  },
  findComponentNodeList(node, cid) {
    return this.filterWithinSameLiveView(this.all(node, `[${PHX_COMPONENT}="${cid}"]`), node);
  },
  isPhxDestroyed(node) {
    return node.id && DOM.private(node, "destroyed") ? true : false;
  },
  wantsNewTab(e) {
    let wantsNewTab = e.ctrlKey || e.shiftKey || e.metaKey || e.button && e.button === 1;
    let isDownload = e.target instanceof HTMLAnchorElement && e.target.hasAttribute("download");
    let isTargetBlank = e.target.hasAttribute("target") && e.target.getAttribute("target").toLowerCase() === "_blank";
    return wantsNewTab || isTargetBlank || isDownload;
  },
  isUnloadableFormSubmit(e) {
    let isDialogSubmit = e.target && e.target.getAttribute("method") === "dialog" || e.submitter && e.submitter.getAttribute("formmethod") === "dialog";
    if (isDialogSubmit) {
      return false;
    } else {
      return !e.defaultPrevented && !this.wantsNewTab(e);
    }
  },
  isNewPageClick(e, currentLocation) {
    let href = e.target instanceof HTMLAnchorElement ? e.target.getAttribute("href") : null;
    let url;
    if (e.defaultPrevented || href === null || this.wantsNewTab(e)) {
      return false;
    }
    if (href.startsWith("mailto:") || href.startsWith("tel:")) {
      return false;
    }
    if (e.target.isContentEditable) {
      return false;
    }
    try {
      url = new URL(href);
    } catch (e2) {
      try {
        url = new URL(href, currentLocation);
      } catch (e3) {
        return true;
      }
    }
    if (url.host === currentLocation.host && url.protocol === currentLocation.protocol) {
      if (url.pathname === currentLocation.pathname && url.search === currentLocation.search) {
        return url.hash === "" && !url.href.endsWith("#");
      }
    }
    return url.protocol.startsWith("http");
  },
  markPhxChildDestroyed(el) {
    if (this.isPhxChild(el)) {
      el.setAttribute(PHX_SESSION, "");
    }
    this.putPrivate(el, "destroyed", true);
  },
  findPhxChildrenInFragment(html, parentId) {
    let template = document.createElement("template");
    template.innerHTML = html;
    return this.findPhxChildren(template.content, parentId);
  },
  isIgnored(el, phxUpdate) {
    return (el.getAttribute(phxUpdate) || el.getAttribute("data-phx-update")) === "ignore";
  },
  isPhxUpdate(el, phxUpdate, updateTypes) {
    return el.getAttribute && updateTypes.indexOf(el.getAttribute(phxUpdate)) >= 0;
  },
  findPhxSticky(el) {
    return this.all(el, `[${PHX_STICKY}]`);
  },
  findPhxChildren(el, parentId) {
    return this.all(el, `${PHX_VIEW_SELECTOR}[${PHX_PARENT_ID}="${parentId}"]`);
  },
  findParentCIDs(node, cids) {
    let initial = new Set(cids);
    let parentCids = cids.reduce((acc, cid) => {
      let selector = `[${PHX_COMPONENT}="${cid}"] [${PHX_COMPONENT}]`;
      this.filterWithinSameLiveView(this.all(node, selector), node).map((el) => parseInt(el.getAttribute(PHX_COMPONENT))).forEach((childCID) => acc.delete(childCID));
      return acc;
    }, initial);
    return parentCids.size === 0 ? new Set(cids) : parentCids;
  },
  filterWithinSameLiveView(nodes, parent) {
    if (parent.querySelector(PHX_VIEW_SELECTOR)) {
      return nodes.filter((el) => this.withinSameLiveView(el, parent));
    } else {
      return nodes;
    }
  },
  withinSameLiveView(node, parent) {
    while (node = node.parentNode) {
      if (node.isSameNode(parent)) {
        return true;
      }
      if (node.getAttribute(PHX_SESSION) !== null) {
        return false;
      }
    }
  },
  private(el, key) {
    return el[PHX_PRIVATE] && el[PHX_PRIVATE][key];
  },
  deletePrivate(el, key) {
    el[PHX_PRIVATE] && delete el[PHX_PRIVATE][key];
  },
  putPrivate(el, key, value) {
    if (!el[PHX_PRIVATE]) {
      el[PHX_PRIVATE] = {};
    }
    el[PHX_PRIVATE][key] = value;
  },
  updatePrivate(el, key, defaultVal, updateFunc) {
    let existing = this.private(el, key);
    if (existing === void 0) {
      this.putPrivate(el, key, updateFunc(defaultVal));
    } else {
      this.putPrivate(el, key, updateFunc(existing));
    }
  },
  copyPrivates(target, source) {
    if (source[PHX_PRIVATE]) {
      target[PHX_PRIVATE] = source[PHX_PRIVATE];
    }
  },
  putTitle(str) {
    let titleEl = document.querySelector("title");
    if (titleEl) {
      let { prefix, suffix } = titleEl.dataset;
      document.title = `${prefix || ""}${str}${suffix || ""}`;
    } else {
      document.title = str;
    }
  },
  debounce(el, event, phxDebounce, defaultDebounce, phxThrottle, defaultThrottle, asyncFilter, callback) {
    let debounce = el.getAttribute(phxDebounce);
    let throttle = el.getAttribute(phxThrottle);
    if (debounce === "") {
      debounce = defaultDebounce;
    }
    if (throttle === "") {
      throttle = defaultThrottle;
    }
    let value = debounce || throttle;
    switch (value) {
      case null:
        return callback();
      case "blur":
        if (this.once(el, "debounce-blur")) {
          el.addEventListener("blur", () => callback());
        }
        return;
      default:
        let timeout = parseInt(value);
        let trigger = () => throttle ? this.deletePrivate(el, THROTTLED) : callback();
        let currentCycle = this.incCycle(el, DEBOUNCE_TRIGGER, trigger);
        if (isNaN(timeout)) {
          return logError(`invalid throttle/debounce value: ${value}`);
        }
        if (throttle) {
          let newKeyDown = false;
          if (event.type === "keydown") {
            let prevKey = this.private(el, DEBOUNCE_PREV_KEY);
            this.putPrivate(el, DEBOUNCE_PREV_KEY, event.key);
            newKeyDown = prevKey !== event.key;
          }
          if (!newKeyDown && this.private(el, THROTTLED)) {
            return false;
          } else {
            callback();
            this.putPrivate(el, THROTTLED, true);
            setTimeout(() => {
              if (asyncFilter()) {
                this.triggerCycle(el, DEBOUNCE_TRIGGER);
              }
            }, timeout);
          }
        } else {
          setTimeout(() => {
            if (asyncFilter()) {
              this.triggerCycle(el, DEBOUNCE_TRIGGER, currentCycle);
            }
          }, timeout);
        }
        let form = el.form;
        if (form && this.once(form, "bind-debounce")) {
          form.addEventListener("submit", () => {
            Array.from(new FormData(form).entries(), ([name]) => {
              let input = form.querySelector(`[name="${name}"]`);
              this.incCycle(input, DEBOUNCE_TRIGGER);
              this.deletePrivate(input, THROTTLED);
            });
          });
        }
        if (this.once(el, "bind-debounce")) {
          el.addEventListener("blur", () => this.triggerCycle(el, DEBOUNCE_TRIGGER));
        }
    }
  },
  triggerCycle(el, key, currentCycle) {
    let [cycle, trigger] = this.private(el, key);
    if (!currentCycle) {
      currentCycle = cycle;
    }
    if (currentCycle === cycle) {
      this.incCycle(el, key);
      trigger();
    }
  },
  once(el, key) {
    if (this.private(el, key) === true) {
      return false;
    }
    this.putPrivate(el, key, true);
    return true;
  },
  incCycle(el, key, trigger = function() {
  }) {
    let [currentCycle] = this.private(el, key) || [0, trigger];
    currentCycle++;
    this.putPrivate(el, key, [currentCycle, trigger]);
    return currentCycle;
  },
  maybeAddPrivateHooks(el, phxViewportTop, phxViewportBottom) {
    if (el.hasAttribute && (el.hasAttribute(phxViewportTop) || el.hasAttribute(phxViewportBottom))) {
      el.setAttribute("data-phx-hook", "Phoenix.InfiniteScroll");
    }
  },
  maybeHideFeedback(container, input, phxFeedbackFor) {
    if (!(this.private(input, PHX_HAS_FOCUSED) || this.private(input, PHX_HAS_SUBMITTED))) {
      let feedbacks = [input.name];
      if (input.name.endsWith("[]")) {
        feedbacks.push(input.name.slice(0, -2));
      }
      let selector = feedbacks.map((f) => `[${phxFeedbackFor}="${f}"]`).join(", ");
      DOM.all(container, selector, (el) => el.classList.add(PHX_NO_FEEDBACK_CLASS));
    }
  },
  resetForm(form, phxFeedbackFor) {
    Array.from(form.elements).forEach((input) => {
      let query = `[${phxFeedbackFor}="${input.id}"],
                   [${phxFeedbackFor}="${input.name}"],
                   [${phxFeedbackFor}="${input.name.replace(/\[\]$/, "")}"]`;
      this.deletePrivate(input, PHX_HAS_FOCUSED);
      this.deletePrivate(input, PHX_HAS_SUBMITTED);
      this.all(document, query, (feedbackEl) => {
        feedbackEl.classList.add(PHX_NO_FEEDBACK_CLASS);
      });
    });
  },
  showError(inputEl, phxFeedbackFor) {
    if (inputEl.id || inputEl.name) {
      this.all(inputEl.form, `[${phxFeedbackFor}="${inputEl.id}"], [${phxFeedbackFor}="${inputEl.name}"]`, (el) => {
        this.removeClass(el, PHX_NO_FEEDBACK_CLASS);
      });
    }
  },
  isPhxChild(node) {
    return node.getAttribute && node.getAttribute(PHX_PARENT_ID);
  },
  isPhxSticky(node) {
    return node.getAttribute && node.getAttribute(PHX_STICKY) !== null;
  },
  firstPhxChild(el) {
    return this.isPhxChild(el) ? el : this.all(el, `[${PHX_PARENT_ID}]`)[0];
  },
  dispatchEvent(target, name, opts = {}) {
    let bubbles = opts.bubbles === void 0 ? true : !!opts.bubbles;
    let eventOpts = { bubbles, cancelable: true, detail: opts.detail || {} };
    let event = name === "click" ? new MouseEvent("click", eventOpts) : new CustomEvent(name, eventOpts);
    target.dispatchEvent(event);
  },
  cloneNode(node, html) {
    if (typeof html === "undefined") {
      return node.cloneNode(true);
    } else {
      let cloned = node.cloneNode(false);
      cloned.innerHTML = html;
      return cloned;
    }
  },
  mergeAttrs(target, source, opts = {}) {
    let exclude = opts.exclude || [];
    let isIgnored = opts.isIgnored;
    let sourceAttrs = source.attributes;
    for (let i = sourceAttrs.length - 1; i >= 0; i--) {
      let name = sourceAttrs[i].name;
      if (exclude.indexOf(name) < 0) {
        target.setAttribute(name, source.getAttribute(name));
      }
    }
    let targetAttrs = target.attributes;
    for (let i = targetAttrs.length - 1; i >= 0; i--) {
      let name = targetAttrs[i].name;
      if (isIgnored) {
        if (name.startsWith("data-") && !source.hasAttribute(name)) {
          target.removeAttribute(name);
        }
      } else {
        if (!source.hasAttribute(name)) {
          target.removeAttribute(name);
        }
      }
    }
  },
  mergeFocusedInput(target, source) {
    if (!(target instanceof HTMLSelectElement)) {
      DOM.mergeAttrs(target, source, { exclude: ["value"] });
    }
    if (source.readOnly) {
      target.setAttribute("readonly", true);
    } else {
      target.removeAttribute("readonly");
    }
  },
  hasSelectionRange(el) {
    return el.setSelectionRange && (el.type === "text" || el.type === "textarea");
  },
  restoreFocus(focused, selectionStart, selectionEnd) {
    if (!DOM.isTextualInput(focused)) {
      return;
    }
    let wasFocused = focused.matches(":focus");
    if (focused.readOnly) {
      focused.blur();
    }
    if (!wasFocused) {
      focused.focus();
    }
    if (this.hasSelectionRange(focused)) {
      focused.setSelectionRange(selectionStart, selectionEnd);
    }
  },
  isFormInput(el) {
    return /^(?:input|select|textarea)$/i.test(el.tagName) && el.type !== "button";
  },
  syncAttrsToProps(el) {
    if (el instanceof HTMLInputElement && CHECKABLE_INPUTS.indexOf(el.type.toLocaleLowerCase()) >= 0) {
      el.checked = el.getAttribute("checked") !== null;
    }
  },
  isTextualInput(el) {
    return FOCUSABLE_INPUTS.indexOf(el.type) >= 0;
  },
  isNowTriggerFormExternal(el, phxTriggerExternal) {
    return el.getAttribute && el.getAttribute(phxTriggerExternal) !== null;
  },
  syncPendingRef(fromEl, toEl, disableWith) {
    let ref = fromEl.getAttribute(PHX_REF);
    if (ref === null) {
      return true;
    }
    let refSrc = fromEl.getAttribute(PHX_REF_SRC);
    if (DOM.isFormInput(fromEl) || fromEl.getAttribute(disableWith) !== null) {
      if (DOM.isUploadInput(fromEl)) {
        DOM.mergeAttrs(fromEl, toEl, { isIgnored: true });
      }
      DOM.putPrivate(fromEl, PHX_REF, toEl);
      return false;
    } else {
      PHX_EVENT_CLASSES.forEach((className) => {
        fromEl.classList.contains(className) && toEl.classList.add(className);
      });
      toEl.setAttribute(PHX_REF, ref);
      toEl.setAttribute(PHX_REF_SRC, refSrc);
      return true;
    }
  },
  cleanChildNodes(container, phxUpdate) {
    if (DOM.isPhxUpdate(container, phxUpdate, ["append", "prepend"])) {
      let toRemove = [];
      container.childNodes.forEach((childNode) => {
        if (!childNode.id) {
          let isEmptyTextNode = childNode.nodeType === Node.TEXT_NODE && childNode.nodeValue.trim() === "";
          if (!isEmptyTextNode) {
            logError(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(childNode.outerHTML || childNode.nodeValue).trim()}"

`);
          }
          toRemove.push(childNode);
        }
      });
      toRemove.forEach((childNode) => childNode.remove());
    }
  },
  replaceRootContainer(container, tagName, attrs) {
    let retainedAttrs = /* @__PURE__ */ new Set(["id", PHX_SESSION, PHX_STATIC, PHX_MAIN, PHX_ROOT_ID]);
    if (container.tagName.toLowerCase() === tagName.toLowerCase()) {
      Array.from(container.attributes).filter((attr) => !retainedAttrs.has(attr.name.toLowerCase())).forEach((attr) => container.removeAttribute(attr.name));
      Object.keys(attrs).filter((name) => !retainedAttrs.has(name.toLowerCase())).forEach((attr) => container.setAttribute(attr, attrs[attr]));
      return container;
    } else {
      let newContainer = document.createElement(tagName);
      Object.keys(attrs).forEach((attr) => newContainer.setAttribute(attr, attrs[attr]));
      retainedAttrs.forEach((attr) => newContainer.setAttribute(attr, container.getAttribute(attr)));
      newContainer.innerHTML = container.innerHTML;
      container.replaceWith(newContainer);
      return newContainer;
    }
  },
  getSticky(el, name, defaultVal) {
    let op = (DOM.private(el, "sticky") || []).find(([existingName]) => name === existingName);
    if (op) {
      let [_name, _op, stashedResult] = op;
      return stashedResult;
    } else {
      return typeof defaultVal === "function" ? defaultVal() : defaultVal;
    }
  },
  deleteSticky(el, name) {
    this.updatePrivate(el, "sticky", [], (ops) => {
      return ops.filter(([existingName, _]) => existingName !== name);
    });
  },
  putSticky(el, name, op) {
    let stashedResult = op(el);
    this.updatePrivate(el, "sticky", [], (ops) => {
      let existingIndex = ops.findIndex(([existingName]) => name === existingName);
      if (existingIndex >= 0) {
        ops[existingIndex] = [name, op, stashedResult];
      } else {
        ops.push([name, op, stashedResult]);
      }
      return ops;
    });
  },
  applyStickyOperations(el) {
    let ops = DOM.private(el, "sticky");
    if (!ops) {
      return;
    }
    ops.forEach(([name, op, _stashed]) => this.putSticky(el, name, op));
  }
};
var dom_default = DOM;
var UploadEntry = class {
  static isActive(fileEl, file) {
    let isNew = file._phxRef === void 0;
    let activeRefs = fileEl.getAttribute(PHX_ACTIVE_ENTRY_REFS).split(",");
    let isActive = activeRefs.indexOf(LiveUploader.genFileRef(file)) >= 0;
    return file.size > 0 && (isNew || isActive);
  }
  static isPreflighted(fileEl, file) {
    let preflightedRefs = fileEl.getAttribute(PHX_PREFLIGHTED_REFS).split(",");
    let isPreflighted = preflightedRefs.indexOf(LiveUploader.genFileRef(file)) >= 0;
    return isPreflighted && this.isActive(fileEl, file);
  }
  constructor(fileEl, file, view) {
    this.ref = LiveUploader.genFileRef(file);
    this.fileEl = fileEl;
    this.file = file;
    this.view = view;
    this.meta = null;
    this._isCancelled = false;
    this._isDone = false;
    this._progress = 0;
    this._lastProgressSent = -1;
    this._onDone = function() {
    };
    this._onElUpdated = this.onElUpdated.bind(this);
    this.fileEl.addEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
  }
  metadata() {
    return this.meta;
  }
  progress(progress) {
    this._progress = Math.floor(progress);
    if (this._progress > this._lastProgressSent) {
      if (this._progress >= 100) {
        this._progress = 100;
        this._lastProgressSent = 100;
        this._isDone = true;
        this.view.pushFileProgress(this.fileEl, this.ref, 100, () => {
          LiveUploader.untrackFile(this.fileEl, this.file);
          this._onDone();
        });
      } else {
        this._lastProgressSent = this._progress;
        this.view.pushFileProgress(this.fileEl, this.ref, this._progress);
      }
    }
  }
  cancel() {
    this._isCancelled = true;
    this._isDone = true;
    this._onDone();
  }
  isDone() {
    return this._isDone;
  }
  error(reason = "failed") {
    this.fileEl.removeEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
    this.view.pushFileProgress(this.fileEl, this.ref, { error: reason });
    if (!dom_default.isAutoUpload(this.fileEl)) {
      LiveUploader.clearFiles(this.fileEl);
    }
  }
  onDone(callback) {
    this._onDone = () => {
      this.fileEl.removeEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
      callback();
    };
  }
  onElUpdated() {
    let activeRefs = this.fileEl.getAttribute(PHX_ACTIVE_ENTRY_REFS).split(",");
    if (activeRefs.indexOf(this.ref) === -1) {
      this.cancel();
    }
  }
  toPreflightPayload() {
    return {
      last_modified: this.file.lastModified,
      name: this.file.name,
      relative_path: this.file.webkitRelativePath,
      size: this.file.size,
      type: this.file.type,
      ref: this.ref,
      meta: typeof this.file.meta === "function" ? this.file.meta() : void 0
    };
  }
  uploader(uploaders) {
    if (this.meta.uploader) {
      let callback = uploaders[this.meta.uploader] || logError(`no uploader configured for ${this.meta.uploader}`);
      return { name: this.meta.uploader, callback };
    } else {
      return { name: "channel", callback: channelUploader };
    }
  }
  zipPostFlight(resp) {
    this.meta = resp.entries[this.ref];
    if (!this.meta) {
      logError(`no preflight upload response returned with ref ${this.ref}`, { input: this.fileEl, response: resp });
    }
  }
};
var liveUploaderFileRef = 0;
var LiveUploader = class {
  static genFileRef(file) {
    let ref = file._phxRef;
    if (ref !== void 0) {
      return ref;
    } else {
      file._phxRef = (liveUploaderFileRef++).toString();
      return file._phxRef;
    }
  }
  static getEntryDataURL(inputEl, ref, callback) {
    let file = this.activeFiles(inputEl).find((file2) => this.genFileRef(file2) === ref);
    callback(URL.createObjectURL(file));
  }
  static hasUploadsInProgress(formEl) {
    let active = 0;
    dom_default.findUploadInputs(formEl).forEach((input) => {
      if (input.getAttribute(PHX_PREFLIGHTED_REFS) !== input.getAttribute(PHX_DONE_REFS)) {
        active++;
      }
    });
    return active > 0;
  }
  static serializeUploads(inputEl) {
    let files = this.activeFiles(inputEl);
    let fileData = {};
    files.forEach((file) => {
      let entry = { path: inputEl.name };
      let uploadRef = inputEl.getAttribute(PHX_UPLOAD_REF);
      fileData[uploadRef] = fileData[uploadRef] || [];
      entry.ref = this.genFileRef(file);
      entry.last_modified = file.lastModified;
      entry.name = file.name || entry.ref;
      entry.relative_path = file.webkitRelativePath;
      entry.type = file.type;
      entry.size = file.size;
      if (typeof file.meta === "function") {
        entry.meta = file.meta();
      }
      fileData[uploadRef].push(entry);
    });
    return fileData;
  }
  static clearFiles(inputEl) {
    inputEl.value = null;
    inputEl.removeAttribute(PHX_UPLOAD_REF);
    dom_default.putPrivate(inputEl, "files", []);
  }
  static untrackFile(inputEl, file) {
    dom_default.putPrivate(inputEl, "files", dom_default.private(inputEl, "files").filter((f) => !Object.is(f, file)));
  }
  static trackFiles(inputEl, files, dataTransfer) {
    if (inputEl.getAttribute("multiple") !== null) {
      let newFiles = files.filter((file) => !this.activeFiles(inputEl).find((f) => Object.is(f, file)));
      dom_default.putPrivate(inputEl, "files", this.activeFiles(inputEl).concat(newFiles));
      inputEl.value = null;
    } else {
      if (dataTransfer && dataTransfer.files.length > 0) {
        inputEl.files = dataTransfer.files;
      }
      dom_default.putPrivate(inputEl, "files", files);
    }
  }
  static activeFileInputs(formEl) {
    let fileInputs = dom_default.findUploadInputs(formEl);
    return Array.from(fileInputs).filter((el) => el.files && this.activeFiles(el).length > 0);
  }
  static activeFiles(input) {
    return (dom_default.private(input, "files") || []).filter((f) => UploadEntry.isActive(input, f));
  }
  static inputsAwaitingPreflight(formEl) {
    let fileInputs = dom_default.findUploadInputs(formEl);
    return Array.from(fileInputs).filter((input) => this.filesAwaitingPreflight(input).length > 0);
  }
  static filesAwaitingPreflight(input) {
    return this.activeFiles(input).filter((f) => !UploadEntry.isPreflighted(input, f));
  }
  constructor(inputEl, view, onComplete) {
    this.view = view;
    this.onComplete = onComplete;
    this._entries = Array.from(LiveUploader.filesAwaitingPreflight(inputEl) || []).map((file) => new UploadEntry(inputEl, file, view));
    this.numEntriesInProgress = this._entries.length;
  }
  entries() {
    return this._entries;
  }
  initAdapterUpload(resp, onError, liveSocket2) {
    this._entries = this._entries.map((entry) => {
      entry.zipPostFlight(resp);
      entry.onDone(() => {
        this.numEntriesInProgress--;
        if (this.numEntriesInProgress === 0) {
          this.onComplete();
        }
      });
      return entry;
    });
    let groupedEntries = this._entries.reduce((acc, entry) => {
      if (!entry.meta) {
        return acc;
      }
      let { name, callback } = entry.uploader(liveSocket2.uploaders);
      acc[name] = acc[name] || { callback, entries: [] };
      acc[name].entries.push(entry);
      return acc;
    }, {});
    for (let name in groupedEntries) {
      let { callback, entries } = groupedEntries[name];
      callback(entries, onError, resp, liveSocket2);
    }
  }
};
var ARIA = {
  focusMain() {
    let target = document.querySelector("main h1, main, h1");
    if (target) {
      let origTabIndex = target.tabIndex;
      target.tabIndex = -1;
      target.focus();
      target.tabIndex = origTabIndex;
    }
  },
  anyOf(instance, classes) {
    return classes.find((name) => instance instanceof name);
  },
  isFocusable(el, interactiveOnly) {
    return el instanceof HTMLAnchorElement && el.rel !== "ignore" || el instanceof HTMLAreaElement && el.href !== void 0 || !el.disabled && this.anyOf(el, [HTMLInputElement, HTMLSelectElement, HTMLTextAreaElement, HTMLButtonElement]) || el instanceof HTMLIFrameElement || (el.tabIndex > 0 || !interactiveOnly && el.tabIndex === 0 && el.getAttribute("tabindex") !== null && el.getAttribute("aria-hidden") !== "true");
  },
  attemptFocus(el, interactiveOnly) {
    if (this.isFocusable(el, interactiveOnly)) {
      try {
        el.focus();
      } catch (e) {
      }
    }
    return !!document.activeElement && document.activeElement.isSameNode(el);
  },
  focusFirstInteractive(el) {
    let child = el.firstElementChild;
    while (child) {
      if (this.attemptFocus(child, true) || this.focusFirstInteractive(child, true)) {
        return true;
      }
      child = child.nextElementSibling;
    }
  },
  focusFirst(el) {
    let child = el.firstElementChild;
    while (child) {
      if (this.attemptFocus(child) || this.focusFirst(child)) {
        return true;
      }
      child = child.nextElementSibling;
    }
  },
  focusLast(el) {
    let child = el.lastElementChild;
    while (child) {
      if (this.attemptFocus(child) || this.focusLast(child)) {
        return true;
      }
      child = child.previousElementSibling;
    }
  }
};
var aria_default = ARIA;
var Hooks = {
  LiveFileUpload: {
    activeRefs() {
      return this.el.getAttribute(PHX_ACTIVE_ENTRY_REFS);
    },
    preflightedRefs() {
      return this.el.getAttribute(PHX_PREFLIGHTED_REFS);
    },
    mounted() {
      this.preflightedWas = this.preflightedRefs();
    },
    updated() {
      let newPreflights = this.preflightedRefs();
      if (this.preflightedWas !== newPreflights) {
        this.preflightedWas = newPreflights;
        if (newPreflights === "") {
          this.__view.cancelSubmit(this.el.form);
        }
      }
      if (this.activeRefs() === "") {
        this.el.value = null;
      }
      this.el.dispatchEvent(new CustomEvent(PHX_LIVE_FILE_UPDATED));
    }
  },
  LiveImgPreview: {
    mounted() {
      this.ref = this.el.getAttribute("data-phx-entry-ref");
      this.inputEl = document.getElementById(this.el.getAttribute(PHX_UPLOAD_REF));
      LiveUploader.getEntryDataURL(this.inputEl, this.ref, (url) => {
        this.url = url;
        this.el.src = url;
      });
    },
    destroyed() {
      URL.revokeObjectURL(this.url);
    }
  },
  FocusWrap: {
    mounted() {
      this.focusStart = this.el.firstElementChild;
      this.focusEnd = this.el.lastElementChild;
      this.focusStart.addEventListener("focus", () => aria_default.focusLast(this.el));
      this.focusEnd.addEventListener("focus", () => aria_default.focusFirst(this.el));
      this.el.addEventListener("phx:show-end", () => this.el.focus());
      if (window.getComputedStyle(this.el).display !== "none") {
        aria_default.focusFirst(this.el);
      }
    }
  }
};
var scrollTop = () => document.documentElement.scrollTop || document.body.scrollTop;
var winHeight = () => window.innerHeight || document.documentElement.clientHeight;
var isAtViewportTop = (el) => {
  let rect = el.getBoundingClientRect();
  return rect.top >= 0 && rect.left >= 0 && rect.top <= winHeight();
};
var isAtViewportBottom = (el) => {
  let rect = el.getBoundingClientRect();
  return rect.right >= 0 && rect.left >= 0 && rect.bottom <= winHeight();
};
var isWithinViewport = (el) => {
  let rect = el.getBoundingClientRect();
  return rect.top >= 0 && rect.left >= 0 && rect.top <= winHeight();
};
Hooks.InfiniteScroll = {
  mounted() {
    let scrollBefore = scrollTop();
    let topOverran = false;
    let throttleInterval = 500;
    let pendingOp = null;
    let onTopOverrun = this.throttle(throttleInterval, (topEvent, firstChild) => {
      pendingOp = () => true;
      this.liveSocket.execJSHookPush(this.el, topEvent, { id: firstChild.id, _overran: true }, () => {
        pendingOp = null;
      });
    });
    let onFirstChildAtTop = this.throttle(throttleInterval, (topEvent, firstChild) => {
      pendingOp = () => firstChild.scrollIntoView({ block: "start" });
      this.liveSocket.execJSHookPush(this.el, topEvent, { id: firstChild.id }, () => {
        pendingOp = null;
        if (!isWithinViewport(firstChild)) {
          firstChild.scrollIntoView({ block: "start" });
        }
      });
    });
    let onLastChildAtBottom = this.throttle(throttleInterval, (bottomEvent, lastChild) => {
      pendingOp = () => lastChild.scrollIntoView({ block: "end" });
      this.liveSocket.execJSHookPush(this.el, bottomEvent, { id: lastChild.id }, () => {
        pendingOp = null;
        if (!isWithinViewport(lastChild)) {
          lastChild.scrollIntoView({ block: "end" });
        }
      });
    });
    this.onScroll = (e) => {
      let scrollNow = scrollTop();
      if (pendingOp) {
        scrollBefore = scrollNow;
        return pendingOp();
      }
      let rect = this.el.getBoundingClientRect();
      let topEvent = this.el.getAttribute(this.liveSocket.binding("viewport-top"));
      let bottomEvent = this.el.getAttribute(this.liveSocket.binding("viewport-bottom"));
      let lastChild = this.el.lastElementChild;
      let firstChild = this.el.firstElementChild;
      let isScrollingUp = scrollNow < scrollBefore;
      let isScrollingDown = scrollNow > scrollBefore;
      if (isScrollingUp && topEvent && !topOverran && rect.top >= 0) {
        topOverran = true;
        onTopOverrun(topEvent, firstChild);
      } else if (isScrollingDown && topOverran && rect.top <= 0) {
        topOverran = false;
      }
      if (topEvent && isScrollingUp && isAtViewportTop(firstChild)) {
        onFirstChildAtTop(topEvent, firstChild);
      } else if (bottomEvent && isScrollingDown && isAtViewportBottom(lastChild)) {
        onLastChildAtBottom(bottomEvent, lastChild);
      }
      scrollBefore = scrollNow;
    };
    window.addEventListener("scroll", this.onScroll);
  },
  destroyed() {
    window.removeEventListener("scroll", this.onScroll);
  },
  throttle(interval, callback) {
    let lastCallAt = 0;
    let timer;
    return (...args) => {
      let now = Date.now();
      let remainingTime = interval - (now - lastCallAt);
      if (remainingTime <= 0 || remainingTime > interval) {
        if (timer) {
          clearTimeout(timer);
          timer = null;
        }
        lastCallAt = now;
        callback(...args);
      } else if (!timer) {
        timer = setTimeout(() => {
          lastCallAt = Date.now();
          timer = null;
          callback(...args);
        }, remainingTime);
      }
    };
  }
};
var hooks_default = Hooks;
var DOMPostMorphRestorer = class {
  constructor(containerBefore, containerAfter, updateType) {
    let idsBefore = /* @__PURE__ */ new Set();
    let idsAfter = new Set([...containerAfter.children].map((child) => child.id));
    let elementsToModify = [];
    Array.from(containerBefore.children).forEach((child) => {
      if (child.id) {
        idsBefore.add(child.id);
        if (idsAfter.has(child.id)) {
          let previousElementId = child.previousElementSibling && child.previousElementSibling.id;
          elementsToModify.push({ elementId: child.id, previousElementId });
        }
      }
    });
    this.containerId = containerAfter.id;
    this.updateType = updateType;
    this.elementsToModify = elementsToModify;
    this.elementIdsToAdd = [...idsAfter].filter((id) => !idsBefore.has(id));
  }
  perform() {
    let container = dom_default.byId(this.containerId);
    this.elementsToModify.forEach((elementToModify) => {
      if (elementToModify.previousElementId) {
        maybe(document.getElementById(elementToModify.previousElementId), (previousElem) => {
          maybe(document.getElementById(elementToModify.elementId), (elem) => {
            let isInRightPlace = elem.previousElementSibling && elem.previousElementSibling.id == previousElem.id;
            if (!isInRightPlace) {
              previousElem.insertAdjacentElement("afterend", elem);
            }
          });
        });
      } else {
        maybe(document.getElementById(elementToModify.elementId), (elem) => {
          let isInRightPlace = elem.previousElementSibling == null;
          if (!isInRightPlace) {
            container.insertAdjacentElement("afterbegin", elem);
          }
        });
      }
    });
    if (this.updateType == "prepend") {
      this.elementIdsToAdd.reverse().forEach((elemId) => {
        maybe(document.getElementById(elemId), (elem) => container.insertAdjacentElement("afterbegin", elem));
      });
    }
  }
};
var DOCUMENT_FRAGMENT_NODE = 11;
function morphAttrs(fromNode, toNode) {
  var toNodeAttrs = toNode.attributes;
  var attr;
  var attrName;
  var attrNamespaceURI;
  var attrValue;
  var fromValue;
  if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE || fromNode.nodeType === DOCUMENT_FRAGMENT_NODE) {
    return;
  }
  for (var i = toNodeAttrs.length - 1; i >= 0; i--) {
    attr = toNodeAttrs[i];
    attrName = attr.name;
    attrNamespaceURI = attr.namespaceURI;
    attrValue = attr.value;
    if (attrNamespaceURI) {
      attrName = attr.localName || attrName;
      fromValue = fromNode.getAttributeNS(attrNamespaceURI, attrName);
      if (fromValue !== attrValue) {
        if (attr.prefix === "xmlns") {
          attrName = attr.name;
        }
        fromNode.setAttributeNS(attrNamespaceURI, attrName, attrValue);
      }
    } else {
      fromValue = fromNode.getAttribute(attrName);
      if (fromValue !== attrValue) {
        fromNode.setAttribute(attrName, attrValue);
      }
    }
  }
  var fromNodeAttrs = fromNode.attributes;
  for (var d = fromNodeAttrs.length - 1; d >= 0; d--) {
    attr = fromNodeAttrs[d];
    attrName = attr.name;
    attrNamespaceURI = attr.namespaceURI;
    if (attrNamespaceURI) {
      attrName = attr.localName || attrName;
      if (!toNode.hasAttributeNS(attrNamespaceURI, attrName)) {
        fromNode.removeAttributeNS(attrNamespaceURI, attrName);
      }
    } else {
      if (!toNode.hasAttribute(attrName)) {
        fromNode.removeAttribute(attrName);
      }
    }
  }
}
var range;
var NS_XHTML = "http://www.w3.org/1999/xhtml";
var doc = typeof document === "undefined" ? void 0 : document;
var HAS_TEMPLATE_SUPPORT = !!doc && "content" in doc.createElement("template");
var HAS_RANGE_SUPPORT = !!doc && doc.createRange && "createContextualFragment" in doc.createRange();
function createFragmentFromTemplate(str) {
  var template = doc.createElement("template");
  template.innerHTML = str;
  return template.content.childNodes[0];
}
function createFragmentFromRange(str) {
  if (!range) {
    range = doc.createRange();
    range.selectNode(doc.body);
  }
  var fragment = range.createContextualFragment(str);
  return fragment.childNodes[0];
}
function createFragmentFromWrap(str) {
  var fragment = doc.createElement("body");
  fragment.innerHTML = str;
  return fragment.childNodes[0];
}
function toElement(str) {
  str = str.trim();
  if (HAS_TEMPLATE_SUPPORT) {
    return createFragmentFromTemplate(str);
  } else if (HAS_RANGE_SUPPORT) {
    return createFragmentFromRange(str);
  }
  return createFragmentFromWrap(str);
}
function compareNodeNames(fromEl, toEl) {
  var fromNodeName = fromEl.nodeName;
  var toNodeName = toEl.nodeName;
  var fromCodeStart, toCodeStart;
  if (fromNodeName === toNodeName) {
    return true;
  }
  fromCodeStart = fromNodeName.charCodeAt(0);
  toCodeStart = toNodeName.charCodeAt(0);
  if (fromCodeStart <= 90 && toCodeStart >= 97) {
    return fromNodeName === toNodeName.toUpperCase();
  } else if (toCodeStart <= 90 && fromCodeStart >= 97) {
    return toNodeName === fromNodeName.toUpperCase();
  } else {
    return false;
  }
}
function createElementNS(name, namespaceURI) {
  return !namespaceURI || namespaceURI === NS_XHTML ? doc.createElement(name) : doc.createElementNS(namespaceURI, name);
}
function moveChildren(fromEl, toEl) {
  var curChild = fromEl.firstChild;
  while (curChild) {
    var nextChild = curChild.nextSibling;
    toEl.appendChild(curChild);
    curChild = nextChild;
  }
  return toEl;
}
function syncBooleanAttrProp(fromEl, toEl, name) {
  if (fromEl[name] !== toEl[name]) {
    fromEl[name] = toEl[name];
    if (fromEl[name]) {
      fromEl.setAttribute(name, "");
    } else {
      fromEl.removeAttribute(name);
    }
  }
}
var specialElHandlers = {
  OPTION: function(fromEl, toEl) {
    var parentNode = fromEl.parentNode;
    if (parentNode) {
      var parentName = parentNode.nodeName.toUpperCase();
      if (parentName === "OPTGROUP") {
        parentNode = parentNode.parentNode;
        parentName = parentNode && parentNode.nodeName.toUpperCase();
      }
      if (parentName === "SELECT" && !parentNode.hasAttribute("multiple")) {
        if (fromEl.hasAttribute("selected") && !toEl.selected) {
          fromEl.setAttribute("selected", "selected");
          fromEl.removeAttribute("selected");
        }
        parentNode.selectedIndex = -1;
      }
    }
    syncBooleanAttrProp(fromEl, toEl, "selected");
  },
  INPUT: function(fromEl, toEl) {
    syncBooleanAttrProp(fromEl, toEl, "checked");
    syncBooleanAttrProp(fromEl, toEl, "disabled");
    if (fromEl.value !== toEl.value) {
      fromEl.value = toEl.value;
    }
    if (!toEl.hasAttribute("value")) {
      fromEl.removeAttribute("value");
    }
  },
  TEXTAREA: function(fromEl, toEl) {
    var newValue = toEl.value;
    if (fromEl.value !== newValue) {
      fromEl.value = newValue;
    }
    var firstChild = fromEl.firstChild;
    if (firstChild) {
      var oldValue = firstChild.nodeValue;
      if (oldValue == newValue || !newValue && oldValue == fromEl.placeholder) {
        return;
      }
      firstChild.nodeValue = newValue;
    }
  },
  SELECT: function(fromEl, toEl) {
    if (!toEl.hasAttribute("multiple")) {
      var selectedIndex = -1;
      var i = 0;
      var curChild = fromEl.firstChild;
      var optgroup;
      var nodeName;
      while (curChild) {
        nodeName = curChild.nodeName && curChild.nodeName.toUpperCase();
        if (nodeName === "OPTGROUP") {
          optgroup = curChild;
          curChild = optgroup.firstChild;
        } else {
          if (nodeName === "OPTION") {
            if (curChild.hasAttribute("selected")) {
              selectedIndex = i;
              break;
            }
            i++;
          }
          curChild = curChild.nextSibling;
          if (!curChild && optgroup) {
            curChild = optgroup.nextSibling;
            optgroup = null;
          }
        }
      }
      fromEl.selectedIndex = selectedIndex;
    }
  }
};
var ELEMENT_NODE = 1;
var DOCUMENT_FRAGMENT_NODE$1 = 11;
var TEXT_NODE = 3;
var COMMENT_NODE = 8;
function noop() {
}
function defaultGetNodeKey(node) {
  if (node) {
    return node.getAttribute && node.getAttribute("id") || node.id;
  }
}
function morphdomFactory(morphAttrs2) {
  return function morphdom2(fromNode, toNode, options) {
    if (!options) {
      options = {};
    }
    if (typeof toNode === "string") {
      if (fromNode.nodeName === "#document" || fromNode.nodeName === "HTML" || fromNode.nodeName === "BODY") {
        var toNodeHtml = toNode;
        toNode = doc.createElement("html");
        toNode.innerHTML = toNodeHtml;
      } else {
        toNode = toElement(toNode);
      }
    } else if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE$1) {
      toNode = toNode.firstElementChild;
    }
    var getNodeKey = options.getNodeKey || defaultGetNodeKey;
    var onBeforeNodeAdded = options.onBeforeNodeAdded || noop;
    var onNodeAdded = options.onNodeAdded || noop;
    var onBeforeElUpdated = options.onBeforeElUpdated || noop;
    var onElUpdated = options.onElUpdated || noop;
    var onBeforeNodeDiscarded = options.onBeforeNodeDiscarded || noop;
    var onNodeDiscarded = options.onNodeDiscarded || noop;
    var onBeforeElChildrenUpdated = options.onBeforeElChildrenUpdated || noop;
    var skipFromChildren = options.skipFromChildren || noop;
    var addChild = options.addChild || function(parent, child) {
      return parent.appendChild(child);
    };
    var childrenOnly = options.childrenOnly === true;
    var fromNodesLookup = /* @__PURE__ */ Object.create(null);
    var keyedRemovalList = [];
    function addKeyedRemoval(key) {
      keyedRemovalList.push(key);
    }
    function walkDiscardedChildNodes(node, skipKeyedNodes) {
      if (node.nodeType === ELEMENT_NODE) {
        var curChild = node.firstChild;
        while (curChild) {
          var key = void 0;
          if (skipKeyedNodes && (key = getNodeKey(curChild))) {
            addKeyedRemoval(key);
          } else {
            onNodeDiscarded(curChild);
            if (curChild.firstChild) {
              walkDiscardedChildNodes(curChild, skipKeyedNodes);
            }
          }
          curChild = curChild.nextSibling;
        }
      }
    }
    function removeNode(node, parentNode, skipKeyedNodes) {
      if (onBeforeNodeDiscarded(node) === false) {
        return;
      }
      if (parentNode) {
        parentNode.removeChild(node);
      }
      onNodeDiscarded(node);
      walkDiscardedChildNodes(node, skipKeyedNodes);
    }
    function indexTree(node) {
      if (node.nodeType === ELEMENT_NODE || node.nodeType === DOCUMENT_FRAGMENT_NODE$1) {
        var curChild = node.firstChild;
        while (curChild) {
          var key = getNodeKey(curChild);
          if (key) {
            fromNodesLookup[key] = curChild;
          }
          indexTree(curChild);
          curChild = curChild.nextSibling;
        }
      }
    }
    indexTree(fromNode);
    function handleNodeAdded(el) {
      onNodeAdded(el);
      var curChild = el.firstChild;
      while (curChild) {
        var nextSibling = curChild.nextSibling;
        var key = getNodeKey(curChild);
        if (key) {
          var unmatchedFromEl = fromNodesLookup[key];
          if (unmatchedFromEl && compareNodeNames(curChild, unmatchedFromEl)) {
            curChild.parentNode.replaceChild(unmatchedFromEl, curChild);
            morphEl(unmatchedFromEl, curChild);
          } else {
            handleNodeAdded(curChild);
          }
        } else {
          handleNodeAdded(curChild);
        }
        curChild = nextSibling;
      }
    }
    function cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey) {
      while (curFromNodeChild) {
        var fromNextSibling = curFromNodeChild.nextSibling;
        if (curFromNodeKey = getNodeKey(curFromNodeChild)) {
          addKeyedRemoval(curFromNodeKey);
        } else {
          removeNode(curFromNodeChild, fromEl, true);
        }
        curFromNodeChild = fromNextSibling;
      }
    }
    function morphEl(fromEl, toEl, childrenOnly2) {
      var toElKey = getNodeKey(toEl);
      if (toElKey) {
        delete fromNodesLookup[toElKey];
      }
      if (!childrenOnly2) {
        if (onBeforeElUpdated(fromEl, toEl) === false) {
          return;
        }
        morphAttrs2(fromEl, toEl);
        onElUpdated(fromEl);
        if (onBeforeElChildrenUpdated(fromEl, toEl) === false) {
          return;
        }
      }
      if (fromEl.nodeName !== "TEXTAREA") {
        morphChildren(fromEl, toEl);
      } else {
        specialElHandlers.TEXTAREA(fromEl, toEl);
      }
    }
    function morphChildren(fromEl, toEl) {
      var skipFrom = skipFromChildren(fromEl);
      var curToNodeChild = toEl.firstChild;
      var curFromNodeChild = fromEl.firstChild;
      var curToNodeKey;
      var curFromNodeKey;
      var fromNextSibling;
      var toNextSibling;
      var matchingFromEl;
      outer:
        while (curToNodeChild) {
          toNextSibling = curToNodeChild.nextSibling;
          curToNodeKey = getNodeKey(curToNodeChild);
          while (!skipFrom && curFromNodeChild) {
            fromNextSibling = curFromNodeChild.nextSibling;
            if (curToNodeChild.isSameNode && curToNodeChild.isSameNode(curFromNodeChild)) {
              curToNodeChild = toNextSibling;
              curFromNodeChild = fromNextSibling;
              continue outer;
            }
            curFromNodeKey = getNodeKey(curFromNodeChild);
            var curFromNodeType = curFromNodeChild.nodeType;
            var isCompatible = void 0;
            if (curFromNodeType === curToNodeChild.nodeType) {
              if (curFromNodeType === ELEMENT_NODE) {
                if (curToNodeKey) {
                  if (curToNodeKey !== curFromNodeKey) {
                    if (matchingFromEl = fromNodesLookup[curToNodeKey]) {
                      if (fromNextSibling === matchingFromEl) {
                        isCompatible = false;
                      } else {
                        fromEl.insertBefore(matchingFromEl, curFromNodeChild);
                        if (curFromNodeKey) {
                          addKeyedRemoval(curFromNodeKey);
                        } else {
                          removeNode(curFromNodeChild, fromEl, true);
                        }
                        curFromNodeChild = matchingFromEl;
                      }
                    } else {
                      isCompatible = false;
                    }
                  }
                } else if (curFromNodeKey) {
                  isCompatible = false;
                }
                isCompatible = isCompatible !== false && compareNodeNames(curFromNodeChild, curToNodeChild);
                if (isCompatible) {
                  morphEl(curFromNodeChild, curToNodeChild);
                }
              } else if (curFromNodeType === TEXT_NODE || curFromNodeType == COMMENT_NODE) {
                isCompatible = true;
                if (curFromNodeChild.nodeValue !== curToNodeChild.nodeValue) {
                  curFromNodeChild.nodeValue = curToNodeChild.nodeValue;
                }
              }
            }
            if (isCompatible) {
              curToNodeChild = toNextSibling;
              curFromNodeChild = fromNextSibling;
              continue outer;
            }
            if (curFromNodeKey) {
              addKeyedRemoval(curFromNodeKey);
            } else {
              removeNode(curFromNodeChild, fromEl, true);
            }
            curFromNodeChild = fromNextSibling;
          }
          if (curToNodeKey && (matchingFromEl = fromNodesLookup[curToNodeKey]) && compareNodeNames(matchingFromEl, curToNodeChild)) {
            if (!skipFrom) {
              addChild(fromEl, matchingFromEl);
            }
            morphEl(matchingFromEl, curToNodeChild);
          } else {
            var onBeforeNodeAddedResult = onBeforeNodeAdded(curToNodeChild);
            if (onBeforeNodeAddedResult !== false) {
              if (onBeforeNodeAddedResult) {
                curToNodeChild = onBeforeNodeAddedResult;
              }
              if (curToNodeChild.actualize) {
                curToNodeChild = curToNodeChild.actualize(fromEl.ownerDocument || doc);
              }
              addChild(fromEl, curToNodeChild);
              handleNodeAdded(curToNodeChild);
            }
          }
          curToNodeChild = toNextSibling;
          curFromNodeChild = fromNextSibling;
        }
      cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey);
      var specialElHandler = specialElHandlers[fromEl.nodeName];
      if (specialElHandler) {
        specialElHandler(fromEl, toEl);
      }
    }
    var morphedNode = fromNode;
    var morphedNodeType = morphedNode.nodeType;
    var toNodeType = toNode.nodeType;
    if (!childrenOnly) {
      if (morphedNodeType === ELEMENT_NODE) {
        if (toNodeType === ELEMENT_NODE) {
          if (!compareNodeNames(fromNode, toNode)) {
            onNodeDiscarded(fromNode);
            morphedNode = moveChildren(fromNode, createElementNS(toNode.nodeName, toNode.namespaceURI));
          }
        } else {
          morphedNode = toNode;
        }
      } else if (morphedNodeType === TEXT_NODE || morphedNodeType === COMMENT_NODE) {
        if (toNodeType === morphedNodeType) {
          if (morphedNode.nodeValue !== toNode.nodeValue) {
            morphedNode.nodeValue = toNode.nodeValue;
          }
          return morphedNode;
        } else {
          morphedNode = toNode;
        }
      }
    }
    if (morphedNode === toNode) {
      onNodeDiscarded(fromNode);
    } else {
      if (toNode.isSameNode && toNode.isSameNode(morphedNode)) {
        return;
      }
      morphEl(morphedNode, toNode, childrenOnly);
      if (keyedRemovalList) {
        for (var i = 0, len = keyedRemovalList.length; i < len; i++) {
          var elToRemove = fromNodesLookup[keyedRemovalList[i]];
          if (elToRemove) {
            removeNode(elToRemove, elToRemove.parentNode, false);
          }
        }
      }
    }
    if (!childrenOnly && morphedNode !== fromNode && fromNode.parentNode) {
      if (morphedNode.actualize) {
        morphedNode = morphedNode.actualize(fromNode.ownerDocument || doc);
      }
      fromNode.parentNode.replaceChild(morphedNode, fromNode);
    }
    return morphedNode;
  };
}
var morphdom = morphdomFactory(morphAttrs);
var morphdom_esm_default = morphdom;
var DOMPatch = class {
  static patchEl(fromEl, toEl, activeElement) {
    morphdom_esm_default(fromEl, toEl, {
      childrenOnly: false,
      onBeforeElUpdated: (fromEl2, toEl2) => {
        if (activeElement && activeElement.isSameNode(fromEl2) && dom_default.isFormInput(fromEl2)) {
          dom_default.mergeFocusedInput(fromEl2, toEl2);
          return false;
        }
      }
    });
  }
  constructor(view, container, id, html, streams, targetCID) {
    this.view = view;
    this.liveSocket = view.liveSocket;
    this.container = container;
    this.id = id;
    this.rootID = view.root.id;
    this.html = html;
    this.streams = streams;
    this.streamInserts = {};
    this.targetCID = targetCID;
    this.cidPatch = isCid(this.targetCID);
    this.pendingRemoves = [];
    this.phxRemove = this.liveSocket.binding("remove");
    this.callbacks = {
      beforeadded: [],
      beforeupdated: [],
      beforephxChildAdded: [],
      afteradded: [],
      afterupdated: [],
      afterdiscarded: [],
      afterphxChildAdded: [],
      aftertransitionsDiscarded: []
    };
  }
  before(kind, callback) {
    this.callbacks[`before${kind}`].push(callback);
  }
  after(kind, callback) {
    this.callbacks[`after${kind}`].push(callback);
  }
  trackBefore(kind, ...args) {
    this.callbacks[`before${kind}`].forEach((callback) => callback(...args));
  }
  trackAfter(kind, ...args) {
    this.callbacks[`after${kind}`].forEach((callback) => callback(...args));
  }
  markPrunableContentForRemoval() {
    let phxUpdate = this.liveSocket.binding(PHX_UPDATE);
    dom_default.all(this.container, `[${phxUpdate}=${PHX_STREAM}]`, (el) => el.innerHTML = "");
    dom_default.all(this.container, `[${phxUpdate}=append] > *, [${phxUpdate}=prepend] > *`, (el) => {
      el.setAttribute(PHX_PRUNE, "");
    });
  }
  perform() {
    let { view, liveSocket: liveSocket2, container, html } = this;
    let targetContainer = this.isCIDPatch() ? this.targetCIDContainer(html) : container;
    if (this.isCIDPatch() && !targetContainer) {
      return;
    }
    let focused = liveSocket2.getActiveElement();
    let { selectionStart, selectionEnd } = focused && dom_default.hasSelectionRange(focused) ? focused : {};
    let phxUpdate = liveSocket2.binding(PHX_UPDATE);
    let phxFeedbackFor = liveSocket2.binding(PHX_FEEDBACK_FOR);
    let disableWith = liveSocket2.binding(PHX_DISABLE_WITH);
    let phxViewportTop = liveSocket2.binding(PHX_VIEWPORT_TOP);
    let phxViewportBottom = liveSocket2.binding(PHX_VIEWPORT_BOTTOM);
    let phxTriggerExternal = liveSocket2.binding(PHX_TRIGGER_ACTION);
    let added = [];
    let trackedInputs = [];
    let updates = [];
    let appendPrependUpdates = [];
    let externalFormTriggered = null;
    let diffHTML = liveSocket2.time("premorph container prep", () => {
      return this.buildDiffHTML(container, html, phxUpdate, targetContainer);
    });
    this.trackBefore("added", container);
    this.trackBefore("updated", container, container);
    liveSocket2.time("morphdom", () => {
      this.streams.forEach(([ref, inserts, deleteIds, reset]) => {
        Object.entries(inserts).forEach(([key, [streamAt, limit]]) => {
          this.streamInserts[key] = { ref, streamAt, limit };
        });
        if (reset !== void 0) {
          dom_default.all(container, `[${PHX_STREAM_REF}="${ref}"]`, (child) => {
            if (!inserts[child.id]) {
              this.removeStreamChildElement(child);
            }
          });
        }
        deleteIds.forEach((id) => {
          let child = container.querySelector(`[id="${id}"]`);
          if (child) {
            this.removeStreamChildElement(child);
          }
        });
      });
      morphdom_esm_default(targetContainer, diffHTML, {
        childrenOnly: targetContainer.getAttribute(PHX_COMPONENT) === null,
        getNodeKey: (node) => {
          return dom_default.isPhxDestroyed(node) ? null : node.id;
        },
        skipFromChildren: (from) => {
          return from.getAttribute(phxUpdate) === PHX_STREAM;
        },
        addChild: (parent, child) => {
          let { ref, streamAt, limit } = this.getStreamInsert(child);
          if (ref === void 0) {
            return parent.appendChild(child);
          }
          dom_default.putSticky(child, PHX_STREAM_REF, (el) => el.setAttribute(PHX_STREAM_REF, ref));
          if (streamAt === 0) {
            parent.insertAdjacentElement("afterbegin", child);
          } else if (streamAt === -1) {
            parent.appendChild(child);
          } else if (streamAt > 0) {
            let sibling = Array.from(parent.children)[streamAt];
            parent.insertBefore(child, sibling);
          }
          let children = limit !== null && Array.from(parent.children);
          let childrenToRemove = [];
          if (limit && limit < 0 && children.length > limit * -1) {
            childrenToRemove = children.slice(0, children.length + limit);
          } else if (limit && limit >= 0 && children.length > limit) {
            childrenToRemove = children.slice(limit);
          }
          childrenToRemove.forEach((removeChild) => {
            if (!this.streamInserts[removeChild.id]) {
              this.removeStreamChildElement(removeChild);
            }
          });
        },
        onBeforeNodeAdded: (el) => {
          dom_default.maybeAddPrivateHooks(el, phxViewportTop, phxViewportBottom);
          this.trackBefore("added", el);
          return el;
        },
        onNodeAdded: (el) => {
          if (el.getAttribute) {
            this.maybeReOrderStream(el);
          }
          if (el instanceof HTMLImageElement && el.srcset) {
            el.srcset = el.srcset;
          } else if (el instanceof HTMLVideoElement && el.autoplay) {
            el.play();
          }
          if (dom_default.isNowTriggerFormExternal(el, phxTriggerExternal)) {
            externalFormTriggered = el;
          }
          if (el.getAttribute && el.getAttribute("name") && dom_default.isFormInput(el)) {
            trackedInputs.push(el);
          }
          if (dom_default.isPhxChild(el) && view.ownsElement(el) || dom_default.isPhxSticky(el) && view.ownsElement(el.parentNode)) {
            this.trackAfter("phxChildAdded", el);
          }
          added.push(el);
        },
        onNodeDiscarded: (el) => this.onNodeDiscarded(el),
        onBeforeNodeDiscarded: (el) => {
          if (el.getAttribute && el.getAttribute(PHX_PRUNE) !== null) {
            return true;
          }
          if (el.parentElement !== null && el.id && dom_default.isPhxUpdate(el.parentElement, phxUpdate, [PHX_STREAM, "append", "prepend"])) {
            return false;
          }
          if (this.maybePendingRemove(el)) {
            return false;
          }
          if (this.skipCIDSibling(el)) {
            return false;
          }
          return true;
        },
        onElUpdated: (el) => {
          if (dom_default.isNowTriggerFormExternal(el, phxTriggerExternal)) {
            externalFormTriggered = el;
          }
          updates.push(el);
          this.maybeReOrderStream(el);
        },
        onBeforeElUpdated: (fromEl, toEl) => {
          dom_default.maybeAddPrivateHooks(toEl, phxViewportTop, phxViewportBottom);
          dom_default.cleanChildNodes(toEl, phxUpdate);
          if (this.skipCIDSibling(toEl)) {
            return false;
          }
          if (dom_default.isPhxSticky(fromEl)) {
            return false;
          }
          if (dom_default.isIgnored(fromEl, phxUpdate) || fromEl.form && fromEl.form.isSameNode(externalFormTriggered)) {
            this.trackBefore("updated", fromEl, toEl);
            dom_default.mergeAttrs(fromEl, toEl, { isIgnored: true });
            updates.push(fromEl);
            dom_default.applyStickyOperations(fromEl);
            return false;
          }
          if (fromEl.type === "number" && (fromEl.validity && fromEl.validity.badInput)) {
            return false;
          }
          if (!dom_default.syncPendingRef(fromEl, toEl, disableWith)) {
            if (dom_default.isUploadInput(fromEl)) {
              this.trackBefore("updated", fromEl, toEl);
              updates.push(fromEl);
            }
            dom_default.applyStickyOperations(fromEl);
            return false;
          }
          if (dom_default.isPhxChild(toEl)) {
            let prevSession = fromEl.getAttribute(PHX_SESSION);
            dom_default.mergeAttrs(fromEl, toEl, { exclude: [PHX_STATIC] });
            if (prevSession !== "") {
              fromEl.setAttribute(PHX_SESSION, prevSession);
            }
            fromEl.setAttribute(PHX_ROOT_ID, this.rootID);
            dom_default.applyStickyOperations(fromEl);
            return false;
          }
          dom_default.copyPrivates(toEl, fromEl);
          let isFocusedFormEl = focused && fromEl.isSameNode(focused) && dom_default.isFormInput(fromEl);
          if (isFocusedFormEl && fromEl.type !== "hidden") {
            this.trackBefore("updated", fromEl, toEl);
            dom_default.mergeFocusedInput(fromEl, toEl);
            dom_default.syncAttrsToProps(fromEl);
            updates.push(fromEl);
            dom_default.applyStickyOperations(fromEl);
            trackedInputs.push(fromEl);
            return false;
          } else {
            if (dom_default.isPhxUpdate(toEl, phxUpdate, ["append", "prepend"])) {
              appendPrependUpdates.push(new DOMPostMorphRestorer(fromEl, toEl, toEl.getAttribute(phxUpdate)));
            }
            dom_default.syncAttrsToProps(toEl);
            dom_default.applyStickyOperations(toEl);
            if (toEl.getAttribute("name") && dom_default.isFormInput(toEl)) {
              trackedInputs.push(toEl);
            }
            this.trackBefore("updated", fromEl, toEl);
            return true;
          }
        }
      });
    });
    if (liveSocket2.isDebugEnabled()) {
      detectDuplicateIds();
    }
    if (appendPrependUpdates.length > 0) {
      liveSocket2.time("post-morph append/prepend restoration", () => {
        appendPrependUpdates.forEach((update) => update.perform());
      });
    }
    trackedInputs.forEach((input) => {
      dom_default.maybeHideFeedback(targetContainer, input, phxFeedbackFor);
    });
    liveSocket2.silenceEvents(() => dom_default.restoreFocus(focused, selectionStart, selectionEnd));
    dom_default.dispatchEvent(document, "phx:update");
    added.forEach((el) => this.trackAfter("added", el));
    updates.forEach((el) => this.trackAfter("updated", el));
    this.transitionPendingRemoves();
    if (externalFormTriggered) {
      liveSocket2.unload();
      Object.getPrototypeOf(externalFormTriggered).submit.call(externalFormTriggered);
    }
    return true;
  }
  onNodeDiscarded(el) {
    if (dom_default.isPhxChild(el) || dom_default.isPhxSticky(el)) {
      this.liveSocket.destroyViewByEl(el);
    }
    this.trackAfter("discarded", el);
  }
  maybePendingRemove(node) {
    if (node.getAttribute && node.getAttribute(this.phxRemove) !== null) {
      this.pendingRemoves.push(node);
      return true;
    } else {
      return false;
    }
  }
  removeStreamChildElement(child) {
    if (!this.maybePendingRemove(child)) {
      child.remove();
      this.onNodeDiscarded(child);
    }
  }
  getStreamInsert(el) {
    let insert = el.id ? this.streamInserts[el.id] : {};
    return insert || {};
  }
  maybeReOrderStream(el) {
    let { ref, streamAt, limit } = this.getStreamInsert(el);
    if (streamAt === void 0) {
      return;
    }
    dom_default.putSticky(el, PHX_STREAM_REF, (el2) => el2.setAttribute(PHX_STREAM_REF, ref));
    if (streamAt === 0) {
      el.parentElement.insertBefore(el, el.parentElement.firstElementChild);
    } else if (streamAt > 0) {
      let children = Array.from(el.parentElement.children);
      let oldIndex = children.indexOf(el);
      if (streamAt >= children.length - 1) {
        el.parentElement.appendChild(el);
      } else {
        let sibling = children[streamAt];
        if (oldIndex > streamAt) {
          el.parentElement.insertBefore(el, sibling);
        } else {
          el.parentElement.insertBefore(el, sibling.nextElementSibling);
        }
      }
    }
  }
  transitionPendingRemoves() {
    let { pendingRemoves, liveSocket: liveSocket2 } = this;
    if (pendingRemoves.length > 0) {
      liveSocket2.transitionRemoves(pendingRemoves);
      liveSocket2.requestDOMUpdate(() => {
        pendingRemoves.forEach((el) => {
          let child = dom_default.firstPhxChild(el);
          if (child) {
            liveSocket2.destroyViewByEl(child);
          }
          el.remove();
        });
        this.trackAfter("transitionsDiscarded", pendingRemoves);
      });
    }
  }
  isCIDPatch() {
    return this.cidPatch;
  }
  skipCIDSibling(el) {
    return el.nodeType === Node.ELEMENT_NODE && el.getAttribute(PHX_SKIP) !== null;
  }
  targetCIDContainer(html) {
    if (!this.isCIDPatch()) {
      return;
    }
    let [first, ...rest] = dom_default.findComponentNodeList(this.container, this.targetCID);
    if (rest.length === 0 && dom_default.childNodeLength(html) === 1) {
      return first;
    } else {
      return first && first.parentNode;
    }
  }
  buildDiffHTML(container, html, phxUpdate, targetContainer) {
    let isCIDPatch = this.isCIDPatch();
    let isCIDWithSingleRoot = isCIDPatch && targetContainer.getAttribute(PHX_COMPONENT) === this.targetCID.toString();
    if (!isCIDPatch || isCIDWithSingleRoot) {
      return html;
    } else {
      let diffContainer = null;
      let template = document.createElement("template");
      diffContainer = dom_default.cloneNode(targetContainer);
      let [firstComponent, ...rest] = dom_default.findComponentNodeList(diffContainer, this.targetCID);
      template.innerHTML = html;
      rest.forEach((el) => el.remove());
      Array.from(diffContainer.childNodes).forEach((child) => {
        if (child.id && child.nodeType === Node.ELEMENT_NODE && child.getAttribute(PHX_COMPONENT) !== this.targetCID.toString()) {
          child.setAttribute(PHX_SKIP, "");
          child.innerHTML = "";
        }
      });
      Array.from(template.content.childNodes).forEach((el) => diffContainer.insertBefore(el, firstComponent));
      firstComponent.remove();
      return diffContainer.outerHTML;
    }
  }
  indexOf(parent, child) {
    return Array.from(parent.children).indexOf(child);
  }
};
var Rendered = class {
  static extract(diff) {
    let { [REPLY]: reply, [EVENTS]: events, [TITLE]: title } = diff;
    delete diff[REPLY];
    delete diff[EVENTS];
    delete diff[TITLE];
    return { diff, title, reply: reply || null, events: events || [] };
  }
  constructor(viewId, rendered) {
    this.viewId = viewId;
    this.rendered = {};
    this.mergeDiff(rendered);
  }
  parentViewId() {
    return this.viewId;
  }
  toString(onlyCids) {
    let [str, streams] = this.recursiveToString(this.rendered, this.rendered[COMPONENTS], onlyCids);
    return [str, streams];
  }
  recursiveToString(rendered, components = rendered[COMPONENTS], onlyCids) {
    onlyCids = onlyCids ? new Set(onlyCids) : null;
    let output = { buffer: "", components, onlyCids, streams: /* @__PURE__ */ new Set() };
    this.toOutputBuffer(rendered, null, output);
    return [output.buffer, output.streams];
  }
  componentCIDs(diff) {
    return Object.keys(diff[COMPONENTS] || {}).map((i) => parseInt(i));
  }
  isComponentOnlyDiff(diff) {
    if (!diff[COMPONENTS]) {
      return false;
    }
    return Object.keys(diff).length === 1;
  }
  getComponent(diff, cid) {
    return diff[COMPONENTS][cid];
  }
  mergeDiff(diff) {
    let newc = diff[COMPONENTS];
    let cache = {};
    delete diff[COMPONENTS];
    this.rendered = this.mutableMerge(this.rendered, diff);
    this.rendered[COMPONENTS] = this.rendered[COMPONENTS] || {};
    if (newc) {
      let oldc = this.rendered[COMPONENTS];
      for (let cid in newc) {
        newc[cid] = this.cachedFindComponent(cid, newc[cid], oldc, newc, cache);
      }
      for (let cid in newc) {
        oldc[cid] = newc[cid];
      }
      diff[COMPONENTS] = newc;
    }
  }
  cachedFindComponent(cid, cdiff, oldc, newc, cache) {
    if (cache[cid]) {
      return cache[cid];
    } else {
      let ndiff, stat, scid = cdiff[STATIC];
      if (isCid(scid)) {
        let tdiff;
        if (scid > 0) {
          tdiff = this.cachedFindComponent(scid, newc[scid], oldc, newc, cache);
        } else {
          tdiff = oldc[-scid];
        }
        stat = tdiff[STATIC];
        ndiff = this.cloneMerge(tdiff, cdiff);
        ndiff[STATIC] = stat;
      } else {
        ndiff = cdiff[STATIC] !== void 0 ? cdiff : this.cloneMerge(oldc[cid] || {}, cdiff);
      }
      cache[cid] = ndiff;
      return ndiff;
    }
  }
  mutableMerge(target, source) {
    if (source[STATIC] !== void 0) {
      return source;
    } else {
      this.doMutableMerge(target, source);
      return target;
    }
  }
  doMutableMerge(target, source) {
    for (let key in source) {
      let val = source[key];
      let targetVal = target[key];
      let isObjVal = isObject(val);
      if (isObjVal && val[STATIC] === void 0 && isObject(targetVal)) {
        this.doMutableMerge(targetVal, val);
      } else {
        target[key] = val;
      }
    }
  }
  cloneMerge(target, source) {
    let merged = __spreadValues(__spreadValues({}, target), source);
    for (let key in merged) {
      let val = source[key];
      let targetVal = target[key];
      if (isObject(val) && val[STATIC] === void 0 && isObject(targetVal)) {
        merged[key] = this.cloneMerge(targetVal, val);
      }
    }
    return merged;
  }
  componentToString(cid) {
    let [str, streams] = this.recursiveCIDToString(this.rendered[COMPONENTS], cid, null, false);
    return [str, streams];
  }
  pruneCIDs(cids) {
    cids.forEach((cid) => delete this.rendered[COMPONENTS][cid]);
  }
  get() {
    return this.rendered;
  }
  isNewFingerprint(diff = {}) {
    return !!diff[STATIC];
  }
  templateStatic(part, templates) {
    if (typeof part === "number") {
      return templates[part];
    } else {
      return part;
    }
  }
  toOutputBuffer(rendered, templates, output) {
    if (rendered[DYNAMICS]) {
      return this.comprehensionToBuffer(rendered, templates, output);
    }
    let { [STATIC]: statics } = rendered;
    statics = this.templateStatic(statics, templates);
    output.buffer += statics[0];
    for (let i = 1; i < statics.length; i++) {
      this.dynamicToBuffer(rendered[i - 1], templates, output);
      output.buffer += statics[i];
    }
  }
  comprehensionToBuffer(rendered, templates, output) {
    let { [DYNAMICS]: dynamics, [STATIC]: statics, [STREAM]: stream } = rendered;
    let [_ref, _inserts, deleteIds, reset] = stream || [null, {}, [], null];
    statics = this.templateStatic(statics, templates);
    let compTemplates = templates || rendered[TEMPLATES];
    for (let d = 0; d < dynamics.length; d++) {
      let dynamic = dynamics[d];
      output.buffer += statics[0];
      for (let i = 1; i < statics.length; i++) {
        this.dynamicToBuffer(dynamic[i - 1], compTemplates, output);
        output.buffer += statics[i];
      }
    }
    if (stream !== void 0 && (rendered[DYNAMICS].length > 0 || deleteIds.length > 0 || reset)) {
      delete rendered[STREAM];
      rendered[DYNAMICS] = [];
      output.streams.add(stream);
    }
  }
  dynamicToBuffer(rendered, templates, output) {
    if (typeof rendered === "number") {
      let [str, streams] = this.recursiveCIDToString(output.components, rendered, output.onlyCids);
      output.buffer += str;
      output.streams = /* @__PURE__ */ new Set([...output.streams, ...streams]);
    } else if (isObject(rendered)) {
      this.toOutputBuffer(rendered, templates, output);
    } else {
      output.buffer += rendered;
    }
  }
  recursiveCIDToString(components, cid, onlyCids, allowRootComments = true) {
    let component = components[cid] || logError(`no component for CID ${cid}`, components);
    let template = document.createElement("template");
    let [html, streams] = this.recursiveToString(component, components, onlyCids);
    template.innerHTML = html;
    let container = template.content;
    let skip = onlyCids && !onlyCids.has(cid);
    let [hasChildNodes, hasChildComponents] = Array.from(container.childNodes).reduce(([hasNodes, hasComponents], child, i) => {
      if (child.nodeType === Node.ELEMENT_NODE) {
        if (child.getAttribute(PHX_COMPONENT)) {
          return [hasNodes, true];
        }
        child.setAttribute(PHX_COMPONENT, cid);
        if (!child.id) {
          child.id = `${this.parentViewId()}-${cid}-${i}`;
        }
        if (skip) {
          child.setAttribute(PHX_SKIP, "");
          child.innerHTML = "";
        }
        return [true, hasComponents];
      } else if (child.nodeType === Node.COMMENT_NODE) {
        if (!allowRootComments) {
          child.remove();
        }
        return [hasNodes, hasComponents];
      } else {
        if (child.nodeValue.trim() !== "") {
          logError(`only HTML element tags are allowed at the root of components.

got: "${child.nodeValue.trim()}"

within:
`, template.innerHTML.trim());
          child.replaceWith(this.createSpan(child.nodeValue, cid));
          return [true, hasComponents];
        } else {
          child.remove();
          return [hasNodes, hasComponents];
        }
      }
    }, [false, false]);
    if (!hasChildNodes && !hasChildComponents) {
      logError("expected at least one HTML element tag inside a component, but the component is empty:\n", template.innerHTML.trim());
      return [this.createSpan("", cid).outerHTML, streams];
    } else if (!hasChildNodes && hasChildComponents) {
      logError("expected at least one HTML element tag directly inside a component, but only subcomponents were found. A component must render at least one HTML tag directly inside itself.", template.innerHTML.trim());
      return [template.innerHTML, streams];
    } else {
      return [template.innerHTML, streams];
    }
  }
  createSpan(text, cid) {
    let span = document.createElement("span");
    span.innerText = text;
    span.setAttribute(PHX_COMPONENT, cid);
    return span;
  }
};
var viewHookID = 1;
var ViewHook = class {
  static makeID() {
    return viewHookID++;
  }
  static elementID(el) {
    return el.phxHookId;
  }
  constructor(view, el, callbacks) {
    this.__view = view;
    this.liveSocket = view.liveSocket;
    this.__callbacks = callbacks;
    this.__listeners = /* @__PURE__ */ new Set();
    this.__isDisconnected = false;
    this.el = el;
    this.el.phxHookId = this.constructor.makeID();
    for (let key in this.__callbacks) {
      this[key] = this.__callbacks[key];
    }
  }
  __mounted() {
    this.mounted && this.mounted();
  }
  __updated() {
    this.updated && this.updated();
  }
  __beforeUpdate() {
    this.beforeUpdate && this.beforeUpdate();
  }
  __destroyed() {
    this.destroyed && this.destroyed();
  }
  __reconnected() {
    if (this.__isDisconnected) {
      this.__isDisconnected = false;
      this.reconnected && this.reconnected();
    }
  }
  __disconnected() {
    this.__isDisconnected = true;
    this.disconnected && this.disconnected();
  }
  pushEvent(event, payload = {}, onReply = function() {
  }) {
    return this.__view.pushHookEvent(this.el, null, event, payload, onReply);
  }
  pushEventTo(phxTarget, event, payload = {}, onReply = function() {
  }) {
    return this.__view.withinTargets(phxTarget, (view, targetCtx) => {
      return view.pushHookEvent(this.el, targetCtx, event, payload, onReply);
    });
  }
  handleEvent(event, callback) {
    let callbackRef = (customEvent, bypass) => bypass ? event : callback(customEvent.detail);
    window.addEventListener(`phx:${event}`, callbackRef);
    this.__listeners.add(callbackRef);
    return callbackRef;
  }
  removeHandleEvent(callbackRef) {
    let event = callbackRef(null, true);
    window.removeEventListener(`phx:${event}`, callbackRef);
    this.__listeners.delete(callbackRef);
  }
  upload(name, files) {
    return this.__view.dispatchUploads(null, name, files);
  }
  uploadTo(phxTarget, name, files) {
    return this.__view.withinTargets(phxTarget, (view, targetCtx) => {
      view.dispatchUploads(targetCtx, name, files);
    });
  }
  __cleanup__() {
    this.__listeners.forEach((callbackRef) => this.removeHandleEvent(callbackRef));
  }
};
var focusStack = null;
var JS = {
  exec(eventType, phxEvent, view, sourceEl, defaults) {
    let [defaultKind, defaultArgs] = defaults || [null, { callback: defaults && defaults.callback }];
    let commands = phxEvent.charAt(0) === "[" ? JSON.parse(phxEvent) : [[defaultKind, defaultArgs]];
    commands.forEach(([kind, args]) => {
      if (kind === defaultKind && defaultArgs.data) {
        args.data = Object.assign(args.data || {}, defaultArgs.data);
        args.callback = args.callback || defaultArgs.callback;
      }
      this.filterToEls(sourceEl, args).forEach((el) => {
        this[`exec_${kind}`](eventType, phxEvent, view, sourceEl, el, args);
      });
    });
  },
  isVisible(el) {
    return !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length > 0);
  },
  exec_exec(eventType, phxEvent, view, sourceEl, el, [attr, to]) {
    let nodes = to ? dom_default.all(document, to) : [sourceEl];
    nodes.forEach((node) => {
      let encodedJS = node.getAttribute(attr);
      if (!encodedJS) {
        throw new Error(`expected ${attr} to contain JS command on "${to}"`);
      }
      view.liveSocket.execJS(node, encodedJS, eventType);
    });
  },
  exec_dispatch(eventType, phxEvent, view, sourceEl, el, { to, event, detail, bubbles }) {
    detail = detail || {};
    detail.dispatcher = sourceEl;
    dom_default.dispatchEvent(el, event, { detail, bubbles });
  },
  exec_push(eventType, phxEvent, view, sourceEl, el, args) {
    if (!view.isConnected()) {
      return;
    }
    let { event, data, target, page_loading, loading, value, dispatcher, callback } = args;
    let pushOpts = { loading, value, target, page_loading: !!page_loading };
    let targetSrc = eventType === "change" && dispatcher ? dispatcher : sourceEl;
    let phxTarget = target || targetSrc.getAttribute(view.binding("target")) || targetSrc;
    view.withinTargets(phxTarget, (targetView, targetCtx) => {
      if (eventType === "change") {
        let { newCid, _target } = args;
        _target = _target || (dom_default.isFormInput(sourceEl) ? sourceEl.name : void 0);
        if (_target) {
          pushOpts._target = _target;
        }
        targetView.pushInput(sourceEl, targetCtx, newCid, event || phxEvent, pushOpts, callback);
      } else if (eventType === "submit") {
        let { submitter } = args;
        targetView.submitForm(sourceEl, targetCtx, event || phxEvent, submitter, pushOpts, callback);
      } else {
        targetView.pushEvent(eventType, sourceEl, targetCtx, event || phxEvent, data, pushOpts, callback);
      }
    });
  },
  exec_navigate(eventType, phxEvent, view, sourceEl, el, { href, replace }) {
    view.liveSocket.historyRedirect(href, replace ? "replace" : "push");
  },
  exec_patch(eventType, phxEvent, view, sourceEl, el, { href, replace }) {
    view.liveSocket.pushHistoryPatch(href, replace ? "replace" : "push", sourceEl);
  },
  exec_focus(eventType, phxEvent, view, sourceEl, el) {
    window.requestAnimationFrame(() => aria_default.attemptFocus(el));
  },
  exec_focus_first(eventType, phxEvent, view, sourceEl, el) {
    window.requestAnimationFrame(() => aria_default.focusFirstInteractive(el) || aria_default.focusFirst(el));
  },
  exec_push_focus(eventType, phxEvent, view, sourceEl, el) {
    window.requestAnimationFrame(() => focusStack = el || sourceEl);
  },
  exec_pop_focus(eventType, phxEvent, view, sourceEl, el) {
    window.requestAnimationFrame(() => {
      if (focusStack) {
        focusStack.focus();
      }
      focusStack = null;
    });
  },
  exec_add_class(eventType, phxEvent, view, sourceEl, el, { names, transition, time }) {
    this.addOrRemoveClasses(el, names, [], transition, time, view);
  },
  exec_remove_class(eventType, phxEvent, view, sourceEl, el, { names, transition, time }) {
    this.addOrRemoveClasses(el, [], names, transition, time, view);
  },
  exec_transition(eventType, phxEvent, view, sourceEl, el, { time, transition }) {
    this.addOrRemoveClasses(el, [], [], transition, time, view);
  },
  exec_toggle(eventType, phxEvent, view, sourceEl, el, { display, ins, outs, time }) {
    this.toggle(eventType, view, el, display, ins, outs, time);
  },
  exec_show(eventType, phxEvent, view, sourceEl, el, { display, transition, time }) {
    this.show(eventType, view, el, display, transition, time);
  },
  exec_hide(eventType, phxEvent, view, sourceEl, el, { display, transition, time }) {
    this.hide(eventType, view, el, display, transition, time);
  },
  exec_set_attr(eventType, phxEvent, view, sourceEl, el, { attr: [attr, val] }) {
    this.setOrRemoveAttrs(el, [[attr, val]], []);
  },
  exec_remove_attr(eventType, phxEvent, view, sourceEl, el, { attr }) {
    this.setOrRemoveAttrs(el, [], [attr]);
  },
  show(eventType, view, el, display, transition, time) {
    if (!this.isVisible(el)) {
      this.toggle(eventType, view, el, display, transition, null, time);
    }
  },
  hide(eventType, view, el, display, transition, time) {
    if (this.isVisible(el)) {
      this.toggle(eventType, view, el, display, null, transition, time);
    }
  },
  toggle(eventType, view, el, display, ins, outs, time) {
    let [inClasses, inStartClasses, inEndClasses] = ins || [[], [], []];
    let [outClasses, outStartClasses, outEndClasses] = outs || [[], [], []];
    if (inClasses.length > 0 || outClasses.length > 0) {
      if (this.isVisible(el)) {
        let onStart = () => {
          this.addOrRemoveClasses(el, outStartClasses, inClasses.concat(inStartClasses).concat(inEndClasses));
          window.requestAnimationFrame(() => {
            this.addOrRemoveClasses(el, outClasses, []);
            window.requestAnimationFrame(() => this.addOrRemoveClasses(el, outEndClasses, outStartClasses));
          });
        };
        el.dispatchEvent(new Event("phx:hide-start"));
        view.transition(time, onStart, () => {
          this.addOrRemoveClasses(el, [], outClasses.concat(outEndClasses));
          dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = "none");
          el.dispatchEvent(new Event("phx:hide-end"));
        });
      } else {
        if (eventType === "remove") {
          return;
        }
        let onStart = () => {
          this.addOrRemoveClasses(el, inStartClasses, outClasses.concat(outStartClasses).concat(outEndClasses));
          let stickyDisplay = display || this.defaultDisplay(el);
          dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = stickyDisplay);
          window.requestAnimationFrame(() => {
            this.addOrRemoveClasses(el, inClasses, []);
            window.requestAnimationFrame(() => this.addOrRemoveClasses(el, inEndClasses, inStartClasses));
          });
        };
        el.dispatchEvent(new Event("phx:show-start"));
        view.transition(time, onStart, () => {
          this.addOrRemoveClasses(el, [], inClasses.concat(inEndClasses));
          el.dispatchEvent(new Event("phx:show-end"));
        });
      }
    } else {
      if (this.isVisible(el)) {
        window.requestAnimationFrame(() => {
          el.dispatchEvent(new Event("phx:hide-start"));
          dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = "none");
          el.dispatchEvent(new Event("phx:hide-end"));
        });
      } else {
        window.requestAnimationFrame(() => {
          el.dispatchEvent(new Event("phx:show-start"));
          let stickyDisplay = display || this.defaultDisplay(el);
          dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = stickyDisplay);
          el.dispatchEvent(new Event("phx:show-end"));
        });
      }
    }
  },
  addOrRemoveClasses(el, adds, removes, transition, time, view) {
    let [transitionRun, transitionStart, transitionEnd] = transition || [[], [], []];
    if (transitionRun.length > 0) {
      let onStart = () => {
        this.addOrRemoveClasses(el, transitionStart, [].concat(transitionRun).concat(transitionEnd));
        window.requestAnimationFrame(() => {
          this.addOrRemoveClasses(el, transitionRun, []);
          window.requestAnimationFrame(() => this.addOrRemoveClasses(el, transitionEnd, transitionStart));
        });
      };
      let onDone = () => this.addOrRemoveClasses(el, adds.concat(transitionEnd), removes.concat(transitionRun).concat(transitionStart));
      return view.transition(time, onStart, onDone);
    }
    window.requestAnimationFrame(() => {
      let [prevAdds, prevRemoves] = dom_default.getSticky(el, "classes", [[], []]);
      let keepAdds = adds.filter((name) => prevAdds.indexOf(name) < 0 && !el.classList.contains(name));
      let keepRemoves = removes.filter((name) => prevRemoves.indexOf(name) < 0 && el.classList.contains(name));
      let newAdds = prevAdds.filter((name) => removes.indexOf(name) < 0).concat(keepAdds);
      let newRemoves = prevRemoves.filter((name) => adds.indexOf(name) < 0).concat(keepRemoves);
      dom_default.putSticky(el, "classes", (currentEl) => {
        currentEl.classList.remove(...newRemoves);
        currentEl.classList.add(...newAdds);
        return [newAdds, newRemoves];
      });
    });
  },
  setOrRemoveAttrs(el, sets, removes) {
    let [prevSets, prevRemoves] = dom_default.getSticky(el, "attrs", [[], []]);
    let alteredAttrs = sets.map(([attr, _val]) => attr).concat(removes);
    let newSets = prevSets.filter(([attr, _val]) => !alteredAttrs.includes(attr)).concat(sets);
    let newRemoves = prevRemoves.filter((attr) => !alteredAttrs.includes(attr)).concat(removes);
    dom_default.putSticky(el, "attrs", (currentEl) => {
      newRemoves.forEach((attr) => currentEl.removeAttribute(attr));
      newSets.forEach(([attr, val]) => currentEl.setAttribute(attr, val));
      return [newSets, newRemoves];
    });
  },
  hasAllClasses(el, classes) {
    return classes.every((name) => el.classList.contains(name));
  },
  isToggledOut(el, outClasses) {
    return !this.isVisible(el) || this.hasAllClasses(el, outClasses);
  },
  filterToEls(sourceEl, { to }) {
    return to ? dom_default.all(document, to) : [sourceEl];
  },
  defaultDisplay(el) {
    return { tr: "table-row", td: "table-cell" }[el.tagName.toLowerCase()] || "block";
  }
};
var js_default = JS;
var serializeForm = (form, metadata, onlyNames = []) => {
  let _a = metadata, { submitter } = _a, meta = __objRest(_a, ["submitter"]);
  let formData = new FormData(form);
  if (submitter && submitter.hasAttribute("name") && submitter.form && submitter.form === form) {
    formData.append(submitter.name, submitter.value);
  }
  let toRemove = [];
  formData.forEach((val, key, _index) => {
    if (val instanceof File) {
      toRemove.push(key);
    }
  });
  toRemove.forEach((key) => formData.delete(key));
  let params = new URLSearchParams();
  for (let [key, val] of formData.entries()) {
    if (onlyNames.length === 0 || onlyNames.indexOf(key) >= 0) {
      params.append(key, val);
    }
  }
  for (let metaKey in meta) {
    params.append(metaKey, meta[metaKey]);
  }
  return params.toString();
};
var View = class {
  constructor(el, liveSocket2, parentView, flash, liveReferer) {
    this.isDead = false;
    this.liveSocket = liveSocket2;
    this.flash = flash;
    this.parent = parentView;
    this.root = parentView ? parentView.root : this;
    this.el = el;
    this.id = this.el.id;
    this.ref = 0;
    this.childJoins = 0;
    this.loaderTimer = null;
    this.pendingDiffs = [];
    this.pruningCIDs = [];
    this.redirect = false;
    this.href = null;
    this.joinCount = this.parent ? this.parent.joinCount - 1 : 0;
    this.joinPending = true;
    this.destroyed = false;
    this.joinCallback = function(onDone) {
      onDone && onDone();
    };
    this.stopCallback = function() {
    };
    this.pendingJoinOps = this.parent ? null : [];
    this.viewHooks = {};
    this.uploaders = {};
    this.formSubmits = [];
    this.children = this.parent ? null : {};
    this.root.children[this.id] = {};
    this.channel = this.liveSocket.channel(`lv:${this.id}`, () => {
      let url = this.href && this.expandURL(this.href);
      return {
        redirect: this.redirect ? url : void 0,
        url: this.redirect ? void 0 : url || void 0,
        params: this.connectParams(liveReferer),
        session: this.getSession(),
        static: this.getStatic(),
        flash: this.flash
      };
    });
  }
  setHref(href) {
    this.href = href;
  }
  setRedirect(href) {
    this.redirect = true;
    this.href = href;
  }
  isMain() {
    return this.el.hasAttribute(PHX_MAIN);
  }
  connectParams(liveReferer) {
    let params = this.liveSocket.params(this.el);
    let manifest = dom_default.all(document, `[${this.binding(PHX_TRACK_STATIC)}]`).map((node) => node.src || node.href).filter((url) => typeof url === "string");
    if (manifest.length > 0) {
      params["_track_static"] = manifest;
    }
    params["_mounts"] = this.joinCount;
    params["_live_referer"] = liveReferer;
    return params;
  }
  isConnected() {
    return this.channel.canPush();
  }
  getSession() {
    return this.el.getAttribute(PHX_SESSION);
  }
  getStatic() {
    let val = this.el.getAttribute(PHX_STATIC);
    return val === "" ? null : val;
  }
  destroy(callback = function() {
  }) {
    this.destroyAllChildren();
    this.destroyed = true;
    delete this.root.children[this.id];
    if (this.parent) {
      delete this.root.children[this.parent.id][this.id];
    }
    clearTimeout(this.loaderTimer);
    let onFinished = () => {
      callback();
      for (let id in this.viewHooks) {
        this.destroyHook(this.viewHooks[id]);
      }
    };
    dom_default.markPhxChildDestroyed(this.el);
    this.log("destroyed", () => ["the child has been removed from the parent"]);
    this.channel.leave().receive("ok", onFinished).receive("error", onFinished).receive("timeout", onFinished);
  }
  setContainerClasses(...classes) {
    this.el.classList.remove(PHX_CONNECTED_CLASS, PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_CLIENT_ERROR_CLASS, PHX_SERVER_ERROR_CLASS);
    this.el.classList.add(...classes);
  }
  showLoader(timeout) {
    clearTimeout(this.loaderTimer);
    if (timeout) {
      this.loaderTimer = setTimeout(() => this.showLoader(), timeout);
    } else {
      for (let id in this.viewHooks) {
        this.viewHooks[id].__disconnected();
      }
      this.setContainerClasses(PHX_LOADING_CLASS);
    }
  }
  execAll(binding) {
    dom_default.all(this.el, `[${binding}]`, (el) => this.liveSocket.execJS(el, el.getAttribute(binding)));
  }
  hideLoader() {
    clearTimeout(this.loaderTimer);
    this.setContainerClasses(PHX_CONNECTED_CLASS);
    this.execAll(this.binding("connected"));
  }
  triggerReconnected() {
    for (let id in this.viewHooks) {
      this.viewHooks[id].__reconnected();
    }
  }
  log(kind, msgCallback) {
    this.liveSocket.log(this, kind, msgCallback);
  }
  transition(time, onStart, onDone = function() {
  }) {
    this.liveSocket.transition(time, onStart, onDone);
  }
  withinTargets(phxTarget, callback) {
    if (phxTarget instanceof HTMLElement || phxTarget instanceof SVGElement) {
      return this.liveSocket.owner(phxTarget, (view) => callback(view, phxTarget));
    }
    if (isCid(phxTarget)) {
      let targets = dom_default.findComponentNodeList(this.el, phxTarget);
      if (targets.length === 0) {
        logError(`no component found matching phx-target of ${phxTarget}`);
      } else {
        callback(this, parseInt(phxTarget));
      }
    } else {
      let targets = Array.from(document.querySelectorAll(phxTarget));
      if (targets.length === 0) {
        logError(`nothing found matching the phx-target selector "${phxTarget}"`);
      }
      targets.forEach((target) => this.liveSocket.owner(target, (view) => callback(view, target)));
    }
  }
  applyDiff(type, rawDiff, callback) {
    this.log(type, () => ["", clone(rawDiff)]);
    let { diff, reply, events, title } = Rendered.extract(rawDiff);
    callback({ diff, reply, events });
    if (title) {
      window.requestAnimationFrame(() => dom_default.putTitle(title));
    }
  }
  onJoin(resp) {
    let { rendered, container } = resp;
    if (container) {
      let [tag, attrs] = container;
      this.el = dom_default.replaceRootContainer(this.el, tag, attrs);
    }
    this.childJoins = 0;
    this.joinPending = true;
    this.flash = null;
    browser_default.dropLocal(this.liveSocket.localStorage, window.location.pathname, CONSECUTIVE_RELOADS);
    this.applyDiff("mount", rendered, ({ diff, events }) => {
      this.rendered = new Rendered(this.id, diff);
      let [html, streams] = this.renderContainer(null, "join");
      this.dropPendingRefs();
      let forms = this.formsForRecovery(html);
      this.joinCount++;
      if (forms.length > 0) {
        forms.forEach(([form, newForm, newCid], i) => {
          this.pushFormRecovery(form, newCid, (resp2) => {
            if (i === forms.length - 1) {
              this.onJoinComplete(resp2, html, streams, events);
            }
          });
        });
      } else {
        this.onJoinComplete(resp, html, streams, events);
      }
    });
  }
  dropPendingRefs() {
    dom_default.all(document, `[${PHX_REF_SRC}="${this.id}"][${PHX_REF}]`, (el) => {
      el.removeAttribute(PHX_REF);
      el.removeAttribute(PHX_REF_SRC);
    });
  }
  onJoinComplete({ live_patch }, html, streams, events) {
    if (this.joinCount > 1 || this.parent && !this.parent.isJoinPending()) {
      return this.applyJoinPatch(live_patch, html, streams, events);
    }
    let newChildren = dom_default.findPhxChildrenInFragment(html, this.id).filter((toEl) => {
      let fromEl = toEl.id && this.el.querySelector(`[id="${toEl.id}"]`);
      let phxStatic = fromEl && fromEl.getAttribute(PHX_STATIC);
      if (phxStatic) {
        toEl.setAttribute(PHX_STATIC, phxStatic);
      }
      return this.joinChild(toEl);
    });
    if (newChildren.length === 0) {
      if (this.parent) {
        this.root.pendingJoinOps.push([this, () => this.applyJoinPatch(live_patch, html, streams, events)]);
        this.parent.ackJoin(this);
      } else {
        this.onAllChildJoinsComplete();
        this.applyJoinPatch(live_patch, html, streams, events);
      }
    } else {
      this.root.pendingJoinOps.push([this, () => this.applyJoinPatch(live_patch, html, streams, events)]);
    }
  }
  attachTrueDocEl() {
    this.el = dom_default.byId(this.id);
    this.el.setAttribute(PHX_ROOT_ID, this.root.id);
  }
  execNewMounted() {
    let phxViewportTop = this.binding(PHX_VIEWPORT_TOP);
    let phxViewportBottom = this.binding(PHX_VIEWPORT_BOTTOM);
    dom_default.all(this.el, `[${phxViewportTop}], [${phxViewportBottom}]`, (hookEl) => {
      dom_default.maybeAddPrivateHooks(hookEl, phxViewportTop, phxViewportBottom);
      this.maybeAddNewHook(hookEl);
    });
    dom_default.all(this.el, `[${this.binding(PHX_HOOK)}], [data-phx-${PHX_HOOK}]`, (hookEl) => {
      this.maybeAddNewHook(hookEl);
    });
    dom_default.all(this.el, `[${this.binding(PHX_MOUNTED)}]`, (el) => this.maybeMounted(el));
  }
  applyJoinPatch(live_patch, html, streams, events) {
    this.attachTrueDocEl();
    let patch = new DOMPatch(this, this.el, this.id, html, streams, null);
    patch.markPrunableContentForRemoval();
    this.performPatch(patch, false);
    this.joinNewChildren();
    this.execNewMounted();
    this.joinPending = false;
    this.liveSocket.dispatchEvents(events);
    this.applyPendingUpdates();
    if (live_patch) {
      let { kind, to } = live_patch;
      this.liveSocket.historyPatch(to, kind);
    }
    this.hideLoader();
    if (this.joinCount > 1) {
      this.triggerReconnected();
    }
    this.stopCallback();
  }
  triggerBeforeUpdateHook(fromEl, toEl) {
    this.liveSocket.triggerDOM("onBeforeElUpdated", [fromEl, toEl]);
    let hook = this.getHook(fromEl);
    let isIgnored = hook && dom_default.isIgnored(fromEl, this.binding(PHX_UPDATE));
    if (hook && !fromEl.isEqualNode(toEl) && !(isIgnored && isEqualObj(fromEl.dataset, toEl.dataset))) {
      hook.__beforeUpdate();
      return hook;
    }
  }
  maybeMounted(el) {
    let phxMounted = el.getAttribute(this.binding(PHX_MOUNTED));
    let hasBeenInvoked = phxMounted && dom_default.private(el, "mounted");
    if (phxMounted && !hasBeenInvoked) {
      this.liveSocket.execJS(el, phxMounted);
      dom_default.putPrivate(el, "mounted", true);
    }
  }
  maybeAddNewHook(el, force) {
    let newHook = this.addHook(el);
    if (newHook) {
      newHook.__mounted();
    }
  }
  performPatch(patch, pruneCids) {
    let removedEls = [];
    let phxChildrenAdded = false;
    let updatedHookIds = /* @__PURE__ */ new Set();
    patch.after("added", (el) => {
      this.liveSocket.triggerDOM("onNodeAdded", [el]);
      this.maybeAddNewHook(el);
      if (el.getAttribute) {
        this.maybeMounted(el);
      }
    });
    patch.after("phxChildAdded", (el) => {
      if (dom_default.isPhxSticky(el)) {
        this.liveSocket.joinRootViews();
      } else {
        phxChildrenAdded = true;
      }
    });
    patch.before("updated", (fromEl, toEl) => {
      let hook = this.triggerBeforeUpdateHook(fromEl, toEl);
      if (hook) {
        updatedHookIds.add(fromEl.id);
      }
    });
    patch.after("updated", (el) => {
      if (updatedHookIds.has(el.id)) {
        this.getHook(el).__updated();
      }
    });
    patch.after("discarded", (el) => {
      if (el.nodeType === Node.ELEMENT_NODE) {
        removedEls.push(el);
      }
    });
    patch.after("transitionsDiscarded", (els) => this.afterElementsRemoved(els, pruneCids));
    patch.perform();
    this.afterElementsRemoved(removedEls, pruneCids);
    return phxChildrenAdded;
  }
  afterElementsRemoved(elements, pruneCids) {
    let destroyedCIDs = [];
    elements.forEach((parent) => {
      let components = dom_default.all(parent, `[${PHX_COMPONENT}]`);
      let hooks = dom_default.all(parent, `[${this.binding(PHX_HOOK)}]`);
      components.concat(parent).forEach((el) => {
        let cid = this.componentID(el);
        if (isCid(cid) && destroyedCIDs.indexOf(cid) === -1) {
          destroyedCIDs.push(cid);
        }
      });
      hooks.concat(parent).forEach((hookEl) => {
        let hook = this.getHook(hookEl);
        hook && this.destroyHook(hook);
      });
    });
    if (pruneCids) {
      this.maybePushComponentsDestroyed(destroyedCIDs);
    }
  }
  joinNewChildren() {
    dom_default.findPhxChildren(this.el, this.id).forEach((el) => this.joinChild(el));
  }
  getChildById(id) {
    return this.root.children[this.id][id];
  }
  getDescendentByEl(el) {
    if (el.id === this.id) {
      return this;
    } else {
      return this.children[el.getAttribute(PHX_PARENT_ID)][el.id];
    }
  }
  destroyDescendent(id) {
    for (let parentId in this.root.children) {
      for (let childId in this.root.children[parentId]) {
        if (childId === id) {
          return this.root.children[parentId][childId].destroy();
        }
      }
    }
  }
  joinChild(el) {
    let child = this.getChildById(el.id);
    if (!child) {
      let view = new View(el, this.liveSocket, this);
      this.root.children[this.id][view.id] = view;
      view.join();
      this.childJoins++;
      return true;
    }
  }
  isJoinPending() {
    return this.joinPending;
  }
  ackJoin(_child) {
    this.childJoins--;
    if (this.childJoins === 0) {
      if (this.parent) {
        this.parent.ackJoin(this);
      } else {
        this.onAllChildJoinsComplete();
      }
    }
  }
  onAllChildJoinsComplete() {
    this.joinCallback(() => {
      this.pendingJoinOps.forEach(([view, op]) => {
        if (!view.isDestroyed()) {
          op();
        }
      });
      this.pendingJoinOps = [];
    });
  }
  update(diff, events) {
    if (this.isJoinPending() || this.liveSocket.hasPendingLink() && this.root.isMain()) {
      return this.pendingDiffs.push({ diff, events });
    }
    this.rendered.mergeDiff(diff);
    let phxChildrenAdded = false;
    if (this.rendered.isComponentOnlyDiff(diff)) {
      this.liveSocket.time("component patch complete", () => {
        let parentCids = dom_default.findParentCIDs(this.el, this.rendered.componentCIDs(diff));
        parentCids.forEach((parentCID) => {
          if (this.componentPatch(this.rendered.getComponent(diff, parentCID), parentCID)) {
            phxChildrenAdded = true;
          }
        });
      });
    } else if (!isEmpty(diff)) {
      this.liveSocket.time("full patch complete", () => {
        let [html, streams] = this.renderContainer(diff, "update");
        let patch = new DOMPatch(this, this.el, this.id, html, streams, null);
        phxChildrenAdded = this.performPatch(patch, true);
      });
    }
    this.liveSocket.dispatchEvents(events);
    if (phxChildrenAdded) {
      this.joinNewChildren();
    }
  }
  renderContainer(diff, kind) {
    return this.liveSocket.time(`toString diff (${kind})`, () => {
      let tag = this.el.tagName;
      let cids = diff ? this.rendered.componentCIDs(diff).concat(this.pruningCIDs) : null;
      let [html, streams] = this.rendered.toString(cids);
      return [`<${tag}>${html}</${tag}>`, streams];
    });
  }
  componentPatch(diff, cid) {
    if (isEmpty(diff))
      return false;
    let [html, streams] = this.rendered.componentToString(cid);
    let patch = new DOMPatch(this, this.el, this.id, html, streams, cid);
    let childrenAdded = this.performPatch(patch, true);
    return childrenAdded;
  }
  getHook(el) {
    return this.viewHooks[ViewHook.elementID(el)];
  }
  addHook(el) {
    if (ViewHook.elementID(el) || !el.getAttribute) {
      return;
    }
    let hookName = el.getAttribute(`data-phx-${PHX_HOOK}`) || el.getAttribute(this.binding(PHX_HOOK));
    if (hookName && !this.ownsElement(el)) {
      return;
    }
    let callbacks = this.liveSocket.getHookCallbacks(hookName);
    if (callbacks) {
      if (!el.id) {
        logError(`no DOM ID for hook "${hookName}". Hooks require a unique ID on each element.`, el);
      }
      let hook = new ViewHook(this, el, callbacks);
      this.viewHooks[ViewHook.elementID(hook.el)] = hook;
      return hook;
    } else if (hookName !== null) {
      logError(`unknown hook found for "${hookName}"`, el);
    }
  }
  destroyHook(hook) {
    hook.__destroyed();
    hook.__cleanup__();
    delete this.viewHooks[ViewHook.elementID(hook.el)];
  }
  applyPendingUpdates() {
    this.pendingDiffs.forEach(({ diff, events }) => this.update(diff, events));
    this.pendingDiffs = [];
    this.eachChild((child) => child.applyPendingUpdates());
  }
  eachChild(callback) {
    let children = this.root.children[this.id] || {};
    for (let id in children) {
      callback(this.getChildById(id));
    }
  }
  onChannel(event, cb) {
    this.liveSocket.onChannel(this.channel, event, (resp) => {
      if (this.isJoinPending()) {
        this.root.pendingJoinOps.push([this, () => cb(resp)]);
      } else {
        this.liveSocket.requestDOMUpdate(() => cb(resp));
      }
    });
  }
  bindChannel() {
    this.liveSocket.onChannel(this.channel, "diff", (rawDiff) => {
      this.liveSocket.requestDOMUpdate(() => {
        this.applyDiff("update", rawDiff, ({ diff, events }) => this.update(diff, events));
      });
    });
    this.onChannel("redirect", ({ to, flash }) => this.onRedirect({ to, flash }));
    this.onChannel("live_patch", (redir) => this.onLivePatch(redir));
    this.onChannel("live_redirect", (redir) => this.onLiveRedirect(redir));
    this.channel.onError((reason) => this.onError(reason));
    this.channel.onClose((reason) => this.onClose(reason));
  }
  destroyAllChildren() {
    this.eachChild((child) => child.destroy());
  }
  onLiveRedirect(redir) {
    let { to, kind, flash } = redir;
    let url = this.expandURL(to);
    this.liveSocket.historyRedirect(url, kind, flash);
  }
  onLivePatch(redir) {
    let { to, kind } = redir;
    this.href = this.expandURL(to);
    this.liveSocket.historyPatch(to, kind);
  }
  expandURL(to) {
    return to.startsWith("/") ? `${window.location.protocol}//${window.location.host}${to}` : to;
  }
  onRedirect({ to, flash }) {
    this.liveSocket.redirect(to, flash);
  }
  isDestroyed() {
    return this.destroyed;
  }
  joinDead() {
    this.isDead = true;
  }
  join(callback) {
    this.showLoader(this.liveSocket.loaderTimeout);
    this.bindChannel();
    if (this.isMain()) {
      this.stopCallback = this.liveSocket.withPageLoading({ to: this.href, kind: "initial" });
    }
    this.joinCallback = (onDone) => {
      onDone = onDone || function() {
      };
      callback ? callback(this.joinCount, onDone) : onDone();
    };
    this.liveSocket.wrapPush(this, { timeout: false }, () => {
      return this.channel.join().receive("ok", (data) => {
        if (!this.isDestroyed()) {
          this.liveSocket.requestDOMUpdate(() => this.onJoin(data));
        }
      }).receive("error", (resp) => !this.isDestroyed() && this.onJoinError(resp)).receive("timeout", () => !this.isDestroyed() && this.onJoinError({ reason: "timeout" }));
    });
  }
  onJoinError(resp) {
    if (resp.reason === "reload") {
      this.log("error", () => [`failed mount with ${resp.status}. Falling back to page request`, resp]);
      if (this.isMain()) {
        this.onRedirect({ to: this.href });
      }
      return;
    } else if (resp.reason === "unauthorized" || resp.reason === "stale") {
      this.log("error", () => ["unauthorized live_redirect. Falling back to page request", resp]);
      if (this.isMain()) {
        this.onRedirect({ to: this.href });
      }
      return;
    }
    if (resp.redirect || resp.live_redirect) {
      this.joinPending = false;
      this.channel.leave();
    }
    if (resp.redirect) {
      return this.onRedirect(resp.redirect);
    }
    if (resp.live_redirect) {
      return this.onLiveRedirect(resp.live_redirect);
    }
    this.displayError([PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_SERVER_ERROR_CLASS]);
    this.log("error", () => ["unable to join", resp]);
    if (this.liveSocket.isConnected()) {
      this.liveSocket.reloadWithJitter(this);
    }
  }
  onClose(reason) {
    if (this.isDestroyed()) {
      return;
    }
    if (this.liveSocket.hasPendingLink() && reason !== "leave") {
      return this.liveSocket.reloadWithJitter(this);
    }
    this.destroyAllChildren();
    this.liveSocket.dropActiveElement(this);
    if (document.activeElement) {
      document.activeElement.blur();
    }
    if (this.liveSocket.isUnloaded()) {
      this.showLoader(BEFORE_UNLOAD_LOADER_TIMEOUT);
    }
  }
  onError(reason) {
    this.onClose(reason);
    if (this.liveSocket.isConnected()) {
      this.log("error", () => ["view crashed", reason]);
    }
    if (!this.liveSocket.isUnloaded()) {
      if (this.liveSocket.isConnected()) {
        this.displayError([PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_SERVER_ERROR_CLASS]);
      } else {
        this.displayError([PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_CLIENT_ERROR_CLASS]);
      }
    }
  }
  displayError(classes) {
    if (this.isMain()) {
      dom_default.dispatchEvent(window, "phx:page-loading-start", { detail: { to: this.href, kind: "error" } });
    }
    this.showLoader();
    this.setContainerClasses(...classes);
    this.execAll(this.binding("disconnected"));
  }
  pushWithReply(refGenerator, event, payload, onReply = function() {
  }) {
    if (!this.isConnected()) {
      return;
    }
    let [ref, [el], opts] = refGenerator ? refGenerator() : [null, [], {}];
    let onLoadingDone = function() {
    };
    if (opts.page_loading || el && el.getAttribute(this.binding(PHX_PAGE_LOADING)) !== null) {
      onLoadingDone = this.liveSocket.withPageLoading({ kind: "element", target: el });
    }
    if (typeof payload.cid !== "number") {
      delete payload.cid;
    }
    return this.liveSocket.wrapPush(this, { timeout: true }, () => {
      return this.channel.push(event, payload, PUSH_TIMEOUT).receive("ok", (resp) => {
        let finish = (hookReply) => {
          if (resp.redirect) {
            this.onRedirect(resp.redirect);
          }
          if (resp.live_patch) {
            this.onLivePatch(resp.live_patch);
          }
          if (resp.live_redirect) {
            this.onLiveRedirect(resp.live_redirect);
          }
          onLoadingDone();
          onReply(resp, hookReply);
        };
        if (resp.diff) {
          this.liveSocket.requestDOMUpdate(() => {
            this.applyDiff("update", resp.diff, ({ diff, reply, events }) => {
              if (ref !== null) {
                this.undoRefs(ref);
              }
              this.update(diff, events);
              finish(reply);
            });
          });
        } else {
          if (ref !== null) {
            this.undoRefs(ref);
          }
          finish(null);
        }
      });
    });
  }
  undoRefs(ref) {
    if (!this.isConnected()) {
      return;
    }
    dom_default.all(document, `[${PHX_REF_SRC}="${this.id}"][${PHX_REF}="${ref}"]`, (el) => {
      let disabledVal = el.getAttribute(PHX_DISABLED);
      el.removeAttribute(PHX_REF);
      el.removeAttribute(PHX_REF_SRC);
      if (el.getAttribute(PHX_READONLY) !== null) {
        el.readOnly = false;
        el.removeAttribute(PHX_READONLY);
      }
      if (disabledVal !== null) {
        el.disabled = disabledVal === "true" ? true : false;
        el.removeAttribute(PHX_DISABLED);
      }
      PHX_EVENT_CLASSES.forEach((className) => dom_default.removeClass(el, className));
      let disableRestore = el.getAttribute(PHX_DISABLE_WITH_RESTORE);
      if (disableRestore !== null) {
        el.innerText = disableRestore;
        el.removeAttribute(PHX_DISABLE_WITH_RESTORE);
      }
      let toEl = dom_default.private(el, PHX_REF);
      if (toEl) {
        let hook = this.triggerBeforeUpdateHook(el, toEl);
        DOMPatch.patchEl(el, toEl, this.liveSocket.getActiveElement());
        if (hook) {
          hook.__updated();
        }
        dom_default.deletePrivate(el, PHX_REF);
      }
    });
  }
  putRef(elements, event, opts = {}) {
    let newRef = this.ref++;
    let disableWith = this.binding(PHX_DISABLE_WITH);
    if (opts.loading) {
      elements = elements.concat(dom_default.all(document, opts.loading));
    }
    elements.forEach((el) => {
      el.classList.add(`phx-${event}-loading`);
      el.setAttribute(PHX_REF, newRef);
      el.setAttribute(PHX_REF_SRC, this.el.id);
      let disableText = el.getAttribute(disableWith);
      if (disableText !== null) {
        if (!el.getAttribute(PHX_DISABLE_WITH_RESTORE)) {
          el.setAttribute(PHX_DISABLE_WITH_RESTORE, el.innerText);
        }
        if (disableText !== "") {
          el.innerText = disableText;
        }
        el.setAttribute("disabled", "");
      }
    });
    return [newRef, elements, opts];
  }
  componentID(el) {
    let cid = el.getAttribute && el.getAttribute(PHX_COMPONENT);
    return cid ? parseInt(cid) : null;
  }
  targetComponentID(target, targetCtx, opts = {}) {
    if (isCid(targetCtx)) {
      return targetCtx;
    }
    let cidOrSelector = target.getAttribute(this.binding("target"));
    if (isCid(cidOrSelector)) {
      return parseInt(cidOrSelector);
    } else if (targetCtx && (cidOrSelector !== null || opts.target)) {
      return this.closestComponentID(targetCtx);
    } else {
      return null;
    }
  }
  closestComponentID(targetCtx) {
    if (isCid(targetCtx)) {
      return targetCtx;
    } else if (targetCtx) {
      return maybe(targetCtx.closest(`[${PHX_COMPONENT}]`), (el) => this.ownsElement(el) && this.componentID(el));
    } else {
      return null;
    }
  }
  pushHookEvent(el, targetCtx, event, payload, onReply) {
    if (!this.isConnected()) {
      this.log("hook", () => ["unable to push hook event. LiveView not connected", event, payload]);
      return false;
    }
    let [ref, els, opts] = this.putRef([el], "hook");
    this.pushWithReply(() => [ref, els, opts], "event", {
      type: "hook",
      event,
      value: payload,
      cid: this.closestComponentID(targetCtx)
    }, (resp, reply) => onReply(reply, ref));
    return ref;
  }
  extractMeta(el, meta, value) {
    let prefix = this.binding("value-");
    for (let i = 0; i < el.attributes.length; i++) {
      if (!meta) {
        meta = {};
      }
      let name = el.attributes[i].name;
      if (name.startsWith(prefix)) {
        meta[name.replace(prefix, "")] = el.getAttribute(name);
      }
    }
    if (el.value !== void 0 && !(el instanceof HTMLFormElement)) {
      if (!meta) {
        meta = {};
      }
      meta.value = el.value;
      if (el.tagName === "INPUT" && CHECKABLE_INPUTS.indexOf(el.type) >= 0 && !el.checked) {
        delete meta.value;
      }
    }
    if (value) {
      if (!meta) {
        meta = {};
      }
      for (let key in value) {
        meta[key] = value[key];
      }
    }
    return meta;
  }
  pushEvent(type, el, targetCtx, phxEvent, meta, opts = {}, onReply) {
    this.pushWithReply(() => this.putRef([el], type, opts), "event", {
      type,
      event: phxEvent,
      value: this.extractMeta(el, meta, opts.value),
      cid: this.targetComponentID(el, targetCtx, opts)
    }, (resp, reply) => onReply && onReply(reply));
  }
  pushFileProgress(fileEl, entryRef, progress, onReply = function() {
  }) {
    this.liveSocket.withinOwners(fileEl.form, (view, targetCtx) => {
      view.pushWithReply(null, "progress", {
        event: fileEl.getAttribute(view.binding(PHX_PROGRESS)),
        ref: fileEl.getAttribute(PHX_UPLOAD_REF),
        entry_ref: entryRef,
        progress,
        cid: view.targetComponentID(fileEl.form, targetCtx)
      }, onReply);
    });
  }
  pushInput(inputEl, targetCtx, forceCid, phxEvent, opts, callback) {
    let uploads;
    let cid = isCid(forceCid) ? forceCid : this.targetComponentID(inputEl.form, targetCtx);
    let refGenerator = () => this.putRef([inputEl, inputEl.form], "change", opts);
    let formData;
    let meta = this.extractMeta(inputEl.form);
    if (inputEl.getAttribute(this.binding("change"))) {
      formData = serializeForm(inputEl.form, __spreadValues({ _target: opts._target }, meta), [inputEl.name]);
    } else {
      formData = serializeForm(inputEl.form, __spreadValues({ _target: opts._target }, meta));
    }
    if (dom_default.isUploadInput(inputEl) && inputEl.files && inputEl.files.length > 0) {
      LiveUploader.trackFiles(inputEl, Array.from(inputEl.files));
    }
    uploads = LiveUploader.serializeUploads(inputEl);
    let event = {
      type: "form",
      event: phxEvent,
      value: formData,
      uploads,
      cid
    };
    this.pushWithReply(refGenerator, "event", event, (resp) => {
      dom_default.showError(inputEl, this.liveSocket.binding(PHX_FEEDBACK_FOR));
      if (dom_default.isUploadInput(inputEl) && dom_default.isAutoUpload(inputEl)) {
        if (LiveUploader.filesAwaitingPreflight(inputEl).length > 0) {
          let [ref, _els] = refGenerator();
          this.uploadFiles(inputEl.form, targetCtx, ref, cid, (_uploads) => {
            callback && callback(resp);
            this.triggerAwaitingSubmit(inputEl.form);
          });
        }
      } else {
        callback && callback(resp);
      }
    });
  }
  triggerAwaitingSubmit(formEl) {
    let awaitingSubmit = this.getScheduledSubmit(formEl);
    if (awaitingSubmit) {
      let [_el, _ref, _opts, callback] = awaitingSubmit;
      this.cancelSubmit(formEl);
      callback();
    }
  }
  getScheduledSubmit(formEl) {
    return this.formSubmits.find(([el, _ref, _opts, _callback]) => el.isSameNode(formEl));
  }
  scheduleSubmit(formEl, ref, opts, callback) {
    if (this.getScheduledSubmit(formEl)) {
      return true;
    }
    this.formSubmits.push([formEl, ref, opts, callback]);
  }
  cancelSubmit(formEl) {
    this.formSubmits = this.formSubmits.filter(([el, ref, _callback]) => {
      if (el.isSameNode(formEl)) {
        this.undoRefs(ref);
        return false;
      } else {
        return true;
      }
    });
  }
  disableForm(formEl, opts = {}) {
    let filterIgnored = (el) => {
      let userIgnored = closestPhxBinding(el, `${this.binding(PHX_UPDATE)}=ignore`, el.form);
      return !(userIgnored || closestPhxBinding(el, "data-phx-update=ignore", el.form));
    };
    let filterDisables = (el) => {
      return el.hasAttribute(this.binding(PHX_DISABLE_WITH));
    };
    let filterButton = (el) => el.tagName == "BUTTON";
    let filterInput = (el) => ["INPUT", "TEXTAREA", "SELECT"].includes(el.tagName);
    let formElements = Array.from(formEl.elements);
    let disables = formElements.filter(filterDisables);
    let buttons = formElements.filter(filterButton).filter(filterIgnored);
    let inputs = formElements.filter(filterInput).filter(filterIgnored);
    buttons.forEach((button) => {
      button.setAttribute(PHX_DISABLED, button.disabled);
      button.disabled = true;
    });
    inputs.forEach((input) => {
      input.setAttribute(PHX_READONLY, input.readOnly);
      input.readOnly = true;
      if (input.files) {
        input.setAttribute(PHX_DISABLED, input.disabled);
        input.disabled = true;
      }
    });
    formEl.setAttribute(this.binding(PHX_PAGE_LOADING), "");
    return this.putRef([formEl].concat(disables).concat(buttons).concat(inputs), "submit", opts);
  }
  pushFormSubmit(formEl, targetCtx, phxEvent, submitter, opts, onReply) {
    let refGenerator = () => this.disableForm(formEl, opts);
    let cid = this.targetComponentID(formEl, targetCtx);
    if (LiveUploader.hasUploadsInProgress(formEl)) {
      let [ref, _els] = refGenerator();
      let push = () => this.pushFormSubmit(formEl, submitter, targetCtx, phxEvent, opts, onReply);
      return this.scheduleSubmit(formEl, ref, opts, push);
    } else if (LiveUploader.inputsAwaitingPreflight(formEl).length > 0) {
      let [ref, els] = refGenerator();
      let proxyRefGen = () => [ref, els, opts];
      this.uploadFiles(formEl, targetCtx, ref, cid, (_uploads) => {
        let meta = this.extractMeta(formEl);
        let formData = serializeForm(formEl, __spreadValues({ submitter }, meta));
        this.pushWithReply(proxyRefGen, "event", {
          type: "form",
          event: phxEvent,
          value: formData,
          cid
        }, onReply);
      });
    } else if (!(formEl.hasAttribute(PHX_REF) && formEl.classList.contains("phx-submit-loading"))) {
      let meta = this.extractMeta(formEl);
      let formData = serializeForm(formEl, __spreadValues({ submitter }, meta));
      this.pushWithReply(refGenerator, "event", {
        type: "form",
        event: phxEvent,
        value: formData,
        cid
      }, onReply);
    }
  }
  uploadFiles(formEl, targetCtx, ref, cid, onComplete) {
    let joinCountAtUpload = this.joinCount;
    let inputEls = LiveUploader.activeFileInputs(formEl);
    let numFileInputsInProgress = inputEls.length;
    inputEls.forEach((inputEl) => {
      let uploader = new LiveUploader(inputEl, this, () => {
        numFileInputsInProgress--;
        if (numFileInputsInProgress === 0) {
          onComplete();
        }
      });
      this.uploaders[inputEl] = uploader;
      let entries = uploader.entries().map((entry) => entry.toPreflightPayload());
      let payload = {
        ref: inputEl.getAttribute(PHX_UPLOAD_REF),
        entries,
        cid: this.targetComponentID(inputEl.form, targetCtx)
      };
      this.log("upload", () => ["sending preflight request", payload]);
      this.pushWithReply(null, "allow_upload", payload, (resp) => {
        this.log("upload", () => ["got preflight response", resp]);
        if (resp.error) {
          this.undoRefs(ref);
          let [entry_ref, reason] = resp.error;
          this.log("upload", () => [`error for entry ${entry_ref}`, reason]);
        } else {
          let onError = (callback) => {
            this.channel.onError(() => {
              if (this.joinCount === joinCountAtUpload) {
                callback();
              }
            });
          };
          uploader.initAdapterUpload(resp, onError, this.liveSocket);
        }
      });
    });
  }
  dispatchUploads(targetCtx, name, filesOrBlobs) {
    let targetElement = this.targetCtxElement(targetCtx) || this.el;
    let inputs = dom_default.findUploadInputs(targetElement).filter((el) => el.name === name);
    if (inputs.length === 0) {
      logError(`no live file inputs found matching the name "${name}"`);
    } else if (inputs.length > 1) {
      logError(`duplicate live file inputs found matching the name "${name}"`);
    } else {
      dom_default.dispatchEvent(inputs[0], PHX_TRACK_UPLOADS, { detail: { files: filesOrBlobs } });
    }
  }
  targetCtxElement(targetCtx) {
    if (isCid(targetCtx)) {
      let [target] = dom_default.findComponentNodeList(this.el, targetCtx);
      return target;
    } else if (targetCtx) {
      return targetCtx;
    } else {
      return null;
    }
  }
  pushFormRecovery(form, newCid, callback) {
    this.liveSocket.withinOwners(form, (view, targetCtx) => {
      let phxChange = this.binding("change");
      let inputs = Array.from(form.elements).filter((el) => dom_default.isFormInput(el) && el.name && !el.hasAttribute(phxChange));
      if (inputs.length === 0) {
        return;
      }
      inputs.forEach((input2) => input2.hasAttribute(PHX_UPLOAD_REF) && LiveUploader.clearFiles(input2));
      let input = inputs.find((el) => el.type !== "hidden") || inputs[0];
      let phxEvent = form.getAttribute(this.binding(PHX_AUTO_RECOVER)) || form.getAttribute(this.binding("change"));
      js_default.exec("change", phxEvent, view, input, ["push", { _target: input.name, newCid, callback }]);
    });
  }
  pushLinkPatch(href, targetEl, callback) {
    let linkRef = this.liveSocket.setPendingLink(href);
    let refGen = targetEl ? () => this.putRef([targetEl], "click") : null;
    let fallback = () => this.liveSocket.redirect(window.location.href);
    let url = href.startsWith("/") ? `${location.protocol}//${location.host}${href}` : href;
    let push = this.pushWithReply(refGen, "live_patch", { url }, (resp) => {
      this.liveSocket.requestDOMUpdate(() => {
        if (resp.link_redirect) {
          this.liveSocket.replaceMain(href, null, callback, linkRef);
        } else {
          if (this.liveSocket.commitPendingLink(linkRef)) {
            this.href = href;
          }
          this.applyPendingUpdates();
          callback && callback(linkRef);
        }
      });
    });
    if (push) {
      push.receive("timeout", fallback);
    } else {
      fallback();
    }
  }
  formsForRecovery(html) {
    if (this.joinCount === 0) {
      return [];
    }
    let phxChange = this.binding("change");
    let template = document.createElement("template");
    template.innerHTML = html;
    return dom_default.all(this.el, `form[${phxChange}]`).filter((form) => form.id && this.ownsElement(form)).filter((form) => form.elements.length > 0).filter((form) => form.getAttribute(this.binding(PHX_AUTO_RECOVER)) !== "ignore").map((form) => {
      const phxChangeValue = form.getAttribute(phxChange).replaceAll(/([\[\]"])/g, "\\$1");
      let newForm = template.content.querySelector(`form[id="${form.id}"][${phxChange}="${phxChangeValue}"]`);
      if (newForm) {
        return [form, newForm, this.targetComponentID(newForm)];
      } else {
        return [form, form, this.targetComponentID(form)];
      }
    }).filter(([form, newForm, newCid]) => newForm);
  }
  maybePushComponentsDestroyed(destroyedCIDs) {
    let willDestroyCIDs = destroyedCIDs.filter((cid) => {
      return dom_default.findComponentNodeList(this.el, cid).length === 0;
    });
    if (willDestroyCIDs.length > 0) {
      this.pruningCIDs.push(...willDestroyCIDs);
      this.pushWithReply(null, "cids_will_destroy", { cids: willDestroyCIDs }, () => {
        this.pruningCIDs = this.pruningCIDs.filter((cid) => willDestroyCIDs.indexOf(cid) !== -1);
        let completelyDestroyCIDs = willDestroyCIDs.filter((cid) => {
          return dom_default.findComponentNodeList(this.el, cid).length === 0;
        });
        if (completelyDestroyCIDs.length > 0) {
          this.pushWithReply(null, "cids_destroyed", { cids: completelyDestroyCIDs }, (resp) => {
            this.rendered.pruneCIDs(resp.cids);
          });
        }
      });
    }
  }
  ownsElement(el) {
    let parentViewEl = el.closest(PHX_VIEW_SELECTOR);
    return el.getAttribute(PHX_PARENT_ID) === this.id || parentViewEl && parentViewEl.id === this.id || !parentViewEl && this.isDead;
  }
  submitForm(form, targetCtx, phxEvent, submitter, opts = {}) {
    dom_default.putPrivate(form, PHX_HAS_SUBMITTED, true);
    let phxFeedback = this.liveSocket.binding(PHX_FEEDBACK_FOR);
    let inputs = Array.from(form.elements);
    inputs.forEach((input) => dom_default.putPrivate(input, PHX_HAS_SUBMITTED, true));
    this.liveSocket.blurActiveElement(this);
    this.pushFormSubmit(form, targetCtx, phxEvent, submitter, opts, () => {
      inputs.forEach((input) => dom_default.showError(input, phxFeedback));
      this.liveSocket.restorePreviouslyActiveFocus();
    });
  }
  binding(kind) {
    return this.liveSocket.binding(kind);
  }
};
var LiveSocket = class {
  constructor(url, phxSocket, opts = {}) {
    this.unloaded = false;
    if (!phxSocket || phxSocket.constructor.name === "Object") {
      throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);
    }
    this.socket = new phxSocket(url, opts);
    this.bindingPrefix = opts.bindingPrefix || BINDING_PREFIX;
    this.opts = opts;
    this.params = closure2(opts.params || {});
    this.viewLogger = opts.viewLogger;
    this.metadataCallbacks = opts.metadata || {};
    this.defaults = Object.assign(clone(DEFAULTS), opts.defaults || {});
    this.activeElement = null;
    this.prevActive = null;
    this.silenced = false;
    this.main = null;
    this.outgoingMainEl = null;
    this.clickStartedAtTarget = null;
    this.linkRef = 1;
    this.roots = {};
    this.href = window.location.href;
    this.pendingLink = null;
    this.currentLocation = clone(window.location);
    this.hooks = opts.hooks || {};
    this.uploaders = opts.uploaders || {};
    this.loaderTimeout = opts.loaderTimeout || LOADER_TIMEOUT;
    this.reloadWithJitterTimer = null;
    this.maxReloads = opts.maxReloads || MAX_RELOADS;
    this.reloadJitterMin = opts.reloadJitterMin || RELOAD_JITTER_MIN;
    this.reloadJitterMax = opts.reloadJitterMax || RELOAD_JITTER_MAX;
    this.failsafeJitter = opts.failsafeJitter || FAILSAFE_JITTER;
    this.localStorage = opts.localStorage || window.localStorage;
    this.sessionStorage = opts.sessionStorage || window.sessionStorage;
    this.boundTopLevelEvents = false;
    this.domCallbacks = Object.assign({ onNodeAdded: closure2(), onBeforeElUpdated: closure2() }, opts.dom || {});
    this.transitions = new TransitionSet();
    window.addEventListener("pagehide", (_e) => {
      this.unloaded = true;
    });
    this.socket.onOpen(() => {
      if (this.isUnloaded()) {
        window.location.reload();
      }
    });
  }
  isProfileEnabled() {
    return this.sessionStorage.getItem(PHX_LV_PROFILE) === "true";
  }
  isDebugEnabled() {
    return this.sessionStorage.getItem(PHX_LV_DEBUG) === "true";
  }
  isDebugDisabled() {
    return this.sessionStorage.getItem(PHX_LV_DEBUG) === "false";
  }
  enableDebug() {
    this.sessionStorage.setItem(PHX_LV_DEBUG, "true");
  }
  enableProfiling() {
    this.sessionStorage.setItem(PHX_LV_PROFILE, "true");
  }
  disableDebug() {
    this.sessionStorage.setItem(PHX_LV_DEBUG, "false");
  }
  disableProfiling() {
    this.sessionStorage.removeItem(PHX_LV_PROFILE);
  }
  enableLatencySim(upperBoundMs) {
    this.enableDebug();
    console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable");
    this.sessionStorage.setItem(PHX_LV_LATENCY_SIM, upperBoundMs);
  }
  disableLatencySim() {
    this.sessionStorage.removeItem(PHX_LV_LATENCY_SIM);
  }
  getLatencySim() {
    let str = this.sessionStorage.getItem(PHX_LV_LATENCY_SIM);
    return str ? parseInt(str) : null;
  }
  getSocket() {
    return this.socket;
  }
  connect() {
    if (window.location.hostname === "localhost" && !this.isDebugDisabled()) {
      this.enableDebug();
    }
    let doConnect = () => {
      if (this.joinRootViews()) {
        this.bindTopLevelEvents();
        this.socket.connect();
      } else if (this.main) {
        this.socket.connect();
      } else {
        this.bindTopLevelEvents({ dead: true });
      }
      this.joinDeadView();
    };
    if (["complete", "loaded", "interactive"].indexOf(document.readyState) >= 0) {
      doConnect();
    } else {
      document.addEventListener("DOMContentLoaded", () => doConnect());
    }
  }
  disconnect(callback) {
    clearTimeout(this.reloadWithJitterTimer);
    this.socket.disconnect(callback);
  }
  replaceTransport(transport) {
    clearTimeout(this.reloadWithJitterTimer);
    this.socket.replaceTransport(transport);
    this.connect();
  }
  execJS(el, encodedJS, eventType = null) {
    this.owner(el, (view) => js_default.exec(eventType, encodedJS, view, el));
  }
  execJSHookPush(el, phxEvent, data, callback) {
    this.withinOwners(el, (view) => {
      js_default.exec("hook", phxEvent, view, el, ["push", { data, callback }]);
    });
  }
  unload() {
    if (this.unloaded) {
      return;
    }
    if (this.main && this.isConnected()) {
      this.log(this.main, "socket", () => ["disconnect for page nav"]);
    }
    this.unloaded = true;
    this.destroyAllViews();
    this.disconnect();
  }
  triggerDOM(kind, args) {
    this.domCallbacks[kind](...args);
  }
  time(name, func) {
    if (!this.isProfileEnabled() || !console.time) {
      return func();
    }
    console.time(name);
    let result = func();
    console.timeEnd(name);
    return result;
  }
  log(view, kind, msgCallback) {
    if (this.viewLogger) {
      let [msg, obj] = msgCallback();
      this.viewLogger(view, kind, msg, obj);
    } else if (this.isDebugEnabled()) {
      let [msg, obj] = msgCallback();
      debug(view, kind, msg, obj);
    }
  }
  requestDOMUpdate(callback) {
    this.transitions.after(callback);
  }
  transition(time, onStart, onDone = function() {
  }) {
    this.transitions.addTransition(time, onStart, onDone);
  }
  onChannel(channel, event, cb) {
    channel.on(event, (data) => {
      let latency = this.getLatencySim();
      if (!latency) {
        cb(data);
      } else {
        setTimeout(() => cb(data), latency);
      }
    });
  }
  wrapPush(view, opts, push) {
    let latency = this.getLatencySim();
    let oldJoinCount = view.joinCount;
    if (!latency) {
      if (this.isConnected() && opts.timeout) {
        return push().receive("timeout", () => {
          if (view.joinCount === oldJoinCount && !view.isDestroyed()) {
            this.reloadWithJitter(view, () => {
              this.log(view, "timeout", () => ["received timeout while communicating with server. Falling back to hard refresh for recovery"]);
            });
          }
        });
      } else {
        return push();
      }
    }
    let fakePush = {
      receives: [],
      receive(kind, cb) {
        this.receives.push([kind, cb]);
      }
    };
    setTimeout(() => {
      if (view.isDestroyed()) {
        return;
      }
      fakePush.receives.reduce((acc, [kind, cb]) => acc.receive(kind, cb), push());
    }, latency);
    return fakePush;
  }
  reloadWithJitter(view, log) {
    clearTimeout(this.reloadWithJitterTimer);
    this.disconnect();
    let minMs = this.reloadJitterMin;
    let maxMs = this.reloadJitterMax;
    let afterMs = Math.floor(Math.random() * (maxMs - minMs + 1)) + minMs;
    let tries = browser_default.updateLocal(this.localStorage, window.location.pathname, CONSECUTIVE_RELOADS, 0, (count) => count + 1);
    if (tries > this.maxReloads) {
      afterMs = this.failsafeJitter;
    }
    this.reloadWithJitterTimer = setTimeout(() => {
      if (view.isDestroyed() || view.isConnected()) {
        return;
      }
      view.destroy();
      log ? log() : this.log(view, "join", () => [`encountered ${tries} consecutive reloads`]);
      if (tries > this.maxReloads) {
        this.log(view, "join", () => [`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`]);
      }
      if (this.hasPendingLink()) {
        window.location = this.pendingLink;
      } else {
        window.location.reload();
      }
    }, afterMs);
  }
  getHookCallbacks(name) {
    return name && name.startsWith("Phoenix.") ? hooks_default[name.split(".")[1]] : this.hooks[name];
  }
  isUnloaded() {
    return this.unloaded;
  }
  isConnected() {
    return this.socket.isConnected();
  }
  getBindingPrefix() {
    return this.bindingPrefix;
  }
  binding(kind) {
    return `${this.getBindingPrefix()}${kind}`;
  }
  channel(topic, params) {
    return this.socket.channel(topic, params);
  }
  joinDeadView() {
    let body = document.body;
    if (body && !this.isPhxView(body) && !this.isPhxView(document.firstElementChild)) {
      let view = this.newRootView(body);
      view.setHref(this.getHref());
      view.joinDead();
      if (!this.main) {
        this.main = view;
      }
      window.requestAnimationFrame(() => view.execNewMounted());
    }
  }
  joinRootViews() {
    let rootsFound = false;
    dom_default.all(document, `${PHX_VIEW_SELECTOR}:not([${PHX_PARENT_ID}])`, (rootEl) => {
      if (!this.getRootById(rootEl.id)) {
        let view = this.newRootView(rootEl);
        view.setHref(this.getHref());
        view.join();
        if (rootEl.hasAttribute(PHX_MAIN)) {
          this.main = view;
        }
      }
      rootsFound = true;
    });
    return rootsFound;
  }
  redirect(to, flash) {
    this.unload();
    browser_default.redirect(to, flash);
  }
  replaceMain(href, flash, callback = null, linkRef = this.setPendingLink(href)) {
    let liveReferer = this.currentLocation.href;
    this.outgoingMainEl = this.outgoingMainEl || this.main.el;
    let newMainEl = dom_default.cloneNode(this.outgoingMainEl, "");
    this.main.showLoader(this.loaderTimeout);
    this.main.destroy();
    this.main = this.newRootView(newMainEl, flash, liveReferer);
    this.main.setRedirect(href);
    this.transitionRemoves();
    this.main.join((joinCount, onDone) => {
      if (joinCount === 1 && this.commitPendingLink(linkRef)) {
        this.requestDOMUpdate(() => {
          dom_default.findPhxSticky(document).forEach((el) => newMainEl.appendChild(el));
          this.outgoingMainEl.replaceWith(newMainEl);
          this.outgoingMainEl = null;
          callback && requestAnimationFrame(() => callback(linkRef));
          onDone();
        });
      }
    });
  }
  transitionRemoves(elements) {
    let removeAttr = this.binding("remove");
    elements = elements || dom_default.all(document, `[${removeAttr}]`);
    elements.forEach((el) => {
      this.execJS(el, el.getAttribute(removeAttr), "remove");
    });
  }
  isPhxView(el) {
    return el.getAttribute && el.getAttribute(PHX_SESSION) !== null;
  }
  newRootView(el, flash, liveReferer) {
    let view = new View(el, this, null, flash, liveReferer);
    this.roots[view.id] = view;
    return view;
  }
  owner(childEl, callback) {
    let view = maybe(childEl.closest(PHX_VIEW_SELECTOR), (el) => this.getViewByEl(el)) || this.main;
    if (view) {
      callback(view);
    }
  }
  withinOwners(childEl, callback) {
    this.owner(childEl, (view) => callback(view, childEl));
  }
  getViewByEl(el) {
    let rootId = el.getAttribute(PHX_ROOT_ID);
    return maybe(this.getRootById(rootId), (root) => root.getDescendentByEl(el));
  }
  getRootById(id) {
    return this.roots[id];
  }
  destroyAllViews() {
    for (let id in this.roots) {
      this.roots[id].destroy();
      delete this.roots[id];
    }
    this.main = null;
  }
  destroyViewByEl(el) {
    let root = this.getRootById(el.getAttribute(PHX_ROOT_ID));
    if (root && root.id === el.id) {
      root.destroy();
      delete this.roots[root.id];
    } else if (root) {
      root.destroyDescendent(el.id);
    }
  }
  setActiveElement(target) {
    if (this.activeElement === target) {
      return;
    }
    this.activeElement = target;
    let cancel = () => {
      if (target === this.activeElement) {
        this.activeElement = null;
      }
      target.removeEventListener("mouseup", this);
      target.removeEventListener("touchend", this);
    };
    target.addEventListener("mouseup", cancel);
    target.addEventListener("touchend", cancel);
  }
  getActiveElement() {
    if (document.activeElement === document.body) {
      return this.activeElement || document.activeElement;
    } else {
      return document.activeElement || document.body;
    }
  }
  dropActiveElement(view) {
    if (this.prevActive && view.ownsElement(this.prevActive)) {
      this.prevActive = null;
    }
  }
  restorePreviouslyActiveFocus() {
    if (this.prevActive && this.prevActive !== document.body) {
      this.prevActive.focus();
    }
  }
  blurActiveElement() {
    this.prevActive = this.getActiveElement();
    if (this.prevActive !== document.body) {
      this.prevActive.blur();
    }
  }
  bindTopLevelEvents({ dead } = {}) {
    if (this.boundTopLevelEvents) {
      return;
    }
    this.boundTopLevelEvents = true;
    this.socket.onClose((event) => {
      if (event && event.code === 1e3 && this.main) {
        return this.reloadWithJitter(this.main);
      }
    });
    document.body.addEventListener("click", function() {
    });
    window.addEventListener("pageshow", (e) => {
      if (e.persisted) {
        this.getSocket().disconnect();
        this.withPageLoading({ to: window.location.href, kind: "redirect" });
        window.location.reload();
      }
    }, true);
    if (!dead) {
      this.bindNav();
    }
    this.bindClicks();
    if (!dead) {
      this.bindForms();
    }
    this.bind({ keyup: "keyup", keydown: "keydown" }, (e, type, view, targetEl, phxEvent, eventTarget) => {
      let matchKey = targetEl.getAttribute(this.binding(PHX_KEY));
      let pressedKey = e.key && e.key.toLowerCase();
      if (matchKey && matchKey.toLowerCase() !== pressedKey) {
        return;
      }
      let data = __spreadValues({ key: e.key }, this.eventMeta(type, e, targetEl));
      js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
    });
    this.bind({ blur: "focusout", focus: "focusin" }, (e, type, view, targetEl, phxEvent, eventTarget) => {
      if (!eventTarget) {
        let data = __spreadValues({ key: e.key }, this.eventMeta(type, e, targetEl));
        js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
      }
    });
    this.bind({ blur: "blur", focus: "focus" }, (e, type, view, targetEl, targetCtx, phxEvent, phxTarget) => {
      if (phxTarget === "window") {
        let data = this.eventMeta(type, e, targetEl);
        js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
      }
    });
    window.addEventListener("dragover", (e) => e.preventDefault());
    window.addEventListener("drop", (e) => {
      e.preventDefault();
      let dropTargetId = maybe(closestPhxBinding(e.target, this.binding(PHX_DROP_TARGET)), (trueTarget) => {
        return trueTarget.getAttribute(this.binding(PHX_DROP_TARGET));
      });
      let dropTarget = dropTargetId && document.getElementById(dropTargetId);
      let files = Array.from(e.dataTransfer.files || []);
      if (!dropTarget || dropTarget.disabled || files.length === 0 || !(dropTarget.files instanceof FileList)) {
        return;
      }
      LiveUploader.trackFiles(dropTarget, files, e.dataTransfer);
      dropTarget.dispatchEvent(new Event("input", { bubbles: true }));
    });
    this.on(PHX_TRACK_UPLOADS, (e) => {
      let uploadTarget = e.target;
      if (!dom_default.isUploadInput(uploadTarget)) {
        return;
      }
      let files = Array.from(e.detail.files || []).filter((f) => f instanceof File || f instanceof Blob);
      LiveUploader.trackFiles(uploadTarget, files);
      uploadTarget.dispatchEvent(new Event("input", { bubbles: true }));
    });
  }
  eventMeta(eventName, e, targetEl) {
    let callback = this.metadataCallbacks[eventName];
    return callback ? callback(e, targetEl) : {};
  }
  setPendingLink(href) {
    this.linkRef++;
    this.pendingLink = href;
    return this.linkRef;
  }
  commitPendingLink(linkRef) {
    if (this.linkRef !== linkRef) {
      return false;
    } else {
      this.href = this.pendingLink;
      this.pendingLink = null;
      return true;
    }
  }
  getHref() {
    return this.href;
  }
  hasPendingLink() {
    return !!this.pendingLink;
  }
  bind(events, callback) {
    for (let event in events) {
      let browserEventName = events[event];
      this.on(browserEventName, (e) => {
        let binding = this.binding(event);
        let windowBinding = this.binding(`window-${event}`);
        let targetPhxEvent = e.target.getAttribute && e.target.getAttribute(binding);
        if (targetPhxEvent) {
          this.debounce(e.target, e, browserEventName, () => {
            this.withinOwners(e.target, (view) => {
              callback(e, event, view, e.target, targetPhxEvent, null);
            });
          });
        } else {
          dom_default.all(document, `[${windowBinding}]`, (el) => {
            let phxEvent = el.getAttribute(windowBinding);
            this.debounce(el, e, browserEventName, () => {
              this.withinOwners(el, (view) => {
                callback(e, event, view, el, phxEvent, "window");
              });
            });
          });
        }
      });
    }
  }
  bindClicks() {
    window.addEventListener("click", (e) => this.clickStartedAtTarget = e.target);
    this.bindClick("click", "click", false);
    this.bindClick("mousedown", "capture-click", true);
  }
  bindClick(eventName, bindingName, capture) {
    let click = this.binding(bindingName);
    window.addEventListener(eventName, (e) => {
      let target = null;
      if (capture) {
        target = e.target.matches(`[${click}]`) ? e.target : e.target.querySelector(`[${click}]`);
      } else {
        let clickStartedAtTarget = this.clickStartedAtTarget || e.target;
        target = closestPhxBinding(clickStartedAtTarget, click);
        this.dispatchClickAway(e, clickStartedAtTarget);
        this.clickStartedAtTarget = null;
      }
      let phxEvent = target && target.getAttribute(click);
      if (!phxEvent) {
        if (!capture && dom_default.isNewPageClick(e, window.location)) {
          this.unload();
        }
        return;
      }
      if (target.getAttribute("href") === "#") {
        e.preventDefault();
      }
      if (target.hasAttribute(PHX_REF)) {
        return;
      }
      this.debounce(target, e, "click", () => {
        this.withinOwners(target, (view) => {
          js_default.exec("click", phxEvent, view, target, ["push", { data: this.eventMeta("click", e, target) }]);
        });
      });
    }, capture);
  }
  dispatchClickAway(e, clickStartedAt) {
    let phxClickAway = this.binding("click-away");
    dom_default.all(document, `[${phxClickAway}]`, (el) => {
      if (!(el.isSameNode(clickStartedAt) || el.contains(clickStartedAt))) {
        this.withinOwners(e.target, (view) => {
          let phxEvent = el.getAttribute(phxClickAway);
          if (js_default.isVisible(el)) {
            js_default.exec("click", phxEvent, view, el, ["push", { data: this.eventMeta("click", e, e.target) }]);
          }
        });
      }
    });
  }
  bindNav() {
    if (!browser_default.canPushState()) {
      return;
    }
    if (history.scrollRestoration) {
      history.scrollRestoration = "manual";
    }
    let scrollTimer = null;
    window.addEventListener("scroll", (_e) => {
      clearTimeout(scrollTimer);
      scrollTimer = setTimeout(() => {
        browser_default.updateCurrentState((state) => Object.assign(state, { scroll: window.scrollY }));
      }, 100);
    });
    window.addEventListener("popstate", (event) => {
      if (!this.registerNewLocation(window.location)) {
        return;
      }
      let { type, id, root, scroll } = event.state || {};
      let href = window.location.href;
      dom_default.dispatchEvent(window, "phx:navigate", { detail: { href, patch: type === "patch", pop: true } });
      this.requestDOMUpdate(() => {
        if (this.main.isConnected() && (type === "patch" && id === this.main.id)) {
          this.main.pushLinkPatch(href, null, () => {
            this.maybeScroll(scroll);
          });
        } else {
          this.replaceMain(href, null, () => {
            if (root) {
              this.replaceRootHistory();
            }
            this.maybeScroll(scroll);
          });
        }
      });
    }, false);
    window.addEventListener("click", (e) => {
      let target = closestPhxBinding(e.target, PHX_LIVE_LINK);
      let type = target && target.getAttribute(PHX_LIVE_LINK);
      if (!type || !this.isConnected() || !this.main || dom_default.wantsNewTab(e)) {
        return;
      }
      let href = target.href;
      let linkState = target.getAttribute(PHX_LINK_STATE);
      e.preventDefault();
      e.stopImmediatePropagation();
      if (this.pendingLink === href) {
        return;
      }
      this.requestDOMUpdate(() => {
        if (type === "patch") {
          this.pushHistoryPatch(href, linkState, target);
        } else if (type === "redirect") {
          this.historyRedirect(href, linkState);
        } else {
          throw new Error(`expected ${PHX_LIVE_LINK} to be "patch" or "redirect", got: ${type}`);
        }
        let phxClick = target.getAttribute(this.binding("click"));
        if (phxClick) {
          this.requestDOMUpdate(() => this.execJS(target, phxClick, "click"));
        }
      });
    }, false);
  }
  maybeScroll(scroll) {
    if (typeof scroll === "number") {
      requestAnimationFrame(() => {
        window.scrollTo(0, scroll);
      });
    }
  }
  dispatchEvent(event, payload = {}) {
    dom_default.dispatchEvent(window, `phx:${event}`, { detail: payload });
  }
  dispatchEvents(events) {
    events.forEach(([event, payload]) => this.dispatchEvent(event, payload));
  }
  withPageLoading(info, callback) {
    dom_default.dispatchEvent(window, "phx:page-loading-start", { detail: info });
    let done = () => dom_default.dispatchEvent(window, "phx:page-loading-stop", { detail: info });
    return callback ? callback(done) : done;
  }
  pushHistoryPatch(href, linkState, targetEl) {
    if (!this.isConnected()) {
      return browser_default.redirect(href);
    }
    this.withPageLoading({ to: href, kind: "patch" }, (done) => {
      this.main.pushLinkPatch(href, targetEl, (linkRef) => {
        this.historyPatch(href, linkState, linkRef);
        done();
      });
    });
  }
  historyPatch(href, linkState, linkRef = this.setPendingLink(href)) {
    if (!this.commitPendingLink(linkRef)) {
      return;
    }
    browser_default.pushState(linkState, { type: "patch", id: this.main.id }, href);
    dom_default.dispatchEvent(window, "phx:navigate", { detail: { patch: true, href, pop: false } });
    this.registerNewLocation(window.location);
  }
  historyRedirect(href, linkState, flash) {
    if (!this.isConnected()) {
      return browser_default.redirect(href, flash);
    }
    if (/^\/$|^\/[^\/]+.*$/.test(href)) {
      let { protocol, host } = window.location;
      href = `${protocol}//${host}${href}`;
    }
    let scroll = window.scrollY;
    this.withPageLoading({ to: href, kind: "redirect" }, (done) => {
      this.replaceMain(href, flash, (linkRef) => {
        if (linkRef === this.linkRef) {
          browser_default.pushState(linkState, { type: "redirect", id: this.main.id, scroll }, href);
          dom_default.dispatchEvent(window, "phx:navigate", { detail: { href, patch: false, pop: false } });
          this.registerNewLocation(window.location);
        }
        done();
      });
    });
  }
  replaceRootHistory() {
    browser_default.pushState("replace", { root: true, type: "patch", id: this.main.id });
  }
  registerNewLocation(newLocation) {
    let { pathname, search } = this.currentLocation;
    if (pathname + search === newLocation.pathname + newLocation.search) {
      return false;
    } else {
      this.currentLocation = clone(newLocation);
      return true;
    }
  }
  bindForms() {
    let iterations = 0;
    let externalFormSubmitted = false;
    this.on("submit", (e) => {
      let phxSubmit = e.target.getAttribute(this.binding("submit"));
      let phxChange = e.target.getAttribute(this.binding("change"));
      if (!externalFormSubmitted && phxChange && !phxSubmit) {
        externalFormSubmitted = true;
        e.preventDefault();
        this.withinOwners(e.target, (view) => {
          view.disableForm(e.target);
          window.requestAnimationFrame(() => {
            if (dom_default.isUnloadableFormSubmit(e)) {
              this.unload();
            }
            e.target.submit();
          });
        });
      }
    }, true);
    this.on("submit", (e) => {
      let phxEvent = e.target.getAttribute(this.binding("submit"));
      if (!phxEvent) {
        if (dom_default.isUnloadableFormSubmit(e)) {
          this.unload();
        }
        return;
      }
      e.preventDefault();
      e.target.disabled = true;
      this.withinOwners(e.target, (view) => {
        js_default.exec("submit", phxEvent, view, e.target, ["push", { submitter: e.submitter }]);
      });
    }, false);
    for (let type of ["change", "input"]) {
      this.on(type, (e) => {
        let phxChange = this.binding("change");
        let input = e.target;
        let inputEvent = input.getAttribute(phxChange);
        let formEvent = input.form && input.form.getAttribute(phxChange);
        let phxEvent = inputEvent || formEvent;
        if (!phxEvent) {
          return;
        }
        if (input.type === "number" && input.validity && input.validity.badInput) {
          return;
        }
        let dispatcher = inputEvent ? input : input.form;
        let currentIterations = iterations;
        iterations++;
        let { at, type: lastType } = dom_default.private(input, "prev-iteration") || {};
        if (at === currentIterations - 1 && type === "change" && lastType === "input") {
          return;
        }
        dom_default.putPrivate(input, "prev-iteration", { at: currentIterations, type });
        this.debounce(input, e, type, () => {
          this.withinOwners(dispatcher, (view) => {
            dom_default.putPrivate(input, PHX_HAS_FOCUSED, true);
            if (!dom_default.isTextualInput(input)) {
              this.setActiveElement(input);
            }
            js_default.exec("change", phxEvent, view, input, ["push", { _target: e.target.name, dispatcher }]);
          });
        });
      }, false);
    }
    this.on("reset", (e) => {
      let form = e.target;
      dom_default.resetForm(form, this.binding(PHX_FEEDBACK_FOR));
      let input = Array.from(form.elements).find((el) => el.type === "reset");
      window.requestAnimationFrame(() => {
        input.dispatchEvent(new Event("input", { bubbles: true, cancelable: false }));
      });
    });
  }
  debounce(el, event, eventType, callback) {
    if (eventType === "blur" || eventType === "focusout") {
      return callback();
    }
    let phxDebounce = this.binding(PHX_DEBOUNCE);
    let phxThrottle = this.binding(PHX_THROTTLE);
    let defaultDebounce = this.defaults.debounce.toString();
    let defaultThrottle = this.defaults.throttle.toString();
    this.withinOwners(el, (view) => {
      let asyncFilter = () => !view.isDestroyed() && document.body.contains(el);
      dom_default.debounce(el, event, phxDebounce, defaultDebounce, phxThrottle, defaultThrottle, asyncFilter, () => {
        callback();
      });
    });
  }
  silenceEvents(callback) {
    this.silenced = true;
    callback();
    this.silenced = false;
  }
  on(event, callback) {
    window.addEventListener(event, (e) => {
      if (!this.silenced) {
        callback(e);
      }
    });
  }
};
var TransitionSet = class {
  constructor() {
    this.transitions = /* @__PURE__ */ new Set();
    this.pendingOps = [];
  }
  reset() {
    this.transitions.forEach((timer) => {
      clearTimeout(timer);
      this.transitions.delete(timer);
    });
    this.flushPendingOps();
  }
  after(callback) {
    if (this.size() === 0) {
      callback();
    } else {
      this.pushPendingOp(callback);
    }
  }
  addTransition(time, onStart, onDone) {
    onStart();
    let timer = setTimeout(() => {
      this.transitions.delete(timer);
      onDone();
      this.flushPendingOps();
    }, time);
    this.transitions.add(timer);
  }
  pushPendingOp(op) {
    this.pendingOps.push(op);
  }
  size() {
    return this.transitions.size;
  }
  flushPendingOps() {
    if (this.size() > 0) {
      return;
    }
    let op = this.pendingOps.shift();
    if (op) {
      op();
      this.flushPendingOps();
    }
  }
};

// js/app.js
var import_topbar = __toESM(require_topbar_min());
window.addEventListener("phx:mask-input", (_e) => {
  const amountMask = (0, import_kit.maskitoNumberOptionsGenerator)({
    decimalZeroPadding: true,
    precision: 2,
    decimalSeparator: ",",
    min: 0,
    prefix: "R$"
  });
  const amount = document.querySelector("#amount");
  if (amount) {
    new import_core.Maskito(amount, amountMask);
  }
});
var cpf = document.querySelector("#user_cpf");
if (cpf) {
  new import_core.Maskito(cpf, { mask: [
    ...new Array(3).fill(/\d/),
    ".",
    ...new Array(3).fill(/\d/),
    ".",
    ...new Array(3).fill(/\d/),
    "-",
    ...new Array(2).fill(/\d/)
  ] });
}
var csrfToken = document.querySelector("meta[name='csrf-token']").getAttribute("content");
var liveSocket = new LiveSocket("/live", Socket, {
  params: { _csrf_token: csrfToken }
});
liveSocket.connect();
window.liveSocket = liveSocket;
import_topbar.default.config({ barColors: { 0: "#29d" }, shadowColor: "rgba(0, 0, 0, .3)" });
window.addEventListener("phx:page-loading-start", (info) => import_topbar.default.show());
window.addEventListener("phx:page-loading-stop", (info) => import_topbar.default.hide());
/*! Bundled license information:

topbar/topbar.min.js:
  (**
   * @license MIT
   * topbar 1.0.0, 2021-01-06
   * http://buunguyen.github.io/topbar
   * Copyright (c) 2021 Buu Nguyen
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AbWFza2l0by9jb3JlL2luZGV4LnVtZC5qcyIsICIuLi8uLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0BtYXNraXRvL2tpdC9pbmRleC51bWQuanMiLCAiLi4vLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy90b3BiYXIvdG9wYmFyLm1pbi5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfaHRtbC9wcml2L3N0YXRpYy9waG9lbml4X2h0bWwuanMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL2FwcC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvdXRpbHMuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L2NvbnN0YW50cy5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvcHVzaC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvdGltZXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L2NoYW5uZWwuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L2FqYXguanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L2xvbmdwb2xsLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9wcmVzZW5jZS5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvc2VyaWFsaXplci5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvc29ja2V0LmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2NvbnN0YW50cy5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9lbnRyeV91cGxvYWRlci5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy91dGlscy5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9icm93c2VyLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2RvbS5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy91cGxvYWRfZW50cnkuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvbGl2ZV91cGxvYWRlci5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9hcmlhLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2hvb2tzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2RvbV9wb3N0X21vcnBoX3Jlc3RvcmVyLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL25vZGVfbW9kdWxlcy9tb3JwaGRvbS9kaXN0L21vcnBoZG9tLWVzbS5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9kb21fcGF0Y2guanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvcmVuZGVyZWQuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvdmlld19ob29rLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2pzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L3ZpZXcuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvbGl2ZV9zb2NrZXQuanMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cyddLCBmYWN0b3J5KSA6XG4gICAgKGdsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZmFjdG9yeShnbG9iYWwuQ29yZSA9IHt9KSk7XG59KSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIE1BU0tJVE9fREVGQVVMVF9FTEVNRU5UX1BSRURJQ0FURSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gZS5xdWVyeVNlbGVjdG9yKCdpbnB1dCx0ZXh0YXJlYScpIHx8IGU7XG4gICAgfTtcblxuICAgIHZhciBNQVNLSVRPX0RFRkFVTFRfT1BUSU9OUyA9IHtcbiAgICAgIG1hc2s6IC9eLiokLyxcbiAgICAgIHByZXByb2Nlc3NvcnM6IFtdLFxuICAgICAgcG9zdHByb2Nlc3NvcnM6IFtdLFxuICAgICAgcGx1Z2luczogW10sXG4gICAgICBvdmVyd3JpdGVNb2RlOiAnc2hpZnQnXG4gICAgfTtcblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuICAgIFBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG4gICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuICAgIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG4gICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG4gICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbiAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG4gICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG4gICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbiAgICAvKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSwgU3VwcHJlc3NlZEVycm9yLCBTeW1ib2wgKi9cclxuXHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgICAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXI7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHlwZW9mIFN1cHByZXNzZWRFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gU3VwcHJlc3NlZEVycm9yIDogZnVuY3Rpb24gKGVycm9yLCBzdXBwcmVzc2VkLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIGUubmFtZSA9IFwiU3VwcHJlc3NlZEVycm9yXCIsIGUuZXJyb3IgPSBlcnJvciwgZS5zdXBwcmVzc2VkID0gc3VwcHJlc3NlZCwgZTtcclxuICAgIH07XG5cbiAgICB2YXIgTWFza0hpc3RvcnkgPVxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBNYXNrSGlzdG9yeSgpIHtcbiAgICAgICAgdGhpcy5ub3cgPSBudWxsO1xuICAgICAgICB0aGlzLnBhc3QgPSBbXTtcbiAgICAgICAgdGhpcy5mdXR1cmUgPSBbXTtcbiAgICAgIH1cblxuICAgICAgTWFza0hpc3RvcnkucHJvdG90eXBlLnVuZG8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMucGFzdC5wb3AoKTtcblxuICAgICAgICBpZiAoc3RhdGUgJiYgdGhpcy5ub3cpIHtcbiAgICAgICAgICB0aGlzLmZ1dHVyZS5wdXNoKHRoaXMubm93KTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnQoc3RhdGUsICdoaXN0b3J5VW5kbycpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBNYXNrSGlzdG9yeS5wcm90b3R5cGUucmVkbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5mdXR1cmUucG9wKCk7XG5cbiAgICAgICAgaWYgKHN0YXRlICYmIHRoaXMubm93KSB7XG4gICAgICAgICAgdGhpcy5wYXN0LnB1c2godGhpcy5ub3cpO1xuICAgICAgICAgIHRoaXMudXBkYXRlRWxlbWVudChzdGF0ZSwgJ2hpc3RvcnlSZWRvJyk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIE1hc2tIaXN0b3J5LnByb3RvdHlwZS51cGRhdGVIaXN0b3J5ID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIGlmICghdGhpcy5ub3cpIHtcbiAgICAgICAgICB0aGlzLm5vdyA9IHN0YXRlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpc1ZhbHVlQ2hhbmdlZCA9IHRoaXMubm93LnZhbHVlICE9PSBzdGF0ZS52YWx1ZTtcbiAgICAgICAgdmFyIGlzU2VsZWN0aW9uQ2hhbmdlZCA9IHRoaXMubm93LnNlbGVjdGlvbi5zb21lKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgIHJldHVybiBpdGVtICE9PSBzdGF0ZS5zZWxlY3Rpb25baW5kZXhdO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWlzVmFsdWVDaGFuZ2VkICYmICFpc1NlbGVjdGlvbkNoYW5nZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNWYWx1ZUNoYW5nZWQpIHtcbiAgICAgICAgICB0aGlzLnBhc3QucHVzaCh0aGlzLm5vdyk7XG4gICAgICAgICAgdGhpcy5mdXR1cmUgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubm93ID0gc3RhdGU7XG4gICAgICB9O1xuXG4gICAgICBNYXNrSGlzdG9yeS5wcm90b3R5cGUudXBkYXRlRWxlbWVudCA9IGZ1bmN0aW9uIChzdGF0ZSwgaW5wdXRUeXBlKSB7XG4gICAgICAgIHRoaXMubm93ID0gc3RhdGU7XG4gICAgICAgIHRoaXMudXBkYXRlRWxlbWVudFN0YXRlKHN0YXRlLCB7XG4gICAgICAgICAgaW5wdXRUeXBlOiBpbnB1dFR5cGUsXG4gICAgICAgICAgZGF0YTogbnVsbFxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBNYXNrSGlzdG9yeTtcbiAgICB9KCk7XG5cbiAgICBmdW5jdGlvbiBhcmVFbGVtZW50VmFsdWVzRXF1YWwoc2FtcGxlU3RhdGUpIHtcbiAgICAgIHZhciBzdGF0ZXMgPSBbXTtcblxuICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgc3RhdGVzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3RhdGVzLmV2ZXJ5KGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBfYS52YWx1ZTtcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSBzYW1wbGVTdGF0ZS52YWx1ZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhcmVFbGVtZW50U3RhdGVzRXF1YWwoc2FtcGxlU3RhdGUpIHtcbiAgICAgIHZhciBzdGF0ZXMgPSBbXTtcblxuICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgc3RhdGVzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3RhdGVzLmV2ZXJ5KGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBfYS52YWx1ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IF9hLnNlbGVjdGlvbjtcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSBzYW1wbGVTdGF0ZS52YWx1ZSAmJiBzZWxlY3Rpb25bMF0gPT09IHNhbXBsZVN0YXRlLnNlbGVjdGlvblswXSAmJiBzZWxlY3Rpb25bMV0gPT09IHNhbXBsZVN0YXRlLnNlbGVjdGlvblsxXTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFwcGx5T3ZlcndyaXRlTW9kZShfYSwgbmV3Q2hhcmFjdGVycywgbW9kZSkge1xuICAgICAgdmFyIHZhbHVlID0gX2EudmFsdWUsXG4gICAgICAgICAgc2VsZWN0aW9uID0gX2Euc2VsZWN0aW9uO1xuXG4gICAgICB2YXIgX2IgPSBfX3JlYWQoc2VsZWN0aW9uLCAyKSxcbiAgICAgICAgICBmcm9tID0gX2JbMF0sXG4gICAgICAgICAgdG8gPSBfYlsxXTtcblxuICAgICAgdmFyIGNvbXB1dGVkTW9kZSA9IHR5cGVvZiBtb2RlID09PSAnZnVuY3Rpb24nID8gbW9kZSh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb25cbiAgICAgIH0pIDogbW9kZTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgc2VsZWN0aW9uOiBjb21wdXRlZE1vZGUgPT09ICdyZXBsYWNlJyA/IFtmcm9tLCBmcm9tICsgbmV3Q2hhcmFjdGVycy5sZW5ndGhdIDogW2Zyb20sIHRvXVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0ZpeGVkQ2hhcmFjdGVyKGNoYXIpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgY2hhciA9PT0gJ3N0cmluZyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0TGVhZGluZ0ZpeGVkQ2hhcmFjdGVycyhtYXNrLCB2YWxpZGF0ZWRWYWx1ZVBhcnQsIG5ld0NoYXJhY3RlciwgaW5pdGlhbEVsZW1lbnRTdGF0ZSkge1xuICAgICAgdmFyIGxlYWRpbmdGaXhlZENoYXJhY3RlcnMgPSAnJztcblxuICAgICAgZm9yICh2YXIgaSA9IHZhbGlkYXRlZFZhbHVlUGFydC5sZW5ndGg7IGkgPCBtYXNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjaGFyQ29uc3RyYWludCA9IG1hc2tbaV07XG4gICAgICAgIHZhciBpc0luaXRpYWxseUV4aXN0ZWQgPSAoaW5pdGlhbEVsZW1lbnRTdGF0ZSA9PT0gbnVsbCB8fCBpbml0aWFsRWxlbWVudFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbml0aWFsRWxlbWVudFN0YXRlLnZhbHVlW2ldKSA9PT0gY2hhckNvbnN0cmFpbnQ7XG5cbiAgICAgICAgaWYgKCFpc0ZpeGVkQ2hhcmFjdGVyKGNoYXJDb25zdHJhaW50KSB8fCBjaGFyQ29uc3RyYWludCA9PT0gbmV3Q2hhcmFjdGVyICYmICFpc0luaXRpYWxseUV4aXN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gbGVhZGluZ0ZpeGVkQ2hhcmFjdGVycztcbiAgICAgICAgfVxuXG4gICAgICAgIGxlYWRpbmdGaXhlZENoYXJhY3RlcnMgKz0gY2hhckNvbnN0cmFpbnQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsZWFkaW5nRml4ZWRDaGFyYWN0ZXJzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlVmFsdWVXaXRoTWFzayh2YWx1ZSwgbWFza0V4cHJlc3Npb24pIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KG1hc2tFeHByZXNzaW9uKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUubGVuZ3RoID09PSBtYXNrRXhwcmVzc2lvbi5sZW5ndGggJiYgQXJyYXkuZnJvbSh2YWx1ZSkuZXZlcnkoZnVuY3Rpb24gKGNoYXIsIGkpIHtcbiAgICAgICAgICB2YXIgY2hhckNvbnN0cmFpbnQgPSBtYXNrRXhwcmVzc2lvbltpXTtcbiAgICAgICAgICByZXR1cm4gaXNGaXhlZENoYXJhY3RlcihjaGFyQ29uc3RyYWludCkgPyBjaGFyID09PSBjaGFyQ29uc3RyYWludCA6IGNoYXIubWF0Y2goY2hhckNvbnN0cmFpbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1hc2tFeHByZXNzaW9uLnRlc3QodmFsdWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGd1ZXNzVmFsaWRWYWx1ZUJ5UGF0dGVybihlbGVtZW50U3RhdGUsIG1hc2ssIGluaXRpYWxFbGVtZW50U3RhdGUpIHtcbiAgICAgIHZhciBtYXNrZWRGcm9tID0gbnVsbDtcbiAgICAgIHZhciBtYXNrZWRUbyA9IG51bGw7XG4gICAgICB2YXIgbWFza2VkVmFsdWUgPSBBcnJheS5mcm9tKGVsZW1lbnRTdGF0ZS52YWx1ZSkucmVkdWNlKGZ1bmN0aW9uICh2YWxpZGF0ZWRDaGFyYWN0ZXJzLCBjaGFyLCBjaGFySW5kZXgpIHtcbiAgICAgICAgdmFyIGxlYWRpbmdDaGFyYWN0ZXJzID0gZ2V0TGVhZGluZ0ZpeGVkQ2hhcmFjdGVycyhtYXNrLCB2YWxpZGF0ZWRDaGFyYWN0ZXJzLCBjaGFyLCBpbml0aWFsRWxlbWVudFN0YXRlKTtcbiAgICAgICAgdmFyIG5ld1ZhbGlkYXRlZENoYXJzID0gdmFsaWRhdGVkQ2hhcmFjdGVycyArIGxlYWRpbmdDaGFyYWN0ZXJzO1xuICAgICAgICB2YXIgY2hhckNvbnN0cmFpbnQgPSBtYXNrW25ld1ZhbGlkYXRlZENoYXJzLmxlbmd0aF07XG5cbiAgICAgICAgaWYgKGlzRml4ZWRDaGFyYWN0ZXIoY2hhckNvbnN0cmFpbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIG5ld1ZhbGlkYXRlZENoYXJzICsgY2hhckNvbnN0cmFpbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNoYXIubWF0Y2goY2hhckNvbnN0cmFpbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIG5ld1ZhbGlkYXRlZENoYXJzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1hc2tlZEZyb20gPT09IG51bGwgJiYgY2hhckluZGV4ID49IGVsZW1lbnRTdGF0ZS5zZWxlY3Rpb25bMF0pIHtcbiAgICAgICAgICBtYXNrZWRGcm9tID0gbmV3VmFsaWRhdGVkQ2hhcnMubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1hc2tlZFRvID09PSBudWxsICYmIGNoYXJJbmRleCA+PSBlbGVtZW50U3RhdGUuc2VsZWN0aW9uWzFdKSB7XG4gICAgICAgICAgbWFza2VkVG8gPSBuZXdWYWxpZGF0ZWRDaGFycy5sZW5ndGg7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3VmFsaWRhdGVkQ2hhcnMgKyBjaGFyO1xuICAgICAgfSwgJycpO1xuICAgICAgdmFyIHRyYWlsaW5nRml4ZWRDaGFyYWN0ZXJzID0gZ2V0TGVhZGluZ0ZpeGVkQ2hhcmFjdGVycyhtYXNrLCBtYXNrZWRWYWx1ZSwgJycsIGluaXRpYWxFbGVtZW50U3RhdGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbGlkYXRlVmFsdWVXaXRoTWFzayhtYXNrZWRWYWx1ZSArIHRyYWlsaW5nRml4ZWRDaGFyYWN0ZXJzLCBtYXNrKSA/IG1hc2tlZFZhbHVlICsgdHJhaWxpbmdGaXhlZENoYXJhY3RlcnMgOiBtYXNrZWRWYWx1ZSxcbiAgICAgICAgc2VsZWN0aW9uOiBbbWFza2VkRnJvbSAhPT0gbnVsbCAmJiBtYXNrZWRGcm9tICE9PSB2b2lkIDAgPyBtYXNrZWRGcm9tIDogbWFza2VkVmFsdWUubGVuZ3RoLCBtYXNrZWRUbyAhPT0gbnVsbCAmJiBtYXNrZWRUbyAhPT0gdm9pZCAwID8gbWFza2VkVG8gOiBtYXNrZWRWYWx1ZS5sZW5ndGhdXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGd1ZXNzVmFsaWRWYWx1ZUJ5UmVnRXhwKF9hLCBtYXNrUmVnRXhwKSB7XG4gICAgICB2YXIgdmFsdWUgPSBfYS52YWx1ZSxcbiAgICAgICAgICBzZWxlY3Rpb24gPSBfYS5zZWxlY3Rpb247XG5cbiAgICAgIHZhciBfYiA9IF9fcmVhZChzZWxlY3Rpb24sIDIpLFxuICAgICAgICAgIGZyb20gPSBfYlswXSxcbiAgICAgICAgICB0byA9IF9iWzFdO1xuXG4gICAgICB2YXIgbmV3RnJvbSA9IGZyb207XG4gICAgICB2YXIgbmV3VG8gPSB0bztcbiAgICAgIHZhciB2YWxpZGF0ZWRWYWx1ZSA9IEFycmF5LmZyb20odmFsdWUpLnJlZHVjZShmdW5jdGlvbiAodmFsaWRhdGVkVmFsdWVQYXJ0LCBjaGFyLCBpKSB7XG4gICAgICAgIHZhciBuZXdQb3NzaWJsZVZhbHVlID0gdmFsaWRhdGVkVmFsdWVQYXJ0ICsgY2hhcjtcblxuICAgICAgICBpZiAoZnJvbSA9PT0gaSkge1xuICAgICAgICAgIG5ld0Zyb20gPSB2YWxpZGF0ZWRWYWx1ZVBhcnQubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRvID09PSBpKSB7XG4gICAgICAgICAgbmV3VG8gPSB2YWxpZGF0ZWRWYWx1ZVBhcnQubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld1Bvc3NpYmxlVmFsdWUubWF0Y2gobWFza1JlZ0V4cCkgPyBuZXdQb3NzaWJsZVZhbHVlIDogdmFsaWRhdGVkVmFsdWVQYXJ0O1xuICAgICAgfSwgJycpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbGlkYXRlZFZhbHVlLFxuICAgICAgICBzZWxlY3Rpb246IFtuZXdGcm9tLCBuZXdUb11cbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsaWJyYXRlVmFsdWVCeU1hc2soZWxlbWVudFN0YXRlLCBtYXNrLCBpbml0aWFsRWxlbWVudFN0YXRlKSB7XG4gICAgICBpZiAoaW5pdGlhbEVsZW1lbnRTdGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGluaXRpYWxFbGVtZW50U3RhdGUgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAodmFsaWRhdGVWYWx1ZVdpdGhNYXNrKGVsZW1lbnRTdGF0ZS52YWx1ZSwgbWFzaykpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRTdGF0ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIF9hID0gQXJyYXkuaXNBcnJheShtYXNrKSA/IGd1ZXNzVmFsaWRWYWx1ZUJ5UGF0dGVybihlbGVtZW50U3RhdGUsIG1hc2ssIGluaXRpYWxFbGVtZW50U3RhdGUpIDogZ3Vlc3NWYWxpZFZhbHVlQnlSZWdFeHAoZWxlbWVudFN0YXRlLCBtYXNrKSxcbiAgICAgICAgICB2YWx1ZSA9IF9hLnZhbHVlLFxuICAgICAgICAgIHNlbGVjdGlvbiA9IF9hLnNlbGVjdGlvbjtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb24sXG4gICAgICAgIHZhbHVlOiBBcnJheS5pc0FycmF5KG1hc2spID8gdmFsdWUuc2xpY2UoMCwgbWFzay5sZW5ndGgpIDogdmFsdWVcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlRml4ZWRNYXNrQ2hhcmFjdGVycyhpbml0aWFsRWxlbWVudFN0YXRlLCBtYXNrKSB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWFzaykpIHtcbiAgICAgICAgcmV0dXJuIGluaXRpYWxFbGVtZW50U3RhdGU7XG4gICAgICB9XG5cbiAgICAgIHZhciBfYSA9IF9fcmVhZChpbml0aWFsRWxlbWVudFN0YXRlLnNlbGVjdGlvbiwgMiksXG4gICAgICAgICAgZnJvbSA9IF9hWzBdLFxuICAgICAgICAgIHRvID0gX2FbMV07XG5cbiAgICAgIHZhciBzZWxlY3Rpb24gPSBbXTtcbiAgICAgIHZhciB1bm1hc2tlZFZhbHVlID0gQXJyYXkuZnJvbShpbml0aWFsRWxlbWVudFN0YXRlLnZhbHVlKS5yZWR1Y2UoZnVuY3Rpb24gKHJhd1ZhbHVlLCBjaGFyLCBpKSB7XG4gICAgICAgIHZhciBjaGFyQ29uc3RyYWludCA9IG1hc2tbaV07XG5cbiAgICAgICAgaWYgKGkgPT09IGZyb20pIHtcbiAgICAgICAgICBzZWxlY3Rpb24ucHVzaChyYXdWYWx1ZS5sZW5ndGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGkgPT09IHRvKSB7XG4gICAgICAgICAgc2VsZWN0aW9uLnB1c2gocmF3VmFsdWUubGVuZ3RoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpc0ZpeGVkQ2hhcmFjdGVyKGNoYXJDb25zdHJhaW50KSAmJiBjaGFyQ29uc3RyYWludCA9PT0gY2hhciA/IHJhd1ZhbHVlIDogcmF3VmFsdWUgKyBjaGFyO1xuICAgICAgfSwgJycpO1xuXG4gICAgICBpZiAoc2VsZWN0aW9uLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgc2VsZWN0aW9uLnB1c2guYXBwbHkoc2VsZWN0aW9uLCBfX3NwcmVhZEFycmF5KFtdLCBfX3JlYWQobmV3IEFycmF5KDIgLSBzZWxlY3Rpb24ubGVuZ3RoKS5maWxsKHVubWFza2VkVmFsdWUubGVuZ3RoKSkpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHVubWFza2VkVmFsdWUsXG4gICAgICAgIHNlbGVjdGlvbjogW3NlbGVjdGlvblswXSwgc2VsZWN0aW9uWzFdXVxuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgTWFza01vZGVsID1cbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gTWFza01vZGVsKGluaXRpYWxFbGVtZW50U3RhdGUsIG1hc2tPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuaW5pdGlhbEVsZW1lbnRTdGF0ZSA9IGluaXRpYWxFbGVtZW50U3RhdGU7XG4gICAgICAgIHRoaXMubWFza09wdGlvbnMgPSBtYXNrT3B0aW9ucztcbiAgICAgICAgdGhpcy52YWx1ZSA9ICcnO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IFswLCAwXTtcblxuICAgICAgICB2YXIgX2EgPSBjYWxpYnJhdGVWYWx1ZUJ5TWFzayhpbml0aWFsRWxlbWVudFN0YXRlLCB0aGlzLmdldE1hc2tFeHByZXNzaW9uKGluaXRpYWxFbGVtZW50U3RhdGUpKSxcbiAgICAgICAgICAgIHZhbHVlID0gX2EudmFsdWUsXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBfYS5zZWxlY3Rpb247XG5cbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IHNlbGVjdGlvbjtcbiAgICAgIH1cblxuICAgICAgTWFza01vZGVsLnByb3RvdHlwZS5hZGRDaGFyYWN0ZXJzID0gZnVuY3Rpb24gKF9hLCBuZXdDaGFyYWN0ZXJzKSB7XG4gICAgICAgIHZhciBfYiA9IF9fcmVhZChfYSwgMiksXG4gICAgICAgICAgICBmcm9tID0gX2JbMF0sXG4gICAgICAgICAgICB0byA9IF9iWzFdO1xuXG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIHZhciBtYXNrRXhwcmVzc2lvbiA9IHRoaXMuZ2V0TWFza0V4cHJlc3Npb24oe1xuICAgICAgICAgIHZhbHVlOiB2YWx1ZS5zbGljZSgwLCBmcm9tKSArIG5ld0NoYXJhY3RlcnMgKyB2YWx1ZS5zbGljZSh0byksXG4gICAgICAgICAgc2VsZWN0aW9uOiBbZnJvbSArIG5ld0NoYXJhY3RlcnMubGVuZ3RoLCBmcm9tICsgbmV3Q2hhcmFjdGVycy5sZW5ndGhdXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgaW5pdGlhbEVsZW1lbnRTdGF0ZSA9IHtcbiAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgc2VsZWN0aW9uOiBbZnJvbSwgdG9dXG4gICAgICAgIH07XG4gICAgICAgIHZhciB1bm1hc2tlZEVsZW1lbnRTdGF0ZSA9IHJlbW92ZUZpeGVkTWFza0NoYXJhY3RlcnMoaW5pdGlhbEVsZW1lbnRTdGF0ZSwgbWFza0V4cHJlc3Npb24pO1xuXG4gICAgICAgIHZhciBfYyA9IF9fcmVhZChhcHBseU92ZXJ3cml0ZU1vZGUodW5tYXNrZWRFbGVtZW50U3RhdGUsIG5ld0NoYXJhY3RlcnMsIHRoaXMubWFza09wdGlvbnMub3ZlcndyaXRlTW9kZSkuc2VsZWN0aW9uLCAyKSxcbiAgICAgICAgICAgIHVubWFza2VkRnJvbSA9IF9jWzBdLFxuICAgICAgICAgICAgdW5tYXNrZWRUbyA9IF9jWzFdO1xuXG4gICAgICAgIHZhciBuZXdVbm1hc2tlZExlYWRpbmdWYWx1ZVBhcnQgPSB1bm1hc2tlZEVsZW1lbnRTdGF0ZS52YWx1ZS5zbGljZSgwLCB1bm1hc2tlZEZyb20pICsgbmV3Q2hhcmFjdGVycztcbiAgICAgICAgdmFyIG5ld0NhcmV0SW5kZXggPSBuZXdVbm1hc2tlZExlYWRpbmdWYWx1ZVBhcnQubGVuZ3RoO1xuICAgICAgICB2YXIgbWFza2VkRWxlbWVudFN0YXRlID0gY2FsaWJyYXRlVmFsdWVCeU1hc2soe1xuICAgICAgICAgIHZhbHVlOiBuZXdVbm1hc2tlZExlYWRpbmdWYWx1ZVBhcnQgKyB1bm1hc2tlZEVsZW1lbnRTdGF0ZS52YWx1ZS5zbGljZSh1bm1hc2tlZFRvKSxcbiAgICAgICAgICBzZWxlY3Rpb246IFtuZXdDYXJldEluZGV4LCBuZXdDYXJldEluZGV4XVxuICAgICAgICB9LCBtYXNrRXhwcmVzc2lvbiwgaW5pdGlhbEVsZW1lbnRTdGF0ZSk7XG4gICAgICAgIHZhciBpc0ludmFsaWRDaGFyc0luc2VydGlvbiA9IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcHJlZmVyLXN0cmluZy1zdGFydHMtZW5kcy13aXRoXG4gICAgICAgIHZhbHVlLnNsaWNlKDAsIHVubWFza2VkRnJvbSkgPT09IGNhbGlicmF0ZVZhbHVlQnlNYXNrKHtcbiAgICAgICAgICB2YWx1ZTogbmV3VW5tYXNrZWRMZWFkaW5nVmFsdWVQYXJ0LFxuICAgICAgICAgIHNlbGVjdGlvbjogW25ld0NhcmV0SW5kZXgsIG5ld0NhcmV0SW5kZXhdXG4gICAgICAgIH0sIG1hc2tFeHByZXNzaW9uLCBpbml0aWFsRWxlbWVudFN0YXRlKS52YWx1ZTtcblxuICAgICAgICBpZiAoaXNJbnZhbGlkQ2hhcnNJbnNlcnRpb24gfHwgYXJlRWxlbWVudFN0YXRlc0VxdWFsKHRoaXMsIG1hc2tlZEVsZW1lbnRTdGF0ZSkgLy8gSWYgdHlwaW5nIG5ldyBjaGFyYWN0ZXJzIGRvZXMgbm90IGNoYW5nZSB2YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbWFzayB2YWx1ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy52YWx1ZSA9IG1hc2tlZEVsZW1lbnRTdGF0ZS52YWx1ZTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBtYXNrZWRFbGVtZW50U3RhdGUuc2VsZWN0aW9uO1xuICAgICAgfTtcblxuICAgICAgTWFza01vZGVsLnByb3RvdHlwZS5kZWxldGVDaGFyYWN0ZXJzID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBfYiA9IF9fcmVhZChfYSwgMiksXG4gICAgICAgICAgICBmcm9tID0gX2JbMF0sXG4gICAgICAgICAgICB0byA9IF9iWzFdO1xuXG4gICAgICAgIGlmIChmcm9tID09PSB0byB8fCAhdG8pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICB2YXIgbWFza0V4cHJlc3Npb24gPSB0aGlzLmdldE1hc2tFeHByZXNzaW9uKHtcbiAgICAgICAgICB2YWx1ZTogdmFsdWUuc2xpY2UoMCwgZnJvbSkgKyB2YWx1ZS5zbGljZSh0byksXG4gICAgICAgICAgc2VsZWN0aW9uOiBbZnJvbSwgZnJvbV1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBpbml0aWFsRWxlbWVudFN0YXRlID0ge1xuICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICBzZWxlY3Rpb246IFtmcm9tLCB0b11cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHVubWFza2VkRWxlbWVudFN0YXRlID0gcmVtb3ZlRml4ZWRNYXNrQ2hhcmFjdGVycyhpbml0aWFsRWxlbWVudFN0YXRlLCBtYXNrRXhwcmVzc2lvbik7XG5cbiAgICAgICAgdmFyIF9jID0gX19yZWFkKHVubWFza2VkRWxlbWVudFN0YXRlLnNlbGVjdGlvbiwgMiksXG4gICAgICAgICAgICB1bm1hc2tlZEZyb20gPSBfY1swXSxcbiAgICAgICAgICAgIHVubWFza2VkVG8gPSBfY1sxXTtcblxuICAgICAgICB2YXIgbmV3VW5tYXNrZWRWYWx1ZSA9IHVubWFza2VkRWxlbWVudFN0YXRlLnZhbHVlLnNsaWNlKDAsIHVubWFza2VkRnJvbSkgKyB1bm1hc2tlZEVsZW1lbnRTdGF0ZS52YWx1ZS5zbGljZSh1bm1hc2tlZFRvKTtcbiAgICAgICAgdmFyIG1hc2tlZEVsZW1lbnRTdGF0ZSA9IGNhbGlicmF0ZVZhbHVlQnlNYXNrKHtcbiAgICAgICAgICB2YWx1ZTogbmV3VW5tYXNrZWRWYWx1ZSxcbiAgICAgICAgICBzZWxlY3Rpb246IFt1bm1hc2tlZEZyb20sIHVubWFza2VkRnJvbV1cbiAgICAgICAgfSwgbWFza0V4cHJlc3Npb24sIGluaXRpYWxFbGVtZW50U3RhdGUpO1xuICAgICAgICB0aGlzLnZhbHVlID0gbWFza2VkRWxlbWVudFN0YXRlLnZhbHVlO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IG1hc2tlZEVsZW1lbnRTdGF0ZS5zZWxlY3Rpb247XG4gICAgICB9O1xuXG4gICAgICBNYXNrTW9kZWwucHJvdG90eXBlLmdldE1hc2tFeHByZXNzaW9uID0gZnVuY3Rpb24gKGVsZW1lbnRTdGF0ZSkge1xuICAgICAgICB2YXIgbWFzayA9IHRoaXMubWFza09wdGlvbnMubWFzaztcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBtYXNrID09PSAnZnVuY3Rpb24nID8gbWFzayhlbGVtZW50U3RhdGUpIDogbWFzaztcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBNYXNrTW9kZWw7XG4gICAgfSgpO1xuXG4gICAgdmFyIEV2ZW50TGlzdGVuZXIgPVxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBFdmVudExpc3RlbmVyKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICAgIH1cblxuICAgICAgRXZlbnRMaXN0ZW5lci5wcm90b3R5cGUubGlzdGVuID0gZnVuY3Rpb24gKGV2ZW50VHlwZSwgZm4sIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB2YXIgdW50eXBlZEZuID0gZm47XG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgdW50eXBlZEZuLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIHVudHlwZWRGbik7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgRXZlbnRMaXN0ZW5lci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoc3RvcExpc3Rlbikge1xuICAgICAgICAgIHJldHVybiBzdG9wTGlzdGVuKCk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIEV2ZW50TGlzdGVuZXI7XG4gICAgfSgpO1xuXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhlIHBhc3NlZCBrZXlib2FyZCBldmVudCBtYXRjaCB0aGUgcmVxdWlyZWQgaG90a2V5LlxyXG4gICAgICpcclxuICAgICAqIFdlIGludGVudGlvbmFsbHkgdXNlIGxlZ2FjeSB7QGxpbmsgS2V5Ym9hcmRFdmVudCNrZXlDb2RlIGBrZXlDb2RlYH0gcHJvcGVydHkuIEl0IGlzIG1vcmVcclxuICAgICAqIFwia2V5Ym9hcmQtbGF5b3V0XCItaW5kZXBlbmRlbnQgdGhhbiB7QGxpbmsgS2V5Ym9hcmRFdmVudCNrZXkgYGtleWB9IG9yIHtAbGluayBLZXlib2FyZEV2ZW50I2NvZGUgYGNvZGVgfSBwcm9wZXJ0aWVzLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgKiAgICAgaWYgKGlzSG90a2V5KGV2ZW50LCBIb3RrZXlNb2RpZmllci5DVFJMIHwgSG90a2V5TW9kaWZpZXIuU0hJRlQsIEhvdGtleUNvZGUuWikpIHtcclxuICAgICAqICAgICAgICAgLy8gcmVkbyBob3RrZXkgcHJlc3NlZFxyXG4gICAgICogICAgIH1cclxuICAgICAqIH0pXHJcbiAgICAgKlxyXG4gICAgICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3RhaWdhLWZhbWlseS9tYXNraXRvL2lzc3Vlcy8zMTUgYEtleWJvYXJkRXZlbnQjY29kZWAgaXNzdWV9XHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB3aWxsIHJldHVybiBgdHJ1ZWAgb25seSBpZiB0aGUge0BsaW5rIEhvdGtleUNvZGV9IG1hdGNoZXMgYW5kIG9ubHkgdGhlIG5lY2Vzc2FyeVxyXG4gICAgICoge0BsaW5rIEhvdGtleU1vZGlmaWVyIG1vZGlmaWVyc30gaGF2ZSBiZWVuIHByZXNzZWRcclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzSG90a2V5KGV2ZW50LCBtb2RpZmllcnMsIGhvdGtleUNvZGUpIHtcbiAgICAgIHJldHVybiBldmVudC5jdHJsS2V5ID09PSAhIShtb2RpZmllcnMgJiAxXG4gICAgICAvKiBDVFJMICovXG4gICAgICApICYmIGV2ZW50LmFsdEtleSA9PT0gISEobW9kaWZpZXJzICYgMlxuICAgICAgLyogQUxUICovXG4gICAgICApICYmIGV2ZW50LnNoaWZ0S2V5ID09PSAhIShtb2RpZmllcnMgJiA0XG4gICAgICAvKiBTSElGVCAqL1xuICAgICAgKSAmJiBldmVudC5tZXRhS2V5ID09PSAhIShtb2RpZmllcnMgJiA4XG4gICAgICAvKiBNRVRBICovXG4gICAgICApICYmIGV2ZW50LmtleUNvZGUgPT09IGhvdGtleUNvZGU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNSZWRvKGV2ZW50KSB7XG4gICAgICByZXR1cm4gaXNIb3RrZXkoZXZlbnQsIDFcbiAgICAgIC8qIENUUkwgKi9cbiAgICAgICwgODlcbiAgICAgIC8qIFkgKi9cbiAgICAgICkgfHwgLy8gV2luZG93c1xuICAgICAgaXNIb3RrZXkoZXZlbnQsIDFcbiAgICAgIC8qIENUUkwgKi9cbiAgICAgIHwgNFxuICAgICAgLyogU0hJRlQgKi9cbiAgICAgICwgOTBcbiAgICAgIC8qIFogKi9cbiAgICAgICkgfHwgLy8gV2luZG93cyAmIEFuZHJvaWRcbiAgICAgIGlzSG90a2V5KGV2ZW50LCA4XG4gICAgICAvKiBNRVRBICovXG4gICAgICB8IDRcbiAgICAgIC8qIFNISUZUICovXG4gICAgICAsIDkwXG4gICAgICAvKiBaICovXG4gICAgICApIC8vIG1hY09TICYgaU9TXG4gICAgICA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzVW5kbyhldmVudCkge1xuICAgICAgcmV0dXJuIGlzSG90a2V5KGV2ZW50LCAxXG4gICAgICAvKiBDVFJMICovXG4gICAgICAsIDkwXG4gICAgICAvKiBaICovXG4gICAgICApIHx8IC8vIFdpbmRvd3MgJiBBbmRyb2lkXG4gICAgICBpc0hvdGtleShldmVudCwgOFxuICAgICAgLyogTUVUQSAqL1xuICAgICAgLCA5MFxuICAgICAgLyogWiAqL1xuICAgICAgKSAvLyBtYWNPUyAmIGlPU1xuICAgICAgO1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogXCJiZWZvcmVpbnB1dFwiIGlzIG1vcmUgYXBwcm9wcmlhdGUgZXZlbnQgZm9yIHByZXByb2Nlc3Npbmcgb2YgdGhlIGlucHV0IG1hc2tpbmcgKHRoYW4gYGtleWRvd25gKTpcclxuICAgICAqIC0gYGtleWRvd25gIGlzIG5vdCB0cmlnZ2VyZWQgYnkgcHJlZGljdGl2ZSB0ZXh0IGZyb20gbmF0aXZlIG1vYmlsZSBrZXlib2FyZHMuXHJcbiAgICAgKiAtIGBrZXlkb3duYCBpcyB0cmlnZ2VyZWQgYnkgc3lzdGVtIGtleSBjb21iaW5hdGlvbnMgKHdlIGRvbid0IG5lZWQgdGhlbSwgYW5kIHRoZXkgc2hvdWxkIGJlIG1hbnVhbGx5IGZpbHRlcmVkKS5cclxuICAgICAqIC0gRHJvcHBpbmcgdGV4dCBpbnNpZGUgaW5wdXQgdHJpZ2dlcnMgYGJlZm9yZWlucHV0YCAoYnV0IG5vdCBga2V5ZG93bmApLlxyXG4gICAgICogX19fXHJcbiAgICAgKiBcImJlZm9yZWlucHV0XCIgaXMgbm90IHN1cHBvcnRlZCBieSBDaHJvbWUgNDkrIChvbmx5IGZyb20gNjArKSBhbmQgYnkgRmlyZWZveCA1MisgKG9ubHkgZnJvbSA4NyspLlxyXG4gICAgICpcclxuICAgICAqIEBzZWUgaHR0cHM6Ly9jYW5pdXNlLmNvbS8/c2VhcmNoPWJlZm9yZWlucHV0XHJcbiAgICAgKiBAc2VlIGh0dHBzOi8vdGFpZ2EtdWkuZGV2L2Jyb3dzZXItc3VwcG9ydFxyXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNCZWZvcmVJbnB1dEV2ZW50U3VwcG9ydGVkKGVsZW1lbnQpIHtcbiAgICAgIHJldHVybiAnb25iZWZvcmVpbnB1dCcgaW4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0V2ZW50UHJvZHVjaW5nQ2hhcmFjdGVyKF9hKSB7XG4gICAgICB2YXIga2V5ID0gX2Eua2V5LFxuICAgICAgICAgIGN0cmxLZXkgPSBfYS5jdHJsS2V5LFxuICAgICAgICAgIG1ldGFLZXkgPSBfYS5tZXRhS2V5LFxuICAgICAgICAgIGFsdEtleSA9IF9hLmFsdEtleTtcbiAgICAgIHZhciBpc1N5c3RlbUtleUNvbWJpbmF0aW9ucyA9IGN0cmxLZXkgfHwgbWV0YUtleSB8fCBhbHRLZXk7XG4gICAgICB2YXIgaXNTaW5nbGVVbmljb2RlQ2hhciA9IC9eLiQvdS50ZXN0KGtleSk7IC8vIDQtYnl0ZSBjaGFyYWN0ZXJzIGNhc2UgKGUuZy4gc21pbGUpXG5cbiAgICAgIHJldHVybiAhaXNTeXN0ZW1LZXlDb21iaW5hdGlvbnMgJiYga2V5ICE9PSAnQmFja3NwYWNlJyAmJiBpc1NpbmdsZVVuaWNvZGVDaGFyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldExpbmVTZWxlY3Rpb24oX2EsIGlzRm9yd2FyZCkge1xuICAgICAgdmFyIHZhbHVlID0gX2EudmFsdWUsXG4gICAgICAgICAgc2VsZWN0aW9uID0gX2Euc2VsZWN0aW9uO1xuXG4gICAgICB2YXIgX2IgPSBfX3JlYWQoc2VsZWN0aW9uLCAyKSxcbiAgICAgICAgICBmcm9tID0gX2JbMF0sXG4gICAgICAgICAgdG8gPSBfYlsxXTtcblxuICAgICAgaWYgKGZyb20gIT09IHRvKSB7XG4gICAgICAgIHJldHVybiBbZnJvbSwgdG9dO1xuICAgICAgfVxuXG4gICAgICB2YXIgbmVhcmVzdEJyZWFrID0gaXNGb3J3YXJkID8gdmFsdWUuc2xpY2UoZnJvbSkuaW5kZXhPZignXFxuJykgKyAxIHx8IHZhbHVlLmxlbmd0aCA6IHZhbHVlLnNsaWNlKDAsIHRvKS5sYXN0SW5kZXhPZignXFxuJykgKyAxO1xuICAgICAgdmFyIHNlbGVjdEZyb20gPSBpc0ZvcndhcmQgPyBmcm9tIDogbmVhcmVzdEJyZWFrO1xuICAgICAgdmFyIHNlbGVjdFRvID0gaXNGb3J3YXJkID8gbmVhcmVzdEJyZWFrIDogdG87XG4gICAgICByZXR1cm4gW3NlbGVjdEZyb20sIHNlbGVjdFRvXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXROb3RFbXB0eVNlbGVjdGlvbihfYSwgaXNGb3J3YXJkKSB7XG4gICAgICB2YXIgdmFsdWUgPSBfYS52YWx1ZSxcbiAgICAgICAgICBzZWxlY3Rpb24gPSBfYS5zZWxlY3Rpb247XG5cbiAgICAgIHZhciBfYiA9IF9fcmVhZChzZWxlY3Rpb24sIDIpLFxuICAgICAgICAgIGZyb20gPSBfYlswXSxcbiAgICAgICAgICB0byA9IF9iWzFdO1xuXG4gICAgICBpZiAoZnJvbSAhPT0gdG8pIHtcbiAgICAgICAgcmV0dXJuIFtmcm9tLCB0b107XG4gICAgICB9XG5cbiAgICAgIHZhciBub3RFbXB0eVNlbGVjdGlvbiA9IGlzRm9yd2FyZCA/IFtmcm9tLCB0byArIDFdIDogW2Zyb20gLSAxLCB0b107XG4gICAgICByZXR1cm4gbm90RW1wdHlTZWxlY3Rpb24ubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh4LCAwKSwgdmFsdWUubGVuZ3RoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBUUkFJTElOR19TUEFDRVNfUkVHID0gL1xccyskL2c7XG4gICAgdmFyIExFQURJTkdfU1BBQ0VTX1JFRyA9IC9eXFxzKy9nO1xuICAgIHZhciBTUEFDRV9SRUcgPSAvXFxzLztcbiAgICBmdW5jdGlvbiBnZXRXb3JkU2VsZWN0aW9uKF9hLCBpc0ZvcndhcmQpIHtcbiAgICAgIHZhciB2YWx1ZSA9IF9hLnZhbHVlLFxuICAgICAgICAgIHNlbGVjdGlvbiA9IF9hLnNlbGVjdGlvbjtcblxuICAgICAgdmFyIF9iID0gX19yZWFkKHNlbGVjdGlvbiwgMiksXG4gICAgICAgICAgZnJvbSA9IF9iWzBdLFxuICAgICAgICAgIHRvID0gX2JbMV07XG5cbiAgICAgIGlmIChmcm9tICE9PSB0bykge1xuICAgICAgICByZXR1cm4gW2Zyb20sIHRvXTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzRm9yd2FyZCkge1xuICAgICAgICB2YXIgdmFsdWVBZnRlclNlbGVjdGlvblN0YXJ0ID0gdmFsdWUuc2xpY2UoZnJvbSk7XG5cbiAgICAgICAgdmFyIF9jID0gX19yZWFkKHZhbHVlQWZ0ZXJTZWxlY3Rpb25TdGFydC5tYXRjaChMRUFESU5HX1NQQUNFU19SRUcpIHx8IFsnJ10sIDEpLFxuICAgICAgICAgICAgbGVhZGluZ1NwYWNlcyA9IF9jWzBdO1xuXG4gICAgICAgIHZhciBuZWFyZXN0V29yZEVuZEluZGV4ID0gdmFsdWVBZnRlclNlbGVjdGlvblN0YXJ0LnJlcGxhY2UoTEVBRElOR19TUEFDRVNfUkVHLCAnJykgLy8gVE9ETyByZXBsYWNlIHdpdGggYFN0cmluZy50cmltU3RhcnRgIGFmdGVyIGJ1bXBpbmcgRmlyZWZveCB0byA2MStcbiAgICAgICAgLnNlYXJjaChTUEFDRV9SRUcpO1xuICAgICAgICByZXR1cm4gW2Zyb20sIG5lYXJlc3RXb3JkRW5kSW5kZXggIT09IC0xID8gZnJvbSArIGxlYWRpbmdTcGFjZXMubGVuZ3RoICsgbmVhcmVzdFdvcmRFbmRJbmRleCA6IHZhbHVlLmxlbmd0aF07XG4gICAgICB9XG5cbiAgICAgIHZhciB2YWx1ZUJlZm9yZVNlbGVjdGlvbkVuZCA9IHZhbHVlLnNsaWNlKDAsIHRvKTtcblxuICAgICAgdmFyIF9kID0gX19yZWFkKHZhbHVlQmVmb3JlU2VsZWN0aW9uRW5kLm1hdGNoKFRSQUlMSU5HX1NQQUNFU19SRUcpIHx8IFsnJ10sIDEpLFxuICAgICAgICAgIHRyYWlsaW5nU3BhY2VzID0gX2RbMF07XG5cbiAgICAgIHZhciBzZWxlY3RlZFdvcmRMZW5ndGggPSB2YWx1ZUJlZm9yZVNlbGVjdGlvbkVuZC5yZXBsYWNlKFRSQUlMSU5HX1NQQUNFU19SRUcsICcnKSAvLyBUT0RPIHJlcGxhY2Ugd2l0aCBgU3RyaW5nLnRyaW1FbmRgIGFmdGVyIGJ1bXBpbmcgRmlyZWZveCB0byA2MStcbiAgICAgIC5zcGxpdCgnJykucmV2ZXJzZSgpLmZpbmRJbmRleChmdW5jdGlvbiAoY2hhcikge1xuICAgICAgICByZXR1cm4gY2hhci5tYXRjaChTUEFDRV9SRUcpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gW3NlbGVjdGVkV29yZExlbmd0aCAhPT0gLTEgPyB0byAtIHRyYWlsaW5nU3BhY2VzLmxlbmd0aCAtIHNlbGVjdGVkV29yZExlbmd0aCA6IDAsIHRvXTtcbiAgICB9XG5cbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzICovXG5cbiAgICAvKipcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXG5cbiAgICBmdW5jdGlvbiBtYXNraXRvUGlwZShwcm9jZXNzb3JzKSB7XG4gICAgICBpZiAocHJvY2Vzc29ycyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHByb2Nlc3NvcnMgPSBbXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpbml0aWFsRGF0YSkge1xuICAgICAgICB2YXIgcmVhZG9ubHlBcmdzID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICByZWFkb25seUFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcHJvY2Vzc29ycy5yZWR1Y2UoZnVuY3Rpb24gKGRhdGEsIGZuKSB7XG4gICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBkYXRhKSwgZm4uYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFtkYXRhXSwgX19yZWFkKHJlYWRvbmx5QXJncykpKSk7XG4gICAgICAgIH0sIGluaXRpYWxEYXRhKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFza2l0b1RyYW5zZm9ybSh2YWx1ZU9yU3RhdGUsIG1hc2tpdG9PcHRpb25zKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBNQVNLSVRPX0RFRkFVTFRfT1BUSU9OUyksIG1hc2tpdG9PcHRpb25zKTtcblxuICAgICAgdmFyIHByZXByb2Nlc3NvciA9IG1hc2tpdG9QaXBlKG9wdGlvbnMucHJlcHJvY2Vzc29ycyk7XG4gICAgICB2YXIgcG9zdHByb2Nlc3NvciA9IG1hc2tpdG9QaXBlKG9wdGlvbnMucG9zdHByb2Nlc3NvcnMpO1xuICAgICAgdmFyIGluaXRpYWxFbGVtZW50U3RhdGUgPSB0eXBlb2YgdmFsdWVPclN0YXRlID09PSAnc3RyaW5nJyA/IHtcbiAgICAgICAgdmFsdWU6IHZhbHVlT3JTdGF0ZSxcbiAgICAgICAgc2VsZWN0aW9uOiBbMCwgMF1cbiAgICAgIH0gOiB2YWx1ZU9yU3RhdGU7XG4gICAgICB2YXIgZWxlbWVudFN0YXRlID0gcHJlcHJvY2Vzc29yKHtcbiAgICAgICAgZWxlbWVudFN0YXRlOiBpbml0aWFsRWxlbWVudFN0YXRlLFxuICAgICAgICBkYXRhOiAnJ1xuICAgICAgfSwgJ3ZhbGlkYXRpb24nKS5lbGVtZW50U3RhdGU7XG4gICAgICB2YXIgbWFza01vZGVsID0gbmV3IE1hc2tNb2RlbChlbGVtZW50U3RhdGUsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgX2EgPSBwb3N0cHJvY2Vzc29yKG1hc2tNb2RlbCwgaW5pdGlhbEVsZW1lbnRTdGF0ZSksXG4gICAgICAgICAgdmFsdWUgPSBfYS52YWx1ZSxcbiAgICAgICAgICBzZWxlY3Rpb24gPSBfYS5zZWxlY3Rpb247XG5cbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWVPclN0YXRlID09PSAnc3RyaW5nJyA/IHZhbHVlIDoge1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIHNlbGVjdGlvbjogc2VsZWN0aW9uXG4gICAgICB9O1xuICAgIH1cblxuICAgIHZhciBNYXNraXRvID1cbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgX19leHRlbmRzKE1hc2tpdG8sIF9zdXBlcik7XG5cbiAgICAgIGZ1bmN0aW9uIE1hc2tpdG8oZWxlbWVudCwgbWFza2l0b09wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcblxuICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgX3RoaXMubWFza2l0b09wdGlvbnMgPSBtYXNraXRvT3B0aW9ucztcbiAgICAgICAgX3RoaXMuaXNUZXh0QXJlYSA9IF90aGlzLmVsZW1lbnQubm9kZU5hbWUgPT09ICdURVhUQVJFQSc7XG4gICAgICAgIF90aGlzLmV2ZW50TGlzdGVuZXIgPSBuZXcgRXZlbnRMaXN0ZW5lcihfdGhpcy5lbGVtZW50KTtcbiAgICAgICAgX3RoaXMub3B0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBNQVNLSVRPX0RFRkFVTFRfT1BUSU9OUyksIF90aGlzLm1hc2tpdG9PcHRpb25zKTtcbiAgICAgICAgX3RoaXMucHJlcHJvY2Vzc29yID0gbWFza2l0b1BpcGUoX3RoaXMub3B0aW9ucy5wcmVwcm9jZXNzb3JzKTtcbiAgICAgICAgX3RoaXMucG9zdHByb2Nlc3NvciA9IG1hc2tpdG9QaXBlKF90aGlzLm9wdGlvbnMucG9zdHByb2Nlc3NvcnMpO1xuICAgICAgICBfdGhpcy50ZWFyZG93bnMgPSBfdGhpcy5vcHRpb25zLnBsdWdpbnMubWFwKGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICAgICAgICByZXR1cm4gcGx1Z2luKF90aGlzLmVsZW1lbnQsIF90aGlzLm9wdGlvbnMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBfdGhpcy5lbnN1cmVWYWx1ZUZpdHNNYXNrKCk7XG5cbiAgICAgICAgX3RoaXMudXBkYXRlSGlzdG9yeShfdGhpcy5lbGVtZW50U3RhdGUpO1xuXG4gICAgICAgIF90aGlzLmV2ZW50TGlzdGVuZXIubGlzdGVuKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKGlzUmVkbyhldmVudCkpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVkbygpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpc1VuZG8oZXZlbnQpKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnVuZG8oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChpc0JlZm9yZUlucHV0RXZlbnRTdXBwb3J0ZWQoZWxlbWVudCkpIHtcbiAgICAgICAgICBfdGhpcy5ldmVudExpc3RlbmVyLmxpc3RlbignYmVmb3JlaW5wdXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBpc0ZvcndhcmQgPSBldmVudC5pbnB1dFR5cGUuaW5jbHVkZXMoJ0ZvcndhcmQnKTtcblxuICAgICAgICAgICAgX3RoaXMudXBkYXRlSGlzdG9yeShfdGhpcy5lbGVtZW50U3RhdGUpO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmlucHV0VHlwZSkge1xuICAgICAgICAgICAgICAvLyBoaXN0b3J5VW5kby9oaXN0b3J5UmVkbyB3aWxsIG5vdCBiZSB0cmlnZ2VyZWQgaWYgdmFsdWUgd2FzIG1vZGlmaWVkIHByb2dyYW1tYXRpY2FsbHlcbiAgICAgICAgICAgICAgY2FzZSAnaGlzdG9yeVVuZG8nOlxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnVuZG8oKTtcblxuICAgICAgICAgICAgICBjYXNlICdoaXN0b3J5UmVkbyc6XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucmVkbygpO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZUJ5Q3V0JzpcbiAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlQ29udGVudEJhY2t3YXJkJzpcbiAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlQ29udGVudEZvcndhcmQnOlxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5oYW5kbGVEZWxldGUoe1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgaXNGb3J3YXJkOiBpc0ZvcndhcmQsXG4gICAgICAgICAgICAgICAgICBzZWxlY3Rpb246IGdldE5vdEVtcHR5U2VsZWN0aW9uKF90aGlzLmVsZW1lbnRTdGF0ZSwgaXNGb3J3YXJkKVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZVdvcmRGb3J3YXJkJzpcbiAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlV29yZEJhY2t3YXJkJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaGFuZGxlRGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudCxcbiAgICAgICAgICAgICAgICAgIGlzRm9yd2FyZDogaXNGb3J3YXJkLFxuICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uOiBnZXRXb3JkU2VsZWN0aW9uKF90aGlzLmVsZW1lbnRTdGF0ZSwgaXNGb3J3YXJkKSxcbiAgICAgICAgICAgICAgICAgIGZvcmNlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlU29mdExpbmVCYWNrd2FyZCc6XG4gICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZVNvZnRMaW5lRm9yd2FyZCc6XG4gICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZUhhcmRMaW5lQmFja3dhcmQnOlxuICAgICAgICAgICAgICBjYXNlICdkZWxldGVIYXJkTGluZUZvcndhcmQnOlxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5oYW5kbGVEZWxldGUoe1xuICAgICAgICAgICAgICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgaXNGb3J3YXJkOiBpc0ZvcndhcmQsXG4gICAgICAgICAgICAgICAgICBzZWxlY3Rpb246IGdldExpbmVTZWxlY3Rpb24oX3RoaXMuZWxlbWVudFN0YXRlLCBpc0ZvcndhcmQpLFxuICAgICAgICAgICAgICAgICAgZm9yY2U6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjYXNlICdpbnNlcnRDb21wb3NpdGlvblRleHQnOlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgLy8gd2lsbCBiZSBoYW5kbGVkIGluc2lkZSBgY29tcG9zaXRpb25lbmRgIGV2ZW50XG5cbiAgICAgICAgICAgICAgY2FzZSAnaW5zZXJ0TGluZUJyZWFrJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaGFuZGxlRW50ZXIoZXZlbnQpO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ2luc2VydEZyb21QYXN0ZSc6XG4gICAgICAgICAgICAgIGNhc2UgJ2luc2VydFRleHQnOlxuICAgICAgICAgICAgICBjYXNlICdpbnNlcnRGcm9tRHJvcCc6XG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmhhbmRsZUluc2VydChldmVudCwgZXZlbnQuZGF0YSB8fCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLyoqIFRPRE86IGRyb3AgaXQgYWZ0ZXIgYnJvd3NlciBzdXBwb3J0IGJ1bXAgKEZpcmVmb3ggODcrKVxyXG4gICAgICAgICAgICogQWxzbywgcmVwbGFjZSB1bmlvbiB0eXBlcyBgRXZlbnQgfCBUeXBlZElucHV0RXZlbnRgIHdpdGggYFR5cGVkSW5wdXRFdmVudGAgaW5zaWRlOlxyXG4gICAgICAgICAgICoqKiB7QGxpbmsgaGFuZGxlRGVsZXRlfVxyXG4gICAgICAgICAgICoqKiB7QGxpbmsgaGFuZGxlSW5zZXJ0fVxyXG4gICAgICAgICAgICovXG4gICAgICAgICAgX3RoaXMuZXZlbnRMaXN0ZW5lci5saXN0ZW4oJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5oYW5kbGVLZXlkb3duKGV2ZW50KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIF90aGlzLmV2ZW50TGlzdGVuZXIubGlzdGVuKCdwYXN0ZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuaGFuZGxlSW5zZXJ0KGV2ZW50LCAoKF9hID0gZXZlbnQuY2xpcGJvYXJkRGF0YSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldERhdGEoJ3RleHQvcGxhaW4nKSkgfHwgJycpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMuZXZlbnRMaXN0ZW5lci5saXN0ZW4oJ2lucHV0JywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgdmFyIGlucHV0VHlwZSA9IF9hLmlucHV0VHlwZTtcblxuICAgICAgICAgIGlmIChpbnB1dFR5cGUgPT09ICdpbnNlcnRDb21wb3NpdGlvblRleHQnKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIHdpbGwgYmUgaGFuZGxlZCBpbnNpZGUgYGNvbXBvc2l0aW9uZW5kYCBldmVudFxuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzLmVuc3VyZVZhbHVlRml0c01hc2soKTtcblxuICAgICAgICAgIF90aGlzLnVwZGF0ZUhpc3RvcnkoX3RoaXMuZWxlbWVudFN0YXRlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgX3RoaXMuZXZlbnRMaXN0ZW5lci5saXN0ZW4oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzLmVuc3VyZVZhbHVlRml0c01hc2soKTtcblxuICAgICAgICAgIF90aGlzLnVwZGF0ZUhpc3RvcnkoX3RoaXMuZWxlbWVudFN0YXRlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfVxuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWFza2l0by5wcm90b3R5cGUsIFwiZWxlbWVudFN0YXRlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIF9hID0gdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgICB2YWx1ZSA9IF9hLnZhbHVlLFxuICAgICAgICAgICAgICBzZWxlY3Rpb25TdGFydCA9IF9hLnNlbGVjdGlvblN0YXJ0LFxuICAgICAgICAgICAgICBzZWxlY3Rpb25FbmQgPSBfYS5zZWxlY3Rpb25FbmQ7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbjogW3NlbGVjdGlvblN0YXJ0IHx8IDAsIHNlbGVjdGlvbkVuZCB8fCAwXVxuICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hc2tpdG8ucHJvdG90eXBlLCBcIm1heExlbmd0aFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBtYXhMZW5ndGggPSB0aGlzLmVsZW1lbnQubWF4TGVuZ3RoO1xuICAgICAgICAgIHJldHVybiBtYXhMZW5ndGggPT09IC0xID8gSW5maW5pdHkgOiBtYXhMZW5ndGg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICBNYXNraXRvLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXIuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnRlYXJkb3ducy5mb3JFYWNoKGZ1bmN0aW9uICh0ZWFyZG93bikge1xuICAgICAgICAgIHJldHVybiB0ZWFyZG93biA9PT0gbnVsbCB8fCB0ZWFyZG93biA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGVhcmRvd24oKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBNYXNraXRvLnByb3RvdHlwZS51cGRhdGVFbGVtZW50U3RhdGUgPSBmdW5jdGlvbiAoX2EsIGV2ZW50SW5pdCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBfYS52YWx1ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IF9hLnNlbGVjdGlvbjtcblxuICAgICAgICBpZiAoZXZlbnRJbml0ID09PSB2b2lkIDApIHtcbiAgICAgICAgICBldmVudEluaXQgPSB7XG4gICAgICAgICAgICBpbnB1dFR5cGU6ICdpbnNlcnRUZXh0JyxcbiAgICAgICAgICAgIGRhdGE6IG51bGxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGluaXRpYWxWYWx1ZSA9IHRoaXMuZWxlbWVudFN0YXRlLnZhbHVlO1xuICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgdGhpcy51cGRhdGVTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb24pO1xuXG4gICAgICAgIGlmIChpbml0aWFsVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgdGhpcy5kaXNwYXRjaElucHV0RXZlbnQoZXZlbnRJbml0KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgTWFza2l0by5wcm90b3R5cGUudXBkYXRlU2VsZWN0aW9uUmFuZ2UgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIF9iLCBfYztcblxuICAgICAgICB2YXIgX2QgPSBfX3JlYWQoX2EsIDIpLFxuICAgICAgICAgICAgZnJvbSA9IF9kWzBdLFxuICAgICAgICAgICAgdG8gPSBfZFsxXTtcblxuICAgICAgICBpZiAodGhpcy5lbGVtZW50LnNlbGVjdGlvblN0YXJ0ICE9PSBmcm9tIHx8IHRoaXMuZWxlbWVudC5zZWxlY3Rpb25FbmQgIT09IHRvKSB7XG4gICAgICAgICAgKF9jID0gKF9iID0gdGhpcy5lbGVtZW50KS5zZXRTZWxlY3Rpb25SYW5nZSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmNhbGwoX2IsIGZyb20sIHRvKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgTWFza2l0by5wcm90b3R5cGUudXBkYXRlVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnZhbHVlID0gdmFsdWU7XG4gICAgICB9O1xuXG4gICAgICBNYXNraXRvLnByb3RvdHlwZS5lbnN1cmVWYWx1ZUZpdHNNYXNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnRTdGF0ZShtYXNraXRvVHJhbnNmb3JtKHRoaXMuZWxlbWVudFN0YXRlLCB0aGlzLm9wdGlvbnMpKTtcbiAgICAgIH07XG5cbiAgICAgIE1hc2tpdG8ucHJvdG90eXBlLmRpc3BhdGNoSW5wdXRFdmVudCA9IGZ1bmN0aW9uIChldmVudEluaXQpIHtcbiAgICAgICAgaWYgKGV2ZW50SW5pdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgZXZlbnRJbml0ID0ge1xuICAgICAgICAgICAgaW5wdXRUeXBlOiAnaW5zZXJ0VGV4dCcsXG4gICAgICAgICAgICBkYXRhOiBudWxsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBnbG9iYWxPYmplY3QgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IGdsb2JhbFRoaXM7IC8vIFRPRE86IHJlcGxhY2UgYGdsb2JhbE9iamVjdGAgd2l0aCBgZ2xvYmFsVGhpc2AgYWZ0ZXIgYnVtcGluZyBGaXJlZm94IHRvIDY1K1xuICAgICAgICAvLyBAc2VlIGh0dHBzOi8vY2FuaXVzZS5jb20vP3NlYXJjaD1nbG9iYWxUaGlzXG5cbiAgICAgICAgaWYgKGdsb2JhbE9iamVjdCA9PT0gbnVsbCB8fCBnbG9iYWxPYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdsb2JhbE9iamVjdC5JbnB1dEV2ZW50KSB7XG4gICAgICAgICAgdGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IElucHV0RXZlbnQoJ2lucHV0JywgX19hc3NpZ24oX19hc3NpZ24oe30sIGV2ZW50SW5pdCksIHtcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiBmYWxzZVxuICAgICAgICAgIH0pKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIE1hc2tpdG8ucHJvdG90eXBlLmhhbmRsZUtleWRvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHByZXNzZWRLZXkgPSBldmVudC5rZXk7XG4gICAgICAgIHZhciBpc0ZvcndhcmQgPSBwcmVzc2VkS2V5ID09PSAnRGVsZXRlJztcblxuICAgICAgICBzd2l0Y2ggKHByZXNzZWRLZXkpIHtcbiAgICAgICAgICBjYXNlICdCYWNrc3BhY2UnOlxuICAgICAgICAgIGNhc2UgJ0RlbGV0ZSc6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVEZWxldGUoe1xuICAgICAgICAgICAgICBldmVudDogZXZlbnQsXG4gICAgICAgICAgICAgIGlzRm9yd2FyZDogaXNGb3J3YXJkLFxuICAgICAgICAgICAgICBzZWxlY3Rpb246IGdldE5vdEVtcHR5U2VsZWN0aW9uKHRoaXMuZWxlbWVudFN0YXRlLCBpc0ZvcndhcmQpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUVudGVyKGV2ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNFdmVudFByb2R1Y2luZ0NoYXJhY3RlcihldmVudCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhhbmRsZUluc2VydChldmVudCwgcHJlc3NlZEtleSk7XG4gICAgICB9O1xuXG4gICAgICBNYXNraXRvLnByb3RvdHlwZS5oYW5kbGVEZWxldGUgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGV2ZW50ID0gX2EuZXZlbnQsXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBfYS5zZWxlY3Rpb24sXG4gICAgICAgICAgICBpc0ZvcndhcmQgPSBfYS5pc0ZvcndhcmQsXG4gICAgICAgICAgICBfYiA9IF9hLmZvcmNlLFxuICAgICAgICAgICAgZm9yY2UgPSBfYiA9PT0gdm9pZCAwID8gZmFsc2UgOiBfYjtcbiAgICAgICAgdmFyIGluaXRpYWxTdGF0ZSA9IHtcbiAgICAgICAgICB2YWx1ZTogdGhpcy5lbGVtZW50U3RhdGUudmFsdWUsXG4gICAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb25cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgX2MgPSBfX3JlYWQoaW5pdGlhbFN0YXRlLnNlbGVjdGlvbiwgMiksXG4gICAgICAgICAgICBpbml0aWFsRnJvbSA9IF9jWzBdLFxuICAgICAgICAgICAgaW5pdGlhbFRvID0gX2NbMV07XG5cbiAgICAgICAgdmFyIGVsZW1lbnRTdGF0ZSA9IHRoaXMucHJlcHJvY2Vzc29yKHtcbiAgICAgICAgICBlbGVtZW50U3RhdGU6IGluaXRpYWxTdGF0ZSxcbiAgICAgICAgICBkYXRhOiAnJ1xuICAgICAgICB9LCBpc0ZvcndhcmQgPyAnZGVsZXRlRm9yd2FyZCcgOiAnZGVsZXRlQmFja3dhcmQnKS5lbGVtZW50U3RhdGU7XG4gICAgICAgIHZhciBtYXNrTW9kZWwgPSBuZXcgTWFza01vZGVsKGVsZW1lbnRTdGF0ZSwgdGhpcy5vcHRpb25zKTtcblxuICAgICAgICB2YXIgX2QgPSBfX3JlYWQoZWxlbWVudFN0YXRlLnNlbGVjdGlvbiwgMiksXG4gICAgICAgICAgICBmcm9tID0gX2RbMF0sXG4gICAgICAgICAgICB0byA9IF9kWzFdO1xuXG4gICAgICAgIG1hc2tNb2RlbC5kZWxldGVDaGFyYWN0ZXJzKFtmcm9tLCB0b10pO1xuICAgICAgICB2YXIgbmV3RWxlbWVudFN0YXRlID0gdGhpcy5wb3N0cHJvY2Vzc29yKG1hc2tNb2RlbCwgaW5pdGlhbFN0YXRlKTtcbiAgICAgICAgdmFyIG5ld1Bvc3NpYmxlVmFsdWUgPSBpbml0aWFsU3RhdGUudmFsdWUuc2xpY2UoMCwgaW5pdGlhbEZyb20pICsgaW5pdGlhbFN0YXRlLnZhbHVlLnNsaWNlKGluaXRpYWxUbyk7XG5cbiAgICAgICAgaWYgKG5ld1Bvc3NpYmxlVmFsdWUgPT09IG5ld0VsZW1lbnRTdGF0ZS52YWx1ZSAmJiAhZm9yY2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGlmIChhcmVFbGVtZW50VmFsdWVzRXF1YWwoaW5pdGlhbFN0YXRlLCBlbGVtZW50U3RhdGUsIG1hc2tNb2RlbCwgbmV3RWxlbWVudFN0YXRlKSkge1xuICAgICAgICAgIC8vIFVzZXIgcHJlc3NlcyBCYWNrc3BhY2UvRGVsZXRlIGZvciB0aGUgZml4ZWQgdmFsdWVcbiAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVTZWxlY3Rpb25SYW5nZShpc0ZvcndhcmQgPyBbdG8sIHRvXSA6IFtmcm9tLCBmcm9tXSk7XG4gICAgICAgIH0gLy8gVE9ETzogZHJvcCBpdCB3aGVuIGBldmVudDogRXZlbnQgfCBUeXBlZElucHV0RXZlbnRgID0+IGBldmVudDogVHlwZWRJbnB1dEV2ZW50YFxuXG5cbiAgICAgICAgdmFyIGlucHV0VHlwZUZhbGxiYWNrID0gaXNGb3J3YXJkID8gJ2RlbGV0ZUNvbnRlbnRGb3J3YXJkJyA6ICdkZWxldGVDb250ZW50QmFja3dhcmQnO1xuICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnRTdGF0ZShuZXdFbGVtZW50U3RhdGUsIHtcbiAgICAgICAgICBpbnB1dFR5cGU6ICdpbnB1dFR5cGUnIGluIGV2ZW50ID8gZXZlbnQuaW5wdXRUeXBlIDogaW5wdXRUeXBlRmFsbGJhY2ssXG4gICAgICAgICAgZGF0YTogbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVIaXN0b3J5KG5ld0VsZW1lbnRTdGF0ZSk7XG4gICAgICB9O1xuXG4gICAgICBNYXNraXRvLnByb3RvdHlwZS5oYW5kbGVJbnNlcnQgPSBmdW5jdGlvbiAoZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgdmFyIGluaXRpYWxFbGVtZW50U3RhdGUgPSB0aGlzLmVsZW1lbnRTdGF0ZTtcblxuICAgICAgICB2YXIgX2EgPSB0aGlzLnByZXByb2Nlc3Nvcih7XG4gICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICBlbGVtZW50U3RhdGU6IGluaXRpYWxFbGVtZW50U3RhdGVcbiAgICAgICAgfSwgJ2luc2VydCcpLFxuICAgICAgICAgICAgZWxlbWVudFN0YXRlID0gX2EuZWxlbWVudFN0YXRlLFxuICAgICAgICAgICAgX2IgPSBfYS5kYXRhLFxuICAgICAgICAgICAgaW5zZXJ0ZWRUZXh0ID0gX2IgPT09IHZvaWQgMCA/IGRhdGEgOiBfYjtcblxuICAgICAgICB2YXIgbWFza01vZGVsID0gbmV3IE1hc2tNb2RlbChlbGVtZW50U3RhdGUsIHRoaXMub3B0aW9ucyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBtYXNrTW9kZWwuYWRkQ2hhcmFjdGVycyhlbGVtZW50U3RhdGUuc2VsZWN0aW9uLCBpbnNlcnRlZFRleHQpO1xuICAgICAgICB9IGNhdGNoIChfYykge1xuICAgICAgICAgIHJldHVybiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIF9kID0gX19yZWFkKGVsZW1lbnRTdGF0ZS5zZWxlY3Rpb24sIDIpLFxuICAgICAgICAgICAgZnJvbSA9IF9kWzBdLFxuICAgICAgICAgICAgdG8gPSBfZFsxXTtcblxuICAgICAgICB2YXIgbmV3UG9zc2libGVWYWx1ZSA9IGVsZW1lbnRTdGF0ZS52YWx1ZS5zbGljZSgwLCBmcm9tKSArIGRhdGEgKyBlbGVtZW50U3RhdGUudmFsdWUuc2xpY2UodG8pO1xuICAgICAgICB2YXIgbmV3RWxlbWVudFN0YXRlID0gdGhpcy5wb3N0cHJvY2Vzc29yKG1hc2tNb2RlbCwgaW5pdGlhbEVsZW1lbnRTdGF0ZSk7XG5cbiAgICAgICAgaWYgKG5ld0VsZW1lbnRTdGF0ZS52YWx1ZS5sZW5ndGggPiB0aGlzLm1heExlbmd0aCkge1xuICAgICAgICAgIHJldHVybiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1Bvc3NpYmxlVmFsdWUgIT09IG5ld0VsZW1lbnRTdGF0ZS52YWx1ZSkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50U3RhdGUobmV3RWxlbWVudFN0YXRlLCB7XG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgaW5wdXRUeXBlOiAnaW5wdXRUeXBlJyBpbiBldmVudCA/IGV2ZW50LmlucHV0VHlwZSA6ICdpbnNlcnRUZXh0J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMudXBkYXRlSGlzdG9yeShuZXdFbGVtZW50U3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBNYXNraXRvLnByb3RvdHlwZS5oYW5kbGVFbnRlciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAodGhpcy5pc1RleHRBcmVhKSB7XG4gICAgICAgICAgdGhpcy5oYW5kbGVJbnNlcnQoZXZlbnQsICdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIE1hc2tpdG87XG4gICAgfShNYXNrSGlzdG9yeSk7XG5cbiAgICBleHBvcnRzLk1BU0tJVE9fREVGQVVMVF9FTEVNRU5UX1BSRURJQ0FURSA9IE1BU0tJVE9fREVGQVVMVF9FTEVNRU5UX1BSRURJQ0FURTtcbiAgICBleHBvcnRzLk1BU0tJVE9fREVGQVVMVF9PUFRJT05TID0gTUFTS0lUT19ERUZBVUxUX09QVElPTlM7XG4gICAgZXhwb3J0cy5NYXNraXRvID0gTWFza2l0bztcbiAgICBleHBvcnRzLm1hc2tpdG9QaXBlID0gbWFza2l0b1BpcGU7XG4gICAgZXhwb3J0cy5tYXNraXRvVHJhbnNmb3JtID0gbWFza2l0b1RyYW5zZm9ybTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKTtcbiIsICIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cywgcmVxdWlyZSgnQG1hc2tpdG8vY29yZScpKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cycsICdAbWFza2l0by9jb3JlJ10sIGZhY3RvcnkpIDpcbiAgICAoZ2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IGdsb2JhbCB8fCBzZWxmLCBmYWN0b3J5KGdsb2JhbC5LaXQgPSB7fSwgZ2xvYmFsLmNvcmUpKTtcbn0pKHRoaXMsIChmdW5jdGlvbiAoZXhwb3J0cywgY29yZSkgeyAndXNlIHN0cmljdCc7XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcbiAgICBQZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxuICAgIHB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcbiAgICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcbiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuICAgIEFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuICAgIElORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG4gICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuICAgIE9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuICAgIFBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG5cclxuICAgIHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICAgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICAgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgICAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICAgICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgICAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFyO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgICAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPT09IFwiZnVuY3Rpb25cIiA/IFN1cHByZXNzZWRFcnJvciA6IGZ1bmN0aW9uIChlcnJvciwgc3VwcHJlc3NlZCwgbWVzc2FnZSkge1xyXG4gICAgICAgIHZhciBlID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XHJcbiAgICB9O1xuXG4gICAgdmFyIERFRkFVTFRfREVDSU1BTF9QU0VVRE9fU0VQQVJBVE9SUyA9IFsnLicsICcsJywgJ1x1MDQzMScsICdcdTA0NEUnXTtcblxuICAgIHZhciBERUZBVUxUX01JTl9EQVRFID0gbmV3IERhdGUoJzAwMDEtMDEtMDEnKTtcbiAgICB2YXIgREVGQVVMVF9NQVhfREFURSA9IG5ldyBEYXRlKCc5OTk5LTEyLTMxJyk7XG5cbiAgICB2YXIgREVGQVVMVF9USU1FX1NFR01FTlRfTUFYX1ZBTFVFUyA9IHtcbiAgICAgIGhvdXJzOiAyMyxcbiAgICAgIG1pbnV0ZXM6IDU5LFxuICAgICAgc2Vjb25kczogNTksXG4gICAgICBtaWxsaXNlY29uZHM6IDk5OVxuICAgIH07XG5cbiAgICAvKipcclxuICAgICAqIHtAbGluayBodHRwczovL3VuaWNvZGUtdGFibGUuY29tL2VuLzAwQTAvIE5vbi1icmVha2luZyBzcGFjZX0uXHJcbiAgICAgKi9cbiAgICB2YXIgQ0hBUl9OT19CUkVBS19TUEFDRSA9ICdcXHUwMEEwJztcbiAgICAvKipcclxuICAgICAqIHtAbGluayBodHRwczovL3VuaWNvZGUtdGFibGUuY29tL2VuLzIwMTMvIEVOIGRhc2h9XHJcbiAgICAgKiBpcyB1c2VkIHRvIGluZGljYXRlIGEgcmFuZ2Ugb2YgbnVtYmVycyBvciBhIHNwYW4gb2YgdGltZS5cclxuICAgICAqIEBleGFtcGxlIDIwMDZcdTIwMTMyMDIyXHJcbiAgICAgKi9cblxuICAgIHZhciBDSEFSX0VOX0RBU0ggPSAnXFx1MjAxMyc7XG4gICAgLyoqXHJcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly91bmljb2RlLXRhYmxlLmNvbS9lbi8yMDE0LyBFTSBkYXNofVxyXG4gICAgICogaXMgdXNlZCB0byBtYXJrIGEgYnJlYWsgaW4gYSBzZW50ZW5jZS5cclxuICAgICAqIEBleGFtcGxlIFRhaWdhIFVJIFx1MjAxNCBwb3dlcmZ1bCBzZXQgb2Ygb3BlbiBzb3VyY2UgY29tcG9uZW50cyBmb3IgQW5ndWxhclxyXG4gICAgICogX19fXHJcbiAgICAgKiBEb24ndCBjb25mdXNlIHdpdGgge0BsaW5rIENIQVJfRU5fREFTSH0gb3Ige0BsaW5rIENIQVJfSFlQSEVOfSFcclxuICAgICAqL1xuXG4gICAgdmFyIENIQVJfRU1fREFTSCA9ICdcXHUyMDE0JztcbiAgICAvKipcclxuICAgICAqIHtAbGluayBodHRwczovL3VuaWNvZGUtdGFibGUuY29tL2VuLzAwMkQvIEh5cGhlbiAobWludXMgc2lnbil9XHJcbiAgICAgKiBpcyB1c2VkIHRvIGNvbWJpbmUgd29yZHMuXHJcbiAgICAgKiBAZXhhbXBsZSB3ZWxsLWJlaGF2ZWRcclxuICAgICAqIF9fX1xyXG4gICAgICogRG9uJ3QgY29uZnVzZSB3aXRoIHtAbGluayBDSEFSX0VOX0RBU0h9IG9yIHtAbGluayBDSEFSX0VNX0RBU0h9IVxyXG4gICAgICovXG5cbiAgICB2YXIgQ0hBUl9IWVBIRU4gPSAnXFx1MDAyRCc7XG4gICAgLyoqXHJcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly91bmljb2RlLXRhYmxlLmNvbS9lbi8yMjEyLyBNaW51c31cclxuICAgICAqIGlzIHVzZWQgYXMgbWF0aCBvcGVyYXRvciBzeW1ib2wgb3IgYmVmb3JlIG5lZ2F0aXZlIGRpZ2l0cy5cclxuICAgICAqIC0tLVxyXG4gICAgICogQ2FuIGJlIHVzZWQgYXMgYCZtaW51cztgLiBEb24ndCBjb25mdXNlIHdpdGgge0BsaW5rIENIQVJfSFlQSEVOfVxyXG4gICAgICovXG5cbiAgICB2YXIgQ0hBUl9NSU5VUyA9ICdcXHUyMjEyJztcblxuICAgIHZhciBQT1NTSUJMRV9EQVRFX1JBTkdFX1NFUEFSQVRPUiA9IFtDSEFSX0hZUEhFTiwgQ0hBUl9FTl9EQVNILCBDSEFSX0VNX0RBU0gsIENIQVJfTUlOVVNdO1xuICAgIHZhciBQT1NTSUJMRV9EQVRFX1RJTUVfU0VQQVJBVE9SID0gWycsJywgJyAnXTtcblxuICAgIHZhciBUSU1FX0ZJWEVEX0NIQVJBQ1RFUlMgPSBbJzonLCAnLiddO1xuXG4gICAgdmFyIFRJTUVfU0VHTUVOVF9WQUxVRV9MRU5HVEhTID0ge1xuICAgICAgaG91cnM6IDIsXG4gICAgICBtaW51dGVzOiAyLFxuICAgICAgc2Vjb25kczogMixcbiAgICAgIG1pbGxpc2Vjb25kczogM1xuICAgIH07XG5cbiAgICAvKipcclxuICAgICAqIENsYW1wcyBhIHZhbHVlIGJldHdlZW4gdHdvIGluY2x1c2l2ZSBsaW1pdHNcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmFsdWVcclxuICAgICAqIEBwYXJhbSBtaW4gbG93ZXIgbGltaXRcclxuICAgICAqIEBwYXJhbSBtYXggdXBwZXIgbGltaXRcclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsYW1wKHZhbHVlLCBtaW4sIG1heCkge1xuICAgICAgdmFyIGNsYW1wZWRWYWx1ZSA9IE1hdGgubWluKE51bWJlcihtYXgpLCBNYXRoLm1heChOdW1iZXIobWluKSwgTnVtYmVyKHZhbHVlKSkpO1xuICAgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRGF0ZSA/IG5ldyBEYXRlKGNsYW1wZWRWYWx1ZSkgOiBjbGFtcGVkVmFsdWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXBwZW5kRGF0ZShpbml0aWFsRGF0ZSwgX2EpIHtcbiAgICAgIHZhciBfYiA9IF9hID09PSB2b2lkIDAgPyB7fSA6IF9hLFxuICAgICAgICAgIGRheSA9IF9iLmRheSxcbiAgICAgICAgICBtb250aCA9IF9iLm1vbnRoLFxuICAgICAgICAgIHllYXIgPSBfYi55ZWFyO1xuXG4gICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGluaXRpYWxEYXRlKTtcblxuICAgICAgaWYgKGRheSkge1xuICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyBkYXkpO1xuICAgICAgfVxuXG4gICAgICBpZiAobW9udGgpIHtcbiAgICAgICAgZGF0ZS5zZXRNb250aChkYXRlLmdldE1vbnRoKCkgKyBtb250aCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh5ZWFyKSB7XG4gICAgICAgIGRhdGUuc2V0RnVsbFllYXIoZGF0ZS5nZXRGdWxsWWVhcigpICsgeWVhcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRlO1xuICAgIH1cblxuICAgIHZhciBnZXREYXRlU2VnbWVudFZhbHVlTGVuZ3RoID0gZnVuY3Rpb24gKGRhdGVTdHJpbmcpIHtcbiAgICAgIHZhciBfYSwgX2IsIF9jO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXk6ICgoX2EgPSBkYXRlU3RyaW5nLm1hdGNoKC9kL2cpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKSB8fCAwLFxuICAgICAgICBtb250aDogKChfYiA9IGRhdGVTdHJpbmcubWF0Y2goL20vZykpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5sZW5ndGgpIHx8IDAsXG4gICAgICAgIHllYXI6ICgoX2MgPSBkYXRlU3RyaW5nLm1hdGNoKC95L2cpKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MubGVuZ3RoKSB8fCAwXG4gICAgICB9O1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBkYXRlVG9TZWdtZW50cyhkYXRlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXk6IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKSxcbiAgICAgICAgbW9udGg6IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpLFxuICAgICAgICB5ZWFyOiBTdHJpbmcoZGF0ZS5nZXRGdWxsWWVhcigpKS5wYWRTdGFydCg0LCAnMCcpLFxuICAgICAgICBob3VyczogU3RyaW5nKGRhdGUuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgJzAnKSxcbiAgICAgICAgbWludXRlczogU3RyaW5nKGRhdGUuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpLFxuICAgICAgICBzZWNvbmRzOiBTdHJpbmcoZGF0ZS5nZXRTZWNvbmRzKCkpLnBhZFN0YXJ0KDIsICcwJyksXG4gICAgICAgIG1pbGxpc2Vjb25kczogU3RyaW5nKGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkpLnBhZFN0YXJ0KDMsICcwJylcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNEYXRlU3RyaW5nQ29tcGxldGUoZGF0ZVN0cmluZywgZGF0ZU1vZGVUZW1wbGF0ZSkge1xuICAgICAgaWYgKGRhdGVTdHJpbmcubGVuZ3RoIDwgZGF0ZU1vZGVUZW1wbGF0ZS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0ZVN0cmluZy5zcGxpdCgvXFxELykuZXZlcnkoZnVuY3Rpb24gKHNlZ21lbnQpIHtcbiAgICAgICAgcmV0dXJuICFzZWdtZW50Lm1hdGNoKC9eMCskLyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZURhdGVSYW5nZVN0cmluZyhkYXRlUmFuZ2UsIGRhdGVNb2RlVGVtcGxhdGUsIHJhbmdlU2VwYXJhdG9yKSB7XG4gICAgICB2YXIgZGlnaXRzSW5EYXRlID0gZGF0ZU1vZGVUZW1wbGF0ZS5yZXBsYWNlKC9cXFcvZywgJycpLmxlbmd0aDtcbiAgICAgIHJldHVybiBkYXRlUmFuZ2UucmVwbGFjZShyYW5nZVNlcGFyYXRvciwgJycpLm1hdGNoKG5ldyBSZWdFeHAoXCIoXFxcXEQqXFxcXGRbXlxcXFxkXFxcXHNdKil7MSxcIiArIGRpZ2l0c0luRGF0ZSArIFwifVwiLCAnZycpKSB8fCBbXTtcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqIEBkZXByZWNhdGVkIHVzZSBgT2JqZWN0LmZyb21FbnRyaWVzYCBpbnN0ZWFkXHJcbiAgICAgKiAoY2hlY2sgYnJvd3NlciBzdXBwb3J0IGZpcnN0IGh0dHBzOi8vY2FuaXVzZS5jb20vbWRuLWphdmFzY3JpcHRfYnVpbHRpbnNfb2JqZWN0X2Zyb21lbnRyaWVzKVxyXG4gICAgICogX19fXHJcbiAgICAgKiBUT0RPOiBhZnRlciB3ZSBidW1wIEZpcmVmb3ggdG8gNjMrIHJlcGxhY2UgdGhpcyBmdW5jdGlvbiB3aXRoIGBPYmplY3QuZnJvbUVudHJpZXNgLlxyXG4gICAgICogVE9ETzogQWRkIGBlczIwMTkub2JqZWN0YCB0byBgdHNjb25maWcuanNvbmAgPT4gYGNvbXBpbGVyT3B0aW9ucy5saWJgLlxyXG4gICAgICpcclxuICAgICAqL1xuXG4gICAgZnVuY3Rpb24gZ2V0T2JqZWN0RnJvbUVudHJpZXMoa2V5VmFsdWVQYWlycykge1xuICAgICAgcmV0dXJuIGtleVZhbHVlUGFpcnMucmVkdWNlKGZ1bmN0aW9uIChvYmosIF9hKSB7XG4gICAgICAgIHZhciBfYjtcblxuICAgICAgICB2YXIgX2MgPSBfX3JlYWQoX2EsIDIpLFxuICAgICAgICAgICAga2V5ID0gX2NbMF0sXG4gICAgICAgICAgICB2YWwgPSBfY1sxXTtcblxuICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIG9iaiksIChfYiA9IHt9LCBfYltrZXldID0gdmFsLCBfYikpO1xuICAgICAgfSwge30pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlRGF0ZVN0cmluZyhkYXRlU3RyaW5nLCBmdWxsTW9kZSkge1xuICAgICAgdmFyIGNsZWFuTW9kZSA9IGZ1bGxNb2RlLnJlcGxhY2UoL1teZG15XS9nLCAnJyk7XG4gICAgICB2YXIgb25seURpZ2l0c0RhdGUgPSBkYXRlU3RyaW5nLnJlcGxhY2UoL1xcRCsvZywgJycpO1xuICAgICAgdmFyIGRhdGVTZWdtZW50cyA9IHtcbiAgICAgICAgZGF5OiBvbmx5RGlnaXRzRGF0ZS5zbGljZShjbGVhbk1vZGUuaW5kZXhPZignZCcpLCBjbGVhbk1vZGUubGFzdEluZGV4T2YoJ2QnKSArIDEpLFxuICAgICAgICBtb250aDogb25seURpZ2l0c0RhdGUuc2xpY2UoY2xlYW5Nb2RlLmluZGV4T2YoJ20nKSwgY2xlYW5Nb2RlLmxhc3RJbmRleE9mKCdtJykgKyAxKSxcbiAgICAgICAgeWVhcjogb25seURpZ2l0c0RhdGUuc2xpY2UoY2xlYW5Nb2RlLmluZGV4T2YoJ3knKSwgY2xlYW5Nb2RlLmxhc3RJbmRleE9mKCd5JykgKyAxKVxuICAgICAgfTtcbiAgICAgIHJldHVybiBnZXRPYmplY3RGcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhkYXRlU2VnbWVudHMpLmZpbHRlcihmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIF9iID0gX19yZWFkKF9hLCAyKTtcbiAgICAgICAgICAgIF9iWzBdO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gX2JbMV07XG5cbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odmFsdWUpO1xuICAgICAgfSkuc29ydChmdW5jdGlvbiAoX2EsIF9iKSB7XG4gICAgICAgIHZhciBfYyA9IF9fcmVhZChfYSwgMSksXG4gICAgICAgICAgICBhID0gX2NbMF07XG5cbiAgICAgICAgdmFyIF9kID0gX19yZWFkKF9iLCAxKSxcbiAgICAgICAgICAgIGIgPSBfZFswXTtcblxuICAgICAgICByZXR1cm4gZnVsbE1vZGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGFbMF0pID4gZnVsbE1vZGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGJbMF0pID8gMSA6IC0xO1xuICAgICAgfSkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlZ21lbnRzVG9EYXRlKHBhcnNlZERhdGUsIHBhcnNlZFRpbWUpIHtcbiAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcblxuICAgICAgdmFyIHllYXIgPSAoKF9hID0gcGFyc2VkRGF0ZS55ZWFyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKSA9PT0gMiA/IFwiMjBcIiArIHBhcnNlZERhdGUueWVhciA6IHBhcnNlZERhdGUueWVhcjtcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoTnVtYmVyKHllYXIgIT09IG51bGwgJiYgeWVhciAhPT0gdm9pZCAwID8geWVhciA6ICcwJyksIE51bWJlcigoX2IgPSBwYXJzZWREYXRlLm1vbnRoKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAnMScpIC0gMSwgTnVtYmVyKChfYyA9IHBhcnNlZERhdGUuZGF5KSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAnMScpLCBOdW1iZXIoKF9kID0gcGFyc2VkVGltZSA9PT0gbnVsbCB8fCBwYXJzZWRUaW1lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJzZWRUaW1lLmhvdXJzKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAnMCcpLCBOdW1iZXIoKF9lID0gcGFyc2VkVGltZSA9PT0gbnVsbCB8fCBwYXJzZWRUaW1lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJzZWRUaW1lLm1pbnV0ZXMpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6ICcwJyksIE51bWJlcigoX2YgPSBwYXJzZWRUaW1lID09PSBudWxsIHx8IHBhcnNlZFRpbWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcnNlZFRpbWUuc2Vjb25kcykgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogJzAnKSwgTnVtYmVyKChfZyA9IHBhcnNlZFRpbWUgPT09IG51bGwgfHwgcGFyc2VkVGltZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyc2VkVGltZS5taWxsaXNlY29uZHMpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6ICcwJykpOyAvLyBuZWVkZWQgZm9yIHllYXJzIGxlc3MgdGhhbiAxOTAwXG5cbiAgICAgIGRhdGUuc2V0RnVsbFllYXIoTnVtYmVyKHllYXIgIT09IG51bGwgJiYgeWVhciAhPT0gdm9pZCAwID8geWVhciA6ICcwJykpO1xuICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfVxuXG4gICAgdmFyIERBVEVfVElNRV9TRVBBUkFUT1IgPSAnLCAnO1xuXG4gICAgZnVuY3Rpb24gdG9EYXRlU3RyaW5nKF9hLCBkYXRlTW9kZSwgdGltZU1vZGUpIHtcbiAgICAgIHZhciBfYjtcblxuICAgICAgdmFyIGRheSA9IF9hLmRheSxcbiAgICAgICAgICBtb250aCA9IF9hLm1vbnRoLFxuICAgICAgICAgIHllYXIgPSBfYS55ZWFyLFxuICAgICAgICAgIGhvdXJzID0gX2EuaG91cnMsXG4gICAgICAgICAgbWludXRlcyA9IF9hLm1pbnV0ZXMsXG4gICAgICAgICAgc2Vjb25kcyA9IF9hLnNlY29uZHMsXG4gICAgICAgICAgbWlsbGlzZWNvbmRzID0gX2EubWlsbGlzZWNvbmRzO1xuICAgICAgdmFyIHNhZmVZZWFyID0gKChfYiA9IGRhdGVNb2RlLm1hdGNoKC95L2cpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubGVuZ3RoKSA9PT0gMiA/IHllYXIgPT09IG51bGwgfHwgeWVhciA9PT0gdm9pZCAwID8gdm9pZCAwIDogeWVhci5zbGljZSgtMikgOiB5ZWFyO1xuICAgICAgdmFyIGZ1bGxNb2RlID0gZGF0ZU1vZGUgKyAodGltZU1vZGUgPyBEQVRFX1RJTUVfU0VQQVJBVE9SICsgdGltZU1vZGUgOiAnJyk7XG4gICAgICByZXR1cm4gZnVsbE1vZGUucmVwbGFjZSgvZCsvZywgZGF5ICE9PSBudWxsICYmIGRheSAhPT0gdm9pZCAwID8gZGF5IDogJycpLnJlcGxhY2UoL20rL2csIG1vbnRoICE9PSBudWxsICYmIG1vbnRoICE9PSB2b2lkIDAgPyBtb250aCA6ICcnKS5yZXBsYWNlKC95Ky9nLCBzYWZlWWVhciAhPT0gbnVsbCAmJiBzYWZlWWVhciAhPT0gdm9pZCAwID8gc2FmZVllYXIgOiAnJykucmVwbGFjZSgvSCsvZywgaG91cnMgIT09IG51bGwgJiYgaG91cnMgIT09IHZvaWQgMCA/IGhvdXJzIDogJycpLnJlcGxhY2UoL01TUy9nLCBtaWxsaXNlY29uZHMgIT09IG51bGwgJiYgbWlsbGlzZWNvbmRzICE9PSB2b2lkIDAgPyBtaWxsaXNlY29uZHMgOiAnJykucmVwbGFjZSgvTSsvZywgbWludXRlcyAhPT0gbnVsbCAmJiBtaW51dGVzICE9PSB2b2lkIDAgPyBtaW51dGVzIDogJycpLnJlcGxhY2UoL1MrL2csIHNlY29uZHMgIT09IG51bGwgJiYgc2Vjb25kcyAhPT0gdm9pZCAwID8gc2Vjb25kcyA6ICcnKS5yZXBsYWNlKC9eXFxEKy9nLCAnJykucmVwbGFjZSgvXFxEKyQvZywgJycpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhZFdpdGhaZXJvZXNVbnRpbFZhbGlkKHNlZ21lbnRWYWx1ZSwgcGFkZGVkTWF4VmFsdWUsIHByZWZpeGVkWmVyb2VzQ291bnQpIHtcbiAgICAgIGlmIChwcmVmaXhlZFplcm9lc0NvdW50ID09PSB2b2lkIDApIHtcbiAgICAgICAgcHJlZml4ZWRaZXJvZXNDb3VudCA9IDA7XG4gICAgICB9XG5cbiAgICAgIGlmIChOdW1iZXIoc2VnbWVudFZhbHVlLnBhZEVuZChwYWRkZWRNYXhWYWx1ZS5sZW5ndGgsICcwJykpIDw9IE51bWJlcihwYWRkZWRNYXhWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxpZGF0ZWRTZWdtZW50VmFsdWU6IHNlZ21lbnRWYWx1ZSxcbiAgICAgICAgICBwcmVmaXhlZFplcm9lc0NvdW50OiBwcmVmaXhlZFplcm9lc0NvdW50XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmIChzZWdtZW50VmFsdWUuZW5kc1dpdGgoJzAnKSkge1xuICAgICAgICAvLyAwMDp8MDAgPT4gVHlwZSA5ID0+IDAwOjA5fFxuICAgICAgICByZXR1cm4gcGFkV2l0aFplcm9lc1VudGlsVmFsaWQoXCIwXCIgKyBzZWdtZW50VmFsdWUuc2xpY2UoMCwgcGFkZGVkTWF4VmFsdWUubGVuZ3RoIC0gMSksIHBhZGRlZE1heFZhbHVlLCBwcmVmaXhlZFplcm9lc0NvdW50ICsgMSk7XG4gICAgICB9IC8vIHwxOTowMCA9PiBUeXBlIDIgPT4gMnwwOjAwXG5cblxuICAgICAgcmV0dXJuIHBhZFdpdGhaZXJvZXNVbnRpbFZhbGlkKHNlZ21lbnRWYWx1ZS5zbGljZSgwLCBwYWRkZWRNYXhWYWx1ZS5sZW5ndGggLSAxKSArIFwiMFwiLCBwYWRkZWRNYXhWYWx1ZSwgcHJlZml4ZWRaZXJvZXNDb3VudCk7XG4gICAgfVxuXG4gICAgdmFyIGRhdGVNYXhWYWx1ZXMgPSB7XG4gICAgICBkYXk6IDMxLFxuICAgICAgbW9udGg6IDEyLFxuICAgICAgeWVhcjogOTk5OVxuICAgIH07XG4gICAgZnVuY3Rpb24gdmFsaWRhdGVEYXRlU3RyaW5nKF9hKSB7XG4gICAgICB2YXIgZV8xLCBfYjtcblxuICAgICAgdmFyIGRhdGVTdHJpbmcgPSBfYS5kYXRlU3RyaW5nLFxuICAgICAgICAgIGRhdGVNb2RlVGVtcGxhdGUgPSBfYS5kYXRlTW9kZVRlbXBsYXRlLFxuICAgICAgICAgIG9mZnNldCA9IF9hLm9mZnNldCxcbiAgICAgICAgICBfYyA9IF9fcmVhZChfYS5zZWxlY3Rpb24sIDIpLFxuICAgICAgICAgIGZyb20gPSBfY1swXSxcbiAgICAgICAgICB0byA9IF9jWzFdO1xuXG4gICAgICB2YXIgcGFyc2VkRGF0ZSA9IHBhcnNlRGF0ZVN0cmluZyhkYXRlU3RyaW5nLCBkYXRlTW9kZVRlbXBsYXRlKTtcbiAgICAgIHZhciBkYXRlU2VnbWVudHMgPSBPYmplY3QuZW50cmllcyhwYXJzZWREYXRlKTtcbiAgICAgIHZhciB2YWxpZGF0ZWREYXRlU2VnbWVudHMgPSB7fTtcbiAgICAgIHZhciBwYWRkZWRaZXJvZXMgPSAwO1xuXG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKHZhciBkYXRlU2VnbWVudHNfMSA9IF9fdmFsdWVzKGRhdGVTZWdtZW50cyksIGRhdGVTZWdtZW50c18xXzEgPSBkYXRlU2VnbWVudHNfMS5uZXh0KCk7ICFkYXRlU2VnbWVudHNfMV8xLmRvbmU7IGRhdGVTZWdtZW50c18xXzEgPSBkYXRlU2VnbWVudHNfMS5uZXh0KCkpIHtcbiAgICAgICAgICB2YXIgX2QgPSBfX3JlYWQoZGF0ZVNlZ21lbnRzXzFfMS52YWx1ZSwgMiksXG4gICAgICAgICAgICAgIHNlZ21lbnROYW1lID0gX2RbMF0sXG4gICAgICAgICAgICAgIHNlZ21lbnRWYWx1ZSA9IF9kWzFdO1xuXG4gICAgICAgICAgdmFyIHZhbGlkYXRlZERhdGUgPSB0b0RhdGVTdHJpbmcodmFsaWRhdGVkRGF0ZVNlZ21lbnRzLCBkYXRlTW9kZVRlbXBsYXRlKTtcbiAgICAgICAgICB2YXIgbWF4U2VnbWVudFZhbHVlID0gZGF0ZU1heFZhbHVlc1tzZWdtZW50TmFtZV07XG4gICAgICAgICAgdmFyIGZhbnRvbVNlcGFyYXRvciA9IHZhbGlkYXRlZERhdGUubGVuZ3RoICYmIDE7XG4gICAgICAgICAgdmFyIGxhc3RTZWdtZW50RGlnaXRJbmRleCA9IG9mZnNldCArIHZhbGlkYXRlZERhdGUubGVuZ3RoICsgZmFudG9tU2VwYXJhdG9yICsgZ2V0RGF0ZVNlZ21lbnRWYWx1ZUxlbmd0aChkYXRlTW9kZVRlbXBsYXRlKVtzZWdtZW50TmFtZV07XG4gICAgICAgICAgdmFyIGlzTGFzdFNlZ21lbnREaWdpdEFkZGVkID0gbGFzdFNlZ21lbnREaWdpdEluZGV4ID49IGZyb20gJiYgbGFzdFNlZ21lbnREaWdpdEluZGV4ID09PSB0bztcblxuICAgICAgICAgIGlmIChpc0xhc3RTZWdtZW50RGlnaXRBZGRlZCAmJiBOdW1iZXIoc2VnbWVudFZhbHVlKSA+IE51bWJlcihtYXhTZWdtZW50VmFsdWUpKSB7XG4gICAgICAgICAgICAvLyAzfDEuMTAuMjAxMCA9PiBUeXBlIDkgPT4gM3wxLjEwLjIwMTBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHZhbGlkYXRlZERhdGVTdHJpbmc6ICcnLFxuICAgICAgICAgICAgICB1cGRhdGVkU2VsZWN0aW9uOiBbZnJvbSwgdG9dXG4gICAgICAgICAgICB9OyAvLyBwcmV2ZW50IGNoYW5nZXNcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaXNMYXN0U2VnbWVudERpZ2l0QWRkZWQgJiYgTnVtYmVyKHNlZ21lbnRWYWx1ZSkgPCAxKSB7XG4gICAgICAgICAgICAvLyAzMS4wfDEuMjAxMCA9PiBUeXBlIDAgPT4gMzEuMHwxLjIwMTBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHZhbGlkYXRlZERhdGVTdHJpbmc6ICcnLFxuICAgICAgICAgICAgICB1cGRhdGVkU2VsZWN0aW9uOiBbZnJvbSwgdG9dXG4gICAgICAgICAgICB9OyAvLyBwcmV2ZW50IGNoYW5nZXNcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgX2UgPSBwYWRXaXRoWmVyb2VzVW50aWxWYWxpZChzZWdtZW50VmFsdWUsIFwiXCIgKyBtYXhTZWdtZW50VmFsdWUpLFxuICAgICAgICAgICAgICB2YWxpZGF0ZWRTZWdtZW50VmFsdWUgPSBfZS52YWxpZGF0ZWRTZWdtZW50VmFsdWUsXG4gICAgICAgICAgICAgIHByZWZpeGVkWmVyb2VzQ291bnQgPSBfZS5wcmVmaXhlZFplcm9lc0NvdW50O1xuXG4gICAgICAgICAgcGFkZGVkWmVyb2VzICs9IHByZWZpeGVkWmVyb2VzQ291bnQ7XG4gICAgICAgICAgdmFsaWRhdGVkRGF0ZVNlZ21lbnRzW3NlZ21lbnROYW1lXSA9IHZhbGlkYXRlZFNlZ21lbnRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZV8xXzEpIHtcbiAgICAgICAgZV8xID0ge1xuICAgICAgICAgIGVycm9yOiBlXzFfMVxuICAgICAgICB9O1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoZGF0ZVNlZ21lbnRzXzFfMSAmJiAhZGF0ZVNlZ21lbnRzXzFfMS5kb25lICYmIChfYiA9IGRhdGVTZWdtZW50c18xLnJldHVybikpIF9iLmNhbGwoZGF0ZVNlZ21lbnRzXzEpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgdmFsaWRhdGVkRGF0ZVN0cmluZyA9IHRvRGF0ZVN0cmluZyh2YWxpZGF0ZWREYXRlU2VnbWVudHMsIGRhdGVNb2RlVGVtcGxhdGUpO1xuICAgICAgdmFyIGFkZGVkRGF0ZVNlZ21lbnRTZXBhcmF0b3JzID0gdmFsaWRhdGVkRGF0ZVN0cmluZy5sZW5ndGggLSBkYXRlU3RyaW5nLmxlbmd0aDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkYXRlZERhdGVTdHJpbmc6IHZhbGlkYXRlZERhdGVTdHJpbmcsXG4gICAgICAgIHVwZGF0ZWRTZWxlY3Rpb246IFtmcm9tICsgcGFkZGVkWmVyb2VzICsgYWRkZWREYXRlU2VnbWVudFNlcGFyYXRvcnMsIHRvICsgcGFkZGVkWmVyb2VzICsgYWRkZWREYXRlU2VnbWVudFNlcGFyYXRvcnNdXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogQ29weS1wYXN0ZWQgc29sdXRpb24gZnJvbSBsb2Rhc2hcclxuICAgICAqIEBzZWUgaHR0cHM6Ly9sb2Rhc2guY29tL2RvY3MvNC4xNy4xNSNlc2NhcGVSZWdFeHBcclxuICAgICAqL1xuICAgIHZhciByZVJlZ0V4cENoYXIgPSAvW1xcXFxeJC4qKz8oKVtcXF17fXxdL2c7XG4gICAgdmFyIHJlSGFzUmVnRXhwQ2hhciA9IG5ldyBSZWdFeHAocmVSZWdFeHBDaGFyLnNvdXJjZSk7XG4gICAgZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHN0cikge1xuICAgICAgcmV0dXJuIHN0ciAmJiByZUhhc1JlZ0V4cENoYXIudGVzdChzdHIpID8gc3RyLnJlcGxhY2UocmVSZWdFeHBDaGFyLCAnXFxcXCQmJykgOiBzdHI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmluZENvbW1vbkJlZ2lubmluZ1N1YnN0cihhLCBiKSB7XG4gICAgICB2YXIgcmVzID0gJyc7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cblxuICAgICAgICByZXMgKz0gYVtpXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqIFJldHVybnMgY3VycmVudCBhY3RpdmUgZWxlbWVudCwgaW5jbHVkaW5nIHNoYWRvdyBkb21cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIGVsZW1lbnQgb3IgbnVsbFxyXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Rm9jdXNlZChfYSkge1xuICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBfYS5hY3RpdmVFbGVtZW50O1xuXG4gICAgICBpZiAoIShhY3RpdmVFbGVtZW50ID09PSBudWxsIHx8IGFjdGl2ZUVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFjdGl2ZUVsZW1lbnQuc2hhZG93Um9vdCkpIHtcbiAgICAgICAgcmV0dXJuIGFjdGl2ZUVsZW1lbnQ7XG4gICAgICB9XG5cbiAgICAgIHZhciBlbGVtZW50ID0gYWN0aXZlRWxlbWVudC5zaGFkb3dSb290LmFjdGl2ZUVsZW1lbnQ7XG5cbiAgICAgIHdoaWxlIChlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVsZW1lbnQuc2hhZG93Um9vdCkge1xuICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5zaGFkb3dSb290LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlkZW50aXR5KHgpIHtcbiAgICAgIHJldHVybiB4O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzRW1wdHkoZW50aXR5KSB7XG4gICAgICByZXR1cm4gIWVudGl0eSB8fCB0eXBlb2YgZW50aXR5ID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyhlbnRpdHkpLmxlbmd0aCA9PT0gMDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByYWlzZVNlZ21lbnRWYWx1ZVRvTWluKHNlZ21lbnRzLCBmdWxsTW9kZSkge1xuICAgICAgdmFyIHNlZ21lbnRzTGVuZ3RoID0gZ2V0RGF0ZVNlZ21lbnRWYWx1ZUxlbmd0aChmdWxsTW9kZSk7XG4gICAgICByZXR1cm4gZ2V0T2JqZWN0RnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoc2VnbWVudHMpLm1hcChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIF9iID0gX19yZWFkKF9hLCAyKSxcbiAgICAgICAgICAgIGtleSA9IF9iWzBdLFxuICAgICAgICAgICAgdmFsdWUgPSBfYlsxXTtcblxuICAgICAgICB2YXIgc2VnbWVudExlbmd0aCA9IHNlZ21lbnRzTGVuZ3RoW2tleV07XG4gICAgICAgIHJldHVybiBba2V5LCB2YWx1ZS5sZW5ndGggPT09IHNlZ21lbnRMZW5ndGggJiYgdmFsdWUubWF0Y2goL14wKyQvKSA/ICcxJy5wYWRTdGFydChzZWdtZW50TGVuZ3RoLCAnMCcpIDogdmFsdWVdO1xuICAgICAgfSkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZU1pbk1heERhdGVQb3N0cHJvY2Vzc29yKF9hKSB7XG4gICAgICB2YXIgZGF0ZU1vZGVUZW1wbGF0ZSA9IF9hLmRhdGVNb2RlVGVtcGxhdGUsXG4gICAgICAgICAgX2IgPSBfYS5taW4sXG4gICAgICAgICAgbWluID0gX2IgPT09IHZvaWQgMCA/IERFRkFVTFRfTUlOX0RBVEUgOiBfYixcbiAgICAgICAgICBfYyA9IF9hLm1heCxcbiAgICAgICAgICBtYXggPSBfYyA9PT0gdm9pZCAwID8gREVGQVVMVF9NQVhfREFURSA6IF9jLFxuICAgICAgICAgIF9kID0gX2EucmFuZ2VTZXBhcmF0b3IsXG4gICAgICAgICAgcmFuZ2VTZXBhcmF0b3IgPSBfZCA9PT0gdm9pZCAwID8gJycgOiBfZCxcbiAgICAgICAgICBfZSA9IF9hLmRhdGVTZWdtZW50U2VwYXJhdG9yLFxuICAgICAgICAgIGRhdGVTZWdtZW50U2VwYXJhdG9yID0gX2UgPT09IHZvaWQgMCA/ICcuJyA6IF9lO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgZV8xLCBfYjtcblxuICAgICAgICB2YXIgdmFsdWUgPSBfYS52YWx1ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IF9hLnNlbGVjdGlvbjtcbiAgICAgICAgdmFyIGVuZHNXaXRoUmFuZ2VTZXBhcmF0b3IgPSByYW5nZVNlcGFyYXRvciAmJiB2YWx1ZS5lbmRzV2l0aChyYW5nZVNlcGFyYXRvcik7XG4gICAgICAgIHZhciBkYXRlU3RyaW5ncyA9IHBhcnNlRGF0ZVJhbmdlU3RyaW5nKHZhbHVlLCBkYXRlTW9kZVRlbXBsYXRlLCByYW5nZVNlcGFyYXRvcik7XG4gICAgICAgIHZhciB2YWxpZGF0ZWRWYWx1ZSA9ICcnO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yICh2YXIgZGF0ZVN0cmluZ3NfMSA9IF9fdmFsdWVzKGRhdGVTdHJpbmdzKSwgZGF0ZVN0cmluZ3NfMV8xID0gZGF0ZVN0cmluZ3NfMS5uZXh0KCk7ICFkYXRlU3RyaW5nc18xXzEuZG9uZTsgZGF0ZVN0cmluZ3NfMV8xID0gZGF0ZVN0cmluZ3NfMS5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBkYXRlU3RyaW5nID0gZGF0ZVN0cmluZ3NfMV8xLnZhbHVlO1xuICAgICAgICAgICAgdmFsaWRhdGVkVmFsdWUgKz0gdmFsaWRhdGVkVmFsdWUgPyByYW5nZVNlcGFyYXRvciA6ICcnO1xuICAgICAgICAgICAgdmFyIHBhcnNlZERhdGUgPSBwYXJzZURhdGVTdHJpbmcoZGF0ZVN0cmluZywgZGF0ZU1vZGVUZW1wbGF0ZSk7XG5cbiAgICAgICAgICAgIGlmICghaXNEYXRlU3RyaW5nQ29tcGxldGUoZGF0ZVN0cmluZywgZGF0ZU1vZGVUZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgdmFyIGZpeGVkRGF0ZSA9IHJhaXNlU2VnbWVudFZhbHVlVG9NaW4ocGFyc2VkRGF0ZSwgZGF0ZU1vZGVUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgIHZhciBmaXhlZFZhbHVlID0gdG9EYXRlU3RyaW5nKGZpeGVkRGF0ZSwgZGF0ZU1vZGVUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgIHZhciB0YWlsID0gZGF0ZVN0cmluZy5lbmRzV2l0aChkYXRlU2VnbWVudFNlcGFyYXRvcikgPyBkYXRlU2VnbWVudFNlcGFyYXRvciA6ICcnO1xuICAgICAgICAgICAgICB2YWxpZGF0ZWRWYWx1ZSArPSBmaXhlZFZhbHVlICsgdGFpbDtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBkYXRlID0gc2VnbWVudHNUb0RhdGUocGFyc2VkRGF0ZSk7XG4gICAgICAgICAgICB2YXIgY2xhbXBlZERhdGUgPSBjbGFtcChkYXRlLCBtaW4sIG1heCk7XG4gICAgICAgICAgICB2YWxpZGF0ZWRWYWx1ZSArPSB0b0RhdGVTdHJpbmcoZGF0ZVRvU2VnbWVudHMoY2xhbXBlZERhdGUpLCBkYXRlTW9kZVRlbXBsYXRlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVfMV8xKSB7XG4gICAgICAgICAgZV8xID0ge1xuICAgICAgICAgICAgZXJyb3I6IGVfMV8xXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGRhdGVTdHJpbmdzXzFfMSAmJiAhZGF0ZVN0cmluZ3NfMV8xLmRvbmUgJiYgKF9iID0gZGF0ZVN0cmluZ3NfMS5yZXR1cm4pKSBfYi5jYWxsKGRhdGVTdHJpbmdzXzEpO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzZWxlY3Rpb246IHNlbGVjdGlvbixcbiAgICAgICAgICB2YWx1ZTogdmFsaWRhdGVkVmFsdWUgKyAoZW5kc1dpdGhSYW5nZVNlcGFyYXRvciA/IHJhbmdlU2VwYXJhdG9yIDogJycpXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZURhdGVQcmVwcm9jZXNzb3IoX2EpIHtcbiAgICAgIHZhciBkYXRlTW9kZVRlbXBsYXRlID0gX2EuZGF0ZU1vZGVUZW1wbGF0ZSxcbiAgICAgICAgICBkYXRlU2VnbWVudHNTZXBhcmF0b3IgPSBfYS5kYXRlU2VnbWVudHNTZXBhcmF0b3IsXG4gICAgICAgICAgX2IgPSBfYS5yYW5nZVNlcGFyYXRvcixcbiAgICAgICAgICByYW5nZVNlcGFyYXRvciA9IF9iID09PSB2b2lkIDAgPyAnJyA6IF9iO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgZWxlbWVudFN0YXRlID0gX2EuZWxlbWVudFN0YXRlLFxuICAgICAgICAgICAgZGF0YSA9IF9hLmRhdGE7XG4gICAgICAgIHZhciBzZXBhcmF0b3IgPSByYW5nZVNlcGFyYXRvciA/IG5ldyBSZWdFeHAocmFuZ2VTZXBhcmF0b3IgKyBcInwtXCIpIDogREFURV9USU1FX1NFUEFSQVRPUjtcbiAgICAgICAgdmFyIHBvc3NpYmxlRGF0ZXMgPSBkYXRhLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgIHZhciBkYXRlcyA9IGRhdGEuaW5jbHVkZXMoREFURV9USU1FX1NFUEFSQVRPUikgPyBbcG9zc2libGVEYXRlc1swXV0gOiBwb3NzaWJsZURhdGVzO1xuXG4gICAgICAgIGlmIChkYXRlcy5ldmVyeShmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgIHJldHVybiBkYXRlLnRyaW0oKS5zcGxpdCgvXFxELykubGVuZ3RoID09PSBkYXRlTW9kZVRlbXBsYXRlLnNwbGl0KGRhdGVTZWdtZW50c1NlcGFyYXRvcikubGVuZ3RoO1xuICAgICAgICB9KSkge1xuICAgICAgICAgIHZhciBuZXdEYXRhID0gZGF0ZXMubWFwKGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9ybWFsaXplRGF0ZVN0cmluZyhkYXRlLCBkYXRlTW9kZVRlbXBsYXRlLCBkYXRlU2VnbWVudHNTZXBhcmF0b3IpO1xuICAgICAgICAgIH0pLmpvaW4ocmFuZ2VTZXBhcmF0b3IpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbGVtZW50U3RhdGU6IGVsZW1lbnRTdGF0ZSxcbiAgICAgICAgICAgIGRhdGE6IFwiXCIgKyBuZXdEYXRhICsgKGRhdGEuaW5jbHVkZXMoREFURV9USU1FX1NFUEFSQVRPUikgPyBEQVRFX1RJTUVfU0VQQVJBVE9SICsgcG9zc2libGVEYXRlc1sxXSB8fCAnJyA6ICcnKVxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVsZW1lbnRTdGF0ZTogZWxlbWVudFN0YXRlLFxuICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplRGF0ZVN0cmluZyhkYXRlU3RyaW5nLCB0ZW1wbGF0ZSwgc2VwYXJhdG9yKSB7XG4gICAgICB2YXIgZGF0ZVNlZ21lbnRzID0gZGF0ZVN0cmluZy5zcGxpdCgvXFxELyk7XG4gICAgICB2YXIgdGVtcGxhdGVTZWdtZW50cyA9IHRlbXBsYXRlLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICB2YXIgbm9ybWFsaXplZFNlZ21lbnRzID0gZGF0ZVNlZ21lbnRzLm1hcChmdW5jdGlvbiAoc2VnbWVudCwgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4ID09PSB0ZW1wbGF0ZVNlZ21lbnRzLmxlbmd0aCAtIDEgPyBzZWdtZW50IDogc2VnbWVudC5wYWRTdGFydCh0ZW1wbGF0ZVNlZ21lbnRzW2luZGV4XS5sZW5ndGgsICcwJyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBub3JtYWxpemVkU2VnbWVudHMuam9pbihzZXBhcmF0b3IpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hc2tpdG9Qb3N0Zml4UG9zdHByb2Nlc3NvckdlbmVyYXRvcihwb3N0Zml4KSB7XG4gICAgICB2YXIgcG9zdGZpeFJFID0gbmV3IFJlZ0V4cChlc2NhcGVSZWdFeHAocG9zdGZpeCkgKyBcIiRcIik7XG4gICAgICByZXR1cm4gcG9zdGZpeCA/IGZ1bmN0aW9uIChfYSwgaW5pdGlhbEVsZW1lbnRTdGF0ZSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBfYS52YWx1ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IF9hLnNlbGVjdGlvbjtcblxuICAgICAgICBpZiAoIXZhbHVlICYmICFpbml0aWFsRWxlbWVudFN0YXRlLnZhbHVlLmVuZHNXaXRoKHBvc3RmaXgpKSB7XG4gICAgICAgICAgLy8gY2FzZXMgd2hlbiBkZXZlbG9wZXIgd2FudHMgaW5wdXQgdG8gYmUgZW1wdHkgKHByb2dyYW1tYXRpY2FsbHkpXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbjogc2VsZWN0aW9uXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdmFsdWUuZW5kc1dpdGgocG9zdGZpeCkgJiYgIWluaXRpYWxFbGVtZW50U3RhdGUudmFsdWUuZW5kc1dpdGgocG9zdGZpeCkpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb24sXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUgKyBwb3N0Zml4XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpbml0aWFsVmFsdWVCZWZvcmVQb3N0Zml4ID0gaW5pdGlhbEVsZW1lbnRTdGF0ZS52YWx1ZS5yZXBsYWNlKHBvc3RmaXhSRSwgJycpO1xuICAgICAgICB2YXIgcG9zdGZpeFdhc01vZGlmaWVkID0gaW5pdGlhbEVsZW1lbnRTdGF0ZS5zZWxlY3Rpb25bMV0gPj0gaW5pdGlhbFZhbHVlQmVmb3JlUG9zdGZpeC5sZW5ndGg7XG4gICAgICAgIHZhciBhbHJlYWR5RXhpc3RlZFZhbHVlQmVmb3JlUG9zdGZpeCA9IGZpbmRDb21tb25CZWdpbm5pbmdTdWJzdHIoaW5pdGlhbFZhbHVlQmVmb3JlUG9zdGZpeCwgdmFsdWUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNlbGVjdGlvbjogc2VsZWN0aW9uLFxuICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHBvc3RmaXgpLnJldmVyc2UoKS5yZWR1Y2UoZnVuY3Rpb24gKG5ld1ZhbHVlLCBjaGFyLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGkgPSBuZXdWYWx1ZS5sZW5ndGggLSAxIC0gaW5kZXg7XG4gICAgICAgICAgICB2YXIgaXNJbml0aWFsbHlNaXJyb3JlZENoYXIgPSBhbHJlYWR5RXhpc3RlZFZhbHVlQmVmb3JlUG9zdGZpeFtpXSA9PT0gY2hhciAmJiBwb3N0Zml4V2FzTW9kaWZpZWQ7XG4gICAgICAgICAgICByZXR1cm4gbmV3VmFsdWVbaV0gIT09IGNoYXIgfHwgaXNJbml0aWFsbHlNaXJyb3JlZENoYXIgPyBuZXdWYWx1ZS5zbGljZSgwLCBpICsgMSkgKyBjaGFyICsgbmV3VmFsdWUuc2xpY2UoaSArIDEpIDogbmV3VmFsdWU7XG4gICAgICAgICAgfSwgdmFsdWUpXG4gICAgICAgIH07XG4gICAgICB9IDogaWRlbnRpdHk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFza2l0b1ByZWZpeFBvc3Rwcm9jZXNzb3JHZW5lcmF0b3IocHJlZml4KSB7XG4gICAgICByZXR1cm4gcHJlZml4ID8gZnVuY3Rpb24gKF9hLCBpbml0aWFsRWxlbWVudFN0YXRlKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IF9hLnZhbHVlLFxuICAgICAgICAgICAgc2VsZWN0aW9uID0gX2Euc2VsZWN0aW9uO1xuXG4gICAgICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKHByZWZpeCkgfHwgLy8gYWxyZWFkeSB2YWxpZFxuICAgICAgICAhdmFsdWUgJiYgIWluaXRpYWxFbGVtZW50U3RhdGUudmFsdWUuc3RhcnRzV2l0aChwcmVmaXgpIC8vIGNhc2VzIHdoZW4gZGV2ZWxvcGVyIHdhbnRzIGlucHV0IHRvIGJlIGVtcHR5XG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBzZWxlY3Rpb246IHNlbGVjdGlvblxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgX2IgPSBfX3JlYWQoc2VsZWN0aW9uLCAyKSxcbiAgICAgICAgICAgIGZyb20gPSBfYlswXSxcbiAgICAgICAgICAgIHRvID0gX2JbMV07XG5cbiAgICAgICAgdmFyIHJlcXVpcmVkUHJlZml4ID0gQXJyYXkuZnJvbShwcmVmaXgpLnJlZHVjZShmdW5jdGlvbiAoY29tcHV0ZWRQcmVmaXgsIGNoYXIsIGkpIHtcbiAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBjb21wdXRlZFByZWZpeCArIHZhbHVlO1xuICAgICAgICAgIHJldHVybiBuZXdWYWx1ZVtpXSA9PT0gY2hhciA/IGNvbXB1dGVkUHJlZml4IDogY29tcHV0ZWRQcmVmaXggKyBjaGFyO1xuICAgICAgICB9LCAnJyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2VsZWN0aW9uOiBbZnJvbSArIHJlcXVpcmVkUHJlZml4Lmxlbmd0aCwgdG8gKyByZXF1aXJlZFByZWZpeC5sZW5ndGhdLFxuICAgICAgICAgIHZhbHVlOiByZXF1aXJlZFByZWZpeCArIHZhbHVlXG4gICAgICAgIH07XG4gICAgICB9IDogaWRlbnRpdHk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVmFsaWREYXRlUHJlcHJvY2Vzc29yKF9hKSB7XG4gICAgICB2YXIgZGF0ZU1vZGVUZW1wbGF0ZSA9IF9hLmRhdGVNb2RlVGVtcGxhdGUsXG4gICAgICAgICAgZGF0ZVNlZ21lbnRzU2VwYXJhdG9yID0gX2EuZGF0ZVNlZ21lbnRzU2VwYXJhdG9yLFxuICAgICAgICAgIF9iID0gX2EucmFuZ2VTZXBhcmF0b3IsXG4gICAgICAgICAgcmFuZ2VTZXBhcmF0b3IgPSBfYiA9PT0gdm9pZCAwID8gJycgOiBfYjtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGVfMSwgX2I7XG5cbiAgICAgICAgdmFyIGVsZW1lbnRTdGF0ZSA9IF9hLmVsZW1lbnRTdGF0ZSxcbiAgICAgICAgICAgIGRhdGEgPSBfYS5kYXRhO1xuICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50U3RhdGUudmFsdWUsXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBlbGVtZW50U3RhdGUuc2VsZWN0aW9uO1xuXG4gICAgICAgIGlmIChkYXRhID09PSBkYXRlU2VnbWVudHNTZXBhcmF0b3IpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZWxlbWVudFN0YXRlOiBlbGVtZW50U3RhdGUsXG4gICAgICAgICAgICBkYXRhOiBzZWxlY3Rpb25bMF0gPT09IHZhbHVlLmxlbmd0aCA/IGRhdGEgOiAnJ1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoUE9TU0lCTEVfREFURV9SQU5HRV9TRVBBUkFUT1IuaW5jbHVkZXMoZGF0YSkpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZWxlbWVudFN0YXRlOiBlbGVtZW50U3RhdGUsXG4gICAgICAgICAgICBkYXRhOiByYW5nZVNlcGFyYXRvclxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbmV3Q2hhcmFjdGVycyA9IGRhdGEucmVwbGFjZShuZXcgUmVnRXhwKFwiW15cXFxcZFwiICsgZXNjYXBlUmVnRXhwKGRhdGVTZWdtZW50c1NlcGFyYXRvcikgKyByYW5nZVNlcGFyYXRvciArIFwiXVwiLCAnZycpLCAnJyk7XG5cbiAgICAgICAgaWYgKCFuZXdDaGFyYWN0ZXJzKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVsZW1lbnRTdGF0ZTogZWxlbWVudFN0YXRlLFxuICAgICAgICAgICAgZGF0YTogJydcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIF9jID0gX19yZWFkKHNlbGVjdGlvbiwgMiksXG4gICAgICAgICAgICBmcm9tID0gX2NbMF0sXG4gICAgICAgICAgICByYXdUbyA9IF9jWzFdO1xuXG4gICAgICAgIHZhciB0byA9IHJhd1RvICsgZGF0YS5sZW5ndGg7XG4gICAgICAgIHZhciBuZXdQb3NzaWJsZVZhbHVlID0gdmFsdWUuc2xpY2UoMCwgZnJvbSkgKyBuZXdDaGFyYWN0ZXJzICsgdmFsdWUuc2xpY2UodG8pO1xuICAgICAgICB2YXIgZGF0ZVN0cmluZ3MgPSBwYXJzZURhdGVSYW5nZVN0cmluZyhuZXdQb3NzaWJsZVZhbHVlLCBkYXRlTW9kZVRlbXBsYXRlLCByYW5nZVNlcGFyYXRvcik7XG4gICAgICAgIHZhciB2YWxpZGF0ZWRWYWx1ZSA9ICcnO1xuICAgICAgICB2YXIgaGFzUmFuZ2VTZXBhcmF0b3IgPSBCb29sZWFuKHJhbmdlU2VwYXJhdG9yKSAmJiBuZXdQb3NzaWJsZVZhbHVlLmluY2x1ZGVzKHJhbmdlU2VwYXJhdG9yKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGZvciAodmFyIGRhdGVTdHJpbmdzXzEgPSBfX3ZhbHVlcyhkYXRlU3RyaW5ncyksIGRhdGVTdHJpbmdzXzFfMSA9IGRhdGVTdHJpbmdzXzEubmV4dCgpOyAhZGF0ZVN0cmluZ3NfMV8xLmRvbmU7IGRhdGVTdHJpbmdzXzFfMSA9IGRhdGVTdHJpbmdzXzEubmV4dCgpKSB7XG4gICAgICAgICAgICB2YXIgZGF0ZVN0cmluZyA9IGRhdGVTdHJpbmdzXzFfMS52YWx1ZTtcblxuICAgICAgICAgICAgdmFyIF9kID0gdmFsaWRhdGVEYXRlU3RyaW5nKHtcbiAgICAgICAgICAgICAgZGF0ZVN0cmluZzogZGF0ZVN0cmluZyxcbiAgICAgICAgICAgICAgZGF0ZU1vZGVUZW1wbGF0ZTogZGF0ZU1vZGVUZW1wbGF0ZSxcbiAgICAgICAgICAgICAgb2Zmc2V0OiB2YWxpZGF0ZWRWYWx1ZSA/IHZhbGlkYXRlZFZhbHVlLmxlbmd0aCArIHJhbmdlU2VwYXJhdG9yLmxlbmd0aCA6IDAsXG4gICAgICAgICAgICAgIHNlbGVjdGlvbjogW2Zyb20sIHRvXVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVkRGF0ZVN0cmluZyA9IF9kLnZhbGlkYXRlZERhdGVTdHJpbmcsXG4gICAgICAgICAgICAgICAgdXBkYXRlZFNlbGVjdGlvbiA9IF9kLnVwZGF0ZWRTZWxlY3Rpb247XG5cbiAgICAgICAgICAgIGlmIChkYXRlU3RyaW5nICYmICF2YWxpZGF0ZWREYXRlU3RyaW5nKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZWxlbWVudFN0YXRlOiBlbGVtZW50U3RhdGUsXG4gICAgICAgICAgICAgICAgZGF0YTogJydcbiAgICAgICAgICAgICAgfTsgLy8gcHJldmVudCBjaGFuZ2VzXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRvID0gdXBkYXRlZFNlbGVjdGlvblsxXTtcbiAgICAgICAgICAgIHZhbGlkYXRlZFZhbHVlICs9IGhhc1JhbmdlU2VwYXJhdG9yICYmIHZhbGlkYXRlZFZhbHVlID8gcmFuZ2VTZXBhcmF0b3IgKyB2YWxpZGF0ZWREYXRlU3RyaW5nIDogdmFsaWRhdGVkRGF0ZVN0cmluZztcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVfMV8xKSB7XG4gICAgICAgICAgZV8xID0ge1xuICAgICAgICAgICAgZXJyb3I6IGVfMV8xXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGRhdGVTdHJpbmdzXzFfMSAmJiAhZGF0ZVN0cmluZ3NfMV8xLmRvbmUgJiYgKF9iID0gZGF0ZVN0cmluZ3NfMS5yZXR1cm4pKSBfYi5jYWxsKGRhdGVTdHJpbmdzXzEpO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG5ld0RhdGEgPSB2YWxpZGF0ZWRWYWx1ZS5zbGljZShmcm9tLCB0byk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZWxlbWVudFN0YXRlOiB7XG4gICAgICAgICAgICBzZWxlY3Rpb246IHNlbGVjdGlvbixcbiAgICAgICAgICAgIHZhbHVlOiB2YWxpZGF0ZWRWYWx1ZS5zbGljZSgwLCBmcm9tKSArIG5ld0RhdGEuc3BsaXQoZGF0ZVNlZ21lbnRzU2VwYXJhdG9yKS5tYXAoZnVuY3Rpb24gKHNlZ21lbnQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICcwJy5yZXBlYXQoc2VnbWVudC5sZW5ndGgpO1xuICAgICAgICAgICAgfSkuam9pbihkYXRlU2VnbWVudHNTZXBhcmF0b3IpICsgdmFsaWRhdGVkVmFsdWUuc2xpY2UodG8pXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYXRhOiBuZXdEYXRhXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hc2tpdG9FdmVudEhhbmRsZXIobmFtZSwgaGFuZGxlciwgZXZlbnRMaXN0ZW5lck9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoZWxlbWVudCwgbWFza2l0b09wdGlvbnMpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBoYW5kbGVyKGVsZW1lbnQsIG1hc2tpdG9PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgbGlzdGVuZXIsIGV2ZW50TGlzdGVuZXJPcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIGxpc3RlbmVyLCBldmVudExpc3RlbmVyT3B0aW9ucyk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hc2tpdG9BZGRPbkZvY3VzUGx1Z2luKHZhbHVlKSB7XG4gICAgICByZXR1cm4gbWFza2l0b0V2ZW50SGFuZGxlcignZm9jdXMnLCBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBpZiAoIWVsZW1lbnQudmFsdWUpIHtcbiAgICAgICAgICBlbGVtZW50LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hc2tpdG9DYXJldEd1YXJkKGd1YXJkKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGRvY3VtZW50ID0gZWxlbWVudC5vd25lckRvY3VtZW50O1xuICAgICAgICB2YXIgaXNQb2ludGVyRG93biA9IDA7XG5cbiAgICAgICAgdmFyIG9uUG9pbnRlckRvd24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGlzUG9pbnRlckRvd24rKztcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgb25Qb2ludGVyVXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaXNQb2ludGVyRG93biA9IE1hdGgubWF4KC0taXNQb2ludGVyRG93biwgMCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChnZXRGb2N1c2VkKGRvY3VtZW50KSAhPT0gZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpc1BvaW50ZXJEb3duKSB7XG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGxpc3RlbmVyLCB7XG4gICAgICAgICAgICAgIG9uY2U6IHRydWUsXG4gICAgICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBzdGFydCA9IGVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgfHwgMDtcbiAgICAgICAgICB2YXIgZW5kID0gZWxlbWVudC5zZWxlY3Rpb25FbmQgfHwgMDtcblxuICAgICAgICAgIHZhciBfYSA9IF9fcmVhZChndWFyZChlbGVtZW50LnZhbHVlLCBbc3RhcnQsIGVuZF0pLCAyKSxcbiAgICAgICAgICAgICAgZnJvbUxpbWl0ID0gX2FbMF0sXG4gICAgICAgICAgICAgIHRvTGltaXQgPSBfYVsxXTtcblxuICAgICAgICAgIGlmIChmcm9tTGltaXQgPiBzdGFydCB8fCB0b0xpbWl0IDwgZW5kKSB7XG4gICAgICAgICAgICBlbGVtZW50LnNldFNlbGVjdGlvblJhbmdlKGNsYW1wKHN0YXJ0LCBmcm9tTGltaXQsIHRvTGltaXQpLCBjbGFtcChlbmQsIGZyb21MaW1pdCwgdG9MaW1pdCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3Rpb25jaGFuZ2UnLCBsaXN0ZW5lciwge1xuICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Qb2ludGVyRG93biwge1xuICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvblBvaW50ZXJVcCwge1xuICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2VsZWN0aW9uY2hhbmdlJywgbGlzdGVuZXIpO1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uUG9pbnRlckRvd24pO1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvblBvaW50ZXJVcCk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hc2tpdG9SZWplY3RFdmVudChlbGVtZW50KSB7XG4gICAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQudmFsdWU7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JlaW5wdXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCAmJiB2YWx1ZSA9PT0gZWxlbWVudC52YWx1ZSkge1xuICAgICAgICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnbWFza2l0b1JlamVjdCcsIHtcbiAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgIG9uY2U6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZWlucHV0JywgbGlzdGVuZXIsIHRydWUpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JlaW5wdXQnLCBsaXN0ZW5lciwgdHJ1ZSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hc2tpdG9SZW1vdmVPbkJsdXJQbHVnaW4odmFsdWUpIHtcbiAgICAgIHJldHVybiBtYXNraXRvRXZlbnRIYW5kbGVyKCdibHVyJywgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQudmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgZWxlbWVudC52YWx1ZSA9ICcnO1xuICAgICAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JykpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXNraXRvV2l0aFBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyLCBmb2N1c2VkT25seSkge1xuICAgICAgaWYgKGZvY3VzZWRPbmx5ID09PSB2b2lkIDApIHtcbiAgICAgICAgZm9jdXNlZE9ubHkgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlbW92ZVBsYWNlaG9sZGVyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSB2YWx1ZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGlmICh2YWx1ZVtpXSAhPT0gcGxhY2Vob2xkZXJbaV0pIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5zbGljZSgwLCBpICsgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfTtcblxuICAgICAgdmFyIHBsdWdpbnMgPSBbbWFza2l0b0NhcmV0R3VhcmQoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBbMCwgcmVtb3ZlUGxhY2Vob2xkZXIodmFsdWUpLmxlbmd0aF07XG4gICAgICB9KV07XG4gICAgICB2YXIgZm9jdXNlZCA9IGZhbHNlO1xuXG4gICAgICBpZiAoZm9jdXNlZE9ubHkpIHtcbiAgICAgICAgdmFyIGZvY3VzXzEgPSBtYXNraXRvRXZlbnRIYW5kbGVyKCdmb2N1cycsIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgZm9jdXNlZCA9IHRydWU7XG4gICAgICAgICAgZWxlbWVudC52YWx1ZSArPSBwbGFjZWhvbGRlci5zbGljZShlbGVtZW50LnZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSk7XG4gICAgICAgIH0sIHtcbiAgICAgICAgICBjYXB0dXJlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgYmx1cl8xID0gbWFza2l0b0V2ZW50SGFuZGxlcignYmx1cicsIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgZm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSByZW1vdmVQbGFjZWhvbGRlcihlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcpKTtcbiAgICAgICAgfSwge1xuICAgICAgICAgIGNhcHR1cmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHBsdWdpbnMucHVzaChmb2N1c18xLCBibHVyXzEpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwbHVnaW5zOiBwbHVnaW5zLFxuICAgICAgICByZW1vdmVQbGFjZWhvbGRlcjogcmVtb3ZlUGxhY2Vob2xkZXIsXG4gICAgICAgIHByZXByb2Nlc3NvcnM6IFtmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICB2YXIgZWxlbWVudFN0YXRlID0gX2EuZWxlbWVudFN0YXRlLFxuICAgICAgICAgICAgICBkYXRhID0gX2EuZGF0YTtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50U3RhdGUudmFsdWUsXG4gICAgICAgICAgICAgIHNlbGVjdGlvbiA9IGVsZW1lbnRTdGF0ZS5zZWxlY3Rpb247XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVsZW1lbnRTdGF0ZToge1xuICAgICAgICAgICAgICBzZWxlY3Rpb246IHNlbGVjdGlvbixcbiAgICAgICAgICAgICAgdmFsdWU6IHJlbW92ZVBsYWNlaG9sZGVyKHZhbHVlKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgICB9O1xuICAgICAgICB9XSxcbiAgICAgICAgcG9zdHByb2Nlc3NvcnM6IFtmdW5jdGlvbiAoX2EsIGluaXRpYWxFbGVtZW50U3RhdGUpIHtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBfYS52YWx1ZSxcbiAgICAgICAgICAgICAgc2VsZWN0aW9uID0gX2Euc2VsZWN0aW9uO1xuICAgICAgICAgIHJldHVybiBpbml0aWFsRWxlbWVudFN0YXRlLnZhbHVlICYmIChmb2N1c2VkIHx8ICFmb2N1c2VkT25seSkgPyB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUgKyBwbGFjZWhvbGRlci5zbGljZSh2YWx1ZS5sZW5ndGgpLFxuICAgICAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb25cbiAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb25cbiAgICAgICAgICB9O1xuICAgICAgICB9XVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVaZXJvUGxhY2Vob2xkZXJzUHJlcHJvY2Vzc29yKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfYSwgYWN0aW9uVHlwZSkge1xuICAgICAgICB2YXIgZWxlbWVudFN0YXRlID0gX2EuZWxlbWVudFN0YXRlO1xuICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50U3RhdGUudmFsdWUsXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBlbGVtZW50U3RhdGUuc2VsZWN0aW9uO1xuXG4gICAgICAgIGlmICghdmFsdWUgfHwgaXNMYXN0Q2hhcih2YWx1ZSwgc2VsZWN0aW9uKSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbGVtZW50U3RhdGU6IGVsZW1lbnRTdGF0ZVxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgX2IgPSBfX3JlYWQoc2VsZWN0aW9uLCAyKSxcbiAgICAgICAgICAgIGZyb20gPSBfYlswXSxcbiAgICAgICAgICAgIHRvID0gX2JbMV07XG5cbiAgICAgICAgdmFyIHplcm9lcyA9IHZhbHVlLnNsaWNlKGZyb20sIHRvKS5yZXBsYWNlKC9cXGQvZywgJzAnKTtcbiAgICAgICAgdmFyIG5ld1ZhbHVlID0gdmFsdWUuc2xpY2UoMCwgZnJvbSkgKyB6ZXJvZXMgKyB2YWx1ZS5zbGljZSh0byk7XG5cbiAgICAgICAgaWYgKGFjdGlvblR5cGUgPT09ICd2YWxpZGF0aW9uJyB8fCBhY3Rpb25UeXBlID09PSAnaW5zZXJ0JyAmJiBmcm9tID09PSB0bykge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbGVtZW50U3RhdGU6IHtcbiAgICAgICAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb24sXG4gICAgICAgICAgICAgIHZhbHVlOiBuZXdWYWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVsZW1lbnRTdGF0ZToge1xuICAgICAgICAgICAgc2VsZWN0aW9uOiBhY3Rpb25UeXBlID09PSAnZGVsZXRlQmFja3dhcmQnIHx8IGFjdGlvblR5cGUgPT09ICdpbnNlcnQnID8gW2Zyb20sIGZyb21dIDogW3RvLCB0b10sXG4gICAgICAgICAgICB2YWx1ZTogbmV3VmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzTGFzdENoYXIodmFsdWUsIF9hKSB7XG4gICAgICB2YXIgX2IgPSBfX3JlYWQoX2EsIDIpO1xuICAgICAgICAgIF9iWzBdO1xuICAgICAgICAgIHZhciB0byA9IF9iWzFdO1xuXG4gICAgICByZXR1cm4gdG8gPT09IHZhbHVlLmxlbmd0aDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXNraXRvRGF0ZU9wdGlvbnNHZW5lcmF0b3IoX2EpIHtcbiAgICAgIHZhciBtb2RlID0gX2EubW9kZSxcbiAgICAgICAgICBfYiA9IF9hLnNlcGFyYXRvcixcbiAgICAgICAgICBzZXBhcmF0b3IgPSBfYiA9PT0gdm9pZCAwID8gJy4nIDogX2IsXG4gICAgICAgICAgbWF4ID0gX2EubWF4LFxuICAgICAgICAgIG1pbiA9IF9hLm1pbjtcbiAgICAgIHZhciBkYXRlTW9kZVRlbXBsYXRlID0gbW9kZS5zcGxpdCgnLycpLmpvaW4oc2VwYXJhdG9yKTtcbiAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY29yZS5NQVNLSVRPX0RFRkFVTFRfT1BUSU9OUyksIHtcbiAgICAgICAgbWFzazogQXJyYXkuZnJvbShkYXRlTW9kZVRlbXBsYXRlKS5tYXAoZnVuY3Rpb24gKGNoYXIpIHtcbiAgICAgICAgICByZXR1cm4gY2hhciA9PT0gc2VwYXJhdG9yID8gY2hhciA6IC9cXGQvO1xuICAgICAgICB9KSxcbiAgICAgICAgb3ZlcndyaXRlTW9kZTogJ3JlcGxhY2UnLFxuICAgICAgICBwcmVwcm9jZXNzb3JzOiBbY3JlYXRlWmVyb1BsYWNlaG9sZGVyc1ByZXByb2Nlc3NvcigpLCBub3JtYWxpemVEYXRlUHJlcHJvY2Vzc29yKHtcbiAgICAgICAgICBkYXRlTW9kZVRlbXBsYXRlOiBkYXRlTW9kZVRlbXBsYXRlLFxuICAgICAgICAgIGRhdGVTZWdtZW50c1NlcGFyYXRvcjogc2VwYXJhdG9yXG4gICAgICAgIH0pLCBjcmVhdGVWYWxpZERhdGVQcmVwcm9jZXNzb3Ioe1xuICAgICAgICAgIGRhdGVNb2RlVGVtcGxhdGU6IGRhdGVNb2RlVGVtcGxhdGUsXG4gICAgICAgICAgZGF0ZVNlZ21lbnRzU2VwYXJhdG9yOiBzZXBhcmF0b3JcbiAgICAgICAgfSldLFxuICAgICAgICBwb3N0cHJvY2Vzc29yczogW2NyZWF0ZU1pbk1heERhdGVQb3N0cHJvY2Vzc29yKHtcbiAgICAgICAgICBtaW46IG1pbixcbiAgICAgICAgICBtYXg6IG1heCxcbiAgICAgICAgICBkYXRlTW9kZVRlbXBsYXRlOiBkYXRlTW9kZVRlbXBsYXRlLFxuICAgICAgICAgIGRhdGVTZWdtZW50U2VwYXJhdG9yOiBzZXBhcmF0b3JcbiAgICAgICAgfSldXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVNaW5NYXhSYW5nZUxlbmd0aFBvc3Rwcm9jZXNzb3IoX2EpIHtcbiAgICAgIHZhciBkYXRlTW9kZVRlbXBsYXRlID0gX2EuZGF0ZU1vZGVUZW1wbGF0ZSxcbiAgICAgICAgICByYW5nZVNlcGFyYXRvciA9IF9hLnJhbmdlU2VwYXJhdG9yLFxuICAgICAgICAgIG1pbkxlbmd0aCA9IF9hLm1pbkxlbmd0aCxcbiAgICAgICAgICBtYXhMZW5ndGggPSBfYS5tYXhMZW5ndGgsXG4gICAgICAgICAgX2IgPSBfYS5tYXgsXG4gICAgICAgICAgbWF4ID0gX2IgPT09IHZvaWQgMCA/IERFRkFVTFRfTUFYX0RBVEUgOiBfYjtcblxuICAgICAgaWYgKGlzRW1wdHkobWluTGVuZ3RoKSAmJiBpc0VtcHR5KG1heExlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIGlkZW50aXR5O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IF9hLnZhbHVlLFxuICAgICAgICAgICAgc2VsZWN0aW9uID0gX2Euc2VsZWN0aW9uO1xuICAgICAgICB2YXIgZGF0ZVN0cmluZ3MgPSBwYXJzZURhdGVSYW5nZVN0cmluZyh2YWx1ZSwgZGF0ZU1vZGVUZW1wbGF0ZSwgcmFuZ2VTZXBhcmF0b3IpO1xuXG4gICAgICAgIGlmIChkYXRlU3RyaW5ncy5sZW5ndGggIT09IDIgfHwgZGF0ZVN0cmluZ3Muc29tZShmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgIHJldHVybiAhaXNEYXRlU3RyaW5nQ29tcGxldGUoZGF0ZSwgZGF0ZU1vZGVUZW1wbGF0ZSk7XG4gICAgICAgIH0pKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbjogc2VsZWN0aW9uXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfYiA9IF9fcmVhZChkYXRlU3RyaW5ncy5tYXAoZnVuY3Rpb24gKGRhdGVTdHJpbmcpIHtcbiAgICAgICAgICByZXR1cm4gc2VnbWVudHNUb0RhdGUocGFyc2VEYXRlU3RyaW5nKGRhdGVTdHJpbmcsIGRhdGVNb2RlVGVtcGxhdGUpKTtcbiAgICAgICAgfSksIDIpLFxuICAgICAgICAgICAgZnJvbURhdGUgPSBfYlswXSxcbiAgICAgICAgICAgIHRvRGF0ZSA9IF9iWzFdO1xuXG4gICAgICAgIHZhciBtaW5EaXN0YW50VG9EYXRlID0gYXBwZW5kRGF0ZShmcm9tRGF0ZSwgX19hc3NpZ24oX19hc3NpZ24oe30sIG1pbkxlbmd0aCksIHtcbiAgICAgICAgICAvLyAwNi4wMi4yMDIzIC0gMDcuMDIuMjAyMyA9PiB7bWluTGVuZ3RoOiB7ZGF5OiAzfX0gPT4gMDYuMDIuMjAyMyAtIDA4LjAyLjIwMjNcbiAgICAgICAgICAvLyBcImZyb21cIi1kYXkgaXMgaW5jbHVkZWQgaW4gdGhlIHJhbmdlXG4gICAgICAgICAgZGF5OiAobWluTGVuZ3RoID09PSBudWxsIHx8IG1pbkxlbmd0aCA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWluTGVuZ3RoLmRheSkgJiYgbWluTGVuZ3RoLmRheSAtIDFcbiAgICAgICAgfSkpO1xuICAgICAgICB2YXIgbWF4RGlzdGFudFRvRGF0ZSA9ICFpc0VtcHR5KG1heExlbmd0aCkgPyBhcHBlbmREYXRlKGZyb21EYXRlLCBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbWF4TGVuZ3RoKSwge1xuICAgICAgICAgIGRheTogKG1heExlbmd0aCA9PT0gbnVsbCB8fCBtYXhMZW5ndGggPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1heExlbmd0aC5kYXkpICYmIG1heExlbmd0aC5kYXkgLSAxXG4gICAgICAgIH0pKSA6IG1heDtcbiAgICAgICAgdmFyIG1pbkxlbmd0aENsYW1wZWRUb0RhdGUgPSBjbGFtcCh0b0RhdGUsIG1pbkRpc3RhbnRUb0RhdGUsIG1heCk7XG4gICAgICAgIHZhciBtaW5NYXhMZW5ndGhDbGFtcGVkVG9EYXRlID0gbWluTGVuZ3RoQ2xhbXBlZFRvRGF0ZSA+IG1heERpc3RhbnRUb0RhdGUgPyBtYXhEaXN0YW50VG9EYXRlIDogbWluTGVuZ3RoQ2xhbXBlZFRvRGF0ZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzZWxlY3Rpb246IHNlbGVjdGlvbixcbiAgICAgICAgICB2YWx1ZTogZGF0ZVN0cmluZ3NbMF0gKyByYW5nZVNlcGFyYXRvciArIHRvRGF0ZVN0cmluZyhkYXRlVG9TZWdtZW50cyhtaW5NYXhMZW5ndGhDbGFtcGVkVG9EYXRlKSwgZGF0ZU1vZGVUZW1wbGF0ZSlcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlU3dhcERhdGVzUG9zdHByb2Nlc3NvcihfYSkge1xuICAgICAgdmFyIGRhdGVNb2RlVGVtcGxhdGUgPSBfYS5kYXRlTW9kZVRlbXBsYXRlLFxuICAgICAgICAgIHJhbmdlU2VwYXJhdG9yID0gX2EucmFuZ2VTZXBhcmF0b3I7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IF9hLnZhbHVlLFxuICAgICAgICAgICAgc2VsZWN0aW9uID0gX2Euc2VsZWN0aW9uO1xuICAgICAgICB2YXIgZGF0ZVN0cmluZ3MgPSBwYXJzZURhdGVSYW5nZVN0cmluZyh2YWx1ZSwgZGF0ZU1vZGVUZW1wbGF0ZSwgcmFuZ2VTZXBhcmF0b3IpO1xuICAgICAgICB2YXIgaXNEYXRlUmFuZ2VDb21wbGV0ZSA9IGRhdGVTdHJpbmdzLmxlbmd0aCA9PT0gMiAmJiBkYXRlU3RyaW5ncy5ldmVyeShmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgIHJldHVybiBpc0RhdGVTdHJpbmdDb21wbGV0ZShkYXRlLCBkYXRlTW9kZVRlbXBsYXRlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIF9iID0gX19yZWFkKHNlbGVjdGlvbiwgMiksXG4gICAgICAgICAgICBmcm9tID0gX2JbMF0sXG4gICAgICAgICAgICB0byA9IF9iWzFdO1xuXG4gICAgICAgIHZhciBjYXJldEF0VGhlRW5kID0gZnJvbSA+PSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgIHZhciBhbGxWYWx1ZVNlbGVjdGVkID0gZnJvbSA9PT0gMCAmJiB0byA+PSB2YWx1ZS5sZW5ndGg7IC8vIGRyb3BwaW5nIHRleHQgaW5zaWRlIHdpdGggYSBwb2ludGVyXG5cbiAgICAgICAgaWYgKCEoY2FyZXRBdFRoZUVuZCB8fCBhbGxWYWx1ZVNlbGVjdGVkKSB8fCAhaXNEYXRlUmFuZ2VDb21wbGV0ZSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBzZWxlY3Rpb246IHNlbGVjdGlvblxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgX2MgPSBfX3JlYWQoZGF0ZVN0cmluZ3MubWFwKGZ1bmN0aW9uIChkYXRlU3RyaW5nKSB7XG4gICAgICAgICAgcmV0dXJuIHNlZ21lbnRzVG9EYXRlKHBhcnNlRGF0ZVN0cmluZyhkYXRlU3RyaW5nLCBkYXRlTW9kZVRlbXBsYXRlKSk7XG4gICAgICAgIH0pLCAyKSxcbiAgICAgICAgICAgIGZyb21EYXRlID0gX2NbMF0sXG4gICAgICAgICAgICB0b0RhdGUgPSBfY1sxXTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNlbGVjdGlvbjogc2VsZWN0aW9uLFxuICAgICAgICAgIHZhbHVlOiBmcm9tRGF0ZSA+IHRvRGF0ZSA/IGRhdGVTdHJpbmdzLnJldmVyc2UoKS5qb2luKHJhbmdlU2VwYXJhdG9yKSA6IHZhbHVlXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hc2tpdG9EYXRlUmFuZ2VPcHRpb25zR2VuZXJhdG9yKF9hKSB7XG4gICAgICB2YXIgbW9kZSA9IF9hLm1vZGUsXG4gICAgICAgICAgX2IgPSBfYS5zZXBhcmF0b3IsXG4gICAgICAgICAgc2VwYXJhdG9yID0gX2IgPT09IHZvaWQgMCA/ICcuJyA6IF9iLFxuICAgICAgICAgIG1pbiA9IF9hLm1pbixcbiAgICAgICAgICBtYXggPSBfYS5tYXgsXG4gICAgICAgICAgbWluTGVuZ3RoID0gX2EubWluTGVuZ3RoLFxuICAgICAgICAgIG1heExlbmd0aCA9IF9hLm1heExlbmd0aCxcbiAgICAgICAgICBfYyA9IF9hLmRhdGVTZXBhcmF0b3IsXG4gICAgICAgICAgZGF0ZVNlcGFyYXRvciA9IF9jID09PSB2b2lkIDAgPyBzZXBhcmF0b3IgOiBfYyxcbiAgICAgICAgICBfZCA9IF9hLnJhbmdlU2VwYXJhdG9yLFxuICAgICAgICAgIHJhbmdlU2VwYXJhdG9yID0gX2QgPT09IHZvaWQgMCA/IFwiXCIgKyBDSEFSX05PX0JSRUFLX1NQQUNFICsgQ0hBUl9FTl9EQVNIICsgQ0hBUl9OT19CUkVBS19TUEFDRSA6IF9kO1xuICAgICAgdmFyIGRhdGVNb2RlVGVtcGxhdGUgPSBtb2RlLnNwbGl0KCcvJykuam9pbihkYXRlU2VwYXJhdG9yKTtcbiAgICAgIHZhciBkYXRlTWFzayA9IEFycmF5LmZyb20oZGF0ZU1vZGVUZW1wbGF0ZSkubWFwKGZ1bmN0aW9uIChjaGFyKSB7XG4gICAgICAgIHJldHVybiBjaGFyID09PSBkYXRlU2VwYXJhdG9yID8gY2hhciA6IC9cXGQvO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIGNvcmUuTUFTS0lUT19ERUZBVUxUX09QVElPTlMpLCB7XG4gICAgICAgIG1hc2s6IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBfX3JlYWQoZGF0ZU1hc2spKSwgX19yZWFkKEFycmF5LmZyb20ocmFuZ2VTZXBhcmF0b3IpKSksIF9fcmVhZChkYXRlTWFzaykpLFxuICAgICAgICBvdmVyd3JpdGVNb2RlOiAncmVwbGFjZScsXG4gICAgICAgIHByZXByb2Nlc3NvcnM6IFtjcmVhdGVaZXJvUGxhY2Vob2xkZXJzUHJlcHJvY2Vzc29yKCksIG5vcm1hbGl6ZURhdGVQcmVwcm9jZXNzb3Ioe1xuICAgICAgICAgIGRhdGVNb2RlVGVtcGxhdGU6IGRhdGVNb2RlVGVtcGxhdGUsXG4gICAgICAgICAgcmFuZ2VTZXBhcmF0b3I6IHJhbmdlU2VwYXJhdG9yLFxuICAgICAgICAgIGRhdGVTZWdtZW50c1NlcGFyYXRvcjogZGF0ZVNlcGFyYXRvclxuICAgICAgICB9KSwgY3JlYXRlVmFsaWREYXRlUHJlcHJvY2Vzc29yKHtcbiAgICAgICAgICBkYXRlTW9kZVRlbXBsYXRlOiBkYXRlTW9kZVRlbXBsYXRlLFxuICAgICAgICAgIHJhbmdlU2VwYXJhdG9yOiByYW5nZVNlcGFyYXRvcixcbiAgICAgICAgICBkYXRlU2VnbWVudHNTZXBhcmF0b3I6IGRhdGVTZXBhcmF0b3JcbiAgICAgICAgfSldLFxuICAgICAgICBwb3N0cHJvY2Vzc29yczogW2NyZWF0ZU1pbk1heERhdGVQb3N0cHJvY2Vzc29yKHtcbiAgICAgICAgICBtaW46IG1pbixcbiAgICAgICAgICBtYXg6IG1heCxcbiAgICAgICAgICBkYXRlTW9kZVRlbXBsYXRlOiBkYXRlTW9kZVRlbXBsYXRlLFxuICAgICAgICAgIHJhbmdlU2VwYXJhdG9yOiByYW5nZVNlcGFyYXRvcixcbiAgICAgICAgICBkYXRlU2VnbWVudFNlcGFyYXRvcjogZGF0ZVNlcGFyYXRvclxuICAgICAgICB9KSwgY3JlYXRlTWluTWF4UmFuZ2VMZW5ndGhQb3N0cHJvY2Vzc29yKHtcbiAgICAgICAgICBkYXRlTW9kZVRlbXBsYXRlOiBkYXRlTW9kZVRlbXBsYXRlLFxuICAgICAgICAgIG1pbkxlbmd0aDogbWluTGVuZ3RoLFxuICAgICAgICAgIG1heExlbmd0aDogbWF4TGVuZ3RoLFxuICAgICAgICAgIG1heDogbWF4LFxuICAgICAgICAgIHJhbmdlU2VwYXJhdG9yOiByYW5nZVNlcGFyYXRvclxuICAgICAgICB9KSwgY3JlYXRlU3dhcERhdGVzUG9zdHByb2Nlc3Nvcih7XG4gICAgICAgICAgZGF0ZU1vZGVUZW1wbGF0ZTogZGF0ZU1vZGVUZW1wbGF0ZSxcbiAgICAgICAgICByYW5nZVNlcGFyYXRvcjogcmFuZ2VTZXBhcmF0b3JcbiAgICAgICAgfSldXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYWRUaW1lU2VnbWVudHModGltZVNlZ21lbnRzKSB7XG4gICAgICByZXR1cm4gZ2V0T2JqZWN0RnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXModGltZVNlZ21lbnRzKS5tYXAoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBfYiA9IF9fcmVhZChfYSwgMiksXG4gICAgICAgICAgICBzZWdtZW50TmFtZSA9IF9iWzBdLFxuICAgICAgICAgICAgc2VnbWVudFZhbHVlID0gX2JbMV07XG5cbiAgICAgICAgcmV0dXJuIFtzZWdtZW50TmFtZSwgKFwiXCIgKyBzZWdtZW50VmFsdWUpLnBhZEVuZChUSU1FX1NFR01FTlRfVkFMVUVfTEVOR1RIU1tzZWdtZW50TmFtZV0sICcwJyldO1xuICAgICAgfSkpO1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHRpbWVTdHJpbmcgY2FuIGJlIHdpdGgvd2l0aG91dCBmaXhlZCBjaGFyYWN0ZXJzXHJcbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIHBhcnNlVGltZVN0cmluZyh0aW1lU3RyaW5nKSB7XG4gICAgICB2YXIgb25seURpZ2l0cyA9IHRpbWVTdHJpbmcucmVwbGFjZSgvXFxEKy9nLCAnJyk7XG4gICAgICB2YXIgdGltZVNlZ21lbnRzID0ge1xuICAgICAgICBob3Vyczogb25seURpZ2l0cy5zbGljZSgwLCAyKSxcbiAgICAgICAgbWludXRlczogb25seURpZ2l0cy5zbGljZSgyLCA0KSxcbiAgICAgICAgc2Vjb25kczogb25seURpZ2l0cy5zbGljZSg0LCA2KSxcbiAgICAgICAgbWlsbGlzZWNvbmRzOiBvbmx5RGlnaXRzLnNsaWNlKDYsIDkpXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGdldE9iamVjdEZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHRpbWVTZWdtZW50cykuZmlsdGVyKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgX2IgPSBfX3JlYWQoX2EsIDIpO1xuICAgICAgICAgICAgX2JbMF07XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBfYlsxXTtcblxuICAgICAgICByZXR1cm4gQm9vbGVhbih2YWx1ZSk7XG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9UaW1lU3RyaW5nKF9hKSB7XG4gICAgICB2YXIgX2IgPSBfYS5ob3VycyxcbiAgICAgICAgICBob3VycyA9IF9iID09PSB2b2lkIDAgPyAnJyA6IF9iLFxuICAgICAgICAgIF9jID0gX2EubWludXRlcyxcbiAgICAgICAgICBtaW51dGVzID0gX2MgPT09IHZvaWQgMCA/ICcnIDogX2MsXG4gICAgICAgICAgX2QgPSBfYS5zZWNvbmRzLFxuICAgICAgICAgIHNlY29uZHMgPSBfZCA9PT0gdm9pZCAwID8gJycgOiBfZCxcbiAgICAgICAgICBfZSA9IF9hLm1pbGxpc2Vjb25kcyxcbiAgICAgICAgICBtaWxsaXNlY29uZHMgPSBfZSA9PT0gdm9pZCAwID8gJycgOiBfZTtcbiAgICAgIHZhciBtbSA9IG1pbnV0ZXMgJiYgXCI6XCIgKyBtaW51dGVzO1xuICAgICAgdmFyIHNzID0gc2Vjb25kcyAmJiBcIjpcIiArIHNlY29uZHM7XG4gICAgICB2YXIgbXMgPSBtaWxsaXNlY29uZHMgJiYgXCIuXCIgKyBtaWxsaXNlY29uZHM7XG4gICAgICByZXR1cm4gXCJcIiArIGhvdXJzICsgbW0gKyBzcyArIG1zO1xuICAgIH1cblxuICAgIHZhciBUUkFJTElOR19USU1FX1NFR01FTlRfU0VQQVJBVE9SX1JFRyA9IG5ldyBSZWdFeHAoXCJbXCIgKyBUSU1FX0ZJWEVEX0NIQVJBQ1RFUlMubWFwKGVzY2FwZVJlZ0V4cCkuam9pbignJykgKyBcIl0kXCIpO1xuICAgIGZ1bmN0aW9uIHZhbGlkYXRlVGltZVN0cmluZyhfYSkge1xuICAgICAgdmFyIGVfMSwgX2I7XG5cbiAgICAgIHZhciB0aW1lU3RyaW5nID0gX2EudGltZVN0cmluZyxcbiAgICAgICAgICBwYWRkZWRNYXhWYWx1ZXMgPSBfYS5wYWRkZWRNYXhWYWx1ZXMsXG4gICAgICAgICAgb2Zmc2V0ID0gX2Eub2Zmc2V0LFxuICAgICAgICAgIF9jID0gX19yZWFkKF9hLnNlbGVjdGlvbiwgMiksXG4gICAgICAgICAgZnJvbSA9IF9jWzBdLFxuICAgICAgICAgIHRvID0gX2NbMV07XG5cbiAgICAgIHZhciBwYXJzZWRUaW1lID0gcGFyc2VUaW1lU3RyaW5nKHRpbWVTdHJpbmcpO1xuICAgICAgdmFyIHBvc3NpYmxlVGltZVNlZ21lbnRzID0gT2JqZWN0LmVudHJpZXMocGFyc2VkVGltZSk7XG4gICAgICB2YXIgdmFsaWRhdGVkVGltZVNlZ21lbnRzID0ge307XG4gICAgICB2YXIgcGFkZGVkWmVyb2VzID0gMDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgcG9zc2libGVUaW1lU2VnbWVudHNfMSA9IF9fdmFsdWVzKHBvc3NpYmxlVGltZVNlZ21lbnRzKSwgcG9zc2libGVUaW1lU2VnbWVudHNfMV8xID0gcG9zc2libGVUaW1lU2VnbWVudHNfMS5uZXh0KCk7ICFwb3NzaWJsZVRpbWVTZWdtZW50c18xXzEuZG9uZTsgcG9zc2libGVUaW1lU2VnbWVudHNfMV8xID0gcG9zc2libGVUaW1lU2VnbWVudHNfMS5uZXh0KCkpIHtcbiAgICAgICAgICB2YXIgX2QgPSBfX3JlYWQocG9zc2libGVUaW1lU2VnbWVudHNfMV8xLnZhbHVlLCAyKSxcbiAgICAgICAgICAgICAgc2VnbWVudE5hbWUgPSBfZFswXSxcbiAgICAgICAgICAgICAgc2VnbWVudFZhbHVlID0gX2RbMV07XG5cbiAgICAgICAgICB2YXIgdmFsaWRhdGVkVGltZSA9IHRvVGltZVN0cmluZyh2YWxpZGF0ZWRUaW1lU2VnbWVudHMpO1xuICAgICAgICAgIHZhciBtYXhTZWdtZW50VmFsdWUgPSBwYWRkZWRNYXhWYWx1ZXNbc2VnbWVudE5hbWVdO1xuICAgICAgICAgIHZhciBmYW50b21TZXBhcmF0b3IgPSB2YWxpZGF0ZWRUaW1lLmxlbmd0aCAmJiAxO1xuICAgICAgICAgIHZhciBsYXN0U2VnbWVudERpZ2l0SW5kZXggPSBvZmZzZXQgKyB2YWxpZGF0ZWRUaW1lLmxlbmd0aCArIGZhbnRvbVNlcGFyYXRvciArIFRJTUVfU0VHTUVOVF9WQUxVRV9MRU5HVEhTW3NlZ21lbnROYW1lXTtcbiAgICAgICAgICB2YXIgaXNMYXN0U2VnbWVudERpZ2l0QWRkZWQgPSBsYXN0U2VnbWVudERpZ2l0SW5kZXggPj0gZnJvbSAmJiBsYXN0U2VnbWVudERpZ2l0SW5kZXggPD0gdG87XG5cbiAgICAgICAgICBpZiAoaXNMYXN0U2VnbWVudERpZ2l0QWRkZWQgJiYgTnVtYmVyKHNlZ21lbnRWYWx1ZSkgPiBOdW1iZXIobWF4U2VnbWVudFZhbHVlKSkge1xuICAgICAgICAgICAgLy8gMnwwOjAwID0+IFR5cGUgOSA9PiAyfDA6MDBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHZhbGlkYXRlZFRpbWVTdHJpbmc6ICcnLFxuICAgICAgICAgICAgICB1cGRhdGVkVGltZVNlbGVjdGlvbjogW2Zyb20sIHRvXVxuICAgICAgICAgICAgfTsgLy8gcHJldmVudCBjaGFuZ2VzXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIF9lID0gcGFkV2l0aFplcm9lc1VudGlsVmFsaWQoc2VnbWVudFZhbHVlLCBcIlwiICsgbWF4U2VnbWVudFZhbHVlKSxcbiAgICAgICAgICAgICAgdmFsaWRhdGVkU2VnbWVudFZhbHVlID0gX2UudmFsaWRhdGVkU2VnbWVudFZhbHVlLFxuICAgICAgICAgICAgICBwcmVmaXhlZFplcm9lc0NvdW50ID0gX2UucHJlZml4ZWRaZXJvZXNDb3VudDtcblxuICAgICAgICAgIHBhZGRlZFplcm9lcyArPSBwcmVmaXhlZFplcm9lc0NvdW50O1xuICAgICAgICAgIHZhbGlkYXRlZFRpbWVTZWdtZW50c1tzZWdtZW50TmFtZV0gPSB2YWxpZGF0ZWRTZWdtZW50VmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVfMV8xKSB7XG4gICAgICAgIGVfMSA9IHtcbiAgICAgICAgICBlcnJvcjogZV8xXzFcbiAgICAgICAgfTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHBvc3NpYmxlVGltZVNlZ21lbnRzXzFfMSAmJiAhcG9zc2libGVUaW1lU2VnbWVudHNfMV8xLmRvbmUgJiYgKF9iID0gcG9zc2libGVUaW1lU2VnbWVudHNfMS5yZXR1cm4pKSBfYi5jYWxsKHBvc3NpYmxlVGltZVNlZ21lbnRzXzEpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgX2YgPSBfX3JlYWQodGltZVN0cmluZy5tYXRjaChUUkFJTElOR19USU1FX1NFR01FTlRfU0VQQVJBVE9SX1JFRykgfHwgW10sIDEpLFxuICAgICAgICAgIF9nID0gX2ZbMF0sXG4gICAgICAgICAgdHJhaWxpbmdTZWdtZW50U2VwYXJhdG9yID0gX2cgPT09IHZvaWQgMCA/ICcnIDogX2c7XG5cbiAgICAgIHZhciB2YWxpZGF0ZWRUaW1lU3RyaW5nID0gdG9UaW1lU3RyaW5nKHZhbGlkYXRlZFRpbWVTZWdtZW50cykgKyB0cmFpbGluZ1NlZ21lbnRTZXBhcmF0b3I7XG4gICAgICB2YXIgYWRkZWREYXRlU2VnbWVudFNlcGFyYXRvcnMgPSBNYXRoLm1heCh2YWxpZGF0ZWRUaW1lU3RyaW5nLmxlbmd0aCAtIHRpbWVTdHJpbmcubGVuZ3RoLCAwKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkYXRlZFRpbWVTdHJpbmc6IHZhbGlkYXRlZFRpbWVTdHJpbmcsXG4gICAgICAgIHVwZGF0ZWRUaW1lU2VsZWN0aW9uOiBbZnJvbSArIHBhZGRlZFplcm9lcyArIGFkZGVkRGF0ZVNlZ21lbnRTZXBhcmF0b3JzLCB0byArIHBhZGRlZFplcm9lcyArIGFkZGVkRGF0ZVNlZ21lbnRTZXBhcmF0b3JzXVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0RhdGVUaW1lU3RyaW5nQ29tcGxldGUoZGF0ZVRpbWVTdHJpbmcsIGRhdGVNb2RlLCB0aW1lTW9kZSkge1xuICAgICAgcmV0dXJuIGRhdGVUaW1lU3RyaW5nLmxlbmd0aCA+PSBkYXRlTW9kZS5sZW5ndGggKyB0aW1lTW9kZS5sZW5ndGggKyBEQVRFX1RJTUVfU0VQQVJBVE9SLmxlbmd0aCAmJiBkYXRlVGltZVN0cmluZy5zcGxpdChEQVRFX1RJTUVfU0VQQVJBVE9SKVswXS5zcGxpdCgvXFxELykuZXZlcnkoZnVuY3Rpb24gKHNlZ21lbnQpIHtcbiAgICAgICAgcmV0dXJuICFzZWdtZW50Lm1hdGNoKC9eMCskLyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZURhdGVUaW1lU3RyaW5nKGRhdGVUaW1lLCBkYXRlTW9kZVRlbXBsYXRlKSB7XG4gICAgICB2YXIgaGFzU2VwYXJhdG9yID0gZGF0ZVRpbWUuaW5jbHVkZXMoREFURV9USU1FX1NFUEFSQVRPUik7XG4gICAgICByZXR1cm4gW2RhdGVUaW1lLnNsaWNlKDAsIGRhdGVNb2RlVGVtcGxhdGUubGVuZ3RoKSwgZGF0ZVRpbWUuc2xpY2UoaGFzU2VwYXJhdG9yID8gZGF0ZU1vZGVUZW1wbGF0ZS5sZW5ndGggKyBEQVRFX1RJTUVfU0VQQVJBVE9SLmxlbmd0aCA6IGRhdGVNb2RlVGVtcGxhdGUubGVuZ3RoKV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlTWluTWF4RGF0ZVRpbWVQb3N0cHJvY2Vzc29yKF9hKSB7XG4gICAgICB2YXIgZGF0ZU1vZGVUZW1wbGF0ZSA9IF9hLmRhdGVNb2RlVGVtcGxhdGUsXG4gICAgICAgICAgdGltZU1vZGUgPSBfYS50aW1lTW9kZSxcbiAgICAgICAgICBfYiA9IF9hLm1pbixcbiAgICAgICAgICBtaW4gPSBfYiA9PT0gdm9pZCAwID8gREVGQVVMVF9NSU5fREFURSA6IF9iLFxuICAgICAgICAgIF9jID0gX2EubWF4LFxuICAgICAgICAgIG1heCA9IF9jID09PSB2b2lkIDAgPyBERUZBVUxUX01BWF9EQVRFIDogX2M7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IF9hLnZhbHVlLFxuICAgICAgICAgICAgc2VsZWN0aW9uID0gX2Euc2VsZWN0aW9uO1xuXG4gICAgICAgIHZhciBfYiA9IF9fcmVhZChwYXJzZURhdGVUaW1lU3RyaW5nKHZhbHVlLCBkYXRlTW9kZVRlbXBsYXRlKSwgMiksXG4gICAgICAgICAgICBkYXRlU3RyaW5nID0gX2JbMF0sXG4gICAgICAgICAgICB0aW1lU3RyaW5nID0gX2JbMV07XG5cbiAgICAgICAgdmFyIHBhcnNlZERhdGUgPSBwYXJzZURhdGVTdHJpbmcoZGF0ZVN0cmluZywgZGF0ZU1vZGVUZW1wbGF0ZSk7XG4gICAgICAgIHZhciBwYXJzZWRUaW1lID0gcGFyc2VUaW1lU3RyaW5nKHRpbWVTdHJpbmcpO1xuXG4gICAgICAgIGlmICghaXNEYXRlVGltZVN0cmluZ0NvbXBsZXRlKHZhbHVlLCBkYXRlTW9kZVRlbXBsYXRlLCB0aW1lTW9kZSkpIHtcbiAgICAgICAgICB2YXIgZml4ZWREYXRlID0gcmFpc2VTZWdtZW50VmFsdWVUb01pbihwYXJzZWREYXRlLCBkYXRlTW9kZVRlbXBsYXRlKTtcblxuICAgICAgICAgIHZhciBfYyA9IGlzRGF0ZVN0cmluZ0NvbXBsZXRlKGRhdGVTdHJpbmcsIGRhdGVNb2RlVGVtcGxhdGUpID8gZGF0ZVRvU2VnbWVudHMoY2xhbXAoc2VnbWVudHNUb0RhdGUoZml4ZWREYXRlKSwgbWluLCBtYXgpKSA6IGZpeGVkRGF0ZSxcbiAgICAgICAgICAgICAgeWVhciA9IF9jLnllYXIsXG4gICAgICAgICAgICAgIG1vbnRoID0gX2MubW9udGgsXG4gICAgICAgICAgICAgIGRheSA9IF9jLmRheTtcblxuICAgICAgICAgIHZhciBmaXhlZFZhbHVlID0gdG9EYXRlU3RyaW5nKF9fYXNzaWduKHtcbiAgICAgICAgICAgIHllYXI6IHllYXIsXG4gICAgICAgICAgICBtb250aDogbW9udGgsXG4gICAgICAgICAgICBkYXk6IGRheVxuICAgICAgICAgIH0sIHBhcnNlZFRpbWUpLCBkYXRlTW9kZVRlbXBsYXRlLCB0aW1lTW9kZSk7XG4gICAgICAgICAgdmFyIHRhaWwgPSB2YWx1ZS5zbGljZShmaXhlZFZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlbGVjdGlvbjogc2VsZWN0aW9uLFxuICAgICAgICAgICAgdmFsdWU6IGZpeGVkVmFsdWUgKyB0YWlsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYXRlID0gc2VnbWVudHNUb0RhdGUocGFyc2VkRGF0ZSwgcGFyc2VkVGltZSk7XG4gICAgICAgIHZhciBjbGFtcGVkRGF0ZSA9IGNsYW1wKGRhdGUsIG1pbiwgbWF4KTtcbiAgICAgICAgdmFyIHZhbGlkYXRlZFZhbHVlID0gdG9EYXRlU3RyaW5nKGRhdGVUb1NlZ21lbnRzKGNsYW1wZWREYXRlKSwgZGF0ZU1vZGVUZW1wbGF0ZSwgdGltZU1vZGUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNlbGVjdGlvbjogc2VsZWN0aW9uLFxuICAgICAgICAgIHZhbHVlOiB2YWxpZGF0ZWRWYWx1ZVxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVWYWxpZERhdGVUaW1lUHJlcHJvY2Vzc29yKF9hKSB7XG4gICAgICB2YXIgZGF0ZU1vZGVUZW1wbGF0ZSA9IF9hLmRhdGVNb2RlVGVtcGxhdGUsXG4gICAgICAgICAgZGF0ZVNlZ21lbnRzU2VwYXJhdG9yID0gX2EuZGF0ZVNlZ21lbnRzU2VwYXJhdG9yO1xuICAgICAgdmFyIGludmFsaWRDaGFyc1JlZ0V4cCA9IG5ldyBSZWdFeHAoXCJbXlxcXFxkXCIgKyBUSU1FX0ZJWEVEX0NIQVJBQ1RFUlMubWFwKGVzY2FwZVJlZ0V4cCkuam9pbignJykgKyBlc2NhcGVSZWdFeHAoZGF0ZVNlZ21lbnRzU2VwYXJhdG9yKSArIFwiXStcIik7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBlbGVtZW50U3RhdGUgPSBfYS5lbGVtZW50U3RhdGUsXG4gICAgICAgICAgICBkYXRhID0gX2EuZGF0YTtcbiAgICAgICAgdmFyIHZhbHVlID0gZWxlbWVudFN0YXRlLnZhbHVlLFxuICAgICAgICAgICAgc2VsZWN0aW9uID0gZWxlbWVudFN0YXRlLnNlbGVjdGlvbjtcblxuICAgICAgICBpZiAoZGF0YSA9PT0gZGF0ZVNlZ21lbnRzU2VwYXJhdG9yKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVsZW1lbnRTdGF0ZTogZWxlbWVudFN0YXRlLFxuICAgICAgICAgICAgZGF0YTogc2VsZWN0aW9uWzBdID09PSB2YWx1ZS5sZW5ndGggPyBkYXRhIDogJydcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFBPU1NJQkxFX0RBVEVfVElNRV9TRVBBUkFUT1IuaW5jbHVkZXMoZGF0YSkpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZWxlbWVudFN0YXRlOiBlbGVtZW50U3RhdGUsXG4gICAgICAgICAgICBkYXRhOiBEQVRFX1RJTUVfU0VQQVJBVE9SXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBuZXdDaGFyYWN0ZXJzID0gZGF0YS5yZXBsYWNlKGludmFsaWRDaGFyc1JlZ0V4cCwgJycpO1xuXG4gICAgICAgIGlmICghbmV3Q2hhcmFjdGVycykge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbGVtZW50U3RhdGU6IGVsZW1lbnRTdGF0ZSxcbiAgICAgICAgICAgIGRhdGE6ICcnXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfYiA9IF9fcmVhZChzZWxlY3Rpb24sIDIpLFxuICAgICAgICAgICAgZnJvbSA9IF9iWzBdLFxuICAgICAgICAgICAgcmF3VG8gPSBfYlsxXTtcblxuICAgICAgICB2YXIgdG8gPSByYXdUbyArIGRhdGEubGVuZ3RoO1xuICAgICAgICB2YXIgbmV3UG9zc2libGVWYWx1ZSA9IHZhbHVlLnNsaWNlKDAsIGZyb20pICsgbmV3Q2hhcmFjdGVycyArIHZhbHVlLnNsaWNlKHRvKTtcblxuICAgICAgICB2YXIgX2MgPSBfX3JlYWQocGFyc2VEYXRlVGltZVN0cmluZyhuZXdQb3NzaWJsZVZhbHVlLCBkYXRlTW9kZVRlbXBsYXRlKSwgMiksXG4gICAgICAgICAgICBkYXRlU3RyaW5nID0gX2NbMF0sXG4gICAgICAgICAgICB0aW1lU3RyaW5nID0gX2NbMV07XG5cbiAgICAgICAgdmFyIHZhbGlkYXRlZFZhbHVlID0gJyc7XG4gICAgICAgIHZhciBoYXNEYXRlVGltZVNlcGFyYXRvciA9IG5ld1Bvc3NpYmxlVmFsdWUuaW5jbHVkZXMoREFURV9USU1FX1NFUEFSQVRPUik7XG5cbiAgICAgICAgdmFyIF9kID0gdmFsaWRhdGVEYXRlU3RyaW5nKHtcbiAgICAgICAgICBkYXRlU3RyaW5nOiBkYXRlU3RyaW5nLFxuICAgICAgICAgIGRhdGVNb2RlVGVtcGxhdGU6IGRhdGVNb2RlVGVtcGxhdGUsXG4gICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgIHNlbGVjdGlvbjogW2Zyb20sIHRvXVxuICAgICAgICB9KSxcbiAgICAgICAgICAgIHZhbGlkYXRlZERhdGVTdHJpbmcgPSBfZC52YWxpZGF0ZWREYXRlU3RyaW5nLFxuICAgICAgICAgICAgdXBkYXRlZFNlbGVjdGlvbiA9IF9kLnVwZGF0ZWRTZWxlY3Rpb247XG5cbiAgICAgICAgaWYgKGRhdGVTdHJpbmcgJiYgIXZhbGlkYXRlZERhdGVTdHJpbmcpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZWxlbWVudFN0YXRlOiBlbGVtZW50U3RhdGUsXG4gICAgICAgICAgICBkYXRhOiAnJ1xuICAgICAgICAgIH07IC8vIHByZXZlbnQgY2hhbmdlc1xuICAgICAgICB9XG5cbiAgICAgICAgdG8gPSB1cGRhdGVkU2VsZWN0aW9uWzFdO1xuICAgICAgICB2YWxpZGF0ZWRWYWx1ZSArPSB2YWxpZGF0ZWREYXRlU3RyaW5nO1xuICAgICAgICB2YXIgcGFkZGVkTWF4VmFsdWVzID0gcGFkVGltZVNlZ21lbnRzKERFRkFVTFRfVElNRV9TRUdNRU5UX01BWF9WQUxVRVMpO1xuXG4gICAgICAgIHZhciBfZSA9IHZhbGlkYXRlVGltZVN0cmluZyh7XG4gICAgICAgICAgdGltZVN0cmluZzogdGltZVN0cmluZyxcbiAgICAgICAgICBwYWRkZWRNYXhWYWx1ZXM6IHBhZGRlZE1heFZhbHVlcyxcbiAgICAgICAgICBvZmZzZXQ6IHZhbGlkYXRlZFZhbHVlLmxlbmd0aCArIERBVEVfVElNRV9TRVBBUkFUT1IubGVuZ3RoLFxuICAgICAgICAgIHNlbGVjdGlvbjogW2Zyb20sIHRvXVxuICAgICAgICB9KSxcbiAgICAgICAgICAgIHZhbGlkYXRlZFRpbWVTdHJpbmcgPSBfZS52YWxpZGF0ZWRUaW1lU3RyaW5nLFxuICAgICAgICAgICAgdXBkYXRlZFRpbWVTZWxlY3Rpb24gPSBfZS51cGRhdGVkVGltZVNlbGVjdGlvbjtcblxuICAgICAgICBpZiAodGltZVN0cmluZyAmJiAhdmFsaWRhdGVkVGltZVN0cmluZykge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbGVtZW50U3RhdGU6IGVsZW1lbnRTdGF0ZSxcbiAgICAgICAgICAgIGRhdGE6ICcnXG4gICAgICAgICAgfTsgLy8gcHJldmVudCBjaGFuZ2VzXG4gICAgICAgIH1cblxuICAgICAgICB0byA9IHVwZGF0ZWRUaW1lU2VsZWN0aW9uWzFdO1xuICAgICAgICB2YWxpZGF0ZWRWYWx1ZSArPSBoYXNEYXRlVGltZVNlcGFyYXRvciA/IERBVEVfVElNRV9TRVBBUkFUT1IgKyB2YWxpZGF0ZWRUaW1lU3RyaW5nIDogdmFsaWRhdGVkVGltZVN0cmluZztcbiAgICAgICAgdmFyIG5ld0RhdGEgPSB2YWxpZGF0ZWRWYWx1ZS5zbGljZShmcm9tLCB0byk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZWxlbWVudFN0YXRlOiB7XG4gICAgICAgICAgICBzZWxlY3Rpb246IHNlbGVjdGlvbixcbiAgICAgICAgICAgIHZhbHVlOiB2YWxpZGF0ZWRWYWx1ZS5zbGljZSgwLCBmcm9tKSArIG5ld0RhdGEuc3BsaXQoZGF0ZVNlZ21lbnRzU2VwYXJhdG9yKS5tYXAoZnVuY3Rpb24gKHNlZ21lbnQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICcwJy5yZXBlYXQoc2VnbWVudC5sZW5ndGgpO1xuICAgICAgICAgICAgfSkuam9pbihkYXRlU2VnbWVudHNTZXBhcmF0b3IpICsgdmFsaWRhdGVkVmFsdWUuc2xpY2UodG8pXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYXRhOiBuZXdEYXRhXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hc2tpdG9EYXRlVGltZU9wdGlvbnNHZW5lcmF0b3IoX2EpIHtcbiAgICAgIHZhciBkYXRlTW9kZSA9IF9hLmRhdGVNb2RlLFxuICAgICAgICAgIHRpbWVNb2RlID0gX2EudGltZU1vZGUsXG4gICAgICAgICAgX2IgPSBfYS5kYXRlU2VwYXJhdG9yLFxuICAgICAgICAgIGRhdGVTZXBhcmF0b3IgPSBfYiA9PT0gdm9pZCAwID8gJy4nIDogX2IsXG4gICAgICAgICAgbWluID0gX2EubWluLFxuICAgICAgICAgIG1heCA9IF9hLm1heDtcbiAgICAgIHZhciBkYXRlTW9kZVRlbXBsYXRlID0gZGF0ZU1vZGUuc3BsaXQoJy8nKS5qb2luKGRhdGVTZXBhcmF0b3IpO1xuICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb3JlLk1BU0tJVE9fREVGQVVMVF9PUFRJT05TKSwge1xuICAgICAgICBtYXNrOiBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgX19yZWFkKEFycmF5LmZyb20oZGF0ZU1vZGVUZW1wbGF0ZSkubWFwKGZ1bmN0aW9uIChjaGFyKSB7XG4gICAgICAgICAgcmV0dXJuIGNoYXIgPT09IGRhdGVTZXBhcmF0b3IgPyBjaGFyIDogL1xcZC87XG4gICAgICAgIH0pKSksIF9fcmVhZChEQVRFX1RJTUVfU0VQQVJBVE9SLnNwbGl0KCcnKSkpLCBfX3JlYWQoQXJyYXkuZnJvbSh0aW1lTW9kZSkubWFwKGZ1bmN0aW9uIChjaGFyKSB7XG4gICAgICAgICAgcmV0dXJuIFRJTUVfRklYRURfQ0hBUkFDVEVSUy5pbmNsdWRlcyhjaGFyKSA/IGNoYXIgOiAvXFxkLztcbiAgICAgICAgfSkpKSxcbiAgICAgICAgb3ZlcndyaXRlTW9kZTogJ3JlcGxhY2UnLFxuICAgICAgICBwcmVwcm9jZXNzb3JzOiBbY3JlYXRlWmVyb1BsYWNlaG9sZGVyc1ByZXByb2Nlc3NvcigpLCBub3JtYWxpemVEYXRlUHJlcHJvY2Vzc29yKHtcbiAgICAgICAgICBkYXRlTW9kZVRlbXBsYXRlOiBkYXRlTW9kZVRlbXBsYXRlLFxuICAgICAgICAgIGRhdGVTZWdtZW50c1NlcGFyYXRvcjogZGF0ZVNlcGFyYXRvclxuICAgICAgICB9KSwgY3JlYXRlVmFsaWREYXRlVGltZVByZXByb2Nlc3Nvcih7XG4gICAgICAgICAgZGF0ZU1vZGVUZW1wbGF0ZTogZGF0ZU1vZGVUZW1wbGF0ZSxcbiAgICAgICAgICBkYXRlU2VnbWVudHNTZXBhcmF0b3I6IGRhdGVTZXBhcmF0b3JcbiAgICAgICAgfSldLFxuICAgICAgICBwb3N0cHJvY2Vzc29yczogW2NyZWF0ZU1pbk1heERhdGVUaW1lUG9zdHByb2Nlc3Nvcih7XG4gICAgICAgICAgbWluOiBtaW4sXG4gICAgICAgICAgbWF4OiBtYXgsXG4gICAgICAgICAgZGF0ZU1vZGVUZW1wbGF0ZTogZGF0ZU1vZGVUZW1wbGF0ZSxcbiAgICAgICAgICB0aW1lTW9kZTogdGltZU1vZGVcbiAgICAgICAgfSldXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZU1hc2tFeHByZXNzaW9uKF9hKSB7XG4gICAgICB2YXIgZGVjaW1hbFNlcGFyYXRvciA9IF9hLmRlY2ltYWxTZXBhcmF0b3IsXG4gICAgICAgICAgaXNOZWdhdGl2ZUFsbG93ZWQgPSBfYS5pc05lZ2F0aXZlQWxsb3dlZCxcbiAgICAgICAgICBwcmVjaXNpb24gPSBfYS5wcmVjaXNpb24sXG4gICAgICAgICAgdGhvdXNhbmRTZXBhcmF0b3IgPSBfYS50aG91c2FuZFNlcGFyYXRvcixcbiAgICAgICAgICBwcmVmaXggPSBfYS5wcmVmaXgsXG4gICAgICAgICAgcG9zdGZpeCA9IF9hLnBvc3RmaXgsXG4gICAgICAgICAgX2IgPSBfYS5kZWNpbWFsUHNldWRvU2VwYXJhdG9ycyxcbiAgICAgICAgICBkZWNpbWFsUHNldWRvU2VwYXJhdG9ycyA9IF9iID09PSB2b2lkIDAgPyBbXSA6IF9iLFxuICAgICAgICAgIF9jID0gX2EucHNldWRvTWludXNlcyxcbiAgICAgICAgICBwc2V1ZG9NaW51c2VzID0gX2MgPT09IHZvaWQgMCA/IFtdIDogX2M7XG4gICAgICB2YXIgY29tcHV0ZWRQcmVmaXggPSBjb21wdXRlQWxsT3B0aW9uYWxDaGFyc1JlZ0V4cChwcmVmaXgpO1xuICAgICAgdmFyIGRpZ2l0ID0gJ1xcXFxkJztcbiAgICAgIHZhciBvcHRpb25hbE1pbnVzID0gaXNOZWdhdGl2ZUFsbG93ZWQgPyBcIltcIiArIENIQVJfTUlOVVMgKyBwc2V1ZG9NaW51c2VzLm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICByZXR1cm4gXCJcXFxcXCIgKyB4O1xuICAgICAgfSkuam9pbignJykgKyBcIl0/XCIgOiAnJztcbiAgICAgIHZhciBpbnRlZ2VyUGFydCA9IHRob3VzYW5kU2VwYXJhdG9yID8gXCJbXCIgKyBkaWdpdCArIGVzY2FwZVJlZ0V4cCh0aG91c2FuZFNlcGFyYXRvcikucmVwbGFjZSgvXFxzL2csICdcXFxccycpICsgXCJdKlwiIDogXCJbXCIgKyBkaWdpdCArIFwiXSpcIjtcbiAgICAgIHZhciBkZWNpbWFsUGFydCA9IHByZWNpc2lvbiA+IDAgPyBcIihbXCIgKyBlc2NhcGVSZWdFeHAoZGVjaW1hbFNlcGFyYXRvcikgKyBkZWNpbWFsUHNldWRvU2VwYXJhdG9ycy5tYXAoZXNjYXBlUmVnRXhwKS5qb2luKCcnKSArIFwiXVwiICsgZGlnaXQgKyBcInswLFwiICsgKE51bWJlci5pc0Zpbml0ZShwcmVjaXNpb24pID8gcHJlY2lzaW9uIDogJycpICsgXCJ9KT9cIiA6ICcnO1xuICAgICAgdmFyIGNvbXB1dGVkUG9zdGZpeCA9IGNvbXB1dGVBbGxPcHRpb25hbENoYXJzUmVnRXhwKHBvc3RmaXgpO1xuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoXCJeXCIgKyBjb21wdXRlZFByZWZpeCArIG9wdGlvbmFsTWludXMgKyBpbnRlZ2VyUGFydCArIGRlY2ltYWxQYXJ0ICsgY29tcHV0ZWRQb3N0Zml4ICsgXCIkXCIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbXB1dGVBbGxPcHRpb25hbENoYXJzUmVnRXhwKHN0cikge1xuICAgICAgcmV0dXJuIHN0ciA/IFwiXCIgKyBzdHIuc3BsaXQoJycpLm1hcChmdW5jdGlvbiAoY2hhcikge1xuICAgICAgICByZXR1cm4gZXNjYXBlUmVnRXhwKGNoYXIpICsgXCI/XCI7XG4gICAgICB9KS5qb2luKCcnKSA6ICcnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hc2tpdG9QYXJzZU51bWJlcihtYXNrZWROdW1iZXIsIGRlY2ltYWxTZXBhcmF0b3IpIHtcbiAgICAgIGlmIChkZWNpbWFsU2VwYXJhdG9yID09PSB2b2lkIDApIHtcbiAgICAgICAgZGVjaW1hbFNlcGFyYXRvciA9ICcuJztcbiAgICAgIH1cblxuICAgICAgdmFyIGhhc05lZ2F0aXZlU2lnbiA9ICEhbWFza2VkTnVtYmVyLm1hdGNoKG5ldyBSZWdFeHAoXCJeXFxcXEQqW1wiICsgQ0hBUl9NSU5VUyArIFwiXFxcXFwiICsgQ0hBUl9IWVBIRU4gKyBDSEFSX0VOX0RBU0ggKyBDSEFSX0VNX0RBU0ggKyBcIl1cIikpO1xuICAgICAgdmFyIHVubWFza2VkTnVtYmVyID0gbWFza2VkTnVtYmVyLnJlcGxhY2UobmV3IFJlZ0V4cChcIlteXFxcXGRcIiArIGVzY2FwZVJlZ0V4cChkZWNpbWFsU2VwYXJhdG9yKSArIFwiXVwiLCAnZycpLCAnJykucmVwbGFjZShkZWNpbWFsU2VwYXJhdG9yLCAnLicpO1xuICAgICAgcmV0dXJuIHVubWFza2VkTnVtYmVyID8gTnVtYmVyKChoYXNOZWdhdGl2ZVNpZ24gPyBDSEFSX0hZUEhFTiA6ICcnKSArIHVubWFza2VkTnVtYmVyKSA6IE5hTjtcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqIENvbnZlcnQgbnVtYmVyIHRvIHN0cmluZyB3aXRoIHJlcGxhY2luZyBleHBvbmVudCBwYXJ0IG9uIGRlY2ltYWxzXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHZhbHVlIHRoZSBudW1iZXJcclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgbnVtYmVyXHJcbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIHN0cmluZ2lmeU51bWJlcldpdGhvdXRFeHAodmFsdWUpIHtcbiAgICAgIHZhciB2YWx1ZUFzU3RyaW5nID0gU3RyaW5nKHZhbHVlKTtcblxuICAgICAgdmFyIF9hID0gX19yZWFkKHZhbHVlQXNTdHJpbmcuc3BsaXQoJ2UtJyksIDIpLFxuICAgICAgICAgIG51bWJlclBhcnQgPSBfYVswXSxcbiAgICAgICAgICBleHBQYXJ0ID0gX2FbMV07XG5cbiAgICAgIHZhciB2YWx1ZVdpdGhvdXRFeHAgPSB2YWx1ZUFzU3RyaW5nO1xuXG4gICAgICBpZiAoZXhwUGFydCkge1xuICAgICAgICB2YXIgX2IgPSBfX3JlYWQobnVtYmVyUGFydC5zcGxpdCgnLicpLCAyKSxcbiAgICAgICAgICAgIGZyYWN0aW9uYWxQYXJ0ID0gX2JbMV07XG5cbiAgICAgICAgdmFyIGRlY2ltYWxEaWdpdHMgPSBOdW1iZXIoZXhwUGFydCkgKyAoKGZyYWN0aW9uYWxQYXJ0ID09PSBudWxsIHx8IGZyYWN0aW9uYWxQYXJ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmcmFjdGlvbmFsUGFydC5sZW5ndGgpIHx8IDApO1xuICAgICAgICB2YWx1ZVdpdGhvdXRFeHAgPSB2YWx1ZS50b0ZpeGVkKGRlY2ltYWxEaWdpdHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWVXaXRob3V0RXhwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlRGVjaW1hbFBzZXVkb1NlcGFyYXRvcnMoX2EpIHtcbiAgICAgIHZhciBkZWNpbWFsU2VwYXJhdG9yID0gX2EuZGVjaW1hbFNlcGFyYXRvcixcbiAgICAgICAgICB0aG91c2FuZFNlcGFyYXRvciA9IF9hLnRob3VzYW5kU2VwYXJhdG9yLFxuICAgICAgICAgIF9iID0gX2EuZGVjaW1hbFBzZXVkb1NlcGFyYXRvcnMsXG4gICAgICAgICAgZGVjaW1hbFBzZXVkb1NlcGFyYXRvcnMgPSBfYiA9PT0gdm9pZCAwID8gREVGQVVMVF9ERUNJTUFMX1BTRVVET19TRVBBUkFUT1JTIDogX2I7XG4gICAgICByZXR1cm4gZGVjaW1hbFBzZXVkb1NlcGFyYXRvcnMuZmlsdGVyKGZ1bmN0aW9uIChjaGFyKSB7XG4gICAgICAgIHJldHVybiBjaGFyICE9PSB0aG91c2FuZFNlcGFyYXRvciAmJiBjaGFyICE9PSBkZWNpbWFsU2VwYXJhdG9yO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBJZiBgZGVjaW1hbFplcm9QYWRkaW5nYCBpcyBgdHJ1ZWAsIGl0IHBhZHMgZGVjaW1hbCBwYXJ0IHdpdGggemVyb2VzXHJcbiAgICAgKiAodW50aWwgbnVtYmVyIG9mIGRpZ2l0cyBhZnRlciBkZWNpbWFsU2VwYXJhdG9yIGlzIGVxdWFsIHRvIHRoZSBgcHJlY2lzaW9uYCkuXHJcbiAgICAgKiBAZXhhbXBsZSAxLDQyID0+IChgcHJlY2lzaW9uYCBpcyBlcXVhbCB0byA0KSA9PiAxLDQyMDAuXHJcbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZURlY2ltYWxaZXJvUGFkZGluZ1Bvc3Rwcm9jZXNzb3IoX2EpIHtcbiAgICAgIHZhciBkZWNpbWFsU2VwYXJhdG9yID0gX2EuZGVjaW1hbFNlcGFyYXRvcixcbiAgICAgICAgICBwcmVjaXNpb24gPSBfYS5wcmVjaXNpb24sXG4gICAgICAgICAgZGVjaW1hbFplcm9QYWRkaW5nID0gX2EuZGVjaW1hbFplcm9QYWRkaW5nLFxuICAgICAgICAgIHBvc3RmaXggPSBfYS5wb3N0Zml4O1xuXG4gICAgICBpZiAocHJlY2lzaW9uIDw9IDAgfHwgIWRlY2ltYWxaZXJvUGFkZGluZykge1xuICAgICAgICByZXR1cm4gaWRlbnRpdHk7XG4gICAgICB9XG5cbiAgICAgIHZhciB0cmFpbGluZ1Bvc3RmaXhSZWdFeHAgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4cChwb3N0Zml4KSArIFwiJFwiKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gX2EudmFsdWUsXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBfYS5zZWxlY3Rpb247XG5cbiAgICAgICAgaWYgKE51bWJlci5pc05hTihtYXNraXRvUGFyc2VOdW1iZXIodmFsdWUsIGRlY2ltYWxTZXBhcmF0b3IpKSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBzZWxlY3Rpb246IHNlbGVjdGlvblxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgX2IgPSBfX3JlYWQodmFsdWUucmVwbGFjZSh0cmFpbGluZ1Bvc3RmaXhSZWdFeHAsICcnKS5zcGxpdChkZWNpbWFsU2VwYXJhdG9yKSwgMiksXG4gICAgICAgICAgICBpbnRlZ2VyUGFydCA9IF9iWzBdLFxuICAgICAgICAgICAgX2MgPSBfYlsxXSxcbiAgICAgICAgICAgIGRlY2ltYWxQYXJ0ID0gX2MgPT09IHZvaWQgMCA/ICcnIDogX2M7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZTogaW50ZWdlclBhcnQgKyBkZWNpbWFsU2VwYXJhdG9yICsgZGVjaW1hbFBhcnQucGFkRW5kKHByZWNpc2lvbiwgJzAnKSArIHBvc3RmaXgsXG4gICAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb25cbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIHByZXByb2Nlc3NvciB3b3JrcyBvbmx5IG9uY2UgYXQgaW5pdGlhbGl6YXRpb24gcGhhc2UgKHdoZW4gYG5ldyBNYXNraXRvKC4uLilgIGlzIGV4ZWN1dGVkKS5cclxuICAgICAqIFRoaXMgcHJlcHJvY2Vzc29yIGhlbHBzIHRvIGF2b2lkIGNvbmZsaWN0cyBkdXJpbmcgdHJhbnNpdGlvbiBmcm9tIG9uZSBtYXNrIHRvIGFub3RoZXIgKGZvciB0aGUgc2FtZSBpbnB1dCkuXHJcbiAgICAgKiBGb3IgZXhhbXBsZSwgdGhlIGRldmVsb3BlciBjaGFuZ2VzIHBvc3RmaXggKG9yIG90aGVyIG1hc2sncyBwcm9wcykgZHVyaW5nIHJ1bi10aW1lLlxyXG4gICAgICogYGBgXHJcbiAgICAgKiBsZXQgbWFza2l0b09wdGlvbnMgPSBtYXNraXRvTnVtYmVyT3B0aW9uc0dlbmVyYXRvcih7cG9zdGZpeDogJyB5ZWFyJ30pO1xyXG4gICAgICogLy8gWzMgc2Vjb25kcyBsYXRlcl1cclxuICAgICAqIG1hc2tpdG9PcHRpb25zID0gbWFza2l0b051bWJlck9wdGlvbnNHZW5lcmF0b3Ioe3Bvc3RmaXg6ICcgeWVhcnMnfSk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqL1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlSW5pdGlhbGl6YXRpb25Pbmx5UHJlcHJvY2Vzc29yKF9hKSB7XG4gICAgICB2YXIgZGVjaW1hbFNlcGFyYXRvciA9IF9hLmRlY2ltYWxTZXBhcmF0b3IsXG4gICAgICAgICAgZGVjaW1hbFBzZXVkb1NlcGFyYXRvcnMgPSBfYS5kZWNpbWFsUHNldWRvU2VwYXJhdG9ycyxcbiAgICAgICAgICBwc2V1ZG9NaW51c2VzID0gX2EucHNldWRvTWludXNlcztcbiAgICAgIHZhciBpc0luaXRpYWxpemF0aW9uUGhhc2UgPSB0cnVlO1xuICAgICAgdmFyIGNsZWFuTnVtYmVyTWFzayA9IGdlbmVyYXRlTWFza0V4cHJlc3Npb24oe1xuICAgICAgICBkZWNpbWFsU2VwYXJhdG9yOiBkZWNpbWFsU2VwYXJhdG9yLFxuICAgICAgICBkZWNpbWFsUHNldWRvU2VwYXJhdG9yczogZGVjaW1hbFBzZXVkb1NlcGFyYXRvcnMsXG4gICAgICAgIHBzZXVkb01pbnVzZXM6IHBzZXVkb01pbnVzZXMsXG4gICAgICAgIHByZWZpeDogJycsXG4gICAgICAgIHBvc3RmaXg6ICcnLFxuICAgICAgICB0aG91c2FuZFNlcGFyYXRvcjogJycsXG4gICAgICAgIHByZWNpc2lvbjogSW5maW5pdHksXG4gICAgICAgIGlzTmVnYXRpdmVBbGxvd2VkOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRTdGF0ZSA9IF9hLmVsZW1lbnRTdGF0ZSxcbiAgICAgICAgICAgIGRhdGEgPSBfYS5kYXRhO1xuXG4gICAgICAgIGlmICghaXNJbml0aWFsaXphdGlvblBoYXNlKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVsZW1lbnRTdGF0ZTogZWxlbWVudFN0YXRlLFxuICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpc0luaXRpYWxpemF0aW9uUGhhc2UgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlbGVtZW50U3RhdGU6IGNvcmUubWFza2l0b1RyYW5zZm9ybShlbGVtZW50U3RhdGUsIHtcbiAgICAgICAgICAgIG1hc2s6IGNsZWFuTnVtYmVyTWFza1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBJdCByZW1vdmVzIHJlcGVhdGVkIGxlYWRpbmcgemVyb2VzIGZvciBpbnRlZ2VyIHBhcnQuXHJcbiAgICAgKiBAZXhhbXBsZSAwLHwwMDAwNSA9PiBCYWNrc3BhY2UgPT4gfDVcclxuICAgICAqIEBleGFtcGxlIC0wLHwwMDAwNSA9PiBCYWNrc3BhY2UgPT4gLXw1XHJcbiAgICAgKiBAZXhhbXBsZSBVc2VyIHR5cGVzIFwiMDAwMDAwXCIgPT4gMHxcclxuICAgICAqIEBleGFtcGxlIDB8ID0+IFVzZXIgdHlwZXMgXCI1XCIgPT4gNXxcclxuICAgICAqL1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlTGVhZGluZ1plcm9lc1ZhbGlkYXRpb25Qb3N0cHJvY2Vzc29yKGRlY2ltYWxTZXBhcmF0b3IsIHRob3VzYW5kU2VwYXJhdG9yKSB7XG4gICAgICB2YXIgdHJpbUxlYWRpbmdaZXJvZXMgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGVzY2FwZWRUaG91c2FuZFNlcGFyYXRvciA9IGVzY2FwZVJlZ0V4cCh0aG91c2FuZFNlcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKCAvLyBhbGwgbGVhZGluZyB6ZXJvZXMgZm9sbG93ZWQgYnkgYW5vdGhlciB6ZXJvXG4gICAgICAgIG5ldyBSZWdFeHAoXCJeKFxcXFxEKyk/WzBcIiArIGVzY2FwZWRUaG91c2FuZFNlcGFyYXRvciArIFwiXSsoPz0wKVwiKSwgJyQxJykucmVwbGFjZSggLy8gemVybyBmb2xsb3dlZCBieSBub3QtemVybyBkaWdpdFxuICAgICAgICBuZXcgUmVnRXhwKFwiXihcXFxcRCspP1swXCIgKyBlc2NhcGVkVGhvdXNhbmRTZXBhcmF0b3IgKyBcIl0rKD89WzEtOV0pXCIpLCAnJDEnKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBjb3VudFRyaW1tZWRaZXJvZXNCZWZvcmUgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHZhciB2YWx1ZUJlZm9yZSA9IHZhbHVlLnNsaWNlKDAsIGluZGV4KTtcbiAgICAgICAgdmFyIGZvbGxvd2VkQnlaZXJvID0gdmFsdWUuc2xpY2UoaW5kZXgpLnN0YXJ0c1dpdGgoJzAnKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlQmVmb3JlLmxlbmd0aCAtIHRyaW1MZWFkaW5nWmVyb2VzKHZhbHVlQmVmb3JlKS5sZW5ndGggKyAoZm9sbG93ZWRCeVplcm8gPyAxIDogMCk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IF9hLnZhbHVlLFxuICAgICAgICAgICAgc2VsZWN0aW9uID0gX2Euc2VsZWN0aW9uO1xuXG4gICAgICAgIHZhciBfYiA9IF9fcmVhZChzZWxlY3Rpb24sIDIpLFxuICAgICAgICAgICAgZnJvbSA9IF9iWzBdLFxuICAgICAgICAgICAgdG8gPSBfYlsxXTtcblxuICAgICAgICB2YXIgaGFzRGVjaW1hbFNlcGFyYXRvciA9IHZhbHVlLmluY2x1ZGVzKGRlY2ltYWxTZXBhcmF0b3IpO1xuXG4gICAgICAgIHZhciBfYyA9IF9fcmVhZCh2YWx1ZS5zcGxpdChkZWNpbWFsU2VwYXJhdG9yKSwgMiksXG4gICAgICAgICAgICBpbnRlZ2VyUGFydCA9IF9jWzBdLFxuICAgICAgICAgICAgX2QgPSBfY1sxXSxcbiAgICAgICAgICAgIGRlY2ltYWxQYXJ0ID0gX2QgPT09IHZvaWQgMCA/ICcnIDogX2Q7XG5cbiAgICAgICAgdmFyIHplcm9UcmltbWVkSW50ZWdlclBhcnQgPSB0cmltTGVhZGluZ1plcm9lcyhpbnRlZ2VyUGFydCk7XG5cbiAgICAgICAgaWYgKGludGVnZXJQYXJ0ID09PSB6ZXJvVHJpbW1lZEludGVnZXJQYXJ0KSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbjogc2VsZWN0aW9uXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBuZXdGcm9tID0gZnJvbSAtIGNvdW50VHJpbW1lZFplcm9lc0JlZm9yZSh2YWx1ZSwgZnJvbSk7XG4gICAgICAgIHZhciBuZXdUbyA9IHRvIC0gY291bnRUcmltbWVkWmVyb2VzQmVmb3JlKHZhbHVlLCB0byk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsdWU6IHplcm9UcmltbWVkSW50ZWdlclBhcnQgKyAoaGFzRGVjaW1hbFNlcGFyYXRvciA/IGRlY2ltYWxTZXBhcmF0b3IgOiAnJykgKyBkZWNpbWFsUGFydCxcbiAgICAgICAgICBzZWxlY3Rpb246IFtNYXRoLm1heChuZXdGcm9tLCAwKSwgTWF0aC5tYXgobmV3VG8sIDApXVxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqIFRoaXMgcG9zdHByb2Nlc3NvciBpcyBjb25uZWN0ZWQgd2l0aCB7QGxpbmsgY3JlYXRlTWluTWF4UGx1Z2lufTpcclxuICAgICAqIGJvdGggdmFsaWRhdGUgYG1pbmAvYG1heGAgYm91bmRzIG9mIGVudGVyZWQgdmFsdWUgKGJ1dCBhdCB0aGUgZGlmZmVyZW50IHBvaW50IG9mIHRpbWUpLlxyXG4gICAgICovXG5cbiAgICBmdW5jdGlvbiBjcmVhdGVNaW5NYXhQb3N0cHJvY2Vzc29yKF9hKSB7XG4gICAgICB2YXIgbWluID0gX2EubWluLFxuICAgICAgICAgIG1heCA9IF9hLm1heCxcbiAgICAgICAgICBkZWNpbWFsU2VwYXJhdG9yID0gX2EuZGVjaW1hbFNlcGFyYXRvcjtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gX2EudmFsdWUsXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBfYS5zZWxlY3Rpb247XG4gICAgICAgIHZhciBwYXJzZWROdW1iZXIgPSBtYXNraXRvUGFyc2VOdW1iZXIodmFsdWUsIGRlY2ltYWxTZXBhcmF0b3IpO1xuICAgICAgICB2YXIgbGltaXRlZFZhbHVlID1cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV2UgY2Fubm90IGxpbWl0IGxvd2VyIGJvdW5kIGlmIHVzZXIgZW50ZXJzIHBvc2l0aXZlIG51bWJlci5cclxuICAgICAgICAgKiBUaGUgc2FtZSBmb3IgdXBwZXIgYm91bmQgYW5kIG5lZ2F0aXZlIG51bWJlci5cclxuICAgICAgICAgKiBfX19cclxuICAgICAgICAgKiBAZXhhbXBsZSAobWluID0gNSlcclxuICAgICAgICAgKiBFbXB0eSBpbnB1dCA9PiBXaXRob3V0IHRoaXMgY29uZGl0aW9uIHVzZXIgY2Fubm90IHR5cGUgNDIgKHRoZSBmaXJzdCBkaWdpdCB3aWxsIGJlIHJlamVjdGVkKVxyXG4gICAgICAgICAqIF9fX1xyXG4gICAgICAgICAqIEBleGFtcGxlIChtYXggPSAtMTApXHJcbiAgICAgICAgICogVmFsdWUgaXMgLTEwID0+IFdpdGhvdXQgdGhpcyBjb25kaXRpb24gdXNlciBjYW5ub3QgZGVsZXRlIDAgdG8gZW50ZXIgYW5vdGhlciBkaWdpdFxyXG4gICAgICAgICAqL1xuICAgICAgICBwYXJzZWROdW1iZXIgPiAwID8gTWF0aC5taW4ocGFyc2VkTnVtYmVyLCBtYXgpIDogTWF0aC5tYXgocGFyc2VkTnVtYmVyLCBtaW4pO1xuXG4gICAgICAgIGlmICghTnVtYmVyLmlzTmFOKHBhcnNlZE51bWJlcikgJiYgbGltaXRlZFZhbHVlICE9PSBwYXJzZWROdW1iZXIpIHtcbiAgICAgICAgICB2YXIgbmV3VmFsdWUgPSAoXCJcIiArIGxpbWl0ZWRWYWx1ZSkucmVwbGFjZSgnLicsIGRlY2ltYWxTZXBhcmF0b3IpLnJlcGxhY2UoQ0hBUl9IWVBIRU4sIENIQVJfTUlOVVMpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogbmV3VmFsdWUsXG4gICAgICAgICAgICBzZWxlY3Rpb246IFtuZXdWYWx1ZS5sZW5ndGgsIG5ld1ZhbHVlLmxlbmd0aF1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb25cbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBNYW5hZ2UgY2FyZXQtbmF2aWdhdGlvbiB3aGVuIHVzZXIgXCJkZWxldGVzXCIgbm9uLXJlbW92YWJsZSBkaWdpdHMgb3Igc2VwYXJhdG9yc1xyXG4gICAgICogQGV4YW1wbGUgMSx8NDIgPT4gQmFja3NwYWNlID0+IDF8LDQyIChvbmx5IGlmIGBkZWNpbWFsWmVyb1BhZGRpbmdgIGlzIGB0cnVlYClcclxuICAgICAqIEBleGFtcGxlIDF8LDQyID0+IERlbGV0ZSA9PiAxLHw0MiAob25seSBpZiBgZGVjaW1hbFplcm9QYWRkaW5nYCBpcyBgdHJ1ZWApXHJcbiAgICAgKiBAZXhhbXBsZSAwLHwwMCA9PiBEZWxldGUgPT4gMCwwfDAgKG9ubHkgaWYgYGRlY2ltYWxaZXJvUGFkZGluZ2AgaXMgYHRydWVgKVxyXG4gICAgICogQGV4YW1wbGUgMSB8MDAwID0+IEJhY2tzcGFjZSA9PiAxfCAwMDAgKGFsd2F5cylcclxuICAgICAqL1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlTm9uUmVtb3ZhYmxlQ2hhcnNEZWxldGlvblByZXByb2Nlc3NvcihfYSkge1xuICAgICAgdmFyIGRlY2ltYWxTZXBhcmF0b3IgPSBfYS5kZWNpbWFsU2VwYXJhdG9yLFxuICAgICAgICAgIHRob3VzYW5kU2VwYXJhdG9yID0gX2EudGhvdXNhbmRTZXBhcmF0b3IsXG4gICAgICAgICAgZGVjaW1hbFplcm9QYWRkaW5nID0gX2EuZGVjaW1hbFplcm9QYWRkaW5nO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfYSwgYWN0aW9uVHlwZSkge1xuICAgICAgICB2YXIgZWxlbWVudFN0YXRlID0gX2EuZWxlbWVudFN0YXRlLFxuICAgICAgICAgICAgZGF0YSA9IF9hLmRhdGE7XG4gICAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnRTdGF0ZS52YWx1ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IGVsZW1lbnRTdGF0ZS5zZWxlY3Rpb247XG5cbiAgICAgICAgdmFyIF9iID0gX19yZWFkKHNlbGVjdGlvbiwgMiksXG4gICAgICAgICAgICBmcm9tID0gX2JbMF0sXG4gICAgICAgICAgICB0byA9IF9iWzFdO1xuXG4gICAgICAgIHZhciBzZWxlY3RlZENoYXJhY3RlcnMgPSB2YWx1ZS5zbGljZShmcm9tLCB0byk7XG4gICAgICAgIHZhciBub25SZW1vdmFibGVTZXBhcmF0b3JzID0gZGVjaW1hbFplcm9QYWRkaW5nID8gW2RlY2ltYWxTZXBhcmF0b3IsIHRob3VzYW5kU2VwYXJhdG9yXSA6IFt0aG91c2FuZFNlcGFyYXRvcl07XG4gICAgICAgIHZhciBhcmVOb25SZW1vdmFibGVaZXJvZXNTZWxlY3RlZCA9IGRlY2ltYWxaZXJvUGFkZGluZyAmJiBmcm9tID4gdmFsdWUuaW5kZXhPZihkZWNpbWFsU2VwYXJhdG9yKSAmJiBCb29sZWFuKHNlbGVjdGVkQ2hhcmFjdGVycy5tYXRjaCgvXjArJC9naSkpO1xuXG4gICAgICAgIGlmIChhY3Rpb25UeXBlICE9PSAnZGVsZXRlQmFja3dhcmQnICYmIGFjdGlvblR5cGUgIT09ICdkZWxldGVGb3J3YXJkJyB8fCAhbm9uUmVtb3ZhYmxlU2VwYXJhdG9ycy5pbmNsdWRlcyhzZWxlY3RlZENoYXJhY3RlcnMpICYmICFhcmVOb25SZW1vdmFibGVaZXJvZXNTZWxlY3RlZCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbGVtZW50U3RhdGU6IGVsZW1lbnRTdGF0ZSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlbGVtZW50U3RhdGU6IHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbjogYWN0aW9uVHlwZSA9PT0gJ2RlbGV0ZUZvcndhcmQnID8gW3RvLCB0b10gOiBbZnJvbSwgZnJvbV1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBJdCBwYWRzIGludGVnZXIgcGFydCB3aXRoIHplcm8gaWYgdXNlciB0eXBlcyBkZWNpbWFsIHNlcGFyYXRvciAoZm9yIGVtcHR5IGlucHV0KS5cclxuICAgICAqIEBleGFtcGxlIEVtcHR5IGlucHV0ID0+IFVzZXIgdHlwZXMgXCIsXCIgKGRlY2ltYWwgc2VwYXJhdG9yKSA9PiAwLHxcclxuICAgICAqL1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlTm90RW1wdHlJbnRlZ2VyUGFydFByZXByb2Nlc3NvcihfYSkge1xuICAgICAgdmFyIGRlY2ltYWxTZXBhcmF0b3IgPSBfYS5kZWNpbWFsU2VwYXJhdG9yLFxuICAgICAgICAgIHByZWNpc2lvbiA9IF9hLnByZWNpc2lvbjtcbiAgICAgIHZhciBzdGFydFdpdGhEZWNpbWFsU2VwUmVnRXhwID0gbmV3IFJlZ0V4cChcIl5cXFxcRCpcIiArIGVzY2FwZVJlZ0V4cChkZWNpbWFsU2VwYXJhdG9yKSk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBlbGVtZW50U3RhdGUgPSBfYS5lbGVtZW50U3RhdGUsXG4gICAgICAgICAgICBkYXRhID0gX2EuZGF0YTtcbiAgICAgICAgdmFyIHZhbHVlID0gZWxlbWVudFN0YXRlLnZhbHVlLFxuICAgICAgICAgICAgc2VsZWN0aW9uID0gZWxlbWVudFN0YXRlLnNlbGVjdGlvbjtcblxuICAgICAgICB2YXIgX2IgPSBfX3JlYWQoc2VsZWN0aW9uLCAxKSxcbiAgICAgICAgICAgIGZyb20gPSBfYlswXTtcblxuICAgICAgICBpZiAocHJlY2lzaW9uIDw9IDAgfHwgdmFsdWUuaW5jbHVkZXMoZGVjaW1hbFNlcGFyYXRvcikgfHwgIWRhdGEubWF0Y2goc3RhcnRXaXRoRGVjaW1hbFNlcFJlZ0V4cCkpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZWxlbWVudFN0YXRlOiBlbGVtZW50U3RhdGUsXG4gICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkaWdpdHNCZWZvcmVDdXJzb3IgPSB2YWx1ZS5zbGljZSgwLCBmcm9tKS5tYXRjaCgvXFxkKy8pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVsZW1lbnRTdGF0ZTogZWxlbWVudFN0YXRlLFxuICAgICAgICAgIGRhdGE6IGRpZ2l0c0JlZm9yZUN1cnNvciA/IGRhdGEgOiBcIjBcIiArIGRhdGFcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBJdCByZXBsYWNlcyBwc2V1ZG8gY2hhcmFjdGVycyB3aXRoIHZhbGlkIG9uZS5cclxuICAgICAqIEBleGFtcGxlIFVzZXIgdHlwZXMgJy4nIChidXQgc2VwYXJhdG9yIGlzIGVxdWFsIHRvIGNvbW1hKSA9PiBkb3QgaXMgcmVwbGFjZWQgd2l0aCBjb21tYS5cclxuICAgICAqIEBleGFtcGxlIFVzZXIgdHlwZXMgaHlwaGVuIC8gZW4tZGFzaCAvIGVtLWRhc2ggPT4gaXQgaXMgcmVwbGFjZWQgd2l0aCBtaW51cy5cclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVBzZXVkb0NoYXJhY3RlcnNQcmVwcm9jZXNzb3IodmFsaWRDaGFyYWN0ZXIsIHBzZXVkb0NoYXJhY3RlcnMpIHtcbiAgICAgIHZhciBwc2V1ZG9DaGFyYWN0ZXJzUmVnRXhwID0gbmV3IFJlZ0V4cChcIltcIiArIHBzZXVkb0NoYXJhY3RlcnMuam9pbignJykgKyBcIl1cIiwgJ2dpJyk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBlbGVtZW50U3RhdGUgPSBfYS5lbGVtZW50U3RhdGUsXG4gICAgICAgICAgICBkYXRhID0gX2EuZGF0YTtcbiAgICAgICAgdmFyIHZhbHVlID0gZWxlbWVudFN0YXRlLnZhbHVlLFxuICAgICAgICAgICAgc2VsZWN0aW9uID0gZWxlbWVudFN0YXRlLnNlbGVjdGlvbjtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlbGVtZW50U3RhdGU6IHtcbiAgICAgICAgICAgIHNlbGVjdGlvbjogc2VsZWN0aW9uLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLnJlcGxhY2UocHNldWRvQ2hhcmFjdGVyc1JlZ0V4cCwgdmFsaWRDaGFyYWN0ZXIpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYXRhOiBkYXRhLnJlcGxhY2UocHNldWRvQ2hhcmFjdGVyc1JlZ0V4cCwgdmFsaWRDaGFyYWN0ZXIpXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogSXQgcmVqZWN0cyBuZXcgdHlwZWQgZGVjaW1hbCBzZXBhcmF0b3IgaWYgaXQgYWxyZWFkeSBleGlzdHMgaW4gdGV4dCBmaWVsZC5cclxuICAgICAqIEJlaGF2aW91ciBpcyBzaW1pbGFyIHRvIG5hdGl2ZSA8aW5wdXQgdHlwZT1cIm51bWJlclwiPiAoQ2hyb21lKS5cclxuICAgICAqIEBleGFtcGxlIDF8MjMsNDUgPT4gUHJlc3MgY29tbWEgKGRlY2ltYWwgc2VwYXJhdG9yKSA9PiAxfDIzLDQ1IChkbyBub3RoaW5nKS5cclxuICAgICAqL1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlUmVwZWF0ZWREZWNpbWFsU2VwYXJhdG9yUHJlcHJvY2Vzc29yKGRlY2ltYWxTZXBhcmF0b3IpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRTdGF0ZSA9IF9hLmVsZW1lbnRTdGF0ZSxcbiAgICAgICAgICAgIGRhdGEgPSBfYS5kYXRhO1xuICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50U3RhdGUudmFsdWUsXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBlbGVtZW50U3RhdGUuc2VsZWN0aW9uO1xuXG4gICAgICAgIHZhciBfYiA9IF9fcmVhZChzZWxlY3Rpb24sIDIpLFxuICAgICAgICAgICAgZnJvbSA9IF9iWzBdLFxuICAgICAgICAgICAgdG8gPSBfYlsxXTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVsZW1lbnRTdGF0ZTogZWxlbWVudFN0YXRlLFxuICAgICAgICAgIGRhdGE6ICF2YWx1ZS5pbmNsdWRlcyhkZWNpbWFsU2VwYXJhdG9yKSB8fCB2YWx1ZS5zbGljZShmcm9tLCB0byArIDEpLmluY2x1ZGVzKGRlY2ltYWxTZXBhcmF0b3IpID8gZGF0YSA6IGRhdGEucmVwbGFjZShuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4cChkZWNpbWFsU2VwYXJhdG9yKSwgJ2dpJyksICcnKVxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqIEl0IGFkZHMgc3ltYm9sIGZvciBzZXBhcmF0aW5nIHRob3VzYW5kcy5cclxuICAgICAqIEBleGFtcGxlIDEwMDAwMDAgPT4gKHRob3VzYW5kU2VwYXJhdG9yIGlzIGVxdWFsIHRvIHNwYWNlKSA9PiAxIDAwMCAwMDAuXHJcbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVRob3VzYW5kU2VwYXJhdG9yUG9zdHByb2Nlc3NvcihfYSkge1xuICAgICAgdmFyIHRob3VzYW5kU2VwYXJhdG9yID0gX2EudGhvdXNhbmRTZXBhcmF0b3IsXG4gICAgICAgICAgZGVjaW1hbFNlcGFyYXRvciA9IF9hLmRlY2ltYWxTZXBhcmF0b3IsXG4gICAgICAgICAgcHJlZml4ID0gX2EucHJlZml4LFxuICAgICAgICAgIHBvc3RmaXggPSBfYS5wb3N0Zml4O1xuXG4gICAgICBpZiAoIXRob3VzYW5kU2VwYXJhdG9yKSB7XG4gICAgICAgIHJldHVybiBpZGVudGl0eTtcbiAgICAgIH1cblxuICAgICAgdmFyIHByZWZpeFJlZyA9IG5ldyBSZWdFeHAoXCJeXCIgKyBlc2NhcGVSZWdFeHAocHJlZml4KSArIENIQVJfTUlOVVMgKyBcIj9cIik7XG4gICAgICB2YXIgcG9zdGZpeFJlZyA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXhwKHBvc3RmaXgpICsgXCIkXCIpO1xuXG4gICAgICB2YXIgaXNBbGxTcGFjZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjaGFycyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgY2hhcnNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjaGFycy5ldmVyeShmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHJldHVybiAvXFxzLy50ZXN0KHgpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gX2EudmFsdWUsXG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBfYS5zZWxlY3Rpb247XG5cbiAgICAgICAgdmFyIF9iID0gX19yZWFkKHZhbHVlLnNwbGl0KGRlY2ltYWxTZXBhcmF0b3IpLCAyKSxcbiAgICAgICAgICAgIGludGVnZXJQYXJ0ID0gX2JbMF0sXG4gICAgICAgICAgICBfYyA9IF9iWzFdLFxuICAgICAgICAgICAgZGVjaW1hbFBhcnQgPSBfYyA9PT0gdm9pZCAwID8gJycgOiBfYztcblxuICAgICAgICB2YXIgX2QgPSBfX3JlYWQoc2VsZWN0aW9uLCAyKSxcbiAgICAgICAgICAgIGluaXRpYWxGcm9tID0gX2RbMF0sXG4gICAgICAgICAgICBpbml0aWFsVG8gPSBfZFsxXTtcblxuICAgICAgICB2YXIgX2UgPSBfX3JlYWQoc2VsZWN0aW9uLCAyKSxcbiAgICAgICAgICAgIGZyb20gPSBfZVswXSxcbiAgICAgICAgICAgIHRvID0gX2VbMV07XG5cbiAgICAgICAgdmFyIGNsZWFuSW50ZWdlclBhcnQgPSBpbnRlZ2VyUGFydC5yZXBsYWNlKHByZWZpeFJlZywgJycpLnJlcGxhY2UocG9zdGZpeFJlZywgJycpO1xuXG4gICAgICAgIHZhciBfZiA9IF9fcmVhZChpbnRlZ2VyUGFydC5tYXRjaChwcmVmaXhSZWcpIHx8IFtdLCAxKSxcbiAgICAgICAgICAgIF9nID0gX2ZbMF0sXG4gICAgICAgICAgICBpbnRlZ2VyUGFydFByZWZpeCA9IF9nID09PSB2b2lkIDAgPyAnJyA6IF9nO1xuXG4gICAgICAgIHZhciBfaCA9IF9fcmVhZChpbnRlZ2VyUGFydC5tYXRjaChwb3N0Zml4UmVnKSB8fCBbXSwgMSksXG4gICAgICAgICAgICBfaiA9IF9oWzBdLFxuICAgICAgICAgICAgaW50ZWdlclBhcnRQb3N0Zml4ID0gX2ogPT09IHZvaWQgMCA/ICcnIDogX2o7XG5cbiAgICAgICAgdmFyIHByb2Nlc3NlZEludGVnZXJQYXJ0ID0gQXJyYXkuZnJvbShjbGVhbkludGVnZXJQYXJ0KS5yZWR1Y2VSaWdodChmdW5jdGlvbiAoZm9ybWF0dGVkVmFsdWVQYXJ0LCBjaGFyLCBpKSB7XG4gICAgICAgICAgdmFyIGlzTGVhZGluZ1Rob3VzYW5kU2VwYXJhdG9yID0gIWkgJiYgY2hhciA9PT0gdGhvdXNhbmRTZXBhcmF0b3I7XG4gICAgICAgICAgdmFyIGlzUG9zaXRpb25Gb3JTZXBhcmF0b3IgPSAhaXNMZWFkaW5nVGhvdXNhbmRTZXBhcmF0b3IgJiYgZm9ybWF0dGVkVmFsdWVQYXJ0Lmxlbmd0aCAmJiAoZm9ybWF0dGVkVmFsdWVQYXJ0Lmxlbmd0aCArIDEpICUgNCA9PT0gMDtcblxuICAgICAgICAgIGlmIChpc1Bvc2l0aW9uRm9yU2VwYXJhdG9yICYmIChjaGFyID09PSB0aG91c2FuZFNlcGFyYXRvciB8fCBpc0FsbFNwYWNlcyhjaGFyLCB0aG91c2FuZFNlcGFyYXRvcikpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhvdXNhbmRTZXBhcmF0b3IgKyBmb3JtYXR0ZWRWYWx1ZVBhcnQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGNoYXIgPT09IHRob3VzYW5kU2VwYXJhdG9yICYmICFpc1Bvc2l0aW9uRm9yU2VwYXJhdG9yKSB7XG4gICAgICAgICAgICBpZiAoaSAmJiBpIDw9IGluaXRpYWxGcm9tKSB7XG4gICAgICAgICAgICAgIGZyb20tLTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGkgJiYgaSA8PSBpbml0aWFsVG8pIHtcbiAgICAgICAgICAgICAgdG8tLTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFZhbHVlUGFydDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWlzUG9zaXRpb25Gb3JTZXBhcmF0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGFyICsgZm9ybWF0dGVkVmFsdWVQYXJ0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpIDw9IGluaXRpYWxGcm9tKSB7XG4gICAgICAgICAgICBmcm9tKys7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGkgPD0gaW5pdGlhbFRvKSB7XG4gICAgICAgICAgICB0bysrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBjaGFyICsgdGhvdXNhbmRTZXBhcmF0b3IgKyBmb3JtYXR0ZWRWYWx1ZVBhcnQ7XG4gICAgICAgIH0sICcnKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZTogaW50ZWdlclBhcnRQcmVmaXggKyBwcm9jZXNzZWRJbnRlZ2VyUGFydCArIGludGVnZXJQYXJ0UG9zdGZpeCArICh2YWx1ZS5pbmNsdWRlcyhkZWNpbWFsU2VwYXJhdG9yKSA/IGRlY2ltYWxTZXBhcmF0b3IgOiAnJykgKyBkZWNpbWFsUGFydCxcbiAgICAgICAgICBzZWxlY3Rpb246IFtmcm9tLCB0b11cbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiBJdCBkcm9wcyBkZWNpbWFsIHBhcnQgaWYgcHJlY2lzaW9uIGlzIHplcm8uXHJcbiAgICAgKiBAZXhhbXBsZSBVc2VyIHBhc3RlcyAnMTIzLjQ1JyAoYnV0IHByZWNpc2lvbiBpcyB6ZXJvKSA9PiAxMjNcclxuICAgICAqL1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlWmVyb1ByZWNpc2lvblByZXByb2Nlc3NvcihwcmVjaXNpb24sIGRlY2ltYWxTZXBhcmF0b3IpIHtcbiAgICAgIGlmIChwcmVjaXNpb24gPiAwKSB7XG4gICAgICAgIHJldHVybiBpZGVudGl0eTtcbiAgICAgIH1cblxuICAgICAgdmFyIGRlY2ltYWxQYXJ0UmVnRXhwID0gbmV3IFJlZ0V4cChlc2NhcGVSZWdFeHAoZGVjaW1hbFNlcGFyYXRvcikgKyBcIi4qJFwiLCAnZycpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgZWxlbWVudFN0YXRlID0gX2EuZWxlbWVudFN0YXRlLFxuICAgICAgICAgICAgZGF0YSA9IF9hLmRhdGE7XG4gICAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnRTdGF0ZS52YWx1ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IGVsZW1lbnRTdGF0ZS5zZWxlY3Rpb247XG5cbiAgICAgICAgdmFyIF9iID0gX19yZWFkKHNlbGVjdGlvbiwgMiksXG4gICAgICAgICAgICBmcm9tID0gX2JbMF0sXG4gICAgICAgICAgICB0byA9IF9iWzFdO1xuXG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IHZhbHVlLnJlcGxhY2UoZGVjaW1hbFBhcnRSZWdFeHAsICcnKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlbGVtZW50U3RhdGU6IHtcbiAgICAgICAgICAgIHNlbGVjdGlvbjogW01hdGgubWluKGZyb20sIG5ld1ZhbHVlLmxlbmd0aCksIE1hdGgubWluKHRvLCBuZXdWYWx1ZS5sZW5ndGgpXSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXdWYWx1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGF0YTogZGF0YS5yZXBsYWNlKGRlY2ltYWxQYXJ0UmVnRXhwLCAnJylcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIERVTU1ZX1NFTEVDVElPTiA9IFswLCAwXTtcbiAgICAvKipcclxuICAgICAqIEl0IHJlbW92ZXMgcmVwZWF0ZWQgbGVhZGluZyB6ZXJvZXMgZm9yIGludGVnZXIgcGFydCBvbiBibHVyLWV2ZW50LlxyXG4gICAgICogQGV4YW1wbGUgMDAwMDAwID0+IGJsdXIgPT4gMFxyXG4gICAgICogQGV4YW1wbGUgMDAwMDUgPT4gYmx1ciA9PiA1XHJcbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUxlYWRpbmdaZXJvZXNWYWxpZGF0aW9uUGx1Z2luKGRlY2ltYWxTZXBhcmF0b3IsIHRob3VzYW5kU2VwYXJhdG9yKSB7XG4gICAgICB2YXIgZHJvcFJlcGVhdGVkTGVhZGluZ1plcm9lcyA9IGNyZWF0ZUxlYWRpbmdaZXJvZXNWYWxpZGF0aW9uUG9zdHByb2Nlc3NvcihkZWNpbWFsU2VwYXJhdG9yLCB0aG91c2FuZFNlcGFyYXRvcik7XG4gICAgICByZXR1cm4gbWFza2l0b0V2ZW50SGFuZGxlcignYmx1cicsIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IGRyb3BSZXBlYXRlZExlYWRpbmdaZXJvZXMoe1xuICAgICAgICAgIHZhbHVlOiBlbGVtZW50LnZhbHVlLFxuICAgICAgICAgIHNlbGVjdGlvbjogRFVNTVlfU0VMRUNUSU9OXG4gICAgICAgIH0sIHtcbiAgICAgICAgICB2YWx1ZTogJycsXG4gICAgICAgICAgc2VsZWN0aW9uOiBEVU1NWV9TRUxFQ1RJT05cbiAgICAgICAgfSkudmFsdWU7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQudmFsdWUgIT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgZWxlbWVudC52YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JykpO1xuICAgICAgICB9XG4gICAgICB9LCB7XG4gICAgICAgIGNhcHR1cmU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogVGhpcyBwbHVnaW4gaXMgY29ubmVjdGVkIHdpdGgge0BsaW5rIGNyZWF0ZU1pbk1heFBvc3Rwcm9jZXNzb3J9OlxyXG4gICAgICogYm90aCB2YWxpZGF0ZSBgbWluYC9gbWF4YCBib3VuZHMgb2YgZW50ZXJlZCB2YWx1ZSAoYnV0IGF0IHRoZSBkaWZmZXJlbnQgcG9pbnQgb2YgdGltZSkuXHJcbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZU1pbk1heFBsdWdpbihfYSkge1xuICAgICAgdmFyIG1pbiA9IF9hLm1pbixcbiAgICAgICAgICBtYXggPSBfYS5tYXgsXG4gICAgICAgICAgZGVjaW1hbFNlcGFyYXRvciA9IF9hLmRlY2ltYWxTZXBhcmF0b3I7XG4gICAgICByZXR1cm4gbWFza2l0b0V2ZW50SGFuZGxlcignYmx1cicsIGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBwYXJzZWROdW1iZXIgPSBtYXNraXRvUGFyc2VOdW1iZXIoZWxlbWVudC52YWx1ZSwgZGVjaW1hbFNlcGFyYXRvcik7XG4gICAgICAgIHZhciBjbGFtcGVkTnVtYmVyID0gY2xhbXAocGFyc2VkTnVtYmVyLCBtaW4sIG1heCk7XG5cbiAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4ocGFyc2VkTnVtYmVyKSAmJiBwYXJzZWROdW1iZXIgIT09IGNsYW1wZWROdW1iZXIpIHtcbiAgICAgICAgICBlbGVtZW50LnZhbHVlID0gY29yZS5tYXNraXRvVHJhbnNmb3JtKHN0cmluZ2lmeU51bWJlcldpdGhvdXRFeHAoY2xhbXBlZE51bWJlciksIG9wdGlvbnMpO1xuICAgICAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JykpO1xuICAgICAgICB9XG4gICAgICB9LCB7XG4gICAgICAgIGNhcHR1cmU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogSXQgcGFkcyBFTVBUWSBpbnRlZ2VyIHBhcnQgd2l0aCB6ZXJvIGlmIGRlY2ltYWwgcGFydHMgZXhpc3RzLlxyXG4gICAgICogSXQgd29ya3Mgb24gYmx1ciBldmVudCBvbmx5IVxyXG4gICAgICogQGV4YW1wbGUgMXwsMjMgPT4gQmFja3NwYWNlID0+IEJsdXIgPT4gMCwyM1xyXG4gICAgICovXG5cbiAgICBmdW5jdGlvbiBjcmVhdGVOb3RFbXB0eUludGVnZXJQbHVnaW4oZGVjaW1hbFNlcGFyYXRvcikge1xuICAgICAgcmV0dXJuIG1hc2tpdG9FdmVudEhhbmRsZXIoJ2JsdXInLCBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB2YXIgbmV3VmFsdWUgPSBlbGVtZW50LnZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cChcIl4oXFxcXEQrKT9cIiArIGVzY2FwZVJlZ0V4cChkZWNpbWFsU2VwYXJhdG9yKSksIFwiJDEwXCIgKyBkZWNpbWFsU2VwYXJhdG9yKTtcblxuICAgICAgICBpZiAobmV3VmFsdWUgIT09IGVsZW1lbnQudmFsdWUpIHtcbiAgICAgICAgICBlbGVtZW50LnZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSk7XG4gICAgICAgIH1cbiAgICAgIH0sIHtcbiAgICAgICAgY2FwdHVyZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFza2l0b051bWJlck9wdGlvbnNHZW5lcmF0b3IoX2EpIHtcbiAgICAgIHZhciBfYiA9IF9hID09PSB2b2lkIDAgPyB7fSA6IF9hLFxuICAgICAgICAgIF9jID0gX2IubWF4LFxuICAgICAgICAgIG1heCA9IF9jID09PSB2b2lkIDAgPyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiA6IF9jLFxuICAgICAgICAgIF9kID0gX2IubWluLFxuICAgICAgICAgIG1pbiA9IF9kID09PSB2b2lkIDAgPyBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiA6IF9kLFxuICAgICAgICAgIF9lID0gX2IucHJlY2lzaW9uLFxuICAgICAgICAgIHByZWNpc2lvbiA9IF9lID09PSB2b2lkIDAgPyAwIDogX2UsXG4gICAgICAgICAgX2YgPSBfYi50aG91c2FuZFNlcGFyYXRvcixcbiAgICAgICAgICB0aG91c2FuZFNlcGFyYXRvciA9IF9mID09PSB2b2lkIDAgPyBDSEFSX05PX0JSRUFLX1NQQUNFIDogX2YsXG4gICAgICAgICAgX2cgPSBfYi5kZWNpbWFsU2VwYXJhdG9yLFxuICAgICAgICAgIGRlY2ltYWxTZXBhcmF0b3IgPSBfZyA9PT0gdm9pZCAwID8gJy4nIDogX2csXG4gICAgICAgICAgZGVjaW1hbFBzZXVkb1NlcGFyYXRvcnMgPSBfYi5kZWNpbWFsUHNldWRvU2VwYXJhdG9ycyxcbiAgICAgICAgICBfaCA9IF9iLmRlY2ltYWxaZXJvUGFkZGluZyxcbiAgICAgICAgICBkZWNpbWFsWmVyb1BhZGRpbmcgPSBfaCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfaCxcbiAgICAgICAgICBfaiA9IF9iLnByZWZpeCxcbiAgICAgICAgICBwcmVmaXggPSBfaiA9PT0gdm9pZCAwID8gJycgOiBfaixcbiAgICAgICAgICBfayA9IF9iLnBvc3RmaXgsXG4gICAgICAgICAgcG9zdGZpeCA9IF9rID09PSB2b2lkIDAgPyAnJyA6IF9rO1xuXG4gICAgICB2YXIgcHNldWRvTWludXNlcyA9IFtDSEFSX0hZUEhFTiwgQ0hBUl9FTl9EQVNILCBDSEFSX0VNX0RBU0hdLmZpbHRlcihmdW5jdGlvbiAoY2hhcikge1xuICAgICAgICByZXR1cm4gY2hhciAhPT0gdGhvdXNhbmRTZXBhcmF0b3IgJiYgY2hhciAhPT0gZGVjaW1hbFNlcGFyYXRvcjtcbiAgICAgIH0pO1xuICAgICAgdmFyIHZhbGlkYXRlZERlY2ltYWxQc2V1ZG9TZXBhcmF0b3JzID0gdmFsaWRhdGVEZWNpbWFsUHNldWRvU2VwYXJhdG9ycyh7XG4gICAgICAgIGRlY2ltYWxTZXBhcmF0b3I6IGRlY2ltYWxTZXBhcmF0b3IsXG4gICAgICAgIHRob3VzYW5kU2VwYXJhdG9yOiB0aG91c2FuZFNlcGFyYXRvcixcbiAgICAgICAgZGVjaW1hbFBzZXVkb1NlcGFyYXRvcnM6IGRlY2ltYWxQc2V1ZG9TZXBhcmF0b3JzXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY29yZS5NQVNLSVRPX0RFRkFVTFRfT1BUSU9OUyksIHtcbiAgICAgICAgbWFzazogZ2VuZXJhdGVNYXNrRXhwcmVzc2lvbih7XG4gICAgICAgICAgZGVjaW1hbFNlcGFyYXRvcjogZGVjaW1hbFNlcGFyYXRvcixcbiAgICAgICAgICBwcmVjaXNpb246IHByZWNpc2lvbixcbiAgICAgICAgICB0aG91c2FuZFNlcGFyYXRvcjogdGhvdXNhbmRTZXBhcmF0b3IsXG4gICAgICAgICAgcHJlZml4OiBwcmVmaXgsXG4gICAgICAgICAgcG9zdGZpeDogcG9zdGZpeCxcbiAgICAgICAgICBpc05lZ2F0aXZlQWxsb3dlZDogbWluIDwgMFxuICAgICAgICB9KSxcbiAgICAgICAgcHJlcHJvY2Vzc29yczogW2NyZWF0ZUluaXRpYWxpemF0aW9uT25seVByZXByb2Nlc3Nvcih7XG4gICAgICAgICAgZGVjaW1hbFNlcGFyYXRvcjogZGVjaW1hbFNlcGFyYXRvcixcbiAgICAgICAgICBkZWNpbWFsUHNldWRvU2VwYXJhdG9yczogdmFsaWRhdGVkRGVjaW1hbFBzZXVkb1NlcGFyYXRvcnMsXG4gICAgICAgICAgcHNldWRvTWludXNlczogcHNldWRvTWludXNlc1xuICAgICAgICB9KSwgY3JlYXRlUHNldWRvQ2hhcmFjdGVyc1ByZXByb2Nlc3NvcihDSEFSX01JTlVTLCBwc2V1ZG9NaW51c2VzKSwgY3JlYXRlUHNldWRvQ2hhcmFjdGVyc1ByZXByb2Nlc3NvcihkZWNpbWFsU2VwYXJhdG9yLCB2YWxpZGF0ZWREZWNpbWFsUHNldWRvU2VwYXJhdG9ycyksIGNyZWF0ZU5vdEVtcHR5SW50ZWdlclBhcnRQcmVwcm9jZXNzb3Ioe1xuICAgICAgICAgIGRlY2ltYWxTZXBhcmF0b3I6IGRlY2ltYWxTZXBhcmF0b3IsXG4gICAgICAgICAgcHJlY2lzaW9uOiBwcmVjaXNpb25cbiAgICAgICAgfSksIGNyZWF0ZU5vblJlbW92YWJsZUNoYXJzRGVsZXRpb25QcmVwcm9jZXNzb3Ioe1xuICAgICAgICAgIGRlY2ltYWxTZXBhcmF0b3I6IGRlY2ltYWxTZXBhcmF0b3IsXG4gICAgICAgICAgZGVjaW1hbFplcm9QYWRkaW5nOiBkZWNpbWFsWmVyb1BhZGRpbmcsXG4gICAgICAgICAgdGhvdXNhbmRTZXBhcmF0b3I6IHRob3VzYW5kU2VwYXJhdG9yXG4gICAgICAgIH0pLCBjcmVhdGVaZXJvUHJlY2lzaW9uUHJlcHJvY2Vzc29yKHByZWNpc2lvbiwgZGVjaW1hbFNlcGFyYXRvciksIGNyZWF0ZVJlcGVhdGVkRGVjaW1hbFNlcGFyYXRvclByZXByb2Nlc3NvcihkZWNpbWFsU2VwYXJhdG9yKV0sXG4gICAgICAgIHBvc3Rwcm9jZXNzb3JzOiBbY3JlYXRlTWluTWF4UG9zdHByb2Nlc3Nvcih7XG4gICAgICAgICAgZGVjaW1hbFNlcGFyYXRvcjogZGVjaW1hbFNlcGFyYXRvcixcbiAgICAgICAgICBtaW46IG1pbixcbiAgICAgICAgICBtYXg6IG1heFxuICAgICAgICB9KSwgbWFza2l0b1ByZWZpeFBvc3Rwcm9jZXNzb3JHZW5lcmF0b3IocHJlZml4KSwgbWFza2l0b1Bvc3RmaXhQb3N0cHJvY2Vzc29yR2VuZXJhdG9yKHBvc3RmaXgpLCBjcmVhdGVUaG91c2FuZFNlcGFyYXRvclBvc3Rwcm9jZXNzb3Ioe1xuICAgICAgICAgIGRlY2ltYWxTZXBhcmF0b3I6IGRlY2ltYWxTZXBhcmF0b3IsXG4gICAgICAgICAgdGhvdXNhbmRTZXBhcmF0b3I6IHRob3VzYW5kU2VwYXJhdG9yLFxuICAgICAgICAgIHByZWZpeDogcHJlZml4LFxuICAgICAgICAgIHBvc3RmaXg6IHBvc3RmaXhcbiAgICAgICAgfSksIGNyZWF0ZURlY2ltYWxaZXJvUGFkZGluZ1Bvc3Rwcm9jZXNzb3Ioe1xuICAgICAgICAgIGRlY2ltYWxTZXBhcmF0b3I6IGRlY2ltYWxTZXBhcmF0b3IsXG4gICAgICAgICAgZGVjaW1hbFplcm9QYWRkaW5nOiBkZWNpbWFsWmVyb1BhZGRpbmcsXG4gICAgICAgICAgcHJlY2lzaW9uOiBwcmVjaXNpb24sXG4gICAgICAgICAgcG9zdGZpeDogcG9zdGZpeFxuICAgICAgICB9KV0sXG4gICAgICAgIHBsdWdpbnM6IFtjcmVhdGVMZWFkaW5nWmVyb2VzVmFsaWRhdGlvblBsdWdpbihkZWNpbWFsU2VwYXJhdG9yLCB0aG91c2FuZFNlcGFyYXRvciksIGNyZWF0ZU5vdEVtcHR5SW50ZWdlclBsdWdpbihkZWNpbWFsU2VwYXJhdG9yKSwgY3JlYXRlTWluTWF4UGx1Z2luKHtcbiAgICAgICAgICBtaW46IG1pbixcbiAgICAgICAgICBtYXg6IG1heCxcbiAgICAgICAgICBkZWNpbWFsU2VwYXJhdG9yOiBkZWNpbWFsU2VwYXJhdG9yXG4gICAgICAgIH0pXSxcbiAgICAgICAgb3ZlcndyaXRlTW9kZTogZGVjaW1hbFplcm9QYWRkaW5nID8gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gX2EudmFsdWUsXG4gICAgICAgICAgICAgIF9iID0gX19yZWFkKF9hLnNlbGVjdGlvbiwgMSksXG4gICAgICAgICAgICAgIGZyb20gPSBfYlswXTtcblxuICAgICAgICAgIHJldHVybiBmcm9tIDw9IHZhbHVlLmluZGV4T2YoZGVjaW1hbFNlcGFyYXRvcikgPyAnc2hpZnQnIDogJ3JlcGxhY2UnO1xuICAgICAgICB9IDogJ3NoaWZ0J1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlTWF4VmFsaWRhdGlvblByZXByb2Nlc3Nvcih0aW1lU2VnbWVudE1heFZhbHVlcykge1xuICAgICAgdmFyIHBhZGRlZE1heFZhbHVlcyA9IHBhZFRpbWVTZWdtZW50cyh0aW1lU2VnbWVudE1heFZhbHVlcyk7XG4gICAgICB2YXIgaW52YWxpZENoYXJzUmVnRXhwID0gbmV3IFJlZ0V4cChcIlteXFxcXGRcIiArIFRJTUVfRklYRURfQ0hBUkFDVEVSUy5tYXAoZXNjYXBlUmVnRXhwKS5qb2luKCcnKSArIFwiXStcIik7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKF9hLCBhY3Rpb25UeXBlKSB7XG4gICAgICAgIHZhciBlbGVtZW50U3RhdGUgPSBfYS5lbGVtZW50U3RhdGUsXG4gICAgICAgICAgICBkYXRhID0gX2EuZGF0YTtcblxuICAgICAgICBpZiAoYWN0aW9uVHlwZSA9PT0gJ2RlbGV0ZUJhY2t3YXJkJyB8fCBhY3Rpb25UeXBlID09PSAnZGVsZXRlRm9yd2FyZCcpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZWxlbWVudFN0YXRlOiBlbGVtZW50U3RhdGUsXG4gICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnRTdGF0ZS52YWx1ZSxcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IGVsZW1lbnRTdGF0ZS5zZWxlY3Rpb247XG5cbiAgICAgICAgaWYgKGFjdGlvblR5cGUgPT09ICd2YWxpZGF0aW9uJykge1xuICAgICAgICAgIHZhciBfYiA9IHZhbGlkYXRlVGltZVN0cmluZyh7XG4gICAgICAgICAgICB0aW1lU3RyaW5nOiB2YWx1ZSxcbiAgICAgICAgICAgIHBhZGRlZE1heFZhbHVlczogcGFkZGVkTWF4VmFsdWVzLFxuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb25cbiAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgdmFsaWRhdGVkVGltZVN0cmluZ18xID0gX2IudmFsaWRhdGVkVGltZVN0cmluZyxcbiAgICAgICAgICAgICAgdXBkYXRlZFRpbWVTZWxlY3Rpb25fMSA9IF9iLnVwZGF0ZWRUaW1lU2VsZWN0aW9uO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVsZW1lbnRTdGF0ZToge1xuICAgICAgICAgICAgICB2YWx1ZTogdmFsaWRhdGVkVGltZVN0cmluZ18xLFxuICAgICAgICAgICAgICBzZWxlY3Rpb246IHVwZGF0ZWRUaW1lU2VsZWN0aW9uXzFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBuZXdDaGFyYWN0ZXJzID0gZGF0YS5yZXBsYWNlKGludmFsaWRDaGFyc1JlZ0V4cCwgJycpO1xuXG4gICAgICAgIHZhciBfYyA9IF9fcmVhZChzZWxlY3Rpb24sIDIpLFxuICAgICAgICAgICAgZnJvbSA9IF9jWzBdLFxuICAgICAgICAgICAgcmF3VG8gPSBfY1sxXTtcblxuICAgICAgICB2YXIgdG8gPSByYXdUbyArIG5ld0NoYXJhY3RlcnMubGVuZ3RoOyAvLyB0byBiZSBjb25mb3JtZWQgd2l0aCBgb3ZlcndyaXRlTW9kZTogcmVwbGFjZWBcblxuICAgICAgICB2YXIgbmV3UG9zc2libGVWYWx1ZSA9IHZhbHVlLnNsaWNlKDAsIGZyb20pICsgbmV3Q2hhcmFjdGVycyArIHZhbHVlLnNsaWNlKHRvKTtcblxuICAgICAgICB2YXIgX2QgPSB2YWxpZGF0ZVRpbWVTdHJpbmcoe1xuICAgICAgICAgIHRpbWVTdHJpbmc6IG5ld1Bvc3NpYmxlVmFsdWUsXG4gICAgICAgICAgcGFkZGVkTWF4VmFsdWVzOiBwYWRkZWRNYXhWYWx1ZXMsXG4gICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgIHNlbGVjdGlvbjogW2Zyb20sIHRvXVxuICAgICAgICB9KSxcbiAgICAgICAgICAgIHZhbGlkYXRlZFRpbWVTdHJpbmcgPSBfZC52YWxpZGF0ZWRUaW1lU3RyaW5nLFxuICAgICAgICAgICAgdXBkYXRlZFRpbWVTZWxlY3Rpb24gPSBfZC51cGRhdGVkVGltZVNlbGVjdGlvbjtcblxuICAgICAgICBpZiAobmV3UG9zc2libGVWYWx1ZSAmJiAhdmFsaWRhdGVkVGltZVN0cmluZykge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbGVtZW50U3RhdGU6IGVsZW1lbnRTdGF0ZSxcbiAgICAgICAgICAgIGRhdGE6ICcnXG4gICAgICAgICAgfTsgLy8gcHJldmVudCBjaGFuZ2VzXG4gICAgICAgIH1cblxuICAgICAgICB0byA9IHVwZGF0ZWRUaW1lU2VsZWN0aW9uWzFdO1xuICAgICAgICB2YXIgbmV3RGF0YSA9IHZhbGlkYXRlZFRpbWVTdHJpbmcuc2xpY2UoZnJvbSwgdG8pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVsZW1lbnRTdGF0ZToge1xuICAgICAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb24sXG4gICAgICAgICAgICB2YWx1ZTogdmFsaWRhdGVkVGltZVN0cmluZy5zbGljZSgwLCBmcm9tKSArICcwJy5yZXBlYXQobmV3RGF0YS5sZW5ndGgpICsgdmFsaWRhdGVkVGltZVN0cmluZy5zbGljZSh0bylcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRhdGE6IG5ld0RhdGFcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFza2l0b1RpbWVPcHRpb25zR2VuZXJhdG9yKF9hKSB7XG4gICAgICB2YXIgbW9kZSA9IF9hLm1vZGUsXG4gICAgICAgICAgX2IgPSBfYS50aW1lU2VnbWVudE1heFZhbHVlcyxcbiAgICAgICAgICB0aW1lU2VnbWVudE1heFZhbHVlcyA9IF9iID09PSB2b2lkIDAgPyB7fSA6IF9iO1xuXG4gICAgICB2YXIgZW5yaWNoZWRUaW1lU2VnbWVudE1heFZhbHVlcyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBERUZBVUxUX1RJTUVfU0VHTUVOVF9NQVhfVkFMVUVTKSwgdGltZVNlZ21lbnRNYXhWYWx1ZXMpO1xuXG4gICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIGNvcmUuTUFTS0lUT19ERUZBVUxUX09QVElPTlMpLCB7XG4gICAgICAgIG1hc2s6IEFycmF5LmZyb20obW9kZSkubWFwKGZ1bmN0aW9uIChjaGFyKSB7XG4gICAgICAgICAgcmV0dXJuIFRJTUVfRklYRURfQ0hBUkFDVEVSUy5pbmNsdWRlcyhjaGFyKSA/IGNoYXIgOiAvXFxkLztcbiAgICAgICAgfSksXG4gICAgICAgIHByZXByb2Nlc3NvcnM6IFtjcmVhdGVaZXJvUGxhY2Vob2xkZXJzUHJlcHJvY2Vzc29yKCksIGNyZWF0ZU1heFZhbGlkYXRpb25QcmVwcm9jZXNzb3IoZW5yaWNoZWRUaW1lU2VnbWVudE1heFZhbHVlcyldLFxuICAgICAgICBvdmVyd3JpdGVNb2RlOiAncmVwbGFjZSdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGV4cG9ydHMubWFza2l0b0FkZE9uRm9jdXNQbHVnaW4gPSBtYXNraXRvQWRkT25Gb2N1c1BsdWdpbjtcbiAgICBleHBvcnRzLm1hc2tpdG9DYXJldEd1YXJkID0gbWFza2l0b0NhcmV0R3VhcmQ7XG4gICAgZXhwb3J0cy5tYXNraXRvRGF0ZU9wdGlvbnNHZW5lcmF0b3IgPSBtYXNraXRvRGF0ZU9wdGlvbnNHZW5lcmF0b3I7XG4gICAgZXhwb3J0cy5tYXNraXRvRGF0ZVJhbmdlT3B0aW9uc0dlbmVyYXRvciA9IG1hc2tpdG9EYXRlUmFuZ2VPcHRpb25zR2VuZXJhdG9yO1xuICAgIGV4cG9ydHMubWFza2l0b0RhdGVUaW1lT3B0aW9uc0dlbmVyYXRvciA9IG1hc2tpdG9EYXRlVGltZU9wdGlvbnNHZW5lcmF0b3I7XG4gICAgZXhwb3J0cy5tYXNraXRvRXZlbnRIYW5kbGVyID0gbWFza2l0b0V2ZW50SGFuZGxlcjtcbiAgICBleHBvcnRzLm1hc2tpdG9OdW1iZXJPcHRpb25zR2VuZXJhdG9yID0gbWFza2l0b051bWJlck9wdGlvbnNHZW5lcmF0b3I7XG4gICAgZXhwb3J0cy5tYXNraXRvUGFyc2VOdW1iZXIgPSBtYXNraXRvUGFyc2VOdW1iZXI7XG4gICAgZXhwb3J0cy5tYXNraXRvUG9zdGZpeFBvc3Rwcm9jZXNzb3JHZW5lcmF0b3IgPSBtYXNraXRvUG9zdGZpeFBvc3Rwcm9jZXNzb3JHZW5lcmF0b3I7XG4gICAgZXhwb3J0cy5tYXNraXRvUHJlZml4UG9zdHByb2Nlc3NvckdlbmVyYXRvciA9IG1hc2tpdG9QcmVmaXhQb3N0cHJvY2Vzc29yR2VuZXJhdG9yO1xuICAgIGV4cG9ydHMubWFza2l0b1JlamVjdEV2ZW50ID0gbWFza2l0b1JlamVjdEV2ZW50O1xuICAgIGV4cG9ydHMubWFza2l0b1JlbW92ZU9uQmx1clBsdWdpbiA9IG1hc2tpdG9SZW1vdmVPbkJsdXJQbHVnaW47XG4gICAgZXhwb3J0cy5tYXNraXRvVGltZU9wdGlvbnNHZW5lcmF0b3IgPSBtYXNraXRvVGltZU9wdGlvbnNHZW5lcmF0b3I7XG4gICAgZXhwb3J0cy5tYXNraXRvV2l0aFBsYWNlaG9sZGVyID0gbWFza2l0b1dpdGhQbGFjZWhvbGRlcjtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKTtcbiIsICIvKipcbiAqIEBsaWNlbnNlIE1JVFxuICogdG9wYmFyIDEuMC4wLCAyMDIxLTAxLTA2XG4gKiBodHRwOi8vYnV1bmd1eWVuLmdpdGh1Yi5pby90b3BiYXJcbiAqIENvcHlyaWdodCAoYykgMjAyMSBCdXUgTmd1eWVuXG4gKi9cbihmdW5jdGlvbih3aW5kb3csZG9jdW1lbnQpe1widXNlIHN0cmljdFwiOyFmdW5jdGlvbigpe2Zvcih2YXIgbGFzdFRpbWU9MCx2ZW5kb3JzPVtcIm1zXCIsXCJtb3pcIixcIndlYmtpdFwiLFwib1wiXSx4PTA7eDx2ZW5kb3JzLmxlbmd0aCYmIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7Kyt4KXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9d2luZG93W3ZlbmRvcnNbeF0rXCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl0sd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPXdpbmRvd1t2ZW5kb3JzW3hdK1wiQ2FuY2VsQW5pbWF0aW9uRnJhbWVcIl18fHdpbmRvd1t2ZW5kb3JzW3hdK1wiQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdO3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKGNhbGxiYWNrLGVsZW1lbnQpe3ZhciBjdXJyVGltZT0obmV3IERhdGUpLmdldFRpbWUoKSx0aW1lVG9DYWxsPU1hdGgubWF4KDAsMTYtKGN1cnJUaW1lLWxhc3RUaW1lKSksaWQ9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjYWxsYmFjayhjdXJyVGltZSt0aW1lVG9DYWxsKX0sdGltZVRvQ2FsbCk7cmV0dXJuIGxhc3RUaW1lPWN1cnJUaW1lK3RpbWVUb0NhbGwsaWR9KSx3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oaWQpe2NsZWFyVGltZW91dChpZCl9KX0oKTtmdW5jdGlvbiByZXBhaW50KCl7Y2FudmFzLndpZHRoPXdpbmRvdy5pbm5lcldpZHRoLGNhbnZhcy5oZWlnaHQ9NSpvcHRpb25zLmJhclRoaWNrbmVzczt2YXIgY3R4PWNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7Y3R4LnNoYWRvd0JsdXI9b3B0aW9ucy5zaGFkb3dCbHVyLGN0eC5zaGFkb3dDb2xvcj1vcHRpb25zLnNoYWRvd0NvbG9yO3ZhciBzdG9wLGxpbmVHcmFkaWVudD1jdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwwLGNhbnZhcy53aWR0aCwwKTtmb3Ioc3RvcCBpbiBvcHRpb25zLmJhckNvbG9ycylsaW5lR3JhZGllbnQuYWRkQ29sb3JTdG9wKHN0b3Asb3B0aW9ucy5iYXJDb2xvcnNbc3RvcF0pO2N0eC5saW5lV2lkdGg9b3B0aW9ucy5iYXJUaGlja25lc3MsY3R4LmJlZ2luUGF0aCgpLGN0eC5tb3ZlVG8oMCxvcHRpb25zLmJhclRoaWNrbmVzcy8yKSxjdHgubGluZVRvKE1hdGguY2VpbChjdXJyZW50UHJvZ3Jlc3MqY2FudmFzLndpZHRoKSxvcHRpb25zLmJhclRoaWNrbmVzcy8yKSxjdHguc3Ryb2tlU3R5bGU9bGluZUdyYWRpZW50LGN0eC5zdHJva2UoKX12YXIgY2FudmFzLHByb2dyZXNzVGltZXJJZCxmYWRlVGltZXJJZCxjdXJyZW50UHJvZ3Jlc3Msc2hvd2luZyxvcHRpb25zPXthdXRvUnVuOiEwLGJhclRoaWNrbmVzczozLGJhckNvbG9yczp7MDpcInJnYmEoMjYsICAxODgsIDE1NiwgLjkpXCIsXCIuMjVcIjpcInJnYmEoNTIsICAxNTIsIDIxOSwgLjkpXCIsXCIuNTBcIjpcInJnYmEoMjQxLCAxOTYsIDE1LCAgLjkpXCIsXCIuNzVcIjpcInJnYmEoMjMwLCAxMjYsIDM0LCAgLjkpXCIsXCIxLjBcIjpcInJnYmEoMjExLCA4NCwgIDAsICAgLjkpXCJ9LHNoYWRvd0JsdXI6MTAsc2hhZG93Q29sb3I6XCJyZ2JhKDAsICAgMCwgICAwLCAgIC42KVwiLGNsYXNzTmFtZTpudWxsfSx0b3BiYXI9e2NvbmZpZzpmdW5jdGlvbihvcHRzKXtmb3IodmFyIGtleSBpbiBvcHRzKW9wdGlvbnMuaGFzT3duUHJvcGVydHkoa2V5KSYmKG9wdGlvbnNba2V5XT1vcHRzW2tleV0pfSxzaG93OmZ1bmN0aW9uKCl7dmFyIHR5cGUsaGFuZGxlcixlbGVtO3Nob3dpbmd8fChzaG93aW5nPSEwLG51bGwhPT1mYWRlVGltZXJJZCYmd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKGZhZGVUaW1lcklkKSxjYW52YXN8fCgoZWxlbT0oY2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikpLnN0eWxlKS5wb3NpdGlvbj1cImZpeGVkXCIsZWxlbS50b3A9ZWxlbS5sZWZ0PWVsZW0ucmlnaHQ9ZWxlbS5tYXJnaW49ZWxlbS5wYWRkaW5nPTAsZWxlbS56SW5kZXg9MTAwMDAxLGVsZW0uZGlzcGxheT1cIm5vbmVcIixvcHRpb25zLmNsYXNzTmFtZSYmY2FudmFzLmNsYXNzTGlzdC5hZGQob3B0aW9ucy5jbGFzc05hbWUpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FudmFzKSx0eXBlPVwicmVzaXplXCIsaGFuZGxlcj1yZXBhaW50LChlbGVtPXdpbmRvdykuYWRkRXZlbnRMaXN0ZW5lcj9lbGVtLmFkZEV2ZW50TGlzdGVuZXIodHlwZSxoYW5kbGVyLCExKTplbGVtLmF0dGFjaEV2ZW50P2VsZW0uYXR0YWNoRXZlbnQoXCJvblwiK3R5cGUsaGFuZGxlcik6ZWxlbVtcIm9uXCIrdHlwZV09aGFuZGxlciksY2FudmFzLnN0eWxlLm9wYWNpdHk9MSxjYW52YXMuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsdG9wYmFyLnByb2dyZXNzKDApLG9wdGlvbnMuYXV0b1J1biYmZnVuY3Rpb24gbG9vcCgpe3Byb2dyZXNzVGltZXJJZD13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApLHRvcGJhci5wcm9ncmVzcyhcIitcIisuMDUqTWF0aC5wb3coMS1NYXRoLnNxcnQoY3VycmVudFByb2dyZXNzKSwyKSl9KCkpfSxwcm9ncmVzczpmdW5jdGlvbih0byl7cmV0dXJuIHZvaWQgMD09PXRvfHwoXCJzdHJpbmdcIj09dHlwZW9mIHRvJiYodG89KDA8PXRvLmluZGV4T2YoXCIrXCIpfHwwPD10by5pbmRleE9mKFwiLVwiKT9jdXJyZW50UHJvZ3Jlc3M6MCkrcGFyc2VGbG9hdCh0bykpLGN1cnJlbnRQcm9ncmVzcz0xPHRvPzE6dG8scmVwYWludCgpKSxjdXJyZW50UHJvZ3Jlc3N9LGhpZGU6ZnVuY3Rpb24oKXtzaG93aW5nJiYoc2hvd2luZz0hMSxudWxsIT1wcm9ncmVzc1RpbWVySWQmJih3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUocHJvZ3Jlc3NUaW1lcklkKSxwcm9ncmVzc1RpbWVySWQ9bnVsbCksZnVuY3Rpb24gbG9vcCgpe3JldHVybiAxPD10b3BiYXIucHJvZ3Jlc3MoXCIrLjFcIikmJihjYW52YXMuc3R5bGUub3BhY2l0eS09LjA1LGNhbnZhcy5zdHlsZS5vcGFjaXR5PD0uMDUpPyhjYW52YXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix2b2lkKGZhZGVUaW1lcklkPW51bGwpKTp2b2lkKGZhZGVUaW1lcklkPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCkpfSgpKX19O1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz10b3BiYXI6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShmdW5jdGlvbigpe3JldHVybiB0b3BiYXJ9KTp0aGlzLnRvcGJhcj10b3BiYXJ9KS5jYWxsKHRoaXMsd2luZG93LGRvY3VtZW50KTsiLCAiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIFBvbHlmaWxsRXZlbnQgPSBldmVudENvbnN0cnVjdG9yKCk7XG5cbiAgZnVuY3Rpb24gZXZlbnRDb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gd2luZG93LkN1c3RvbUV2ZW50O1xuICAgIC8vIElFPD05IFN1cHBvcnRcbiAgICBmdW5jdGlvbiBDdXN0b21FdmVudChldmVudCwgcGFyYW1zKSB7XG4gICAgICBwYXJhbXMgPSBwYXJhbXMgfHwge2J1YmJsZXM6IGZhbHNlLCBjYW5jZWxhYmxlOiBmYWxzZSwgZGV0YWlsOiB1bmRlZmluZWR9O1xuICAgICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgICAgZXZ0LmluaXRDdXN0b21FdmVudChldmVudCwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlLCBwYXJhbXMuZGV0YWlsKTtcbiAgICAgIHJldHVybiBldnQ7XG4gICAgfVxuICAgIEN1c3RvbUV2ZW50LnByb3RvdHlwZSA9IHdpbmRvdy5FdmVudC5wcm90b3R5cGU7XG4gICAgcmV0dXJuIEN1c3RvbUV2ZW50O1xuICB9XG5cbiAgZnVuY3Rpb24gYnVpbGRIaWRkZW5JbnB1dChuYW1lLCB2YWx1ZSkge1xuICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBpbnB1dC50eXBlID0gXCJoaWRkZW5cIjtcbiAgICBpbnB1dC5uYW1lID0gbmFtZTtcbiAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgIHJldHVybiBpbnB1dDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGVsZW1lbnQsIHRhcmdldE1vZGlmaWVyS2V5KSB7XG4gICAgdmFyIHRvID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRvXCIpLFxuICAgICAgICBtZXRob2QgPSBidWlsZEhpZGRlbklucHV0KFwiX21ldGhvZFwiLCBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWV0aG9kXCIpKSxcbiAgICAgICAgY3NyZiA9IGJ1aWxkSGlkZGVuSW5wdXQoXCJfY3NyZl90b2tlblwiLCBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtY3NyZlwiKSksXG4gICAgICAgIGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKSxcbiAgICAgICAgc3VibWl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxuICAgICAgICB0YXJnZXQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInRhcmdldFwiKTtcblxuICAgIGZvcm0ubWV0aG9kID0gKGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tZXRob2RcIikgPT09IFwiZ2V0XCIpID8gXCJnZXRcIiA6IFwicG9zdFwiO1xuICAgIGZvcm0uYWN0aW9uID0gdG87XG4gICAgZm9ybS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICBpZiAodGFyZ2V0KSBmb3JtLnRhcmdldCA9IHRhcmdldDtcbiAgICBlbHNlIGlmICh0YXJnZXRNb2RpZmllcktleSkgZm9ybS50YXJnZXQgPSBcIl9ibGFua1wiO1xuXG4gICAgZm9ybS5hcHBlbmRDaGlsZChjc3JmKTtcbiAgICBmb3JtLmFwcGVuZENoaWxkKG1ldGhvZCk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmb3JtKTtcblxuICAgIC8vIEluc2VydCBhIGJ1dHRvbiBhbmQgY2xpY2sgaXQgaW5zdGVhZCBvZiB1c2luZyBgZm9ybS5zdWJtaXRgXG4gICAgLy8gYmVjYXVzZSB0aGUgYHN1Ym1pdGAgZnVuY3Rpb24gZG9lcyBub3QgZW1pdCBhIGBzdWJtaXRgIGV2ZW50LlxuICAgIHN1Ym1pdC50eXBlID0gXCJzdWJtaXRcIjtcbiAgICBmb3JtLmFwcGVuZENoaWxkKHN1Ym1pdCk7XG4gICAgc3VibWl0LmNsaWNrKCk7XG4gIH1cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0O1xuICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcblxuICAgIHdoaWxlIChlbGVtZW50ICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlKSB7XG4gICAgICB2YXIgcGhvZW5peExpbmtFdmVudCA9IG5ldyBQb2x5ZmlsbEV2ZW50KCdwaG9lbml4LmxpbmsuY2xpY2snLCB7XG4gICAgICAgIFwiYnViYmxlc1wiOiB0cnVlLCBcImNhbmNlbGFibGVcIjogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghZWxlbWVudC5kaXNwYXRjaEV2ZW50KHBob2VuaXhMaW5rRXZlbnQpKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1ldGhvZFwiKSkge1xuICAgICAgICBoYW5kbGVDbGljayhlbGVtZW50LCBlLm1ldGFLZXkgfHwgZS5zaGlmdEtleSk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIGZhbHNlKTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGhvZW5peC5saW5rLmNsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgbWVzc2FnZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtY29uZmlybVwiKTtcbiAgICBpZihtZXNzYWdlICYmICF3aW5kb3cuY29uZmlybShtZXNzYWdlKSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSwgZmFsc2UpO1xufSkoKTtcbiIsICJpbXBvcnQgXCJwaG9lbml4X2h0bWxcIjtcbmltcG9ydCB7TWFza2l0bywgTWFza2l0b09wdGlvbnN9IGZyb20gJ0BtYXNraXRvL2NvcmUnO1xuaW1wb3J0IHttYXNraXRvTnVtYmVyT3B0aW9uc0dlbmVyYXRvcn0gZnJvbSAnQG1hc2tpdG8va2l0JztcbiBcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwaHg6bWFzay1pbnB1dFwiLCBfZSA9PiB7XG4gIGNvbnN0IGFtb3VudE1hc2sgPSBtYXNraXRvTnVtYmVyT3B0aW9uc0dlbmVyYXRvcih7XG4gICAgICBkZWNpbWFsWmVyb1BhZGRpbmc6IHRydWUsXG4gICAgICBwcmVjaXNpb246IDIsXG4gICAgICBkZWNpbWFsU2VwYXJhdG9yOiAnLCcsXG4gICAgICBtaW46IDAsXG4gICAgICBwcmVmaXg6ICdSJCcsXG4gIH0pO1xuXG4gIGNvbnN0IGFtb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYW1vdW50XCIpO1xuICBpZiAoYW1vdW50KSB7XG4gICAgbmV3IE1hc2tpdG8oYW1vdW50LCBhbW91bnRNYXNrKTtcbiAgfVxufSlcblxuY29uc3QgY3BmID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN1c2VyX2NwZlwiKTtcbmlmIChjcGYpIHtcbiAgbmV3IE1hc2tpdG8oY3BmLCB7bWFzazogW1xuICAgIC4uLm5ldyBBcnJheSgzKS5maWxsKC9cXGQvKSxcbiAgICBcIi5cIixcbiAgICAuLi5uZXcgQXJyYXkoMykuZmlsbCgvXFxkLyksXG4gICAgXCIuXCIsXG4gICAgLi4ubmV3IEFycmF5KDMpLmZpbGwoL1xcZC8pLFxuICAgIFwiLVwiLFxuICAgIC4uLm5ldyBBcnJheSgyKS5maWxsKC9cXGQvKVxuICBdfSk7XG59XG5cbi8vIGxpdmUgdmlld1xuaW1wb3J0IHsgU29ja2V0IH0gZnJvbSBcInBob2VuaXhcIjtcbmltcG9ydCB7IExpdmVTb2NrZXQgfSBmcm9tIFwicGhvZW5peF9saXZlX3ZpZXdcIjtcblxubGV0IGNzcmZUb2tlbiA9IGRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwibWV0YVtuYW1lPSdjc3JmLXRva2VuJ11cIilcbiAgLmdldEF0dHJpYnV0ZShcImNvbnRlbnRcIik7XG5sZXQgbGl2ZVNvY2tldCA9IG5ldyBMaXZlU29ja2V0KFwiL2xpdmVcIiwgU29ja2V0LCB7XG4gIHBhcmFtczogeyBfY3NyZl90b2tlbjogY3NyZlRva2VuIH0sXG59KTtcblxuLy8gQ29ubmVjdCBpZiB0aGVyZSBhcmUgYW55IExpdmVWaWV3cyBvbiB0aGUgcGFnZVxubGl2ZVNvY2tldC5jb25uZWN0KCk7XG53aW5kb3cubGl2ZVNvY2tldCA9IGxpdmVTb2NrZXQ7XG5cbi8vIFNob3cgcHJvZ3Jlc3MgYmFyIG9uIGxpdmUgbmF2aWdhdGlvbiBhbmQgZm9ybSBzdWJtaXRzXG5pbXBvcnQgdG9wYmFyIGZyb20gXCJ0b3BiYXJcIjtcblxudG9wYmFyLmNvbmZpZyh7IGJhckNvbG9yczogeyAwOiBcIiMyOWRcIiB9LCBzaGFkb3dDb2xvcjogXCJyZ2JhKDAsIDAsIDAsIC4zKVwiIH0pO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwaHg6cGFnZS1sb2FkaW5nLXN0YXJ0XCIsIChpbmZvKSA9PiB0b3BiYXIuc2hvdygpKTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGh4OnBhZ2UtbG9hZGluZy1zdG9wXCIsIChpbmZvKSA9PiB0b3BiYXIuaGlkZSgpKTtcbiIsICIvLyB3cmFwcyB2YWx1ZSBpbiBjbG9zdXJlIG9yIHJldHVybnMgY2xvc3VyZVxuZXhwb3J0IGxldCBjbG9zdXJlID0gKHZhbHVlKSA9PiB7XG4gIGlmKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKXtcbiAgICByZXR1cm4gdmFsdWVcbiAgfSBlbHNlIHtcbiAgICBsZXQgY2xvc3VyZSA9IGZ1bmN0aW9uICgpeyByZXR1cm4gdmFsdWUgfVxuICAgIHJldHVybiBjbG9zdXJlXG4gIH1cbn1cbiIsICJleHBvcnQgY29uc3QgZ2xvYmFsU2VsZiA9IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IG51bGxcbmV4cG9ydCBjb25zdCBwaHhXaW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogbnVsbFxuZXhwb3J0IGNvbnN0IGdsb2JhbCA9IGdsb2JhbFNlbGYgfHwgcGh4V2luZG93IHx8IGdsb2JhbFxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVlNOID0gXCIyLjAuMFwiXG5leHBvcnQgY29uc3QgU09DS0VUX1NUQVRFUyA9IHtjb25uZWN0aW5nOiAwLCBvcGVuOiAxLCBjbG9zaW5nOiAyLCBjbG9zZWQ6IDN9XG5leHBvcnQgY29uc3QgREVGQVVMVF9USU1FT1VUID0gMTAwMDBcbmV4cG9ydCBjb25zdCBXU19DTE9TRV9OT1JNQUwgPSAxMDAwXG5leHBvcnQgY29uc3QgQ0hBTk5FTF9TVEFURVMgPSB7XG4gIGNsb3NlZDogXCJjbG9zZWRcIixcbiAgZXJyb3JlZDogXCJlcnJvcmVkXCIsXG4gIGpvaW5lZDogXCJqb2luZWRcIixcbiAgam9pbmluZzogXCJqb2luaW5nXCIsXG4gIGxlYXZpbmc6IFwibGVhdmluZ1wiLFxufVxuZXhwb3J0IGNvbnN0IENIQU5ORUxfRVZFTlRTID0ge1xuICBjbG9zZTogXCJwaHhfY2xvc2VcIixcbiAgZXJyb3I6IFwicGh4X2Vycm9yXCIsXG4gIGpvaW46IFwicGh4X2pvaW5cIixcbiAgcmVwbHk6IFwicGh4X3JlcGx5XCIsXG4gIGxlYXZlOiBcInBoeF9sZWF2ZVwiXG59XG5cbmV4cG9ydCBjb25zdCBUUkFOU1BPUlRTID0ge1xuICBsb25ncG9sbDogXCJsb25ncG9sbFwiLFxuICB3ZWJzb2NrZXQ6IFwid2Vic29ja2V0XCJcbn1cbmV4cG9ydCBjb25zdCBYSFJfU1RBVEVTID0ge1xuICBjb21wbGV0ZTogNFxufVxuIiwgIi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIFB1c2hcbiAqIEBwYXJhbSB7Q2hhbm5lbH0gY2hhbm5lbCAtIFRoZSBDaGFubmVsXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBUaGUgZXZlbnQsIGZvciBleGFtcGxlIGBcInBoeF9qb2luXCJgXG4gKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCAtIFRoZSBwYXlsb2FkLCBmb3IgZXhhbXBsZSBge3VzZXJfaWQ6IDEyM31gXG4gKiBAcGFyYW0ge251bWJlcn0gdGltZW91dCAtIFRoZSBwdXNoIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFB1c2gge1xuICBjb25zdHJ1Y3RvcihjaGFubmVsLCBldmVudCwgcGF5bG9hZCwgdGltZW91dCl7XG4gICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbFxuICAgIHRoaXMuZXZlbnQgPSBldmVudFxuICAgIHRoaXMucGF5bG9hZCA9IHBheWxvYWQgfHwgZnVuY3Rpb24gKCl7IHJldHVybiB7fSB9XG4gICAgdGhpcy5yZWNlaXZlZFJlc3AgPSBudWxsXG4gICAgdGhpcy50aW1lb3V0ID0gdGltZW91dFxuICAgIHRoaXMudGltZW91dFRpbWVyID0gbnVsbFxuICAgIHRoaXMucmVjSG9va3MgPSBbXVxuICAgIHRoaXMuc2VudCA9IGZhbHNlXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXRcbiAgICovXG4gIHJlc2VuZCh0aW1lb3V0KXtcbiAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgdGhpcy5yZXNldCgpXG4gICAgdGhpcy5zZW5kKClcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc2VuZCgpe1xuICAgIGlmKHRoaXMuaGFzUmVjZWl2ZWQoXCJ0aW1lb3V0XCIpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnN0YXJ0VGltZW91dCgpXG4gICAgdGhpcy5zZW50ID0gdHJ1ZVxuICAgIHRoaXMuY2hhbm5lbC5zb2NrZXQucHVzaCh7XG4gICAgICB0b3BpYzogdGhpcy5jaGFubmVsLnRvcGljLFxuICAgICAgZXZlbnQ6IHRoaXMuZXZlbnQsXG4gICAgICBwYXlsb2FkOiB0aGlzLnBheWxvYWQoKSxcbiAgICAgIHJlZjogdGhpcy5yZWYsXG4gICAgICBqb2luX3JlZjogdGhpcy5jaGFubmVsLmpvaW5SZWYoKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBzdGF0dXNcbiAgICogQHBhcmFtIHsqfSBjYWxsYmFja1xuICAgKi9cbiAgcmVjZWl2ZShzdGF0dXMsIGNhbGxiYWNrKXtcbiAgICBpZih0aGlzLmhhc1JlY2VpdmVkKHN0YXR1cykpe1xuICAgICAgY2FsbGJhY2sodGhpcy5yZWNlaXZlZFJlc3AucmVzcG9uc2UpXG4gICAgfVxuXG4gICAgdGhpcy5yZWNIb29rcy5wdXNoKHtzdGF0dXMsIGNhbGxiYWNrfSlcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXNldCgpe1xuICAgIHRoaXMuY2FuY2VsUmVmRXZlbnQoKVxuICAgIHRoaXMucmVmID0gbnVsbFxuICAgIHRoaXMucmVmRXZlbnQgPSBudWxsXG4gICAgdGhpcy5yZWNlaXZlZFJlc3AgPSBudWxsXG4gICAgdGhpcy5zZW50ID0gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbWF0Y2hSZWNlaXZlKHtzdGF0dXMsIHJlc3BvbnNlLCBfcmVmfSl7XG4gICAgdGhpcy5yZWNIb29rcy5maWx0ZXIoaCA9PiBoLnN0YXR1cyA9PT0gc3RhdHVzKVxuICAgICAgLmZvckVhY2goaCA9PiBoLmNhbGxiYWNrKHJlc3BvbnNlKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2FuY2VsUmVmRXZlbnQoKXtcbiAgICBpZighdGhpcy5yZWZFdmVudCl7IHJldHVybiB9XG4gICAgdGhpcy5jaGFubmVsLm9mZih0aGlzLnJlZkV2ZW50KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjYW5jZWxUaW1lb3V0KCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dFRpbWVyKVxuICAgIHRoaXMudGltZW91dFRpbWVyID0gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGFydFRpbWVvdXQoKXtcbiAgICBpZih0aGlzLnRpbWVvdXRUaW1lcil7IHRoaXMuY2FuY2VsVGltZW91dCgpIH1cbiAgICB0aGlzLnJlZiA9IHRoaXMuY2hhbm5lbC5zb2NrZXQubWFrZVJlZigpXG4gICAgdGhpcy5yZWZFdmVudCA9IHRoaXMuY2hhbm5lbC5yZXBseUV2ZW50TmFtZSh0aGlzLnJlZilcblxuICAgIHRoaXMuY2hhbm5lbC5vbih0aGlzLnJlZkV2ZW50LCBwYXlsb2FkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsUmVmRXZlbnQoKVxuICAgICAgdGhpcy5jYW5jZWxUaW1lb3V0KClcbiAgICAgIHRoaXMucmVjZWl2ZWRSZXNwID0gcGF5bG9hZFxuICAgICAgdGhpcy5tYXRjaFJlY2VpdmUocGF5bG9hZClcbiAgICB9KVxuXG4gICAgdGhpcy50aW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlcihcInRpbWVvdXRcIiwge30pXG4gICAgfSwgdGhpcy50aW1lb3V0KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYXNSZWNlaXZlZChzdGF0dXMpe1xuICAgIHJldHVybiB0aGlzLnJlY2VpdmVkUmVzcCAmJiB0aGlzLnJlY2VpdmVkUmVzcC5zdGF0dXMgPT09IHN0YXR1c1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyKHN0YXR1cywgcmVzcG9uc2Upe1xuICAgIHRoaXMuY2hhbm5lbC50cmlnZ2VyKHRoaXMucmVmRXZlbnQsIHtzdGF0dXMsIHJlc3BvbnNlfSlcbiAgfVxufVxuIiwgIi8qKlxuICpcbiAqIENyZWF0ZXMgYSB0aW1lciB0aGF0IGFjY2VwdHMgYSBgdGltZXJDYWxjYCBmdW5jdGlvbiB0byBwZXJmb3JtXG4gKiBjYWxjdWxhdGVkIHRpbWVvdXQgcmV0cmllcywgc3VjaCBhcyBleHBvbmVudGlhbCBiYWNrb2ZmLlxuICpcbiAqIEBleGFtcGxlXG4gKiBsZXQgcmVjb25uZWN0VGltZXIgPSBuZXcgVGltZXIoKCkgPT4gdGhpcy5jb25uZWN0KCksIGZ1bmN0aW9uKHRyaWVzKXtcbiAqICAgcmV0dXJuIFsxMDAwLCA1MDAwLCAxMDAwMF1bdHJpZXMgLSAxXSB8fCAxMDAwMFxuICogfSlcbiAqIHJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpIC8vIGZpcmVzIGFmdGVyIDEwMDBcbiAqIHJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpIC8vIGZpcmVzIGFmdGVyIDUwMDBcbiAqIHJlY29ubmVjdFRpbWVyLnJlc2V0KClcbiAqIHJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpIC8vIGZpcmVzIGFmdGVyIDEwMDBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHtGdW5jdGlvbn0gdGltZXJDYWxjXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbWVyIHtcbiAgY29uc3RydWN0b3IoY2FsbGJhY2ssIHRpbWVyQ2FsYyl7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrXG4gICAgdGhpcy50aW1lckNhbGMgPSB0aW1lckNhbGNcbiAgICB0aGlzLnRpbWVyID0gbnVsbFxuICAgIHRoaXMudHJpZXMgPSAwXG4gIH1cblxuICByZXNldCgpe1xuICAgIHRoaXMudHJpZXMgPSAwXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpXG4gIH1cblxuICAvKipcbiAgICogQ2FuY2VscyBhbnkgcHJldmlvdXMgc2NoZWR1bGVUaW1lb3V0IGFuZCBzY2hlZHVsZXMgY2FsbGJhY2tcbiAgICovXG4gIHNjaGVkdWxlVGltZW91dCgpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKVxuXG4gICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmllcyA9IHRoaXMudHJpZXMgKyAxXG4gICAgICB0aGlzLmNhbGxiYWNrKClcbiAgICB9LCB0aGlzLnRpbWVyQ2FsYyh0aGlzLnRyaWVzICsgMSkpXG4gIH1cbn1cbiIsICJpbXBvcnQge2Nsb3N1cmV9IGZyb20gXCIuL3V0aWxzXCJcbmltcG9ydCB7XG4gIENIQU5ORUxfRVZFTlRTLFxuICBDSEFOTkVMX1NUQVRFUyxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IFB1c2ggZnJvbSBcIi4vcHVzaFwiXG5pbXBvcnQgVGltZXIgZnJvbSBcIi4vdGltZXJcIlxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9waWNcbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbil9IHBhcmFtc1xuICogQHBhcmFtIHtTb2NrZXR9IHNvY2tldFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGFubmVsIHtcbiAgY29uc3RydWN0b3IodG9waWMsIHBhcmFtcywgc29ja2V0KXtcbiAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuY2xvc2VkXG4gICAgdGhpcy50b3BpYyA9IHRvcGljXG4gICAgdGhpcy5wYXJhbXMgPSBjbG9zdXJlKHBhcmFtcyB8fCB7fSlcbiAgICB0aGlzLnNvY2tldCA9IHNvY2tldFxuICAgIHRoaXMuYmluZGluZ3MgPSBbXVxuICAgIHRoaXMuYmluZGluZ1JlZiA9IDBcbiAgICB0aGlzLnRpbWVvdXQgPSB0aGlzLnNvY2tldC50aW1lb3V0XG4gICAgdGhpcy5qb2luZWRPbmNlID0gZmFsc2VcbiAgICB0aGlzLmpvaW5QdXNoID0gbmV3IFB1c2godGhpcywgQ0hBTk5FTF9FVkVOVFMuam9pbiwgdGhpcy5wYXJhbXMsIHRoaXMudGltZW91dClcbiAgICB0aGlzLnB1c2hCdWZmZXIgPSBbXVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VSZWZzID0gW11cblxuICAgIHRoaXMucmVqb2luVGltZXIgPSBuZXcgVGltZXIoKCkgPT4ge1xuICAgICAgaWYodGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMucmVqb2luKCkgfVxuICAgIH0sIHRoaXMuc29ja2V0LnJlam9pbkFmdGVyTXMpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZVJlZnMucHVzaCh0aGlzLnNvY2tldC5vbkVycm9yKCgpID0+IHRoaXMucmVqb2luVGltZXIucmVzZXQoKSkpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZVJlZnMucHVzaCh0aGlzLnNvY2tldC5vbk9wZW4oKCkgPT4ge1xuICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpXG4gICAgICBpZih0aGlzLmlzRXJyb3JlZCgpKXsgdGhpcy5yZWpvaW4oKSB9XG4gICAgfSlcbiAgICApXG4gICAgdGhpcy5qb2luUHVzaC5yZWNlaXZlKFwib2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmpvaW5lZFxuICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpXG4gICAgICB0aGlzLnB1c2hCdWZmZXIuZm9yRWFjaChwdXNoRXZlbnQgPT4gcHVzaEV2ZW50LnNlbmQoKSlcbiAgICAgIHRoaXMucHVzaEJ1ZmZlciA9IFtdXG4gICAgfSlcbiAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJlcnJvclwiLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZFxuICAgICAgaWYodGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMucmVqb2luVGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgfVxuICAgIH0pXG4gICAgdGhpcy5vbkNsb3NlKCgpID0+IHtcbiAgICAgIHRoaXMucmVqb2luVGltZXIucmVzZXQoKVxuICAgICAgaWYodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkpIHRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgYGNsb3NlICR7dGhpcy50b3BpY30gJHt0aGlzLmpvaW5SZWYoKX1gKVxuICAgICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmNsb3NlZFxuICAgICAgdGhpcy5zb2NrZXQucmVtb3ZlKHRoaXMpXG4gICAgfSlcbiAgICB0aGlzLm9uRXJyb3IocmVhc29uID0+IHtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIGBlcnJvciAke3RoaXMudG9waWN9YCwgcmVhc29uKVxuICAgICAgaWYodGhpcy5pc0pvaW5pbmcoKSl7IHRoaXMuam9pblB1c2gucmVzZXQoKSB9XG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZFxuICAgICAgaWYodGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMucmVqb2luVGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgfVxuICAgIH0pXG4gICAgdGhpcy5qb2luUHVzaC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiB7XG4gICAgICBpZih0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSkgdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBgdGltZW91dCAke3RoaXMudG9waWN9ICgke3RoaXMuam9pblJlZigpfSlgLCB0aGlzLmpvaW5QdXNoLnRpbWVvdXQpXG4gICAgICBsZXQgbGVhdmVQdXNoID0gbmV3IFB1c2godGhpcywgQ0hBTk5FTF9FVkVOVFMubGVhdmUsIGNsb3N1cmUoe30pLCB0aGlzLnRpbWVvdXQpXG4gICAgICBsZWF2ZVB1c2guc2VuZCgpXG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZFxuICAgICAgdGhpcy5qb2luUHVzaC5yZXNldCgpXG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKSB9XG4gICAgfSlcbiAgICB0aGlzLm9uKENIQU5ORUxfRVZFTlRTLnJlcGx5LCAocGF5bG9hZCwgcmVmKSA9PiB7XG4gICAgICB0aGlzLnRyaWdnZXIodGhpcy5yZXBseUV2ZW50TmFtZShyZWYpLCBwYXlsb2FkKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogSm9pbiB0aGUgY2hhbm5lbFxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHRpbWVvdXRcbiAgICogQHJldHVybnMge1B1c2h9XG4gICAqL1xuICBqb2luKHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIGlmKHRoaXMuam9pbmVkT25jZSl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cmllZCB0byBqb2luIG11bHRpcGxlIHRpbWVzLiAnam9pbicgY2FuIG9ubHkgYmUgY2FsbGVkIGEgc2luZ2xlIHRpbWUgcGVyIGNoYW5uZWwgaW5zdGFuY2VcIilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50aW1lb3V0ID0gdGltZW91dFxuICAgICAgdGhpcy5qb2luZWRPbmNlID0gdHJ1ZVxuICAgICAgdGhpcy5yZWpvaW4oKVxuICAgICAgcmV0dXJuIHRoaXMuam9pblB1c2hcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSG9vayBpbnRvIGNoYW5uZWwgY2xvc2VcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uQ2xvc2UoY2FsbGJhY2spe1xuICAgIHRoaXMub24oQ0hBTk5FTF9FVkVOVFMuY2xvc2UsIGNhbGxiYWNrKVxuICB9XG5cbiAgLyoqXG4gICAqIEhvb2sgaW50byBjaGFubmVsIGVycm9yc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25FcnJvcihjYWxsYmFjayl7XG4gICAgcmV0dXJuIHRoaXMub24oQ0hBTk5FTF9FVkVOVFMuZXJyb3IsIHJlYXNvbiA9PiBjYWxsYmFjayhyZWFzb24pKVxuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZXMgb24gY2hhbm5lbCBldmVudHNcbiAgICpcbiAgICogU3Vic2NyaXB0aW9uIHJldHVybnMgYSByZWYgY291bnRlciwgd2hpY2ggY2FuIGJlIHVzZWQgbGF0ZXIgdG9cbiAgICogdW5zdWJzY3JpYmUgdGhlIGV4YWN0IGV2ZW50IGxpc3RlbmVyXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IHJlZjEgPSBjaGFubmVsLm9uKFwiZXZlbnRcIiwgZG9fc3R1ZmYpXG4gICAqIGNvbnN0IHJlZjIgPSBjaGFubmVsLm9uKFwiZXZlbnRcIiwgZG9fb3RoZXJfc3R1ZmYpXG4gICAqIGNoYW5uZWwub2ZmKFwiZXZlbnRcIiwgcmVmMSlcbiAgICogLy8gU2luY2UgdW5zdWJzY3JpcHRpb24sIGRvX3N0dWZmIHdvbid0IGZpcmUsXG4gICAqIC8vIHdoaWxlIGRvX290aGVyX3N0dWZmIHdpbGwga2VlcCBmaXJpbmcgb24gdGhlIFwiZXZlbnRcIlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICogQHJldHVybnMge2ludGVnZXJ9IHJlZlxuICAgKi9cbiAgb24oZXZlbnQsIGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5iaW5kaW5nUmVmKytcbiAgICB0aGlzLmJpbmRpbmdzLnB1c2goe2V2ZW50LCByZWYsIGNhbGxiYWNrfSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogVW5zdWJzY3JpYmVzIG9mZiBvZiBjaGFubmVsIGV2ZW50c1xuICAgKlxuICAgKiBVc2UgdGhlIHJlZiByZXR1cm5lZCBmcm9tIGEgY2hhbm5lbC5vbigpIHRvIHVuc3Vic2NyaWJlIG9uZVxuICAgKiBoYW5kbGVyLCBvciBwYXNzIG5vdGhpbmcgZm9yIHRoZSByZWYgdG8gdW5zdWJzY3JpYmUgYWxsXG4gICAqIGhhbmRsZXJzIGZvciB0aGUgZ2l2ZW4gZXZlbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIFVuc3Vic2NyaWJlIHRoZSBkb19zdHVmZiBoYW5kbGVyXG4gICAqIGNvbnN0IHJlZjEgPSBjaGFubmVsLm9uKFwiZXZlbnRcIiwgZG9fc3R1ZmYpXG4gICAqIGNoYW5uZWwub2ZmKFwiZXZlbnRcIiwgcmVmMSlcbiAgICpcbiAgICogLy8gVW5zdWJzY3JpYmUgYWxsIGhhbmRsZXJzIGZyb20gZXZlbnRcbiAgICogY2hhbm5lbC5vZmYoXCJldmVudFwiKVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtpbnRlZ2VyfSByZWZcbiAgICovXG4gIG9mZihldmVudCwgcmVmKXtcbiAgICB0aGlzLmJpbmRpbmdzID0gdGhpcy5iaW5kaW5ncy5maWx0ZXIoKGJpbmQpID0+IHtcbiAgICAgIHJldHVybiAhKGJpbmQuZXZlbnQgPT09IGV2ZW50ICYmICh0eXBlb2YgcmVmID09PSBcInVuZGVmaW5lZFwiIHx8IHJlZiA9PT0gYmluZC5yZWYpKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNhblB1c2goKXsgcmV0dXJuIHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkgJiYgdGhpcy5pc0pvaW5lZCgpIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIGBldmVudGAgdG8gcGhvZW5peCB3aXRoIHRoZSBwYXlsb2FkIGBwYXlsb2FkYC5cbiAgICogUGhvZW5peCByZWNlaXZlcyB0aGlzIGluIHRoZSBgaGFuZGxlX2luKGV2ZW50LCBwYXlsb2FkLCBzb2NrZXQpYFxuICAgKiBmdW5jdGlvbi4gaWYgcGhvZW5peCByZXBsaWVzIG9yIGl0IHRpbWVzIG91dCAoZGVmYXVsdCAxMDAwMG1zKSxcbiAgICogdGhlbiBvcHRpb25hbGx5IHRoZSByZXBseSBjYW4gYmUgcmVjZWl2ZWQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNoYW5uZWwucHVzaChcImV2ZW50XCIpXG4gICAqICAgLnJlY2VpdmUoXCJva1wiLCBwYXlsb2FkID0+IGNvbnNvbGUubG9nKFwicGhvZW5peCByZXBsaWVkOlwiLCBwYXlsb2FkKSlcbiAgICogICAucmVjZWl2ZShcImVycm9yXCIsIGVyciA9PiBjb25zb2xlLmxvZyhcInBob2VuaXggZXJyb3JlZFwiLCBlcnIpKVxuICAgKiAgIC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiBjb25zb2xlLmxvZyhcInRpbWVkIG91dCBwdXNoaW5nXCIpKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFt0aW1lb3V0XVxuICAgKiBAcmV0dXJucyB7UHVzaH1cbiAgICovXG4gIHB1c2goZXZlbnQsIHBheWxvYWQsIHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIHBheWxvYWQgPSBwYXlsb2FkIHx8IHt9XG4gICAgaWYoIXRoaXMuam9pbmVkT25jZSl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHRyaWVkIHRvIHB1c2ggJyR7ZXZlbnR9JyB0byAnJHt0aGlzLnRvcGljfScgYmVmb3JlIGpvaW5pbmcuIFVzZSBjaGFubmVsLmpvaW4oKSBiZWZvcmUgcHVzaGluZyBldmVudHNgKVxuICAgIH1cbiAgICBsZXQgcHVzaEV2ZW50ID0gbmV3IFB1c2godGhpcywgZXZlbnQsIGZ1bmN0aW9uICgpeyByZXR1cm4gcGF5bG9hZCB9LCB0aW1lb3V0KVxuICAgIGlmKHRoaXMuY2FuUHVzaCgpKXtcbiAgICAgIHB1c2hFdmVudC5zZW5kKClcbiAgICB9IGVsc2Uge1xuICAgICAgcHVzaEV2ZW50LnN0YXJ0VGltZW91dCgpXG4gICAgICB0aGlzLnB1c2hCdWZmZXIucHVzaChwdXNoRXZlbnQpXG4gICAgfVxuXG4gICAgcmV0dXJuIHB1c2hFdmVudFxuICB9XG5cbiAgLyoqIExlYXZlcyB0aGUgY2hhbm5lbFxuICAgKlxuICAgKiBVbnN1YnNjcmliZXMgZnJvbSBzZXJ2ZXIgZXZlbnRzLCBhbmRcbiAgICogaW5zdHJ1Y3RzIGNoYW5uZWwgdG8gdGVybWluYXRlIG9uIHNlcnZlclxuICAgKlxuICAgKiBUcmlnZ2VycyBvbkNsb3NlKCkgaG9va3NcbiAgICpcbiAgICogVG8gcmVjZWl2ZSBsZWF2ZSBhY2tub3dsZWRnZW1lbnRzLCB1c2UgdGhlIGByZWNlaXZlYFxuICAgKiBob29rIHRvIGJpbmQgdG8gdGhlIHNlcnZlciBhY2ssIGllOlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjaGFubmVsLmxlYXZlKCkucmVjZWl2ZShcIm9rXCIsICgpID0+IGFsZXJ0KFwibGVmdCFcIikgKVxuICAgKlxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHRpbWVvdXRcbiAgICogQHJldHVybnMge1B1c2h9XG4gICAqL1xuICBsZWF2ZSh0aW1lb3V0ID0gdGhpcy50aW1lb3V0KXtcbiAgICB0aGlzLnJlam9pblRpbWVyLnJlc2V0KClcbiAgICB0aGlzLmpvaW5QdXNoLmNhbmNlbFRpbWVvdXQoKVxuXG4gICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmxlYXZpbmdcbiAgICBsZXQgb25DbG9zZSA9ICgpID0+IHtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIGBsZWF2ZSAke3RoaXMudG9waWN9YClcbiAgICAgIHRoaXMudHJpZ2dlcihDSEFOTkVMX0VWRU5UUy5jbG9zZSwgXCJsZWF2ZVwiKVxuICAgIH1cbiAgICBsZXQgbGVhdmVQdXNoID0gbmV3IFB1c2godGhpcywgQ0hBTk5FTF9FVkVOVFMubGVhdmUsIGNsb3N1cmUoe30pLCB0aW1lb3V0KVxuICAgIGxlYXZlUHVzaC5yZWNlaXZlKFwib2tcIiwgKCkgPT4gb25DbG9zZSgpKVxuICAgICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IG9uQ2xvc2UoKSlcbiAgICBsZWF2ZVB1c2guc2VuZCgpXG4gICAgaWYoIXRoaXMuY2FuUHVzaCgpKXsgbGVhdmVQdXNoLnRyaWdnZXIoXCJva1wiLCB7fSkgfVxuXG4gICAgcmV0dXJuIGxlYXZlUHVzaFxuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRhYmxlIG1lc3NhZ2UgaG9va1xuICAgKlxuICAgKiBSZWNlaXZlcyBhbGwgZXZlbnRzIGZvciBzcGVjaWFsaXplZCBtZXNzYWdlIGhhbmRsaW5nXG4gICAqIGJlZm9yZSBkaXNwYXRjaGluZyB0byB0aGUgY2hhbm5lbCBjYWxsYmFja3MuXG4gICAqXG4gICAqIE11c3QgcmV0dXJuIHRoZSBwYXlsb2FkLCBtb2RpZmllZCBvciB1bm1vZGlmaWVkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZFxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHJlZlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgb25NZXNzYWdlKF9ldmVudCwgcGF5bG9hZCwgX3JlZil7IHJldHVybiBwYXlsb2FkIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzTWVtYmVyKHRvcGljLCBldmVudCwgcGF5bG9hZCwgam9pblJlZil7XG4gICAgaWYodGhpcy50b3BpYyAhPT0gdG9waWMpeyByZXR1cm4gZmFsc2UgfVxuXG4gICAgaWYoam9pblJlZiAmJiBqb2luUmVmICE9PSB0aGlzLmpvaW5SZWYoKSl7XG4gICAgICBpZih0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSkgdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBcImRyb3BwaW5nIG91dGRhdGVkIG1lc3NhZ2VcIiwge3RvcGljLCBldmVudCwgcGF5bG9hZCwgam9pblJlZn0pXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGpvaW5SZWYoKXsgcmV0dXJuIHRoaXMuam9pblB1c2gucmVmIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlam9pbih0aW1lb3V0ID0gdGhpcy50aW1lb3V0KXtcbiAgICBpZih0aGlzLmlzTGVhdmluZygpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnNvY2tldC5sZWF2ZU9wZW5Ub3BpYyh0aGlzLnRvcGljKVxuICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5qb2luaW5nXG4gICAgdGhpcy5qb2luUHVzaC5yZXNlbmQodGltZW91dClcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdHJpZ2dlcihldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luUmVmKXtcbiAgICBsZXQgaGFuZGxlZFBheWxvYWQgPSB0aGlzLm9uTWVzc2FnZShldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luUmVmKVxuICAgIGlmKHBheWxvYWQgJiYgIWhhbmRsZWRQYXlsb2FkKXsgdGhyb3cgbmV3IEVycm9yKFwiY2hhbm5lbCBvbk1lc3NhZ2UgY2FsbGJhY2tzIG11c3QgcmV0dXJuIHRoZSBwYXlsb2FkLCBtb2RpZmllZCBvciB1bm1vZGlmaWVkXCIpIH1cblxuICAgIGxldCBldmVudEJpbmRpbmdzID0gdGhpcy5iaW5kaW5ncy5maWx0ZXIoYmluZCA9PiBiaW5kLmV2ZW50ID09PSBldmVudClcblxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBldmVudEJpbmRpbmdzLmxlbmd0aDsgaSsrKXtcbiAgICAgIGxldCBiaW5kID0gZXZlbnRCaW5kaW5nc1tpXVxuICAgICAgYmluZC5jYWxsYmFjayhoYW5kbGVkUGF5bG9hZCwgcmVmLCBqb2luUmVmIHx8IHRoaXMuam9pblJlZigpKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVwbHlFdmVudE5hbWUocmVmKXsgcmV0dXJuIGBjaGFuX3JlcGx5XyR7cmVmfWAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNDbG9zZWQoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmNsb3NlZCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0Vycm9yZWQoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmVycm9yZWQgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNKb2luZWQoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmpvaW5lZCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0pvaW5pbmcoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmpvaW5pbmcgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNMZWF2aW5nKCl7IHJldHVybiB0aGlzLnN0YXRlID09PSBDSEFOTkVMX1NUQVRFUy5sZWF2aW5nIH1cbn1cbiIsICJpbXBvcnQge1xuICBnbG9iYWwsXG4gIFhIUl9TVEFURVNcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWpheCB7XG5cbiAgc3RhdGljIHJlcXVlc3QobWV0aG9kLCBlbmRQb2ludCwgYWNjZXB0LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICBpZihnbG9iYWwuWERvbWFpblJlcXVlc3Qpe1xuICAgICAgbGV0IHJlcSA9IG5ldyBnbG9iYWwuWERvbWFpblJlcXVlc3QoKSAvLyBJRTgsIElFOVxuICAgICAgcmV0dXJuIHRoaXMueGRvbWFpblJlcXVlc3QocmVxLCBtZXRob2QsIGVuZFBvaW50LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgcmVxID0gbmV3IGdsb2JhbC5YTUxIdHRwUmVxdWVzdCgpIC8vIElFNyssIEZpcmVmb3gsIENocm9tZSwgT3BlcmEsIFNhZmFyaVxuICAgICAgcmV0dXJuIHRoaXMueGhyUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGFjY2VwdCwgYm9keSwgdGltZW91dCwgb250aW1lb3V0LCBjYWxsYmFjaylcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgeGRvbWFpblJlcXVlc3QocmVxLCBtZXRob2QsIGVuZFBvaW50LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICByZXEudGltZW91dCA9IHRpbWVvdXRcbiAgICByZXEub3BlbihtZXRob2QsIGVuZFBvaW50KVxuICAgIHJlcS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSB0aGlzLnBhcnNlSlNPTihyZXEucmVzcG9uc2VUZXh0KVxuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcG9uc2UpXG4gICAgfVxuICAgIGlmKG9udGltZW91dCl7IHJlcS5vbnRpbWVvdXQgPSBvbnRpbWVvdXQgfVxuXG4gICAgLy8gV29yayBhcm91bmQgYnVnIGluIElFOSB0aGF0IHJlcXVpcmVzIGFuIGF0dGFjaGVkIG9ucHJvZ3Jlc3MgaGFuZGxlclxuICAgIHJlcS5vbnByb2dyZXNzID0gKCkgPT4geyB9XG5cbiAgICByZXEuc2VuZChib2R5KVxuICAgIHJldHVybiByZXFcbiAgfVxuXG4gIHN0YXRpYyB4aHJSZXF1ZXN0KHJlcSwgbWV0aG9kLCBlbmRQb2ludCwgYWNjZXB0LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICByZXEub3BlbihtZXRob2QsIGVuZFBvaW50LCB0cnVlKVxuICAgIHJlcS50aW1lb3V0ID0gdGltZW91dFxuICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIGFjY2VwdClcbiAgICByZXEub25lcnJvciA9ICgpID0+IGNhbGxiYWNrICYmIGNhbGxiYWNrKG51bGwpXG4gICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmKHJlcS5yZWFkeVN0YXRlID09PSBYSFJfU1RBVEVTLmNvbXBsZXRlICYmIGNhbGxiYWNrKXtcbiAgICAgICAgbGV0IHJlc3BvbnNlID0gdGhpcy5wYXJzZUpTT04ocmVxLnJlc3BvbnNlVGV4dClcbiAgICAgICAgY2FsbGJhY2socmVzcG9uc2UpXG4gICAgICB9XG4gICAgfVxuICAgIGlmKG9udGltZW91dCl7IHJlcS5vbnRpbWVvdXQgPSBvbnRpbWVvdXQgfVxuXG4gICAgcmVxLnNlbmQoYm9keSlcbiAgICByZXR1cm4gcmVxXG4gIH1cblxuICBzdGF0aWMgcGFyc2VKU09OKHJlc3Ape1xuICAgIGlmKCFyZXNwIHx8IHJlc3AgPT09IFwiXCIpeyByZXR1cm4gbnVsbCB9XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UocmVzcClcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coXCJmYWlsZWQgdG8gcGFyc2UgSlNPTiByZXNwb25zZVwiLCByZXNwKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgc2VyaWFsaXplKG9iaiwgcGFyZW50S2V5KXtcbiAgICBsZXQgcXVlcnlTdHIgPSBbXVxuICAgIGZvcih2YXIga2V5IGluIG9iail7XG4gICAgICBpZighT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSl7IGNvbnRpbnVlIH1cbiAgICAgIGxldCBwYXJhbUtleSA9IHBhcmVudEtleSA/IGAke3BhcmVudEtleX1bJHtrZXl9XWAgOiBrZXlcbiAgICAgIGxldCBwYXJhbVZhbCA9IG9ialtrZXldXG4gICAgICBpZih0eXBlb2YgcGFyYW1WYWwgPT09IFwib2JqZWN0XCIpe1xuICAgICAgICBxdWVyeVN0ci5wdXNoKHRoaXMuc2VyaWFsaXplKHBhcmFtVmFsLCBwYXJhbUtleSkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBxdWVyeVN0ci5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChwYXJhbUtleSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbVZhbCkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBxdWVyeVN0ci5qb2luKFwiJlwiKVxuICB9XG5cbiAgc3RhdGljIGFwcGVuZFBhcmFtcyh1cmwsIHBhcmFtcyl7XG4gICAgaWYoT2JqZWN0LmtleXMocGFyYW1zKS5sZW5ndGggPT09IDApeyByZXR1cm4gdXJsIH1cblxuICAgIGxldCBwcmVmaXggPSB1cmwubWF0Y2goL1xcPy8pID8gXCImXCIgOiBcIj9cIlxuICAgIHJldHVybiBgJHt1cmx9JHtwcmVmaXh9JHt0aGlzLnNlcmlhbGl6ZShwYXJhbXMpfWBcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFNPQ0tFVF9TVEFURVMsXG4gIFRSQU5TUE9SVFNcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IEFqYXggZnJvbSBcIi4vYWpheFwiXG5cbmxldCBhcnJheUJ1ZmZlclRvQmFzZTY0ID0gKGJ1ZmZlcikgPT4ge1xuICBsZXQgYmluYXJ5ID0gXCJcIlxuICBsZXQgYnl0ZXMgPSBuZXcgVWludDhBcnJheShidWZmZXIpXG4gIGxldCBsZW4gPSBieXRlcy5ieXRlTGVuZ3RoXG4gIGZvcihsZXQgaSA9IDA7IGkgPCBsZW47IGkrKyl7IGJpbmFyeSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldKSB9XG4gIHJldHVybiBidG9hKGJpbmFyeSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9uZ1BvbGwge1xuXG4gIGNvbnN0cnVjdG9yKGVuZFBvaW50KXtcbiAgICB0aGlzLmVuZFBvaW50ID0gbnVsbFxuICAgIHRoaXMudG9rZW4gPSBudWxsXG4gICAgdGhpcy5za2lwSGVhcnRiZWF0ID0gdHJ1ZVxuICAgIHRoaXMucmVxcyA9IG5ldyBTZXQoKVxuICAgIHRoaXMuYXdhaXRpbmdCYXRjaEFjayA9IGZhbHNlXG4gICAgdGhpcy5jdXJyZW50QmF0Y2ggPSBudWxsXG4gICAgdGhpcy5jdXJyZW50QmF0Y2hUaW1lciA9IG51bGxcbiAgICB0aGlzLmJhdGNoQnVmZmVyID0gW11cbiAgICB0aGlzLm9ub3BlbiA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICB0aGlzLm9uZXJyb3IgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbmNsb3NlID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgIHRoaXMucG9sbEVuZHBvaW50ID0gdGhpcy5ub3JtYWxpemVFbmRwb2ludChlbmRQb2ludClcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmdcbiAgICB0aGlzLnBvbGwoKVxuICB9XG5cbiAgbm9ybWFsaXplRW5kcG9pbnQoZW5kUG9pbnQpe1xuICAgIHJldHVybiAoZW5kUG9pbnRcbiAgICAgIC5yZXBsYWNlKFwid3M6Ly9cIiwgXCJodHRwOi8vXCIpXG4gICAgICAucmVwbGFjZShcIndzczovL1wiLCBcImh0dHBzOi8vXCIpXG4gICAgICAucmVwbGFjZShuZXcgUmVnRXhwKFwiKC4qKVxcL1wiICsgVFJBTlNQT1JUUy53ZWJzb2NrZXQpLCBcIiQxL1wiICsgVFJBTlNQT1JUUy5sb25ncG9sbCkpXG4gIH1cblxuICBlbmRwb2ludFVSTCgpe1xuICAgIHJldHVybiBBamF4LmFwcGVuZFBhcmFtcyh0aGlzLnBvbGxFbmRwb2ludCwge3Rva2VuOiB0aGlzLnRva2VufSlcbiAgfVxuXG4gIGNsb3NlQW5kUmV0cnkoY29kZSwgcmVhc29uLCB3YXNDbGVhbil7XG4gICAgdGhpcy5jbG9zZShjb2RlLCByZWFzb24sIHdhc0NsZWFuKVxuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNPQ0tFVF9TVEFURVMuY29ubmVjdGluZ1xuICB9XG5cbiAgb250aW1lb3V0KCl7XG4gICAgdGhpcy5vbmVycm9yKFwidGltZW91dFwiKVxuICAgIHRoaXMuY2xvc2VBbmRSZXRyeSgxMDA1LCBcInRpbWVvdXRcIiwgZmFsc2UpXG4gIH1cblxuICBpc0FjdGl2ZSgpeyByZXR1cm4gdGhpcy5yZWFkeVN0YXRlID09PSBTT0NLRVRfU1RBVEVTLm9wZW4gfHwgdGhpcy5yZWFkeVN0YXRlID09PSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmcgfVxuXG4gIHBvbGwoKXtcbiAgICB0aGlzLmFqYXgoXCJHRVRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIG51bGwsICgpID0+IHRoaXMub250aW1lb3V0KCksIHJlc3AgPT4ge1xuICAgICAgaWYocmVzcCl7XG4gICAgICAgIHZhciB7c3RhdHVzLCB0b2tlbiwgbWVzc2FnZXN9ID0gcmVzcFxuICAgICAgICB0aGlzLnRva2VuID0gdG9rZW5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXR1cyA9IDBcbiAgICAgIH1cblxuICAgICAgc3dpdGNoKHN0YXR1cyl7XG4gICAgICAgIGNhc2UgMjAwOlxuICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2gobXNnID0+IHtcbiAgICAgICAgICAgIC8vIFRhc2tzIGFyZSB3aGF0IHRoaW5ncyBsaWtlIGV2ZW50IGhhbmRsZXJzLCBzZXRUaW1lb3V0IGNhbGxiYWNrcyxcbiAgICAgICAgICAgIC8vIHByb21pc2UgcmVzb2x2ZXMgYW5kIG1vcmUgYXJlIHJ1biB3aXRoaW4uXG4gICAgICAgICAgICAvLyBJbiBtb2Rlcm4gYnJvd3NlcnMsIHRoZXJlIGFyZSB0d28gZGlmZmVyZW50IGtpbmRzIG9mIHRhc2tzLFxuICAgICAgICAgICAgLy8gbWljcm90YXNrcyBhbmQgbWFjcm90YXNrcy5cbiAgICAgICAgICAgIC8vIE1pY3JvdGFza3MgYXJlIG1haW5seSB1c2VkIGZvciBQcm9taXNlcywgd2hpbGUgbWFjcm90YXNrcyBhcmVcbiAgICAgICAgICAgIC8vIHVzZWQgZm9yIGV2ZXJ5dGhpbmcgZWxzZS5cbiAgICAgICAgICAgIC8vIE1pY3JvdGFza3MgYWx3YXlzIGhhdmUgcHJpb3JpdHkgb3ZlciBtYWNyb3Rhc2tzLiBJZiB0aGUgSlMgZW5naW5lXG4gICAgICAgICAgICAvLyBpcyBsb29raW5nIGZvciBhIHRhc2sgdG8gcnVuLCBpdCB3aWxsIGFsd2F5cyB0cnkgdG8gZW1wdHkgdGhlXG4gICAgICAgICAgICAvLyBtaWNyb3Rhc2sgcXVldWUgYmVmb3JlIGF0dGVtcHRpbmcgdG8gcnVuIGFueXRoaW5nIGZyb20gdGhlXG4gICAgICAgICAgICAvLyBtYWNyb3Rhc2sgcXVldWUuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gRm9yIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0LCBtZXNzYWdlcyBhbHdheXMgYXJyaXZlIGluIHRoZWlyIG93blxuICAgICAgICAgICAgLy8gZXZlbnQuIFRoaXMgbWVhbnMgdGhhdCBpZiBhbnkgcHJvbWlzZXMgYXJlIHJlc29sdmVkIGZyb20gd2l0aGluLFxuICAgICAgICAgICAgLy8gdGhlaXIgY2FsbGJhY2tzIHdpbGwgYWx3YXlzIGZpbmlzaCBleGVjdXRpb24gYnkgdGhlIHRpbWUgdGhlXG4gICAgICAgICAgICAvLyBuZXh0IG1lc3NhZ2UgZXZlbnQgaGFuZGxlciBpcyBydW4uXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gSW4gb3JkZXIgdG8gZW11bGF0ZSB0aGlzIGJlaGF2aW91ciwgd2UgbmVlZCB0byBtYWtlIHN1cmUgZWFjaFxuICAgICAgICAgICAgLy8gb25tZXNzYWdlIGhhbmRsZXIgaXMgcnVuIHdpdGhpbiBpdHMgb3duIG1hY3JvdGFzay5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5vbm1lc3NhZ2Uoe2RhdGE6IG1zZ30pLCAwKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5wb2xsKClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDIwNDpcbiAgICAgICAgICB0aGlzLnBvbGwoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDEwOlxuICAgICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNPQ0tFVF9TVEFURVMub3BlblxuICAgICAgICAgIHRoaXMub25vcGVuKHt9KVxuICAgICAgICAgIHRoaXMucG9sbCgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0MDM6XG4gICAgICAgICAgdGhpcy5vbmVycm9yKDQwMylcbiAgICAgICAgICB0aGlzLmNsb3NlKDEwMDgsIFwiZm9yYmlkZGVuXCIsIGZhbHNlKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSA1MDA6XG4gICAgICAgICAgdGhpcy5vbmVycm9yKDUwMClcbiAgICAgICAgICB0aGlzLmNsb3NlQW5kUmV0cnkoMTAxMSwgXCJpbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiwgNTAwKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihgdW5oYW5kbGVkIHBvbGwgc3RhdHVzICR7c3RhdHVzfWApXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIHdlIGNvbGxlY3QgYWxsIHB1c2hlcyB3aXRoaW4gdGhlIGN1cnJlbnQgZXZlbnQgbG9vcCBieVxuICAvLyBzZXRUaW1lb3V0IDAsIHdoaWNoIG9wdGltaXplcyBiYWNrLXRvLWJhY2sgcHJvY2VkdXJhbFxuICAvLyBwdXNoZXMgYWdhaW5zdCBhbiBlbXB0eSBidWZmZXJcblxuICBzZW5kKGJvZHkpe1xuICAgIGlmKHR5cGVvZihib2R5KSAhPT0gXCJzdHJpbmdcIil7IGJvZHkgPSBhcnJheUJ1ZmZlclRvQmFzZTY0KGJvZHkpIH1cbiAgICBpZih0aGlzLmN1cnJlbnRCYXRjaCl7XG4gICAgICB0aGlzLmN1cnJlbnRCYXRjaC5wdXNoKGJvZHkpXG4gICAgfSBlbHNlIGlmKHRoaXMuYXdhaXRpbmdCYXRjaEFjayl7XG4gICAgICB0aGlzLmJhdGNoQnVmZmVyLnB1c2goYm9keSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50QmF0Y2ggPSBbYm9keV1cbiAgICAgIHRoaXMuY3VycmVudEJhdGNoVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5iYXRjaFNlbmQodGhpcy5jdXJyZW50QmF0Y2gpXG4gICAgICAgIHRoaXMuY3VycmVudEJhdGNoID0gbnVsbFxuICAgICAgfSwgMClcbiAgICB9XG4gIH1cblxuICBiYXRjaFNlbmQobWVzc2FnZXMpe1xuICAgIHRoaXMuYXdhaXRpbmdCYXRjaEFjayA9IHRydWVcbiAgICB0aGlzLmFqYXgoXCJQT1NUXCIsIFwiYXBwbGljYXRpb24veC1uZGpzb25cIiwgbWVzc2FnZXMuam9pbihcIlxcblwiKSwgKCkgPT4gdGhpcy5vbmVycm9yKFwidGltZW91dFwiKSwgcmVzcCA9PiB7XG4gICAgICB0aGlzLmF3YWl0aW5nQmF0Y2hBY2sgPSBmYWxzZVxuICAgICAgaWYoIXJlc3AgfHwgcmVzcC5zdGF0dXMgIT09IDIwMCl7XG4gICAgICAgIHRoaXMub25lcnJvcihyZXNwICYmIHJlc3Auc3RhdHVzKVxuICAgICAgICB0aGlzLmNsb3NlQW5kUmV0cnkoMTAxMSwgXCJpbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiwgZmFsc2UpXG4gICAgICB9IGVsc2UgaWYodGhpcy5iYXRjaEJ1ZmZlci5sZW5ndGggPiAwKXtcbiAgICAgICAgdGhpcy5iYXRjaFNlbmQodGhpcy5iYXRjaEJ1ZmZlcilcbiAgICAgICAgdGhpcy5iYXRjaEJ1ZmZlciA9IFtdXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNsb3NlKGNvZGUsIHJlYXNvbiwgd2FzQ2xlYW4pe1xuICAgIGZvcihsZXQgcmVxIG9mIHRoaXMucmVxcyl7IHJlcS5hYm9ydCgpIH1cbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNsb3NlZFxuICAgIGxldCBvcHRzID0gT2JqZWN0LmFzc2lnbih7Y29kZTogMTAwMCwgcmVhc29uOiB1bmRlZmluZWQsIHdhc0NsZWFuOiB0cnVlfSwge2NvZGUsIHJlYXNvbiwgd2FzQ2xlYW59KVxuICAgIHRoaXMuYmF0Y2hCdWZmZXIgPSBbXVxuICAgIGNsZWFyVGltZW91dCh0aGlzLmN1cnJlbnRCYXRjaFRpbWVyKVxuICAgIHRoaXMuY3VycmVudEJhdGNoVGltZXIgPSBudWxsXG4gICAgaWYodHlwZW9mKENsb3NlRXZlbnQpICE9PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgIHRoaXMub25jbG9zZShuZXcgQ2xvc2VFdmVudChcImNsb3NlXCIsIG9wdHMpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uY2xvc2Uob3B0cylcbiAgICB9XG4gIH1cblxuICBhamF4KG1ldGhvZCwgY29udGVudFR5cGUsIGJvZHksIG9uQ2FsbGVyVGltZW91dCwgY2FsbGJhY2spe1xuICAgIGxldCByZXFcbiAgICBsZXQgb250aW1lb3V0ID0gKCkgPT4ge1xuICAgICAgdGhpcy5yZXFzLmRlbGV0ZShyZXEpXG4gICAgICBvbkNhbGxlclRpbWVvdXQoKVxuICAgIH1cbiAgICByZXEgPSBBamF4LnJlcXVlc3QobWV0aG9kLCB0aGlzLmVuZHBvaW50VVJMKCksIGNvbnRlbnRUeXBlLCBib2R5LCB0aGlzLnRpbWVvdXQsIG9udGltZW91dCwgcmVzcCA9PiB7XG4gICAgICB0aGlzLnJlcXMuZGVsZXRlKHJlcSlcbiAgICAgIGlmKHRoaXMuaXNBY3RpdmUoKSl7IGNhbGxiYWNrKHJlc3ApIH1cbiAgICB9KVxuICAgIHRoaXMucmVxcy5hZGQocmVxKVxuICB9XG59XG4iLCAiLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgUHJlc2VuY2VcbiAqIEBwYXJhbSB7Q2hhbm5lbH0gY2hhbm5lbCAtIFRoZSBDaGFubmVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIFRoZSBvcHRpb25zLFxuICogICAgICAgIGZvciBleGFtcGxlIGB7ZXZlbnRzOiB7c3RhdGU6IFwic3RhdGVcIiwgZGlmZjogXCJkaWZmXCJ9fWBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJlc2VuY2Uge1xuXG4gIGNvbnN0cnVjdG9yKGNoYW5uZWwsIG9wdHMgPSB7fSl7XG4gICAgbGV0IGV2ZW50cyA9IG9wdHMuZXZlbnRzIHx8IHtzdGF0ZTogXCJwcmVzZW5jZV9zdGF0ZVwiLCBkaWZmOiBcInByZXNlbmNlX2RpZmZcIn1cbiAgICB0aGlzLnN0YXRlID0ge31cbiAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbFxuICAgIHRoaXMuam9pblJlZiA9IG51bGxcbiAgICB0aGlzLmNhbGxlciA9IHtcbiAgICAgIG9uSm9pbjogZnVuY3Rpb24gKCl7IH0sXG4gICAgICBvbkxlYXZlOiBmdW5jdGlvbiAoKXsgfSxcbiAgICAgIG9uU3luYzogZnVuY3Rpb24gKCl7IH1cbiAgICB9XG5cbiAgICB0aGlzLmNoYW5uZWwub24oZXZlbnRzLnN0YXRlLCBuZXdTdGF0ZSA9PiB7XG4gICAgICBsZXQge29uSm9pbiwgb25MZWF2ZSwgb25TeW5jfSA9IHRoaXMuY2FsbGVyXG5cbiAgICAgIHRoaXMuam9pblJlZiA9IHRoaXMuY2hhbm5lbC5qb2luUmVmKClcbiAgICAgIHRoaXMuc3RhdGUgPSBQcmVzZW5jZS5zeW5jU3RhdGUodGhpcy5zdGF0ZSwgbmV3U3RhdGUsIG9uSm9pbiwgb25MZWF2ZSlcblxuICAgICAgdGhpcy5wZW5kaW5nRGlmZnMuZm9yRWFjaChkaWZmID0+IHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFByZXNlbmNlLnN5bmNEaWZmKHRoaXMuc3RhdGUsIGRpZmYsIG9uSm9pbiwgb25MZWF2ZSlcbiAgICAgIH0pXG4gICAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgICBvblN5bmMoKVxuICAgIH0pXG5cbiAgICB0aGlzLmNoYW5uZWwub24oZXZlbnRzLmRpZmYsIGRpZmYgPT4ge1xuICAgICAgbGV0IHtvbkpvaW4sIG9uTGVhdmUsIG9uU3luY30gPSB0aGlzLmNhbGxlclxuXG4gICAgICBpZih0aGlzLmluUGVuZGluZ1N5bmNTdGF0ZSgpKXtcbiAgICAgICAgdGhpcy5wZW5kaW5nRGlmZnMucHVzaChkaWZmKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFByZXNlbmNlLnN5bmNEaWZmKHRoaXMuc3RhdGUsIGRpZmYsIG9uSm9pbiwgb25MZWF2ZSlcbiAgICAgICAgb25TeW5jKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgb25Kb2luKGNhbGxiYWNrKXsgdGhpcy5jYWxsZXIub25Kb2luID0gY2FsbGJhY2sgfVxuXG4gIG9uTGVhdmUoY2FsbGJhY2speyB0aGlzLmNhbGxlci5vbkxlYXZlID0gY2FsbGJhY2sgfVxuXG4gIG9uU3luYyhjYWxsYmFjayl7IHRoaXMuY2FsbGVyLm9uU3luYyA9IGNhbGxiYWNrIH1cblxuICBsaXN0KGJ5KXsgcmV0dXJuIFByZXNlbmNlLmxpc3QodGhpcy5zdGF0ZSwgYnkpIH1cblxuICBpblBlbmRpbmdTeW5jU3RhdGUoKXtcbiAgICByZXR1cm4gIXRoaXMuam9pblJlZiB8fCAodGhpcy5qb2luUmVmICE9PSB0aGlzLmNoYW5uZWwuam9pblJlZigpKVxuICB9XG5cbiAgLy8gbG93ZXItbGV2ZWwgcHVibGljIHN0YXRpYyBBUElcblxuICAvKipcbiAgICogVXNlZCB0byBzeW5jIHRoZSBsaXN0IG9mIHByZXNlbmNlcyBvbiB0aGUgc2VydmVyXG4gICAqIHdpdGggdGhlIGNsaWVudCdzIHN0YXRlLiBBbiBvcHRpb25hbCBgb25Kb2luYCBhbmQgYG9uTGVhdmVgIGNhbGxiYWNrIGNhblxuICAgKiBiZSBwcm92aWRlZCB0byByZWFjdCB0byBjaGFuZ2VzIGluIHRoZSBjbGllbnQncyBsb2NhbCBwcmVzZW5jZXMgYWNyb3NzXG4gICAqIGRpc2Nvbm5lY3RzIGFuZCByZWNvbm5lY3RzIHdpdGggdGhlIHNlcnZlci5cbiAgICpcbiAgICogQHJldHVybnMge1ByZXNlbmNlfVxuICAgKi9cbiAgc3RhdGljIHN5bmNTdGF0ZShjdXJyZW50U3RhdGUsIG5ld1N0YXRlLCBvbkpvaW4sIG9uTGVhdmUpe1xuICAgIGxldCBzdGF0ZSA9IHRoaXMuY2xvbmUoY3VycmVudFN0YXRlKVxuICAgIGxldCBqb2lucyA9IHt9XG4gICAgbGV0IGxlYXZlcyA9IHt9XG5cbiAgICB0aGlzLm1hcChzdGF0ZSwgKGtleSwgcHJlc2VuY2UpID0+IHtcbiAgICAgIGlmKCFuZXdTdGF0ZVtrZXldKXtcbiAgICAgICAgbGVhdmVzW2tleV0gPSBwcmVzZW5jZVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5tYXAobmV3U3RhdGUsIChrZXksIG5ld1ByZXNlbmNlKSA9PiB7XG4gICAgICBsZXQgY3VycmVudFByZXNlbmNlID0gc3RhdGVba2V5XVxuICAgICAgaWYoY3VycmVudFByZXNlbmNlKXtcbiAgICAgICAgbGV0IG5ld1JlZnMgPSBuZXdQcmVzZW5jZS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICAgIGxldCBjdXJSZWZzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLm1hcChtID0+IG0ucGh4X3JlZilcbiAgICAgICAgbGV0IGpvaW5lZE1ldGFzID0gbmV3UHJlc2VuY2UubWV0YXMuZmlsdGVyKG0gPT4gY3VyUmVmcy5pbmRleE9mKG0ucGh4X3JlZikgPCAwKVxuICAgICAgICBsZXQgbGVmdE1ldGFzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLmZpbHRlcihtID0+IG5ld1JlZnMuaW5kZXhPZihtLnBoeF9yZWYpIDwgMClcbiAgICAgICAgaWYoam9pbmVkTWV0YXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgam9pbnNba2V5XSA9IG5ld1ByZXNlbmNlXG4gICAgICAgICAgam9pbnNba2V5XS5tZXRhcyA9IGpvaW5lZE1ldGFzXG4gICAgICAgIH1cbiAgICAgICAgaWYobGVmdE1ldGFzLmxlbmd0aCA+IDApe1xuICAgICAgICAgIGxlYXZlc1trZXldID0gdGhpcy5jbG9uZShjdXJyZW50UHJlc2VuY2UpXG4gICAgICAgICAgbGVhdmVzW2tleV0ubWV0YXMgPSBsZWZ0TWV0YXNcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgam9pbnNba2V5XSA9IG5ld1ByZXNlbmNlXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gdGhpcy5zeW5jRGlmZihzdGF0ZSwge2pvaW5zOiBqb2lucywgbGVhdmVzOiBsZWF2ZXN9LCBvbkpvaW4sIG9uTGVhdmUpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogVXNlZCB0byBzeW5jIGEgZGlmZiBvZiBwcmVzZW5jZSBqb2luIGFuZCBsZWF2ZVxuICAgKiBldmVudHMgZnJvbSB0aGUgc2VydmVyLCBhcyB0aGV5IGhhcHBlbi4gTGlrZSBgc3luY1N0YXRlYCwgYHN5bmNEaWZmYFxuICAgKiBhY2NlcHRzIG9wdGlvbmFsIGBvbkpvaW5gIGFuZCBgb25MZWF2ZWAgY2FsbGJhY2tzIHRvIHJlYWN0IHRvIGEgdXNlclxuICAgKiBqb2luaW5nIG9yIGxlYXZpbmcgZnJvbSBhIGRldmljZS5cbiAgICpcbiAgICogQHJldHVybnMge1ByZXNlbmNlfVxuICAgKi9cbiAgc3RhdGljIHN5bmNEaWZmKHN0YXRlLCBkaWZmLCBvbkpvaW4sIG9uTGVhdmUpe1xuICAgIGxldCB7am9pbnMsIGxlYXZlc30gPSB0aGlzLmNsb25lKGRpZmYpXG4gICAgaWYoIW9uSm9pbil7IG9uSm9pbiA9IGZ1bmN0aW9uICgpeyB9IH1cbiAgICBpZighb25MZWF2ZSl7IG9uTGVhdmUgPSBmdW5jdGlvbiAoKXsgfSB9XG5cbiAgICB0aGlzLm1hcChqb2lucywgKGtleSwgbmV3UHJlc2VuY2UpID0+IHtcbiAgICAgIGxldCBjdXJyZW50UHJlc2VuY2UgPSBzdGF0ZVtrZXldXG4gICAgICBzdGF0ZVtrZXldID0gdGhpcy5jbG9uZShuZXdQcmVzZW5jZSlcbiAgICAgIGlmKGN1cnJlbnRQcmVzZW5jZSl7XG4gICAgICAgIGxldCBqb2luZWRSZWZzID0gc3RhdGVba2V5XS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICAgIGxldCBjdXJNZXRhcyA9IGN1cnJlbnRQcmVzZW5jZS5tZXRhcy5maWx0ZXIobSA9PiBqb2luZWRSZWZzLmluZGV4T2YobS5waHhfcmVmKSA8IDApXG4gICAgICAgIHN0YXRlW2tleV0ubWV0YXMudW5zaGlmdCguLi5jdXJNZXRhcylcbiAgICAgIH1cbiAgICAgIG9uSm9pbihrZXksIGN1cnJlbnRQcmVzZW5jZSwgbmV3UHJlc2VuY2UpXG4gICAgfSlcbiAgICB0aGlzLm1hcChsZWF2ZXMsIChrZXksIGxlZnRQcmVzZW5jZSkgPT4ge1xuICAgICAgbGV0IGN1cnJlbnRQcmVzZW5jZSA9IHN0YXRlW2tleV1cbiAgICAgIGlmKCFjdXJyZW50UHJlc2VuY2UpeyByZXR1cm4gfVxuICAgICAgbGV0IHJlZnNUb1JlbW92ZSA9IGxlZnRQcmVzZW5jZS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICBjdXJyZW50UHJlc2VuY2UubWV0YXMgPSBjdXJyZW50UHJlc2VuY2UubWV0YXMuZmlsdGVyKHAgPT4ge1xuICAgICAgICByZXR1cm4gcmVmc1RvUmVtb3ZlLmluZGV4T2YocC5waHhfcmVmKSA8IDBcbiAgICAgIH0pXG4gICAgICBvbkxlYXZlKGtleSwgY3VycmVudFByZXNlbmNlLCBsZWZ0UHJlc2VuY2UpXG4gICAgICBpZihjdXJyZW50UHJlc2VuY2UubWV0YXMubGVuZ3RoID09PSAwKXtcbiAgICAgICAgZGVsZXRlIHN0YXRlW2tleV1cbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBzdGF0ZVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFycmF5IG9mIHByZXNlbmNlcywgd2l0aCBzZWxlY3RlZCBtZXRhZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHByZXNlbmNlc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjaG9vc2VyXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcmVzZW5jZX1cbiAgICovXG4gIHN0YXRpYyBsaXN0KHByZXNlbmNlcywgY2hvb3Nlcil7XG4gICAgaWYoIWNob29zZXIpeyBjaG9vc2VyID0gZnVuY3Rpb24gKGtleSwgcHJlcyl7IHJldHVybiBwcmVzIH0gfVxuXG4gICAgcmV0dXJuIHRoaXMubWFwKHByZXNlbmNlcywgKGtleSwgcHJlc2VuY2UpID0+IHtcbiAgICAgIHJldHVybiBjaG9vc2VyKGtleSwgcHJlc2VuY2UpXG4gICAgfSlcbiAgfVxuXG4gIC8vIHByaXZhdGVcblxuICBzdGF0aWMgbWFwKG9iaiwgZnVuYyl7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikubWFwKGtleSA9PiBmdW5jKGtleSwgb2JqW2tleV0pKVxuICB9XG5cbiAgc3RhdGljIGNsb25lKG9iail7IHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpIH1cbn1cbiIsICIvKiBUaGUgZGVmYXVsdCBzZXJpYWxpemVyIGZvciBlbmNvZGluZyBhbmQgZGVjb2RpbmcgbWVzc2FnZXMgKi9cbmltcG9ydCB7XG4gIENIQU5ORUxfRVZFTlRTXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgSEVBREVSX0xFTkdUSDogMSxcbiAgTUVUQV9MRU5HVEg6IDQsXG4gIEtJTkRTOiB7cHVzaDogMCwgcmVwbHk6IDEsIGJyb2FkY2FzdDogMn0sXG5cbiAgZW5jb2RlKG1zZywgY2FsbGJhY2spe1xuICAgIGlmKG1zZy5wYXlsb2FkLmNvbnN0cnVjdG9yID09PSBBcnJheUJ1ZmZlcil7XG4gICAgICByZXR1cm4gY2FsbGJhY2sodGhpcy5iaW5hcnlFbmNvZGUobXNnKSlcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHBheWxvYWQgPSBbbXNnLmpvaW5fcmVmLCBtc2cucmVmLCBtc2cudG9waWMsIG1zZy5ldmVudCwgbXNnLnBheWxvYWRdXG4gICAgICByZXR1cm4gY2FsbGJhY2soSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpXG4gICAgfVxuICB9LFxuXG4gIGRlY29kZShyYXdQYXlsb2FkLCBjYWxsYmFjayl7XG4gICAgaWYocmF3UGF5bG9hZC5jb25zdHJ1Y3RvciA9PT0gQXJyYXlCdWZmZXIpe1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKHRoaXMuYmluYXJ5RGVjb2RlKHJhd1BheWxvYWQpKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgW2pvaW5fcmVmLCByZWYsIHRvcGljLCBldmVudCwgcGF5bG9hZF0gPSBKU09OLnBhcnNlKHJhd1BheWxvYWQpXG4gICAgICByZXR1cm4gY2FsbGJhY2soe2pvaW5fcmVmLCByZWYsIHRvcGljLCBldmVudCwgcGF5bG9hZH0pXG4gICAgfVxuICB9LFxuXG4gIC8vIHByaXZhdGVcblxuICBiaW5hcnlFbmNvZGUobWVzc2FnZSl7XG4gICAgbGV0IHtqb2luX3JlZiwgcmVmLCBldmVudCwgdG9waWMsIHBheWxvYWR9ID0gbWVzc2FnZVxuICAgIGxldCBtZXRhTGVuZ3RoID0gdGhpcy5NRVRBX0xFTkdUSCArIGpvaW5fcmVmLmxlbmd0aCArIHJlZi5sZW5ndGggKyB0b3BpYy5sZW5ndGggKyBldmVudC5sZW5ndGhcbiAgICBsZXQgaGVhZGVyID0gbmV3IEFycmF5QnVmZmVyKHRoaXMuSEVBREVSX0xFTkdUSCArIG1ldGFMZW5ndGgpXG4gICAgbGV0IHZpZXcgPSBuZXcgRGF0YVZpZXcoaGVhZGVyKVxuICAgIGxldCBvZmZzZXQgPSAwXG5cbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCB0aGlzLktJTkRTLnB1c2gpIC8vIGtpbmRcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBqb2luX3JlZi5sZW5ndGgpXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgcmVmLmxlbmd0aClcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCB0b3BpYy5sZW5ndGgpXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgZXZlbnQubGVuZ3RoKVxuICAgIEFycmF5LmZyb20oam9pbl9yZWYsIGNoYXIgPT4gdmlldy5zZXRVaW50OChvZmZzZXQrKywgY2hhci5jaGFyQ29kZUF0KDApKSlcbiAgICBBcnJheS5mcm9tKHJlZiwgY2hhciA9PiB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBjaGFyLmNoYXJDb2RlQXQoMCkpKVxuICAgIEFycmF5LmZyb20odG9waWMsIGNoYXIgPT4gdmlldy5zZXRVaW50OChvZmZzZXQrKywgY2hhci5jaGFyQ29kZUF0KDApKSlcbiAgICBBcnJheS5mcm9tKGV2ZW50LCBjaGFyID0+IHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGNoYXIuY2hhckNvZGVBdCgwKSkpXG5cbiAgICB2YXIgY29tYmluZWQgPSBuZXcgVWludDhBcnJheShoZWFkZXIuYnl0ZUxlbmd0aCArIHBheWxvYWQuYnl0ZUxlbmd0aClcbiAgICBjb21iaW5lZC5zZXQobmV3IFVpbnQ4QXJyYXkoaGVhZGVyKSwgMClcbiAgICBjb21iaW5lZC5zZXQobmV3IFVpbnQ4QXJyYXkocGF5bG9hZCksIGhlYWRlci5ieXRlTGVuZ3RoKVxuXG4gICAgcmV0dXJuIGNvbWJpbmVkLmJ1ZmZlclxuICB9LFxuXG4gIGJpbmFyeURlY29kZShidWZmZXIpe1xuICAgIGxldCB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcilcbiAgICBsZXQga2luZCA9IHZpZXcuZ2V0VWludDgoMClcbiAgICBsZXQgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpXG4gICAgc3dpdGNoKGtpbmQpe1xuICAgICAgY2FzZSB0aGlzLktJTkRTLnB1c2g6IHJldHVybiB0aGlzLmRlY29kZVB1c2goYnVmZmVyLCB2aWV3LCBkZWNvZGVyKVxuICAgICAgY2FzZSB0aGlzLktJTkRTLnJlcGx5OiByZXR1cm4gdGhpcy5kZWNvZGVSZXBseShidWZmZXIsIHZpZXcsIGRlY29kZXIpXG4gICAgICBjYXNlIHRoaXMuS0lORFMuYnJvYWRjYXN0OiByZXR1cm4gdGhpcy5kZWNvZGVCcm9hZGNhc3QoYnVmZmVyLCB2aWV3LCBkZWNvZGVyKVxuICAgIH1cbiAgfSxcblxuICBkZWNvZGVQdXNoKGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IGpvaW5SZWZTaXplID0gdmlldy5nZXRVaW50OCgxKVxuICAgIGxldCB0b3BpY1NpemUgPSB2aWV3LmdldFVpbnQ4KDIpXG4gICAgbGV0IGV2ZW50U2l6ZSA9IHZpZXcuZ2V0VWludDgoMylcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5IRUFERVJfTEVOR1RIICsgdGhpcy5NRVRBX0xFTkdUSCAtIDEgLy8gcHVzaGVzIGhhdmUgbm8gcmVmXG4gICAgbGV0IGpvaW5SZWYgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBqb2luUmVmU2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgam9pblJlZlNpemVcbiAgICBsZXQgdG9waWMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyB0b3BpY1NpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHRvcGljU2l6ZVxuICAgIGxldCBldmVudCA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGV2ZW50U2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgZXZlbnRTaXplXG4gICAgbGV0IGRhdGEgPSBidWZmZXIuc2xpY2Uob2Zmc2V0LCBidWZmZXIuYnl0ZUxlbmd0aClcbiAgICByZXR1cm4ge2pvaW5fcmVmOiBqb2luUmVmLCByZWY6IG51bGwsIHRvcGljOiB0b3BpYywgZXZlbnQ6IGV2ZW50LCBwYXlsb2FkOiBkYXRhfVxuICB9LFxuXG4gIGRlY29kZVJlcGx5KGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IGpvaW5SZWZTaXplID0gdmlldy5nZXRVaW50OCgxKVxuICAgIGxldCByZWZTaXplID0gdmlldy5nZXRVaW50OCgyKVxuICAgIGxldCB0b3BpY1NpemUgPSB2aWV3LmdldFVpbnQ4KDMpXG4gICAgbGV0IGV2ZW50U2l6ZSA9IHZpZXcuZ2V0VWludDgoNClcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5IRUFERVJfTEVOR1RIICsgdGhpcy5NRVRBX0xFTkdUSFxuICAgIGxldCBqb2luUmVmID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgam9pblJlZlNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGpvaW5SZWZTaXplXG4gICAgbGV0IHJlZiA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIHJlZlNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHJlZlNpemVcbiAgICBsZXQgdG9waWMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyB0b3BpY1NpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHRvcGljU2l6ZVxuICAgIGxldCBldmVudCA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGV2ZW50U2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgZXZlbnRTaXplXG4gICAgbGV0IGRhdGEgPSBidWZmZXIuc2xpY2Uob2Zmc2V0LCBidWZmZXIuYnl0ZUxlbmd0aClcbiAgICBsZXQgcGF5bG9hZCA9IHtzdGF0dXM6IGV2ZW50LCByZXNwb25zZTogZGF0YX1cbiAgICByZXR1cm4ge2pvaW5fcmVmOiBqb2luUmVmLCByZWY6IHJlZiwgdG9waWM6IHRvcGljLCBldmVudDogQ0hBTk5FTF9FVkVOVFMucmVwbHksIHBheWxvYWQ6IHBheWxvYWR9XG4gIH0sXG5cbiAgZGVjb2RlQnJvYWRjYXN0KGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IHRvcGljU2l6ZSA9IHZpZXcuZ2V0VWludDgoMSlcbiAgICBsZXQgZXZlbnRTaXplID0gdmlldy5nZXRVaW50OCgyKVxuICAgIGxldCBvZmZzZXQgPSB0aGlzLkhFQURFUl9MRU5HVEggKyAyXG4gICAgbGV0IHRvcGljID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgdG9waWNTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyB0b3BpY1NpemVcbiAgICBsZXQgZXZlbnQgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBldmVudFNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGV2ZW50U2l6ZVxuICAgIGxldCBkYXRhID0gYnVmZmVyLnNsaWNlKG9mZnNldCwgYnVmZmVyLmJ5dGVMZW5ndGgpXG5cbiAgICByZXR1cm4ge2pvaW5fcmVmOiBudWxsLCByZWY6IG51bGwsIHRvcGljOiB0b3BpYywgZXZlbnQ6IGV2ZW50LCBwYXlsb2FkOiBkYXRhfVxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgZ2xvYmFsLFxuICBwaHhXaW5kb3csXG4gIENIQU5ORUxfRVZFTlRTLFxuICBERUZBVUxUX1RJTUVPVVQsXG4gIERFRkFVTFRfVlNOLFxuICBTT0NLRVRfU1RBVEVTLFxuICBUUkFOU1BPUlRTLFxuICBXU19DTE9TRV9OT1JNQUxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2xvc3VyZVxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBBamF4IGZyb20gXCIuL2FqYXhcIlxuaW1wb3J0IENoYW5uZWwgZnJvbSBcIi4vY2hhbm5lbFwiXG5pbXBvcnQgTG9uZ1BvbGwgZnJvbSBcIi4vbG9uZ3BvbGxcIlxuaW1wb3J0IFNlcmlhbGl6ZXIgZnJvbSBcIi4vc2VyaWFsaXplclwiXG5pbXBvcnQgVGltZXIgZnJvbSBcIi4vdGltZXJcIlxuXG4vKiogSW5pdGlhbGl6ZXMgdGhlIFNvY2tldCAqXG4gKlxuICogRm9yIElFOCBzdXBwb3J0IHVzZSBhbiBFUzUtc2hpbSAoaHR0cHM6Ly9naXRodWIuY29tL2VzLXNoaW1zL2VzNS1zaGltKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbmRQb2ludCAtIFRoZSBzdHJpbmcgV2ViU29ja2V0IGVuZHBvaW50LCBpZSwgYFwid3M6Ly9leGFtcGxlLmNvbS9zb2NrZXRcImAsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwid3NzOi8vZXhhbXBsZS5jb21cImBcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXCIvc29ja2V0XCJgIChpbmhlcml0ZWQgaG9zdCAmIHByb3RvY29sKVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSAtIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLnRyYW5zcG9ydF0gLSBUaGUgV2Vic29ja2V0IFRyYW5zcG9ydCwgZm9yIGV4YW1wbGUgV2ViU29ja2V0IG9yIFBob2VuaXguTG9uZ1BvbGwuXG4gKlxuICogRGVmYXVsdHMgdG8gV2ViU29ja2V0IHdpdGggYXV0b21hdGljIExvbmdQb2xsIGZhbGxiYWNrLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMuZW5jb2RlXSAtIFRoZSBmdW5jdGlvbiB0byBlbmNvZGUgb3V0Z29pbmcgbWVzc2FnZXMuXG4gKlxuICogRGVmYXVsdHMgdG8gSlNPTiBlbmNvZGVyLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmRlY29kZV0gLSBUaGUgZnVuY3Rpb24gdG8gZGVjb2RlIGluY29taW5nIG1lc3NhZ2VzLlxuICpcbiAqIERlZmF1bHRzIHRvIEpTT046XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogKHBheWxvYWQsIGNhbGxiYWNrKSA9PiBjYWxsYmFjayhKU09OLnBhcnNlKHBheWxvYWQpKVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnRpbWVvdXRdIC0gVGhlIGRlZmF1bHQgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gdHJpZ2dlciBwdXNoIHRpbWVvdXRzLlxuICpcbiAqIERlZmF1bHRzIGBERUZBVUxUX1RJTUVPVVRgXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuaGVhcnRiZWF0SW50ZXJ2YWxNc10gLSBUaGUgbWlsbGlzZWMgaW50ZXJ2YWwgdG8gc2VuZCBhIGhlYXJ0YmVhdCBtZXNzYWdlXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMucmVjb25uZWN0QWZ0ZXJNc10gLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtaWxsaXNlY1xuICogc29ja2V0IHJlY29ubmVjdCBpbnRlcnZhbC5cbiAqXG4gKiBEZWZhdWx0cyB0byBzdGVwcGVkIGJhY2tvZmYgb2Y6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwLCA1MCwgMTAwLCAxNTAsIDIwMCwgMjUwLCA1MDAsIDEwMDAsIDIwMDBdW3RyaWVzIC0gMV0gfHwgNTAwMFxuICogfVxuICogYGBgYFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5yZWpvaW5BZnRlck1zXSAtIFRoZSBvcHRpb25hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG1pbGxpc2VjXG4gKiByZWpvaW4gaW50ZXJ2YWwgZm9yIGluZGl2aWR1YWwgY2hhbm5lbHMuXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwMDAsIDIwMDAsIDUwMDBdW3RyaWVzIC0gMV0gfHwgMTAwMDBcbiAqIH1cbiAqIGBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5sb2dnZXJdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIGZvciBzcGVjaWFsaXplZCBsb2dnaW5nLCBpZTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBmdW5jdGlvbihraW5kLCBtc2csIGRhdGEpIHtcbiAqICAgY29uc29sZS5sb2coYCR7a2luZH06ICR7bXNnfWAsIGRhdGEpXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMubG9uZ3BvbGxlclRpbWVvdXRdIC0gVGhlIG1heGltdW0gdGltZW91dCBvZiBhIGxvbmcgcG9sbCBBSkFYIHJlcXVlc3QuXG4gKlxuICogRGVmYXVsdHMgdG8gMjBzIChkb3VibGUgdGhlIHNlcnZlciBsb25nIHBvbGwgdGltZXIpLlxuICpcbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbil9IFtvcHRzLnBhcmFtc10gLSBUaGUgb3B0aW9uYWwgcGFyYW1zIHRvIHBhc3Mgd2hlbiBjb25uZWN0aW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuYmluYXJ5VHlwZV0gLSBUaGUgYmluYXJ5IHR5cGUgdG8gdXNlIGZvciBiaW5hcnkgV2ViU29ja2V0IGZyYW1lcy5cbiAqXG4gKiBEZWZhdWx0cyB0byBcImFycmF5YnVmZmVyXCJcbiAqXG4gKiBAcGFyYW0ge3Zzbn0gW29wdHMudnNuXSAtIFRoZSBzZXJpYWxpemVyJ3MgcHJvdG9jb2wgdmVyc2lvbiB0byBzZW5kIG9uIGNvbm5lY3QuXG4gKlxuICogRGVmYXVsdHMgdG8gREVGQVVMVF9WU04uXG4qL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU29ja2V0IHtcbiAgY29uc3RydWN0b3IoZW5kUG9pbnQsIG9wdHMgPSB7fSl7XG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcyA9IHtvcGVuOiBbXSwgY2xvc2U6IFtdLCBlcnJvcjogW10sIG1lc3NhZ2U6IFtdfVxuICAgIHRoaXMuY2hhbm5lbHMgPSBbXVxuICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdXG4gICAgdGhpcy5yZWYgPSAwXG4gICAgdGhpcy50aW1lb3V0ID0gb3B0cy50aW1lb3V0IHx8IERFRkFVTFRfVElNRU9VVFxuICAgIHRoaXMudHJhbnNwb3J0ID0gb3B0cy50cmFuc3BvcnQgfHwgZ2xvYmFsLldlYlNvY2tldCB8fCBMb25nUG9sbFxuICAgIHRoaXMuZXN0YWJsaXNoZWRDb25uZWN0aW9ucyA9IDBcbiAgICB0aGlzLmRlZmF1bHRFbmNvZGVyID0gU2VyaWFsaXplci5lbmNvZGUuYmluZChTZXJpYWxpemVyKVxuICAgIHRoaXMuZGVmYXVsdERlY29kZXIgPSBTZXJpYWxpemVyLmRlY29kZS5iaW5kKFNlcmlhbGl6ZXIpXG4gICAgdGhpcy5jbG9zZVdhc0NsZWFuID0gZmFsc2VcbiAgICB0aGlzLmJpbmFyeVR5cGUgPSBvcHRzLmJpbmFyeVR5cGUgfHwgXCJhcnJheWJ1ZmZlclwiXG4gICAgdGhpcy5jb25uZWN0Q2xvY2sgPSAxXG4gICAgaWYodGhpcy50cmFuc3BvcnQgIT09IExvbmdQb2xsKXtcbiAgICAgIHRoaXMuZW5jb2RlID0gb3B0cy5lbmNvZGUgfHwgdGhpcy5kZWZhdWx0RW5jb2RlclxuICAgICAgdGhpcy5kZWNvZGUgPSBvcHRzLmRlY29kZSB8fCB0aGlzLmRlZmF1bHREZWNvZGVyXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW5jb2RlID0gdGhpcy5kZWZhdWx0RW5jb2RlclxuICAgICAgdGhpcy5kZWNvZGUgPSB0aGlzLmRlZmF1bHREZWNvZGVyXG4gICAgfVxuICAgIGxldCBhd2FpdGluZ0Nvbm5lY3Rpb25PblBhZ2VTaG93ID0gbnVsbFxuICAgIGlmKHBoeFdpbmRvdyAmJiBwaHhXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7XG4gICAgICBwaHhXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIF9lID0+IHtcbiAgICAgICAgaWYodGhpcy5jb25uKXtcbiAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKVxuICAgICAgICAgIGF3YWl0aW5nQ29ubmVjdGlvbk9uUGFnZVNob3cgPSB0aGlzLmNvbm5lY3RDbG9ja1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcGh4V2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlc2hvd1wiLCBfZSA9PiB7XG4gICAgICAgIGlmKGF3YWl0aW5nQ29ubmVjdGlvbk9uUGFnZVNob3cgPT09IHRoaXMuY29ubmVjdENsb2NrKXtcbiAgICAgICAgICBhd2FpdGluZ0Nvbm5lY3Rpb25PblBhZ2VTaG93ID0gbnVsbFxuICAgICAgICAgIHRoaXMuY29ubmVjdCgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcyA9IG9wdHMuaGVhcnRiZWF0SW50ZXJ2YWxNcyB8fCAzMDAwMFxuICAgIHRoaXMucmVqb2luQWZ0ZXJNcyA9ICh0cmllcykgPT4ge1xuICAgICAgaWYob3B0cy5yZWpvaW5BZnRlck1zKXtcbiAgICAgICAgcmV0dXJuIG9wdHMucmVqb2luQWZ0ZXJNcyh0cmllcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbMTAwMCwgMjAwMCwgNTAwMF1bdHJpZXMgLSAxXSB8fCAxMDAwMFxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlY29ubmVjdEFmdGVyTXMgPSAodHJpZXMpID0+IHtcbiAgICAgIGlmKG9wdHMucmVjb25uZWN0QWZ0ZXJNcyl7XG4gICAgICAgIHJldHVybiBvcHRzLnJlY29ubmVjdEFmdGVyTXModHJpZXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gWzEwLCA1MCwgMTAwLCAxNTAsIDIwMCwgMjUwLCA1MDAsIDEwMDAsIDIwMDBdW3RyaWVzIC0gMV0gfHwgNTAwMFxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmxvZ2dlciA9IG9wdHMubG9nZ2VyIHx8IG51bGxcbiAgICB0aGlzLmxvbmdwb2xsZXJUaW1lb3V0ID0gb3B0cy5sb25ncG9sbGVyVGltZW91dCB8fCAyMDAwMFxuICAgIHRoaXMucGFyYW1zID0gY2xvc3VyZShvcHRzLnBhcmFtcyB8fCB7fSlcbiAgICB0aGlzLmVuZFBvaW50ID0gYCR7ZW5kUG9pbnR9LyR7VFJBTlNQT1JUUy53ZWJzb2NrZXR9YFxuICAgIHRoaXMudnNuID0gb3B0cy52c24gfHwgREVGQVVMVF9WU05cbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVvdXRUaW1lciA9IG51bGxcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gbnVsbFxuICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGxcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gbmV3IFRpbWVyKCgpID0+IHtcbiAgICAgIHRoaXMudGVhcmRvd24oKCkgPT4gdGhpcy5jb25uZWN0KCkpXG4gICAgfSwgdGhpcy5yZWNvbm5lY3RBZnRlck1zKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIExvbmdQb2xsIHRyYW5zcG9ydCByZWZlcmVuY2VcbiAgICovXG4gIGdldExvbmdQb2xsVHJhbnNwb3J0KCl7IHJldHVybiBMb25nUG9sbCB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIGFuZCByZXBsYWNlcyB0aGUgYWN0aXZlIHRyYW5zcG9ydFxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXdUcmFuc3BvcnQgLSBUaGUgbmV3IHRyYW5zcG9ydCBjbGFzcyB0byBpbnN0YW50aWF0ZVxuICAgKlxuICAgKi9cbiAgcmVwbGFjZVRyYW5zcG9ydChuZXdUcmFuc3BvcnQpe1xuICAgIHRoaXMuY29ubmVjdENsb2NrKytcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSB0cnVlXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy5zZW5kQnVmZmVyID0gW11cbiAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgdGhpcy5jb25uLmNsb3NlKClcbiAgICAgIHRoaXMuY29ubiA9IG51bGxcbiAgICB9XG4gICAgdGhpcy50cmFuc3BvcnQgPSBuZXdUcmFuc3BvcnRcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzb2NrZXQgcHJvdG9jb2xcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIHByb3RvY29sKCl7IHJldHVybiBsb2NhdGlvbi5wcm90b2NvbC5tYXRjaCgvXmh0dHBzLykgPyBcIndzc1wiIDogXCJ3c1wiIH1cblxuICAvKipcbiAgICogVGhlIGZ1bGx5IHF1YWxpZmllZCBzb2NrZXQgdXJsXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBlbmRQb2ludFVSTCgpe1xuICAgIGxldCB1cmkgPSBBamF4LmFwcGVuZFBhcmFtcyhcbiAgICAgIEFqYXguYXBwZW5kUGFyYW1zKHRoaXMuZW5kUG9pbnQsIHRoaXMucGFyYW1zKCkpLCB7dnNuOiB0aGlzLnZzbn0pXG4gICAgaWYodXJpLmNoYXJBdCgwKSAhPT0gXCIvXCIpeyByZXR1cm4gdXJpIH1cbiAgICBpZih1cmkuY2hhckF0KDEpID09PSBcIi9cIil7IHJldHVybiBgJHt0aGlzLnByb3RvY29sKCl9OiR7dXJpfWAgfVxuXG4gICAgcmV0dXJuIGAke3RoaXMucHJvdG9jb2woKX06Ly8ke2xvY2F0aW9uLmhvc3R9JHt1cml9YFxuICB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIHRoZSBzb2NrZXRcbiAgICpcbiAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DbG9zZUV2ZW50I1N0YXR1c19jb2RlcyBmb3IgdmFsaWQgc3RhdHVzIGNvZGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIE9wdGlvbmFsIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBzb2NrZXQgaXMgZGlzY29ubmVjdGVkLlxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IGNvZGUgLSBBIHN0YXR1cyBjb2RlIGZvciBkaXNjb25uZWN0aW9uIChPcHRpb25hbCkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBBIHRleHR1YWwgZGVzY3JpcHRpb24gb2YgdGhlIHJlYXNvbiB0byBkaXNjb25uZWN0LiAoT3B0aW9uYWwpXG4gICAqL1xuICBkaXNjb25uZWN0KGNhbGxiYWNrLCBjb2RlLCByZWFzb24pe1xuICAgIHRoaXMuY29ubmVjdENsb2NrKytcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSB0cnVlXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy50ZWFyZG93bihjYWxsYmFjaywgY29kZSwgcmVhc29uKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgcGFyYW1zIHRvIHNlbmQgd2hlbiBjb25uZWN0aW5nLCBmb3IgZXhhbXBsZSBge3VzZXJfaWQ6IHVzZXJUb2tlbn1gXG4gICAqXG4gICAqIFBhc3NpbmcgcGFyYW1zIHRvIGNvbm5lY3QgaXMgZGVwcmVjYXRlZDsgcGFzcyB0aGVtIGluIHRoZSBTb2NrZXQgY29uc3RydWN0b3IgaW5zdGVhZDpcbiAgICogYG5ldyBTb2NrZXQoXCIvc29ja2V0XCIsIHtwYXJhbXM6IHt1c2VyX2lkOiB1c2VyVG9rZW59fSlgLlxuICAgKi9cbiAgY29ubmVjdChwYXJhbXMpe1xuICAgIGlmKHBhcmFtcyl7XG4gICAgICBjb25zb2xlICYmIGNvbnNvbGUubG9nKFwicGFzc2luZyBwYXJhbXMgdG8gY29ubmVjdCBpcyBkZXByZWNhdGVkLiBJbnN0ZWFkIHBhc3MgOnBhcmFtcyB0byB0aGUgU29ja2V0IGNvbnN0cnVjdG9yXCIpXG4gICAgICB0aGlzLnBhcmFtcyA9IGNsb3N1cmUocGFyYW1zKVxuICAgIH1cbiAgICBpZih0aGlzLmNvbm4peyByZXR1cm4gfVxuXG4gICAgdGhpcy5jb25uZWN0Q2xvY2srK1xuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IGZhbHNlXG4gICAgdGhpcy5jb25uID0gbmV3IHRoaXMudHJhbnNwb3J0KHRoaXMuZW5kUG9pbnRVUkwoKSlcbiAgICB0aGlzLmNvbm4uYmluYXJ5VHlwZSA9IHRoaXMuYmluYXJ5VHlwZVxuICAgIHRoaXMuY29ubi50aW1lb3V0ID0gdGhpcy5sb25ncG9sbGVyVGltZW91dFxuICAgIHRoaXMuY29ubi5vbm9wZW4gPSAoKSA9PiB0aGlzLm9uQ29ubk9wZW4oKVxuICAgIHRoaXMuY29ubi5vbmVycm9yID0gZXJyb3IgPT4gdGhpcy5vbkNvbm5FcnJvcihlcnJvcilcbiAgICB0aGlzLmNvbm4ub25tZXNzYWdlID0gZXZlbnQgPT4gdGhpcy5vbkNvbm5NZXNzYWdlKGV2ZW50KVxuICAgIHRoaXMuY29ubi5vbmNsb3NlID0gZXZlbnQgPT4gdGhpcy5vbkNvbm5DbG9zZShldmVudClcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dzIHRoZSBtZXNzYWdlLiBPdmVycmlkZSBgdGhpcy5sb2dnZXJgIGZvciBzcGVjaWFsaXplZCBsb2dnaW5nLiBub29wcyBieSBkZWZhdWx0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBraW5kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtc2dcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICovXG4gIGxvZyhraW5kLCBtc2csIGRhdGEpeyB0aGlzLmxvZ2dlcihraW5kLCBtc2csIGRhdGEpIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIGEgbG9nZ2VyIGhhcyBiZWVuIHNldCBvbiB0aGlzIHNvY2tldC5cbiAgICovXG4gIGhhc0xvZ2dlcigpeyByZXR1cm4gdGhpcy5sb2dnZXIgIT09IG51bGwgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgY2FsbGJhY2tzIGZvciBjb25uZWN0aW9uIG9wZW4gZXZlbnRzXG4gICAqXG4gICAqIEBleGFtcGxlIHNvY2tldC5vbk9wZW4oZnVuY3Rpb24oKXsgY29uc29sZS5pbmZvKFwidGhlIHNvY2tldCB3YXMgb3BlbmVkXCIpIH0pXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbk9wZW4oY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Mub3Blbi5wdXNoKFtyZWYsIGNhbGxiYWNrXSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGNhbGxiYWNrcyBmb3IgY29ubmVjdGlvbiBjbG9zZSBldmVudHNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uQ2xvc2UoY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuY2xvc2UucHVzaChbcmVmLCBjYWxsYmFja10pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBjYWxsYmFja3MgZm9yIGNvbm5lY3Rpb24gZXJyb3IgZXZlbnRzXG4gICAqXG4gICAqIEBleGFtcGxlIHNvY2tldC5vbkVycm9yKGZ1bmN0aW9uKGVycm9yKXsgYWxlcnQoXCJBbiBlcnJvciBvY2N1cnJlZFwiKSB9KVxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25FcnJvcihjYWxsYmFjayl7XG4gICAgbGV0IHJlZiA9IHRoaXMubWFrZVJlZigpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5lcnJvci5wdXNoKFtyZWYsIGNhbGxiYWNrXSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGNhbGxiYWNrcyBmb3IgY29ubmVjdGlvbiBtZXNzYWdlIGV2ZW50c1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25NZXNzYWdlKGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2UucHVzaChbcmVmLCBjYWxsYmFja10pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFBpbmdzIHRoZSBzZXJ2ZXIgYW5kIGludm9rZXMgdGhlIGNhbGxiYWNrIHdpdGggdGhlIFJUVCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICpcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBwaW5nIHdhcyBwdXNoZWQgb3IgZmFsc2UgaWYgdW5hYmxlIHRvIGJlIHB1c2hlZC5cbiAgICovXG4gIHBpbmcoY2FsbGJhY2spe1xuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gZmFsc2UgfVxuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIGxldCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgdGhpcy5wdXNoKHt0b3BpYzogXCJwaG9lbml4XCIsIGV2ZW50OiBcImhlYXJ0YmVhdFwiLCBwYXlsb2FkOiB7fSwgcmVmOiByZWZ9KVxuICAgIGxldCBvbk1zZ1JlZiA9IHRoaXMub25NZXNzYWdlKG1zZyA9PiB7XG4gICAgICBpZihtc2cucmVmID09PSByZWYpe1xuICAgICAgICB0aGlzLm9mZihbb25Nc2dSZWZdKVxuICAgICAgICBjYWxsYmFjayhEYXRlLm5vdygpIC0gc3RhcnRUaW1lKVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBjbGVhckhlYXJ0YmVhdHMoKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFydGJlYXRUaW1lcilcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFydGJlYXRUaW1lb3V0VGltZXIpXG4gIH1cblxuICBvbkNvbm5PcGVuKCl7XG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgYGNvbm5lY3RlZCB0byAke3RoaXMuZW5kUG9pbnRVUkwoKX1gKVxuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IGZhbHNlXG4gICAgdGhpcy5lc3RhYmxpc2hlZENvbm5lY3Rpb25zKytcbiAgICB0aGlzLmZsdXNoU2VuZEJ1ZmZlcigpXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy5yZXNldEhlYXJ0YmVhdCgpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5vcGVuLmZvckVhY2goKFssIGNhbGxiYWNrXSkgPT4gY2FsbGJhY2soKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBoZWFydGJlYXRUaW1lb3V0KCl7XG4gICAgaWYodGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmKXtcbiAgICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGxcbiAgICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpeyB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBcImhlYXJ0YmVhdCB0aW1lb3V0LiBBdHRlbXB0aW5nIHRvIHJlLWVzdGFibGlzaCBjb25uZWN0aW9uXCIpIH1cbiAgICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSBmYWxzZVxuICAgICAgdGhpcy50ZWFyZG93bigoKSA9PiB0aGlzLnJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpLCBXU19DTE9TRV9OT1JNQUwsIFwiaGVhcnRiZWF0IHRpbWVvdXRcIilcbiAgICB9XG4gIH1cblxuICByZXNldEhlYXJ0YmVhdCgpe1xuICAgIGlmKHRoaXMuY29ubiAmJiB0aGlzLmNvbm4uc2tpcEhlYXJ0YmVhdCl7IHJldHVybiB9XG4gICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbFxuICAgIHRoaXMuY2xlYXJIZWFydGJlYXRzKClcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnNlbmRIZWFydGJlYXQoKSwgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zKVxuICB9XG5cbiAgdGVhcmRvd24oY2FsbGJhY2ssIGNvZGUsIHJlYXNvbil7XG4gICAgaWYoIXRoaXMuY29ubil7XG4gICAgICByZXR1cm4gY2FsbGJhY2sgJiYgY2FsbGJhY2soKVxuICAgIH1cblxuICAgIHRoaXMud2FpdEZvckJ1ZmZlckRvbmUoKCkgPT4ge1xuICAgICAgaWYodGhpcy5jb25uKXtcbiAgICAgICAgaWYoY29kZSl7IHRoaXMuY29ubi5jbG9zZShjb2RlLCByZWFzb24gfHwgXCJcIikgfSBlbHNlIHsgdGhpcy5jb25uLmNsb3NlKCkgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLndhaXRGb3JTb2NrZXRDbG9zZWQoKCkgPT4ge1xuICAgICAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgICAgIHRoaXMuY29ubi5vbm9wZW4gPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgICAgICAgdGhpcy5jb25uLm9uZXJyb3IgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgICAgICAgdGhpcy5jb25uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICAgICAgICB0aGlzLmNvbm4ub25jbG9zZSA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICAgICAgICB0aGlzLmNvbm4gPSBudWxsXG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICB3YWl0Rm9yQnVmZmVyRG9uZShjYWxsYmFjaywgdHJpZXMgPSAxKXtcbiAgICBpZih0cmllcyA9PT0gNSB8fCAhdGhpcy5jb25uIHx8ICF0aGlzLmNvbm4uYnVmZmVyZWRBbW91bnQpe1xuICAgICAgY2FsbGJhY2soKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLndhaXRGb3JCdWZmZXJEb25lKGNhbGxiYWNrLCB0cmllcyArIDEpXG4gICAgfSwgMTUwICogdHJpZXMpXG4gIH1cblxuICB3YWl0Rm9yU29ja2V0Q2xvc2VkKGNhbGxiYWNrLCB0cmllcyA9IDEpe1xuICAgIGlmKHRyaWVzID09PSA1IHx8ICF0aGlzLmNvbm4gfHwgdGhpcy5jb25uLnJlYWR5U3RhdGUgPT09IFNPQ0tFVF9TVEFURVMuY2xvc2VkKXtcbiAgICAgIGNhbGxiYWNrKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy53YWl0Rm9yU29ja2V0Q2xvc2VkKGNhbGxiYWNrLCB0cmllcyArIDEpXG4gICAgfSwgMTUwICogdHJpZXMpXG4gIH1cblxuICBvbkNvbm5DbG9zZShldmVudCl7XG4gICAgbGV0IGNsb3NlQ29kZSA9IGV2ZW50ICYmIGV2ZW50LmNvZGVcbiAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBcImNsb3NlXCIsIGV2ZW50KVxuICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgdGhpcy5jbGVhckhlYXJ0YmVhdHMoKVxuICAgIGlmKCF0aGlzLmNsb3NlV2FzQ2xlYW4gJiYgY2xvc2VDb2RlICE9PSAxMDAwKXtcbiAgICAgIHRoaXMucmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KClcbiAgICB9XG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5jbG9zZS5mb3JFYWNoKChbLCBjYWxsYmFja10pID0+IGNhbGxiYWNrKGV2ZW50KSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgb25Db25uRXJyb3IoZXJyb3Ipe1xuICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpIHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIGVycm9yKVxuICAgIGxldCB0cmFuc3BvcnRCZWZvcmUgPSB0aGlzLnRyYW5zcG9ydFxuICAgIGxldCBlc3RhYmxpc2hlZEJlZm9yZSA9IHRoaXMuZXN0YWJsaXNoZWRDb25uZWN0aW9uc1xuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuZXJyb3IuZm9yRWFjaCgoWywgY2FsbGJhY2tdKSA9PiB7XG4gICAgICBjYWxsYmFjayhlcnJvciwgdHJhbnNwb3J0QmVmb3JlLCBlc3RhYmxpc2hlZEJlZm9yZSlcbiAgICB9KVxuICAgIGlmKHRyYW5zcG9ydEJlZm9yZSA9PT0gdGhpcy50cmFuc3BvcnQgfHwgZXN0YWJsaXNoZWRCZWZvcmUgPiAwKXtcbiAgICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyQ2hhbkVycm9yKCl7XG4gICAgdGhpcy5jaGFubmVscy5mb3JFYWNoKGNoYW5uZWwgPT4ge1xuICAgICAgaWYoIShjaGFubmVsLmlzRXJyb3JlZCgpIHx8IGNoYW5uZWwuaXNMZWF2aW5nKCkgfHwgY2hhbm5lbC5pc0Nsb3NlZCgpKSl7XG4gICAgICAgIGNoYW5uZWwudHJpZ2dlcihDSEFOTkVMX0VWRU5UUy5lcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBjb25uZWN0aW9uU3RhdGUoKXtcbiAgICBzd2l0Y2godGhpcy5jb25uICYmIHRoaXMuY29ubi5yZWFkeVN0YXRlKXtcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5jb25uZWN0aW5nOiByZXR1cm4gXCJjb25uZWN0aW5nXCJcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5vcGVuOiByZXR1cm4gXCJvcGVuXCJcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5jbG9zaW5nOiByZXR1cm4gXCJjbG9zaW5nXCJcbiAgICAgIGRlZmF1bHQ6IHJldHVybiBcImNsb3NlZFwiXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNDb25uZWN0ZWQoKXsgcmV0dXJuIHRoaXMuY29ubmVjdGlvblN0YXRlKCkgPT09IFwib3BlblwiIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHBhcmFtIHtDaGFubmVsfVxuICAgKi9cbiAgcmVtb3ZlKGNoYW5uZWwpe1xuICAgIHRoaXMub2ZmKGNoYW5uZWwuc3RhdGVDaGFuZ2VSZWZzKVxuICAgIHRoaXMuY2hhbm5lbHMgPSB0aGlzLmNoYW5uZWxzLmZpbHRlcihjID0+IGMuam9pblJlZigpICE9PSBjaGFubmVsLmpvaW5SZWYoKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGBvbk9wZW5gLCBgb25DbG9zZWAsIGBvbkVycm9yLGAgYW5kIGBvbk1lc3NhZ2VgIHJlZ2lzdHJhdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7cmVmc30gLSBsaXN0IG9mIHJlZnMgcmV0dXJuZWQgYnkgY2FsbHMgdG9cbiAgICogICAgICAgICAgICAgICAgIGBvbk9wZW5gLCBgb25DbG9zZWAsIGBvbkVycm9yLGAgYW5kIGBvbk1lc3NhZ2VgXG4gICAqL1xuICBvZmYocmVmcyl7XG4gICAgZm9yKGxldCBrZXkgaW4gdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcyl7XG4gICAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzW2tleV0gPSB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzW2tleV0uZmlsdGVyKChbcmVmXSkgPT4ge1xuICAgICAgICByZXR1cm4gcmVmcy5pbmRleE9mKHJlZikgPT09IC0xXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWF0ZXMgYSBuZXcgY2hhbm5lbCBmb3IgdGhlIGdpdmVuIHRvcGljXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BpY1xuICAgKiBAcGFyYW0ge09iamVjdH0gY2hhblBhcmFtcyAtIFBhcmFtZXRlcnMgZm9yIHRoZSBjaGFubmVsXG4gICAqIEByZXR1cm5zIHtDaGFubmVsfVxuICAgKi9cbiAgY2hhbm5lbCh0b3BpYywgY2hhblBhcmFtcyA9IHt9KXtcbiAgICBsZXQgY2hhbiA9IG5ldyBDaGFubmVsKHRvcGljLCBjaGFuUGFyYW1zLCB0aGlzKVxuICAgIHRoaXMuY2hhbm5lbHMucHVzaChjaGFuKVxuICAgIHJldHVybiBjaGFuXG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICovXG4gIHB1c2goZGF0YSl7XG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSl7XG4gICAgICBsZXQge3RvcGljLCBldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZn0gPSBkYXRhXG4gICAgICB0aGlzLmxvZyhcInB1c2hcIiwgYCR7dG9waWN9ICR7ZXZlbnR9ICgke2pvaW5fcmVmfSwgJHtyZWZ9KWAsIHBheWxvYWQpXG4gICAgfVxuXG4gICAgaWYodGhpcy5pc0Nvbm5lY3RlZCgpKXtcbiAgICAgIHRoaXMuZW5jb2RlKGRhdGEsIHJlc3VsdCA9PiB0aGlzLmNvbm4uc2VuZChyZXN1bHQpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbmRCdWZmZXIucHVzaCgoKSA9PiB0aGlzLmVuY29kZShkYXRhLCByZXN1bHQgPT4gdGhpcy5jb25uLnNlbmQocmVzdWx0KSkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbmV4dCBtZXNzYWdlIHJlZiwgYWNjb3VudGluZyBmb3Igb3ZlcmZsb3dzXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBtYWtlUmVmKCl7XG4gICAgbGV0IG5ld1JlZiA9IHRoaXMucmVmICsgMVxuICAgIGlmKG5ld1JlZiA9PT0gdGhpcy5yZWYpeyB0aGlzLnJlZiA9IDAgfSBlbHNlIHsgdGhpcy5yZWYgPSBuZXdSZWYgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVmLnRvU3RyaW5nKClcbiAgfVxuXG4gIHNlbmRIZWFydGJlYXQoKXtcbiAgICBpZih0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgJiYgIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG4gICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnB1c2goe3RvcGljOiBcInBob2VuaXhcIiwgZXZlbnQ6IFwiaGVhcnRiZWF0XCIsIHBheWxvYWQ6IHt9LCByZWY6IHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZn0pXG4gICAgdGhpcy5oZWFydGJlYXRUaW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuaGVhcnRiZWF0VGltZW91dCgpLCB0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMpXG4gIH1cblxuICBmbHVzaFNlbmRCdWZmZXIoKXtcbiAgICBpZih0aGlzLmlzQ29ubmVjdGVkKCkgJiYgdGhpcy5zZW5kQnVmZmVyLmxlbmd0aCA+IDApe1xuICAgICAgdGhpcy5zZW5kQnVmZmVyLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soKSlcbiAgICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdXG4gICAgfVxuICB9XG5cbiAgb25Db25uTWVzc2FnZShyYXdNZXNzYWdlKXtcbiAgICB0aGlzLmRlY29kZShyYXdNZXNzYWdlLmRhdGEsIG1zZyA9PiB7XG4gICAgICBsZXQge3RvcGljLCBldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZn0gPSBtc2dcbiAgICAgIGlmKHJlZiAmJiByZWYgPT09IHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZil7XG4gICAgICAgIHRoaXMuY2xlYXJIZWFydGJlYXRzKClcbiAgICAgICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbFxuICAgICAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnNlbmRIZWFydGJlYXQoKSwgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zKVxuICAgICAgfVxuXG4gICAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInJlY2VpdmVcIiwgYCR7cGF5bG9hZC5zdGF0dXMgfHwgXCJcIn0gJHt0b3BpY30gJHtldmVudH0gJHtyZWYgJiYgXCIoXCIgKyByZWYgKyBcIilcIiB8fCBcIlwifWAsIHBheWxvYWQpXG5cbiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNoYW5uZWxzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgY29uc3QgY2hhbm5lbCA9IHRoaXMuY2hhbm5lbHNbaV1cbiAgICAgICAgaWYoIWNoYW5uZWwuaXNNZW1iZXIodG9waWMsIGV2ZW50LCBwYXlsb2FkLCBqb2luX3JlZikpeyBjb250aW51ZSB9XG4gICAgICAgIGNoYW5uZWwudHJpZ2dlcihldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZilcbiAgICAgIH1cblxuICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MubWVzc2FnZS5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGxldCBbLCBjYWxsYmFja10gPSB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2VbaV1cbiAgICAgICAgY2FsbGJhY2sobXNnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBsZWF2ZU9wZW5Ub3BpYyh0b3BpYyl7XG4gICAgbGV0IGR1cENoYW5uZWwgPSB0aGlzLmNoYW5uZWxzLmZpbmQoYyA9PiBjLnRvcGljID09PSB0b3BpYyAmJiAoYy5pc0pvaW5lZCgpIHx8IGMuaXNKb2luaW5nKCkpKVxuICAgIGlmKGR1cENoYW5uZWwpe1xuICAgICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgYGxlYXZpbmcgZHVwbGljYXRlIHRvcGljIFwiJHt0b3BpY31cImApXG4gICAgICBkdXBDaGFubmVsLmxlYXZlKClcbiAgICB9XG4gIH1cbn1cbiIsICJleHBvcnQgY29uc3QgQ09OU0VDVVRJVkVfUkVMT0FEUyA9IFwiY29uc2VjdXRpdmUtcmVsb2Fkc1wiXG5leHBvcnQgY29uc3QgTUFYX1JFTE9BRFMgPSAxMFxuZXhwb3J0IGNvbnN0IFJFTE9BRF9KSVRURVJfTUlOID0gNTAwMFxuZXhwb3J0IGNvbnN0IFJFTE9BRF9KSVRURVJfTUFYID0gMTAwMDBcbmV4cG9ydCBjb25zdCBGQUlMU0FGRV9KSVRURVIgPSAzMDAwMFxuZXhwb3J0IGNvbnN0IFBIWF9FVkVOVF9DTEFTU0VTID0gW1xuICBcInBoeC1jbGljay1sb2FkaW5nXCIsIFwicGh4LWNoYW5nZS1sb2FkaW5nXCIsIFwicGh4LXN1Ym1pdC1sb2FkaW5nXCIsXG4gIFwicGh4LWtleWRvd24tbG9hZGluZ1wiLCBcInBoeC1rZXl1cC1sb2FkaW5nXCIsIFwicGh4LWJsdXItbG9hZGluZ1wiLCBcInBoeC1mb2N1cy1sb2FkaW5nXCJcbl1cbmV4cG9ydCBjb25zdCBQSFhfQ09NUE9ORU5UID0gXCJkYXRhLXBoeC1jb21wb25lbnRcIlxuZXhwb3J0IGNvbnN0IFBIWF9MSVZFX0xJTksgPSBcImRhdGEtcGh4LWxpbmtcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUkFDS19TVEFUSUMgPSBcInRyYWNrLXN0YXRpY1wiXG5leHBvcnQgY29uc3QgUEhYX0xJTktfU1RBVEUgPSBcImRhdGEtcGh4LWxpbmstc3RhdGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9SRUYgPSBcImRhdGEtcGh4LXJlZlwiXG5leHBvcnQgY29uc3QgUEhYX1JFRl9TUkMgPSBcImRhdGEtcGh4LXJlZi1zcmNcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUkFDS19VUExPQURTID0gXCJ0cmFjay11cGxvYWRzXCJcbmV4cG9ydCBjb25zdCBQSFhfVVBMT0FEX1JFRiA9IFwiZGF0YS1waHgtdXBsb2FkLXJlZlwiXG5leHBvcnQgY29uc3QgUEhYX1BSRUZMSUdIVEVEX1JFRlMgPSBcImRhdGEtcGh4LXByZWZsaWdodGVkLXJlZnNcIlxuZXhwb3J0IGNvbnN0IFBIWF9ET05FX1JFRlMgPSBcImRhdGEtcGh4LWRvbmUtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0RST1BfVEFSR0VUID0gXCJkcm9wLXRhcmdldFwiXG5leHBvcnQgY29uc3QgUEhYX0FDVElWRV9FTlRSWV9SRUZTID0gXCJkYXRhLXBoeC1hY3RpdmUtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0xJVkVfRklMRV9VUERBVEVEID0gXCJwaHg6bGl2ZS1maWxlOnVwZGF0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9TS0lQID0gXCJkYXRhLXBoeC1za2lwXCJcbmV4cG9ydCBjb25zdCBQSFhfUFJVTkUgPSBcImRhdGEtcGh4LXBydW5lXCJcbmV4cG9ydCBjb25zdCBQSFhfUEFHRV9MT0FESU5HID0gXCJwYWdlLWxvYWRpbmdcIlxuZXhwb3J0IGNvbnN0IFBIWF9DT05ORUNURURfQ0xBU1MgPSBcInBoeC1jb25uZWN0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9MT0FESU5HX0NMQVNTID0gXCJwaHgtbG9hZGluZ1wiXG5leHBvcnQgY29uc3QgUEhYX05PX0ZFRURCQUNLX0NMQVNTID0gXCJwaHgtbm8tZmVlZGJhY2tcIlxuZXhwb3J0IGNvbnN0IFBIWF9FUlJPUl9DTEFTUyA9IFwicGh4LWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfQ0xJRU5UX0VSUk9SX0NMQVNTID0gXCJwaHgtY2xpZW50LWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTID0gXCJwaHgtc2VydmVyLWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfUEFSRU5UX0lEID0gXCJkYXRhLXBoeC1wYXJlbnQtaWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9NQUlOID0gXCJkYXRhLXBoeC1tYWluXCJcbmV4cG9ydCBjb25zdCBQSFhfUk9PVF9JRCA9IFwiZGF0YS1waHgtcm9vdC1pZFwiXG5leHBvcnQgY29uc3QgUEhYX1ZJRVdQT1JUX1RPUCA9IFwidmlld3BvcnQtdG9wXCJcbmV4cG9ydCBjb25zdCBQSFhfVklFV1BPUlRfQk9UVE9NID0gXCJ2aWV3cG9ydC1ib3R0b21cIlxuZXhwb3J0IGNvbnN0IFBIWF9UUklHR0VSX0FDVElPTiA9IFwidHJpZ2dlci1hY3Rpb25cIlxuZXhwb3J0IGNvbnN0IFBIWF9GRUVEQkFDS19GT1IgPSBcImZlZWRiYWNrLWZvclwiXG5leHBvcnQgY29uc3QgUEhYX0hBU19GT0NVU0VEID0gXCJwaHgtaGFzLWZvY3VzZWRcIlxuZXhwb3J0IGNvbnN0IEZPQ1VTQUJMRV9JTlBVVFMgPSBbXCJ0ZXh0XCIsIFwidGV4dGFyZWFcIiwgXCJudW1iZXJcIiwgXCJlbWFpbFwiLCBcInBhc3N3b3JkXCIsIFwic2VhcmNoXCIsIFwidGVsXCIsIFwidXJsXCIsIFwiZGF0ZVwiLCBcInRpbWVcIiwgXCJkYXRldGltZS1sb2NhbFwiLCBcImNvbG9yXCIsIFwicmFuZ2VcIl1cbmV4cG9ydCBjb25zdCBDSEVDS0FCTEVfSU5QVVRTID0gW1wiY2hlY2tib3hcIiwgXCJyYWRpb1wiXVxuZXhwb3J0IGNvbnN0IFBIWF9IQVNfU1VCTUlUVEVEID0gXCJwaHgtaGFzLXN1Ym1pdHRlZFwiXG5leHBvcnQgY29uc3QgUEhYX1NFU1NJT04gPSBcImRhdGEtcGh4LXNlc3Npb25cIlxuZXhwb3J0IGNvbnN0IFBIWF9WSUVXX1NFTEVDVE9SID0gYFske1BIWF9TRVNTSU9OfV1gXG5leHBvcnQgY29uc3QgUEhYX1NUSUNLWSA9IFwiZGF0YS1waHgtc3RpY2t5XCJcbmV4cG9ydCBjb25zdCBQSFhfU1RBVElDID0gXCJkYXRhLXBoeC1zdGF0aWNcIlxuZXhwb3J0IGNvbnN0IFBIWF9SRUFET05MWSA9IFwiZGF0YS1waHgtcmVhZG9ubHlcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFRCA9IFwiZGF0YS1waHgtZGlzYWJsZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFX1dJVEggPSBcImRpc2FibGUtd2l0aFwiXG5leHBvcnQgY29uc3QgUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFID0gXCJkYXRhLXBoeC1kaXNhYmxlLXdpdGgtcmVzdG9yZVwiXG5leHBvcnQgY29uc3QgUEhYX0hPT0sgPSBcImhvb2tcIlxuZXhwb3J0IGNvbnN0IFBIWF9ERUJPVU5DRSA9IFwiZGVib3VuY2VcIlxuZXhwb3J0IGNvbnN0IFBIWF9USFJPVFRMRSA9IFwidGhyb3R0bGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9VUERBVEUgPSBcInVwZGF0ZVwiXG5leHBvcnQgY29uc3QgUEhYX1NUUkVBTSA9IFwic3RyZWFtXCJcbmV4cG9ydCBjb25zdCBQSFhfU1RSRUFNX1JFRiA9IFwiZGF0YS1waHgtc3RyZWFtXCJcbmV4cG9ydCBjb25zdCBQSFhfS0VZID0gXCJrZXlcIlxuZXhwb3J0IGNvbnN0IFBIWF9QUklWQVRFID0gXCJwaHhQcml2YXRlXCJcbmV4cG9ydCBjb25zdCBQSFhfQVVUT19SRUNPVkVSID0gXCJhdXRvLXJlY292ZXJcIlxuZXhwb3J0IGNvbnN0IFBIWF9MVl9ERUJVRyA9IFwicGh4OmxpdmUtc29ja2V0OmRlYnVnXCJcbmV4cG9ydCBjb25zdCBQSFhfTFZfUFJPRklMRSA9IFwicGh4OmxpdmUtc29ja2V0OnByb2ZpbGluZ1wiXG5leHBvcnQgY29uc3QgUEhYX0xWX0xBVEVOQ1lfU0lNID0gXCJwaHg6bGl2ZS1zb2NrZXQ6bGF0ZW5jeS1zaW1cIlxuZXhwb3J0IGNvbnN0IFBIWF9QUk9HUkVTUyA9IFwicHJvZ3Jlc3NcIlxuZXhwb3J0IGNvbnN0IFBIWF9NT1VOVEVEID0gXCJtb3VudGVkXCJcbmV4cG9ydCBjb25zdCBMT0FERVJfVElNRU9VVCA9IDFcbmV4cG9ydCBjb25zdCBCRUZPUkVfVU5MT0FEX0xPQURFUl9USU1FT1VUID0gMjAwXG5leHBvcnQgY29uc3QgQklORElOR19QUkVGSVggPSBcInBoeC1cIlxuZXhwb3J0IGNvbnN0IFBVU0hfVElNRU9VVCA9IDMwMDAwXG5leHBvcnQgY29uc3QgTElOS19IRUFERVIgPSBcIngtcmVxdWVzdGVkLXdpdGhcIlxuZXhwb3J0IGNvbnN0IFJFU1BPTlNFX1VSTF9IRUFERVIgPSBcIngtcmVzcG9uc2UtdXJsXCJcbmV4cG9ydCBjb25zdCBERUJPVU5DRV9UUklHR0VSID0gXCJkZWJvdW5jZS10cmlnZ2VyXCJcbmV4cG9ydCBjb25zdCBUSFJPVFRMRUQgPSBcInRocm90dGxlZFwiXG5leHBvcnQgY29uc3QgREVCT1VOQ0VfUFJFVl9LRVkgPSBcImRlYm91bmNlLXByZXYta2V5XCJcbmV4cG9ydCBjb25zdCBERUZBVUxUUyA9IHtcbiAgZGVib3VuY2U6IDMwMCxcbiAgdGhyb3R0bGU6IDMwMFxufVxuXG4vLyBSZW5kZXJlZFxuZXhwb3J0IGNvbnN0IERZTkFNSUNTID0gXCJkXCJcbmV4cG9ydCBjb25zdCBTVEFUSUMgPSBcInNcIlxuZXhwb3J0IGNvbnN0IENPTVBPTkVOVFMgPSBcImNcIlxuZXhwb3J0IGNvbnN0IEVWRU5UUyA9IFwiZVwiXG5leHBvcnQgY29uc3QgUkVQTFkgPSBcInJcIlxuZXhwb3J0IGNvbnN0IFRJVExFID0gXCJ0XCJcbmV4cG9ydCBjb25zdCBURU1QTEFURVMgPSBcInBcIlxuZXhwb3J0IGNvbnN0IFNUUkVBTSA9IFwic3RyZWFtXCJcbiIsICJpbXBvcnQge1xuICBsb2dFcnJvclxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVudHJ5VXBsb2FkZXIge1xuICBjb25zdHJ1Y3RvcihlbnRyeSwgY2h1bmtTaXplLCBsaXZlU29ja2V0KXtcbiAgICB0aGlzLmxpdmVTb2NrZXQgPSBsaXZlU29ja2V0XG4gICAgdGhpcy5lbnRyeSA9IGVudHJ5XG4gICAgdGhpcy5vZmZzZXQgPSAwXG4gICAgdGhpcy5jaHVua1NpemUgPSBjaHVua1NpemVcbiAgICB0aGlzLmNodW5rVGltZXIgPSBudWxsXG4gICAgdGhpcy5lcnJvcmVkID0gZmFsc2VcbiAgICB0aGlzLnVwbG9hZENoYW5uZWwgPSBsaXZlU29ja2V0LmNoYW5uZWwoYGx2dToke2VudHJ5LnJlZn1gLCB7dG9rZW46IGVudHJ5Lm1ldGFkYXRhKCl9KVxuICB9XG5cbiAgZXJyb3IocmVhc29uKXtcbiAgICBpZih0aGlzLmVycm9yZWQpeyByZXR1cm4gfVxuICAgIHRoaXMuZXJyb3JlZCA9IHRydWVcbiAgICBjbGVhclRpbWVvdXQodGhpcy5jaHVua1RpbWVyKVxuICAgIHRoaXMuZW50cnkuZXJyb3IocmVhc29uKVxuICB9XG5cbiAgdXBsb2FkKCl7XG4gICAgdGhpcy51cGxvYWRDaGFubmVsLm9uRXJyb3IocmVhc29uID0+IHRoaXMuZXJyb3IocmVhc29uKSlcbiAgICB0aGlzLnVwbG9hZENoYW5uZWwuam9pbigpXG4gICAgICAucmVjZWl2ZShcIm9rXCIsIF9kYXRhID0+IHRoaXMucmVhZE5leHRDaHVuaygpKVxuICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCByZWFzb24gPT4gdGhpcy5lcnJvcihyZWFzb24pKVxuICB9XG5cbiAgaXNEb25lKCl7IHJldHVybiB0aGlzLm9mZnNldCA+PSB0aGlzLmVudHJ5LmZpbGUuc2l6ZSB9XG5cbiAgcmVhZE5leHRDaHVuaygpe1xuICAgIGxldCByZWFkZXIgPSBuZXcgd2luZG93LkZpbGVSZWFkZXIoKVxuICAgIGxldCBibG9iID0gdGhpcy5lbnRyeS5maWxlLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmNodW5rU2l6ZSArIHRoaXMub2Zmc2V0KVxuICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4ge1xuICAgICAgaWYoZS50YXJnZXQuZXJyb3IgPT09IG51bGwpe1xuICAgICAgICB0aGlzLm9mZnNldCArPSBlLnRhcmdldC5yZXN1bHQuYnl0ZUxlbmd0aFxuICAgICAgICB0aGlzLnB1c2hDaHVuayhlLnRhcmdldC5yZXN1bHQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbG9nRXJyb3IoXCJSZWFkIGVycm9yOiBcIiArIGUudGFyZ2V0LmVycm9yKVxuICAgICAgfVxuICAgIH1cbiAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcbiAgfVxuXG4gIHB1c2hDaHVuayhjaHVuayl7XG4gICAgaWYoIXRoaXMudXBsb2FkQ2hhbm5lbC5pc0pvaW5lZCgpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnVwbG9hZENoYW5uZWwucHVzaChcImNodW5rXCIsIGNodW5rKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZW50cnkucHJvZ3Jlc3MoKHRoaXMub2Zmc2V0IC8gdGhpcy5lbnRyeS5maWxlLnNpemUpICogMTAwKVxuICAgICAgICBpZighdGhpcy5pc0RvbmUoKSl7XG4gICAgICAgICAgdGhpcy5jaHVua1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlYWROZXh0Q2h1bmsoKSwgdGhpcy5saXZlU29ja2V0LmdldExhdGVuY3lTaW0oKSB8fCAwKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCAoe3JlYXNvbn0pID0+IHRoaXMuZXJyb3IocmVhc29uKSlcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFBIWF9WSUVXX1NFTEVDVE9SXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCBFbnRyeVVwbG9hZGVyIGZyb20gXCIuL2VudHJ5X3VwbG9hZGVyXCJcblxuZXhwb3J0IGxldCBsb2dFcnJvciA9IChtc2csIG9iaikgPT4gY29uc29sZS5lcnJvciAmJiBjb25zb2xlLmVycm9yKG1zZywgb2JqKVxuXG5leHBvcnQgbGV0IGlzQ2lkID0gKGNpZCkgPT4ge1xuICBsZXQgdHlwZSA9IHR5cGVvZihjaWQpXG4gIHJldHVybiB0eXBlID09PSBcIm51bWJlclwiIHx8ICh0eXBlID09PSBcInN0cmluZ1wiICYmIC9eKDB8WzEtOV1cXGQqKSQvLnRlc3QoY2lkKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdER1cGxpY2F0ZUlkcygpe1xuICBsZXQgaWRzID0gbmV3IFNldCgpXG4gIGxldCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqW2lkXVwiKVxuICBmb3IobGV0IGkgPSAwLCBsZW4gPSBlbGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKyl7XG4gICAgaWYoaWRzLmhhcyhlbGVtc1tpXS5pZCkpe1xuICAgICAgY29uc29sZS5lcnJvcihgTXVsdGlwbGUgSURzIGRldGVjdGVkOiAke2VsZW1zW2ldLmlkfS4gRW5zdXJlIHVuaXF1ZSBlbGVtZW50IGlkcy5gKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZHMuYWRkKGVsZW1zW2ldLmlkKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgbGV0IGRlYnVnID0gKHZpZXcsIGtpbmQsIG1zZywgb2JqKSA9PiB7XG4gIGlmKHZpZXcubGl2ZVNvY2tldC5pc0RlYnVnRW5hYmxlZCgpKXtcbiAgICBjb25zb2xlLmxvZyhgJHt2aWV3LmlkfSAke2tpbmR9OiAke21zZ30gLSBgLCBvYmopXG4gIH1cbn1cblxuLy8gd3JhcHMgdmFsdWUgaW4gY2xvc3VyZSBvciByZXR1cm5zIGNsb3N1cmVcbmV4cG9ydCBsZXQgY2xvc3VyZSA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIiA/IHZhbCA6IGZ1bmN0aW9uICgpeyByZXR1cm4gdmFsIH1cblxuZXhwb3J0IGxldCBjbG9uZSA9IChvYmopID0+IHsgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSkgfVxuXG5leHBvcnQgbGV0IGNsb3Nlc3RQaHhCaW5kaW5nID0gKGVsLCBiaW5kaW5nLCBib3JkZXJFbCkgPT4ge1xuICBkbyB7XG4gICAgaWYoZWwubWF0Y2hlcyhgWyR7YmluZGluZ31dYCkgJiYgIWVsLmRpc2FibGVkKXsgcmV0dXJuIGVsIH1cbiAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQgfHwgZWwucGFyZW50Tm9kZVxuICB9IHdoaWxlKGVsICE9PSBudWxsICYmIGVsLm5vZGVUeXBlID09PSAxICYmICEoKGJvcmRlckVsICYmIGJvcmRlckVsLmlzU2FtZU5vZGUoZWwpKSB8fCBlbC5tYXRjaGVzKFBIWF9WSUVXX1NFTEVDVE9SKSkpXG4gIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBsZXQgaXNPYmplY3QgPSAob2JqKSA9PiB7XG4gIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiAhKG9iaiBpbnN0YW5jZW9mIEFycmF5KVxufVxuXG5leHBvcnQgbGV0IGlzRXF1YWxPYmogPSAob2JqMSwgb2JqMikgPT4gSlNPTi5zdHJpbmdpZnkob2JqMSkgPT09IEpTT04uc3RyaW5naWZ5KG9iajIpXG5cbmV4cG9ydCBsZXQgaXNFbXB0eSA9IChvYmopID0+IHtcbiAgZm9yKGxldCB4IGluIG9iail7IHJldHVybiBmYWxzZSB9XG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBsZXQgbWF5YmUgPSAoZWwsIGNhbGxiYWNrKSA9PiBlbCAmJiBjYWxsYmFjayhlbClcblxuZXhwb3J0IGxldCBjaGFubmVsVXBsb2FkZXIgPSBmdW5jdGlvbiAoZW50cmllcywgb25FcnJvciwgcmVzcCwgbGl2ZVNvY2tldCl7XG4gIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgbGV0IGVudHJ5VXBsb2FkZXIgPSBuZXcgRW50cnlVcGxvYWRlcihlbnRyeSwgcmVzcC5jb25maWcuY2h1bmtfc2l6ZSwgbGl2ZVNvY2tldClcbiAgICBlbnRyeVVwbG9hZGVyLnVwbG9hZCgpXG4gIH0pXG59XG4iLCAibGV0IEJyb3dzZXIgPSB7XG4gIGNhblB1c2hTdGF0ZSgpeyByZXR1cm4gKHR5cGVvZiAoaGlzdG9yeS5wdXNoU3RhdGUpICE9PSBcInVuZGVmaW5lZFwiKSB9LFxuXG4gIGRyb3BMb2NhbChsb2NhbFN0b3JhZ2UsIG5hbWVzcGFjZSwgc3Via2V5KXtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSkpXG4gIH0sXG5cbiAgdXBkYXRlTG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSwgaW5pdGlhbCwgZnVuYyl7XG4gICAgbGV0IGN1cnJlbnQgPSB0aGlzLmdldExvY2FsKGxvY2FsU3RvcmFnZSwgbmFtZXNwYWNlLCBzdWJrZXkpXG4gICAgbGV0IGtleSA9IHRoaXMubG9jYWxLZXkobmFtZXNwYWNlLCBzdWJrZXkpXG4gICAgbGV0IG5ld1ZhbCA9IGN1cnJlbnQgPT09IG51bGwgPyBpbml0aWFsIDogZnVuYyhjdXJyZW50KVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkobmV3VmFsKSlcbiAgICByZXR1cm4gbmV3VmFsXG4gIH0sXG5cbiAgZ2V0TG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSl7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSkpKVxuICB9LFxuXG4gIHVwZGF0ZUN1cnJlbnRTdGF0ZShjYWxsYmFjayl7XG4gICAgaWYoIXRoaXMuY2FuUHVzaFN0YXRlKCkpeyByZXR1cm4gfVxuICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKGNhbGxiYWNrKGhpc3Rvcnkuc3RhdGUgfHwge30pLCBcIlwiLCB3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgfSxcblxuICBwdXNoU3RhdGUoa2luZCwgbWV0YSwgdG8pe1xuICAgIGlmKHRoaXMuY2FuUHVzaFN0YXRlKCkpe1xuICAgICAgaWYodG8gIT09IHdpbmRvdy5sb2NhdGlvbi5ocmVmKXtcbiAgICAgICAgaWYobWV0YS50eXBlID09IFwicmVkaXJlY3RcIiAmJiBtZXRhLnNjcm9sbCl7XG4gICAgICAgICAgLy8gSWYgd2UncmUgcmVkaXJlY3Rpbmcgc3RvcmUgdGhlIGN1cnJlbnQgc2Nyb2xsWSBmb3IgdGhlIGN1cnJlbnQgaGlzdG9yeSBzdGF0ZS5cbiAgICAgICAgICBsZXQgY3VycmVudFN0YXRlID0gaGlzdG9yeS5zdGF0ZSB8fCB7fVxuICAgICAgICAgIGN1cnJlbnRTdGF0ZS5zY3JvbGwgPSBtZXRhLnNjcm9sbFxuICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKGN1cnJlbnRTdGF0ZSwgXCJcIiwgd2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgbWV0YS5zY3JvbGwgLy8gT25seSBzdG9yZSB0aGUgc2Nyb2xsIGluIHRoZSByZWRpcmVjdCBjYXNlLlxuICAgICAgICBoaXN0b3J5W2tpbmQgKyBcIlN0YXRlXCJdKG1ldGEsIFwiXCIsIHRvIHx8IG51bGwpIC8vIElFIHdpbGwgY29lcmNlIHVuZGVmaW5lZCB0byBzdHJpbmdcbiAgICAgICAgbGV0IGhhc2hFbCA9IHRoaXMuZ2V0SGFzaFRhcmdldEVsKHdpbmRvdy5sb2NhdGlvbi5oYXNoKVxuXG4gICAgICAgIGlmKGhhc2hFbCl7XG4gICAgICAgICAgaGFzaEVsLnNjcm9sbEludG9WaWV3KClcbiAgICAgICAgfSBlbHNlIGlmKG1ldGEudHlwZSA9PT0gXCJyZWRpcmVjdFwiKXtcbiAgICAgICAgICB3aW5kb3cuc2Nyb2xsKDAsIDApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWRpcmVjdCh0bylcbiAgICB9XG4gIH0sXG5cbiAgc2V0Q29va2llKG5hbWUsIHZhbHVlKXtcbiAgICBkb2N1bWVudC5jb29raWUgPSBgJHtuYW1lfT0ke3ZhbHVlfWBcbiAgfSxcblxuICBnZXRDb29raWUobmFtZSl7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNvb2tpZS5yZXBsYWNlKG5ldyBSZWdFeHAoYCg/Oig/Ol58Lio7XFxzKikke25hbWV9XFxzKlxcPVxccyooW147XSopLiokKXxeLiokYCksIFwiJDFcIilcbiAgfSxcblxuICByZWRpcmVjdCh0b1VSTCwgZmxhc2gpe1xuICAgIGlmKGZsYXNoKXsgQnJvd3Nlci5zZXRDb29raWUoXCJfX3Bob2VuaXhfZmxhc2hfX1wiLCBmbGFzaCArIFwiOyBtYXgtYWdlPTYwMDAwOyBwYXRoPS9cIikgfVxuICAgIHdpbmRvdy5sb2NhdGlvbiA9IHRvVVJMXG4gIH0sXG5cbiAgbG9jYWxLZXkobmFtZXNwYWNlLCBzdWJrZXkpeyByZXR1cm4gYCR7bmFtZXNwYWNlfS0ke3N1YmtleX1gIH0sXG5cbiAgZ2V0SGFzaFRhcmdldEVsKG1heWJlSGFzaCl7XG4gICAgbGV0IGhhc2ggPSBtYXliZUhhc2gudG9TdHJpbmcoKS5zdWJzdHJpbmcoMSlcbiAgICBpZihoYXNoID09PSBcIlwiKXsgcmV0dXJuIH1cbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaGFzaCkgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYVtuYW1lPVwiJHtoYXNofVwiXWApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQnJvd3NlclxuIiwgImltcG9ydCB7XG4gIENIRUNLQUJMRV9JTlBVVFMsXG4gIERFQk9VTkNFX1BSRVZfS0VZLFxuICBERUJPVU5DRV9UUklHR0VSLFxuICBGT0NVU0FCTEVfSU5QVVRTLFxuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfRVZFTlRfQ0xBU1NFUyxcbiAgUEhYX0hBU19GT0NVU0VELFxuICBQSFhfSEFTX1NVQk1JVFRFRCxcbiAgUEhYX01BSU4sXG4gIFBIWF9OT19GRUVEQkFDS19DTEFTUyxcbiAgUEhYX1BBUkVOVF9JRCxcbiAgUEhYX1BSSVZBVEUsXG4gIFBIWF9SRUYsXG4gIFBIWF9SRUZfU1JDLFxuICBQSFhfUk9PVF9JRCxcbiAgUEhYX1NFU1NJT04sXG4gIFBIWF9TVEFUSUMsXG4gIFBIWF9VUExPQURfUkVGLFxuICBQSFhfVklFV19TRUxFQ1RPUixcbiAgUEhYX1NUSUNLWSxcbiAgVEhST1RUTEVEXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGxvZ0Vycm9yXG59IGZyb20gXCIuL3V0aWxzXCJcblxubGV0IERPTSA9IHtcbiAgYnlJZChpZCl7IHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgfHwgbG9nRXJyb3IoYG5vIGlkIGZvdW5kIGZvciAke2lkfWApIH0sXG5cbiAgcmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSl7XG4gICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpXG4gICAgaWYoZWwuY2xhc3NMaXN0Lmxlbmd0aCA9PT0gMCl7IGVsLnJlbW92ZUF0dHJpYnV0ZShcImNsYXNzXCIpIH1cbiAgfSxcblxuICBhbGwobm9kZSwgcXVlcnksIGNhbGxiYWNrKXtcbiAgICBpZighbm9kZSl7IHJldHVybiBbXSB9XG4gICAgbGV0IGFycmF5ID0gQXJyYXkuZnJvbShub2RlLnF1ZXJ5U2VsZWN0b3JBbGwocXVlcnkpKVxuICAgIHJldHVybiBjYWxsYmFjayA/IGFycmF5LmZvckVhY2goY2FsbGJhY2spIDogYXJyYXlcbiAgfSxcblxuICBjaGlsZE5vZGVMZW5ndGgoaHRtbCl7XG4gICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuICAgIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmNoaWxkRWxlbWVudENvdW50XG4gIH0sXG5cbiAgaXNVcGxvYWRJbnB1dChlbCl7IHJldHVybiBlbC50eXBlID09PSBcImZpbGVcIiAmJiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpICE9PSBudWxsIH0sXG5cbiAgaXNBdXRvVXBsb2FkKGlucHV0RWwpeyByZXR1cm4gaW5wdXRFbC5oYXNBdHRyaWJ1dGUoXCJkYXRhLXBoeC1hdXRvLXVwbG9hZFwiKSB9LFxuXG4gIGZpbmRVcGxvYWRJbnB1dHMobm9kZSl7IHJldHVybiB0aGlzLmFsbChub2RlLCBgaW5wdXRbdHlwZT1cImZpbGVcIl1bJHtQSFhfVVBMT0FEX1JFRn1dYCkgfSxcblxuICBmaW5kQ29tcG9uZW50Tm9kZUxpc3Qobm9kZSwgY2lkKXtcbiAgICByZXR1cm4gdGhpcy5maWx0ZXJXaXRoaW5TYW1lTGl2ZVZpZXcodGhpcy5hbGwobm9kZSwgYFske1BIWF9DT01QT05FTlR9PVwiJHtjaWR9XCJdYCksIG5vZGUpXG4gIH0sXG5cbiAgaXNQaHhEZXN0cm95ZWQobm9kZSl7XG4gICAgcmV0dXJuIG5vZGUuaWQgJiYgRE9NLnByaXZhdGUobm9kZSwgXCJkZXN0cm95ZWRcIikgPyB0cnVlIDogZmFsc2VcbiAgfSxcblxuICB3YW50c05ld1RhYihlKXtcbiAgICBsZXQgd2FudHNOZXdUYWIgPSBlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSB8fCBlLm1ldGFLZXkgfHwgKGUuYnV0dG9uICYmIGUuYnV0dG9uID09PSAxKVxuICAgIGxldCBpc0Rvd25sb2FkID0gKGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQgJiYgZS50YXJnZXQuaGFzQXR0cmlidXRlKFwiZG93bmxvYWRcIikpXG4gICAgbGV0IGlzVGFyZ2V0QmxhbmsgPSBlLnRhcmdldC5oYXNBdHRyaWJ1dGUoXCJ0YXJnZXRcIikgJiYgZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpLnRvTG93ZXJDYXNlKCkgPT09IFwiX2JsYW5rXCJcbiAgICByZXR1cm4gd2FudHNOZXdUYWIgfHwgaXNUYXJnZXRCbGFuayB8fCBpc0Rvd25sb2FkXG4gIH0sXG5cbiAgaXNVbmxvYWRhYmxlRm9ybVN1Ym1pdChlKXtcbiAgICAvLyBJZ25vcmUgZm9ybSBzdWJtaXNzaW9ucyBpbnRlbmRlZCB0byBjbG9zZSBhIG5hdGl2ZSA8ZGlhbG9nPiBlbGVtZW50XG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L2RpYWxvZyN1c2FnZV9ub3Rlc1xuICAgIGxldCBpc0RpYWxvZ1N1Ym1pdCA9IChlLnRhcmdldCAmJiBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJtZXRob2RcIikgPT09IFwiZGlhbG9nXCIpIHx8XG4gICAgICAoZS5zdWJtaXR0ZXIgJiYgZS5zdWJtaXR0ZXIuZ2V0QXR0cmlidXRlKFwiZm9ybW1ldGhvZFwiKSA9PT0gXCJkaWFsb2dcIilcblxuICAgIGlmKGlzRGlhbG9nU3VibWl0KXtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gIWUuZGVmYXVsdFByZXZlbnRlZCAmJiAhdGhpcy53YW50c05ld1RhYihlKVxuICAgIH1cbiAgfSxcblxuICBpc05ld1BhZ2VDbGljayhlLCBjdXJyZW50TG9jYXRpb24pe1xuICAgIGxldCBocmVmID0gZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCA/IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIikgOiBudWxsXG4gICAgbGV0IHVybFxuXG4gICAgaWYoZS5kZWZhdWx0UHJldmVudGVkIHx8IGhyZWYgPT09IG51bGwgfHwgdGhpcy53YW50c05ld1RhYihlKSl7IHJldHVybiBmYWxzZSB9XG4gICAgaWYoaHJlZi5zdGFydHNXaXRoKFwibWFpbHRvOlwiKSB8fCBocmVmLnN0YXJ0c1dpdGgoXCJ0ZWw6XCIpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICBpZihlLnRhcmdldC5pc0NvbnRlbnRFZGl0YWJsZSl7IHJldHVybiBmYWxzZSB9XG5cbiAgICB0cnkge1xuICAgICAgdXJsID0gbmV3IFVSTChocmVmKVxuICAgIH0gY2F0Y2goZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdXJsID0gbmV3IFVSTChocmVmLCBjdXJyZW50TG9jYXRpb24pXG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgLy8gYmFkIFVSTCwgZmFsbGJhY2sgdG8gbGV0IGJyb3dzZXIgdHJ5IGl0IGFzIGV4dGVybmFsXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYodXJsLmhvc3QgPT09IGN1cnJlbnRMb2NhdGlvbi5ob3N0ICYmIHVybC5wcm90b2NvbCA9PT0gY3VycmVudExvY2F0aW9uLnByb3RvY29sKXtcbiAgICAgIGlmKHVybC5wYXRobmFtZSA9PT0gY3VycmVudExvY2F0aW9uLnBhdGhuYW1lICYmIHVybC5zZWFyY2ggPT09IGN1cnJlbnRMb2NhdGlvbi5zZWFyY2gpe1xuICAgICAgICByZXR1cm4gdXJsLmhhc2ggPT09IFwiXCIgJiYgIXVybC5ocmVmLmVuZHNXaXRoKFwiI1wiKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXJsLnByb3RvY29sLnN0YXJ0c1dpdGgoXCJodHRwXCIpXG4gIH0sXG5cbiAgbWFya1BoeENoaWxkRGVzdHJveWVkKGVsKXtcbiAgICBpZih0aGlzLmlzUGh4Q2hpbGQoZWwpKXsgZWwuc2V0QXR0cmlidXRlKFBIWF9TRVNTSU9OLCBcIlwiKSB9XG4gICAgdGhpcy5wdXRQcml2YXRlKGVsLCBcImRlc3Ryb3llZFwiLCB0cnVlKVxuICB9LFxuXG4gIGZpbmRQaHhDaGlsZHJlbkluRnJhZ21lbnQoaHRtbCwgcGFyZW50SWQpe1xuICAgIGxldCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKVxuICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWxcbiAgICByZXR1cm4gdGhpcy5maW5kUGh4Q2hpbGRyZW4odGVtcGxhdGUuY29udGVudCwgcGFyZW50SWQpXG4gIH0sXG5cbiAgaXNJZ25vcmVkKGVsLCBwaHhVcGRhdGUpe1xuICAgIHJldHVybiAoZWwuZ2V0QXR0cmlidXRlKHBoeFVwZGF0ZSkgfHwgZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1waHgtdXBkYXRlXCIpKSA9PT0gXCJpZ25vcmVcIlxuICB9LFxuXG4gIGlzUGh4VXBkYXRlKGVsLCBwaHhVcGRhdGUsIHVwZGF0ZVR5cGVzKXtcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlICYmIHVwZGF0ZVR5cGVzLmluZGV4T2YoZWwuZ2V0QXR0cmlidXRlKHBoeFVwZGF0ZSkpID49IDBcbiAgfSxcblxuICBmaW5kUGh4U3RpY2t5KGVsKXsgcmV0dXJuIHRoaXMuYWxsKGVsLCBgWyR7UEhYX1NUSUNLWX1dYCkgfSxcblxuICBmaW5kUGh4Q2hpbGRyZW4oZWwsIHBhcmVudElkKXtcbiAgICByZXR1cm4gdGhpcy5hbGwoZWwsIGAke1BIWF9WSUVXX1NFTEVDVE9SfVske1BIWF9QQVJFTlRfSUR9PVwiJHtwYXJlbnRJZH1cIl1gKVxuICB9LFxuXG4gIGZpbmRQYXJlbnRDSURzKG5vZGUsIGNpZHMpe1xuICAgIGxldCBpbml0aWFsID0gbmV3IFNldChjaWRzKVxuICAgIGxldCBwYXJlbnRDaWRzID1cbiAgICAgIGNpZHMucmVkdWNlKChhY2MsIGNpZCkgPT4ge1xuICAgICAgICBsZXQgc2VsZWN0b3IgPSBgWyR7UEhYX0NPTVBPTkVOVH09XCIke2NpZH1cIl0gWyR7UEhYX0NPTVBPTkVOVH1dYFxuXG4gICAgICAgIHRoaXMuZmlsdGVyV2l0aGluU2FtZUxpdmVWaWV3KHRoaXMuYWxsKG5vZGUsIHNlbGVjdG9yKSwgbm9kZSlcbiAgICAgICAgICAubWFwKGVsID0+IHBhcnNlSW50KGVsLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKSkpXG4gICAgICAgICAgLmZvckVhY2goY2hpbGRDSUQgPT4gYWNjLmRlbGV0ZShjaGlsZENJRCkpXG5cbiAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgfSwgaW5pdGlhbClcblxuICAgIHJldHVybiBwYXJlbnRDaWRzLnNpemUgPT09IDAgPyBuZXcgU2V0KGNpZHMpIDogcGFyZW50Q2lkc1xuICB9LFxuXG4gIGZpbHRlcldpdGhpblNhbWVMaXZlVmlldyhub2RlcywgcGFyZW50KXtcbiAgICBpZihwYXJlbnQucXVlcnlTZWxlY3RvcihQSFhfVklFV19TRUxFQ1RPUikpe1xuICAgICAgcmV0dXJuIG5vZGVzLmZpbHRlcihlbCA9PiB0aGlzLndpdGhpblNhbWVMaXZlVmlldyhlbCwgcGFyZW50KSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5vZGVzXG4gICAgfVxuICB9LFxuXG4gIHdpdGhpblNhbWVMaXZlVmlldyhub2RlLCBwYXJlbnQpe1xuICAgIHdoaWxlKG5vZGUgPSBub2RlLnBhcmVudE5vZGUpe1xuICAgICAgaWYobm9kZS5pc1NhbWVOb2RlKHBhcmVudCkpeyByZXR1cm4gdHJ1ZSB9XG4gICAgICBpZihub2RlLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTikgIT09IG51bGwpeyByZXR1cm4gZmFsc2UgfVxuICAgIH1cbiAgfSxcblxuICBwcml2YXRlKGVsLCBrZXkpeyByZXR1cm4gZWxbUEhYX1BSSVZBVEVdICYmIGVsW1BIWF9QUklWQVRFXVtrZXldIH0sXG5cbiAgZGVsZXRlUHJpdmF0ZShlbCwga2V5KXsgZWxbUEhYX1BSSVZBVEVdICYmIGRlbGV0ZSAoZWxbUEhYX1BSSVZBVEVdW2tleV0pIH0sXG5cbiAgcHV0UHJpdmF0ZShlbCwga2V5LCB2YWx1ZSl7XG4gICAgaWYoIWVsW1BIWF9QUklWQVRFXSl7IGVsW1BIWF9QUklWQVRFXSA9IHt9IH1cbiAgICBlbFtQSFhfUFJJVkFURV1ba2V5XSA9IHZhbHVlXG4gIH0sXG5cbiAgdXBkYXRlUHJpdmF0ZShlbCwga2V5LCBkZWZhdWx0VmFsLCB1cGRhdGVGdW5jKXtcbiAgICBsZXQgZXhpc3RpbmcgPSB0aGlzLnByaXZhdGUoZWwsIGtleSlcbiAgICBpZihleGlzdGluZyA9PT0gdW5kZWZpbmVkKXtcbiAgICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCB1cGRhdGVGdW5jKGRlZmF1bHRWYWwpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnB1dFByaXZhdGUoZWwsIGtleSwgdXBkYXRlRnVuYyhleGlzdGluZykpXG4gICAgfVxuICB9LFxuXG4gIGNvcHlQcml2YXRlcyh0YXJnZXQsIHNvdXJjZSl7XG4gICAgaWYoc291cmNlW1BIWF9QUklWQVRFXSl7XG4gICAgICB0YXJnZXRbUEhYX1BSSVZBVEVdID0gc291cmNlW1BIWF9QUklWQVRFXVxuICAgIH1cbiAgfSxcblxuICBwdXRUaXRsZShzdHIpe1xuICAgIGxldCB0aXRsZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInRpdGxlXCIpXG4gICAgaWYodGl0bGVFbCl7XG4gICAgICBsZXQge3ByZWZpeCwgc3VmZml4fSA9IHRpdGxlRWwuZGF0YXNldFxuICAgICAgZG9jdW1lbnQudGl0bGUgPSBgJHtwcmVmaXggfHwgXCJcIn0ke3N0cn0ke3N1ZmZpeCB8fCBcIlwifWBcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQudGl0bGUgPSBzdHJcbiAgICB9XG4gIH0sXG5cbiAgZGVib3VuY2UoZWwsIGV2ZW50LCBwaHhEZWJvdW5jZSwgZGVmYXVsdERlYm91bmNlLCBwaHhUaHJvdHRsZSwgZGVmYXVsdFRocm90dGxlLCBhc3luY0ZpbHRlciwgY2FsbGJhY2spe1xuICAgIGxldCBkZWJvdW5jZSA9IGVsLmdldEF0dHJpYnV0ZShwaHhEZWJvdW5jZSlcbiAgICBsZXQgdGhyb3R0bGUgPSBlbC5nZXRBdHRyaWJ1dGUocGh4VGhyb3R0bGUpXG5cbiAgICBpZihkZWJvdW5jZSA9PT0gXCJcIil7IGRlYm91bmNlID0gZGVmYXVsdERlYm91bmNlIH1cbiAgICBpZih0aHJvdHRsZSA9PT0gXCJcIil7IHRocm90dGxlID0gZGVmYXVsdFRocm90dGxlIH1cbiAgICBsZXQgdmFsdWUgPSBkZWJvdW5jZSB8fCB0aHJvdHRsZVxuICAgIHN3aXRjaCh2YWx1ZSl7XG4gICAgICBjYXNlIG51bGw6IHJldHVybiBjYWxsYmFjaygpXG5cbiAgICAgIGNhc2UgXCJibHVyXCI6XG4gICAgICAgIGlmKHRoaXMub25jZShlbCwgXCJkZWJvdW5jZS1ibHVyXCIpKXtcbiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCAoKSA9PiBjYWxsYmFjaygpKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBsZXQgdGltZW91dCA9IHBhcnNlSW50KHZhbHVlKVxuICAgICAgICBsZXQgdHJpZ2dlciA9ICgpID0+IHRocm90dGxlID8gdGhpcy5kZWxldGVQcml2YXRlKGVsLCBUSFJPVFRMRUQpIDogY2FsbGJhY2soKVxuICAgICAgICBsZXQgY3VycmVudEN5Y2xlID0gdGhpcy5pbmNDeWNsZShlbCwgREVCT1VOQ0VfVFJJR0dFUiwgdHJpZ2dlcilcbiAgICAgICAgaWYoaXNOYU4odGltZW91dCkpeyByZXR1cm4gbG9nRXJyb3IoYGludmFsaWQgdGhyb3R0bGUvZGVib3VuY2UgdmFsdWU6ICR7dmFsdWV9YCkgfVxuICAgICAgICBpZih0aHJvdHRsZSl7XG4gICAgICAgICAgbGV0IG5ld0tleURvd24gPSBmYWxzZVxuICAgICAgICAgIGlmKGV2ZW50LnR5cGUgPT09IFwia2V5ZG93blwiKXtcbiAgICAgICAgICAgIGxldCBwcmV2S2V5ID0gdGhpcy5wcml2YXRlKGVsLCBERUJPVU5DRV9QUkVWX0tFWSlcbiAgICAgICAgICAgIHRoaXMucHV0UHJpdmF0ZShlbCwgREVCT1VOQ0VfUFJFVl9LRVksIGV2ZW50LmtleSlcbiAgICAgICAgICAgIG5ld0tleURvd24gPSBwcmV2S2V5ICE9PSBldmVudC5rZXlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZighbmV3S2V5RG93biAmJiB0aGlzLnByaXZhdGUoZWwsIFRIUk9UVExFRCkpe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKClcbiAgICAgICAgICAgIHRoaXMucHV0UHJpdmF0ZShlbCwgVEhST1RUTEVELCB0cnVlKVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmKGFzeW5jRmlsdGVyKCkpeyB0aGlzLnRyaWdnZXJDeWNsZShlbCwgREVCT1VOQ0VfVFJJR0dFUikgfVxuICAgICAgICAgICAgfSwgdGltZW91dClcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZihhc3luY0ZpbHRlcigpKXsgdGhpcy50cmlnZ2VyQ3ljbGUoZWwsIERFQk9VTkNFX1RSSUdHRVIsIGN1cnJlbnRDeWNsZSkgfVxuICAgICAgICAgIH0sIHRpbWVvdXQpXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZm9ybSA9IGVsLmZvcm1cbiAgICAgICAgaWYoZm9ybSAmJiB0aGlzLm9uY2UoZm9ybSwgXCJiaW5kLWRlYm91bmNlXCIpKXtcbiAgICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgQXJyYXkuZnJvbSgobmV3IEZvcm1EYXRhKGZvcm0pKS5lbnRyaWVzKCksIChbbmFtZV0pID0+IHtcbiAgICAgICAgICAgICAgbGV0IGlucHV0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKGBbbmFtZT1cIiR7bmFtZX1cIl1gKVxuICAgICAgICAgICAgICB0aGlzLmluY0N5Y2xlKGlucHV0LCBERUJPVU5DRV9UUklHR0VSKVxuICAgICAgICAgICAgICB0aGlzLmRlbGV0ZVByaXZhdGUoaW5wdXQsIFRIUk9UVExFRClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLm9uY2UoZWwsIFwiYmluZC1kZWJvdW5jZVwiKSl7XG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgKCkgPT4gdGhpcy50cmlnZ2VyQ3ljbGUoZWwsIERFQk9VTkNFX1RSSUdHRVIpKVxuICAgICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHRyaWdnZXJDeWNsZShlbCwga2V5LCBjdXJyZW50Q3ljbGUpe1xuICAgIGxldCBbY3ljbGUsIHRyaWdnZXJdID0gdGhpcy5wcml2YXRlKGVsLCBrZXkpXG4gICAgaWYoIWN1cnJlbnRDeWNsZSl7IGN1cnJlbnRDeWNsZSA9IGN5Y2xlIH1cbiAgICBpZihjdXJyZW50Q3ljbGUgPT09IGN5Y2xlKXtcbiAgICAgIHRoaXMuaW5jQ3ljbGUoZWwsIGtleSlcbiAgICAgIHRyaWdnZXIoKVxuICAgIH1cbiAgfSxcblxuICBvbmNlKGVsLCBrZXkpe1xuICAgIGlmKHRoaXMucHJpdmF0ZShlbCwga2V5KSA9PT0gdHJ1ZSl7IHJldHVybiBmYWxzZSB9XG4gICAgdGhpcy5wdXRQcml2YXRlKGVsLCBrZXksIHRydWUpXG4gICAgcmV0dXJuIHRydWVcbiAgfSxcblxuICBpbmNDeWNsZShlbCwga2V5LCB0cmlnZ2VyID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIGxldCBbY3VycmVudEN5Y2xlXSA9IHRoaXMucHJpdmF0ZShlbCwga2V5KSB8fCBbMCwgdHJpZ2dlcl1cbiAgICBjdXJyZW50Q3ljbGUrK1xuICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCBbY3VycmVudEN5Y2xlLCB0cmlnZ2VyXSlcbiAgICByZXR1cm4gY3VycmVudEN5Y2xlXG4gIH0sXG5cbiAgbWF5YmVBZGRQcml2YXRlSG9va3MoZWwsIHBoeFZpZXdwb3J0VG9wLCBwaHhWaWV3cG9ydEJvdHRvbSl7XG4gICAgaWYoZWwuaGFzQXR0cmlidXRlICYmIChlbC5oYXNBdHRyaWJ1dGUocGh4Vmlld3BvcnRUb3ApIHx8IGVsLmhhc0F0dHJpYnV0ZShwaHhWaWV3cG9ydEJvdHRvbSkpKXtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShcImRhdGEtcGh4LWhvb2tcIiwgXCJQaG9lbml4LkluZmluaXRlU2Nyb2xsXCIpXG4gICAgfVxuICB9LFxuXG4gIG1heWJlSGlkZUZlZWRiYWNrKGNvbnRhaW5lciwgaW5wdXQsIHBoeEZlZWRiYWNrRm9yKXtcbiAgICBpZighKHRoaXMucHJpdmF0ZShpbnB1dCwgUEhYX0hBU19GT0NVU0VEKSB8fCB0aGlzLnByaXZhdGUoaW5wdXQsIFBIWF9IQVNfU1VCTUlUVEVEKSkpe1xuICAgICAgbGV0IGZlZWRiYWNrcyA9IFtpbnB1dC5uYW1lXVxuICAgICAgaWYoaW5wdXQubmFtZS5lbmRzV2l0aChcIltdXCIpKXsgZmVlZGJhY2tzLnB1c2goaW5wdXQubmFtZS5zbGljZSgwLCAtMikpIH1cbiAgICAgIGxldCBzZWxlY3RvciA9IGZlZWRiYWNrcy5tYXAoZiA9PiBgWyR7cGh4RmVlZGJhY2tGb3J9PVwiJHtmfVwiXWApLmpvaW4oXCIsIFwiKVxuICAgICAgRE9NLmFsbChjb250YWluZXIsIHNlbGVjdG9yLCBlbCA9PiBlbC5jbGFzc0xpc3QuYWRkKFBIWF9OT19GRUVEQkFDS19DTEFTUykpXG4gICAgfVxuICB9LFxuXG4gIHJlc2V0Rm9ybShmb3JtLCBwaHhGZWVkYmFja0Zvcil7XG4gICAgQXJyYXkuZnJvbShmb3JtLmVsZW1lbnRzKS5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGxldCBxdWVyeSA9IGBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0LmlkfVwiXSxcbiAgICAgICAgICAgICAgICAgICBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0Lm5hbWV9XCJdLFxuICAgICAgICAgICAgICAgICAgIFske3BoeEZlZWRiYWNrRm9yfT1cIiR7aW5wdXQubmFtZS5yZXBsYWNlKC9cXFtcXF0kLywgXCJcIil9XCJdYFxuXG4gICAgICB0aGlzLmRlbGV0ZVByaXZhdGUoaW5wdXQsIFBIWF9IQVNfRk9DVVNFRClcbiAgICAgIHRoaXMuZGVsZXRlUHJpdmF0ZShpbnB1dCwgUEhYX0hBU19TVUJNSVRURUQpXG4gICAgICB0aGlzLmFsbChkb2N1bWVudCwgcXVlcnksIGZlZWRiYWNrRWwgPT4ge1xuICAgICAgICBmZWVkYmFja0VsLmNsYXNzTGlzdC5hZGQoUEhYX05PX0ZFRURCQUNLX0NMQVNTKVxuICAgICAgfSlcbiAgICB9KVxuICB9LFxuXG4gIHNob3dFcnJvcihpbnB1dEVsLCBwaHhGZWVkYmFja0Zvcil7XG4gICAgaWYoaW5wdXRFbC5pZCB8fCBpbnB1dEVsLm5hbWUpe1xuICAgICAgdGhpcy5hbGwoaW5wdXRFbC5mb3JtLCBgWyR7cGh4RmVlZGJhY2tGb3J9PVwiJHtpbnB1dEVsLmlkfVwiXSwgWyR7cGh4RmVlZGJhY2tGb3J9PVwiJHtpbnB1dEVsLm5hbWV9XCJdYCwgKGVsKSA9PiB7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoZWwsIFBIWF9OT19GRUVEQkFDS19DTEFTUylcbiAgICAgIH0pXG4gICAgfVxuICB9LFxuXG4gIGlzUGh4Q2hpbGQobm9kZSl7XG4gICAgcmV0dXJuIG5vZGUuZ2V0QXR0cmlidXRlICYmIG5vZGUuZ2V0QXR0cmlidXRlKFBIWF9QQVJFTlRfSUQpXG4gIH0sXG5cbiAgaXNQaHhTdGlja3kobm9kZSl7XG4gICAgcmV0dXJuIG5vZGUuZ2V0QXR0cmlidXRlICYmIG5vZGUuZ2V0QXR0cmlidXRlKFBIWF9TVElDS1kpICE9PSBudWxsXG4gIH0sXG5cbiAgZmlyc3RQaHhDaGlsZChlbCl7XG4gICAgcmV0dXJuIHRoaXMuaXNQaHhDaGlsZChlbCkgPyBlbCA6IHRoaXMuYWxsKGVsLCBgWyR7UEhYX1BBUkVOVF9JRH1dYClbMF1cbiAgfSxcblxuICBkaXNwYXRjaEV2ZW50KHRhcmdldCwgbmFtZSwgb3B0cyA9IHt9KXtcbiAgICBsZXQgYnViYmxlcyA9IG9wdHMuYnViYmxlcyA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6ICEhb3B0cy5idWJibGVzXG4gICAgbGV0IGV2ZW50T3B0cyA9IHtidWJibGVzOiBidWJibGVzLCBjYW5jZWxhYmxlOiB0cnVlLCBkZXRhaWw6IG9wdHMuZGV0YWlsIHx8IHt9fVxuICAgIGxldCBldmVudCA9IG5hbWUgPT09IFwiY2xpY2tcIiA/IG5ldyBNb3VzZUV2ZW50KFwiY2xpY2tcIiwgZXZlbnRPcHRzKSA6IG5ldyBDdXN0b21FdmVudChuYW1lLCBldmVudE9wdHMpXG4gICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gIH0sXG5cbiAgY2xvbmVOb2RlKG5vZGUsIGh0bWwpe1xuICAgIGlmKHR5cGVvZiAoaHRtbCkgPT09IFwidW5kZWZpbmVkXCIpe1xuICAgICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBjbG9uZWQgPSBub2RlLmNsb25lTm9kZShmYWxzZSlcbiAgICAgIGNsb25lZC5pbm5lckhUTUwgPSBodG1sXG4gICAgICByZXR1cm4gY2xvbmVkXG4gICAgfVxuICB9LFxuXG4gIG1lcmdlQXR0cnModGFyZ2V0LCBzb3VyY2UsIG9wdHMgPSB7fSl7XG4gICAgbGV0IGV4Y2x1ZGUgPSBvcHRzLmV4Y2x1ZGUgfHwgW11cbiAgICBsZXQgaXNJZ25vcmVkID0gb3B0cy5pc0lnbm9yZWRcbiAgICBsZXQgc291cmNlQXR0cnMgPSBzb3VyY2UuYXR0cmlidXRlc1xuICAgIGZvcihsZXQgaSA9IHNvdXJjZUF0dHJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcbiAgICAgIGxldCBuYW1lID0gc291cmNlQXR0cnNbaV0ubmFtZVxuICAgICAgaWYoZXhjbHVkZS5pbmRleE9mKG5hbWUpIDwgMCl7IHRhcmdldC5zZXRBdHRyaWJ1dGUobmFtZSwgc291cmNlLmdldEF0dHJpYnV0ZShuYW1lKSkgfVxuICAgIH1cblxuICAgIGxldCB0YXJnZXRBdHRycyA9IHRhcmdldC5hdHRyaWJ1dGVzXG4gICAgZm9yKGxldCBpID0gdGFyZ2V0QXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuICAgICAgbGV0IG5hbWUgPSB0YXJnZXRBdHRyc1tpXS5uYW1lXG4gICAgICBpZihpc0lnbm9yZWQpe1xuICAgICAgICBpZihuYW1lLnN0YXJ0c1dpdGgoXCJkYXRhLVwiKSAmJiAhc291cmNlLmhhc0F0dHJpYnV0ZShuYW1lKSl7IHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUobmFtZSkgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYoIXNvdXJjZS5oYXNBdHRyaWJ1dGUobmFtZSkpeyB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKG5hbWUpIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgbWVyZ2VGb2N1c2VkSW5wdXQodGFyZ2V0LCBzb3VyY2Upe1xuICAgIC8vIHNraXAgc2VsZWN0cyBiZWNhdXNlIEZGIHdpbGwgcmVzZXQgaGlnaGxpZ2h0ZWQgaW5kZXggZm9yIGFueSBzZXRBdHRyaWJ1dGVcbiAgICBpZighKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50KSl7IERPTS5tZXJnZUF0dHJzKHRhcmdldCwgc291cmNlLCB7ZXhjbHVkZTogW1widmFsdWVcIl19KSB9XG4gICAgaWYoc291cmNlLnJlYWRPbmx5KXtcbiAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLCB0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKFwicmVhZG9ubHlcIilcbiAgICB9XG4gIH0sXG5cbiAgaGFzU2VsZWN0aW9uUmFuZ2UoZWwpe1xuICAgIHJldHVybiBlbC5zZXRTZWxlY3Rpb25SYW5nZSAmJiAoZWwudHlwZSA9PT0gXCJ0ZXh0XCIgfHwgZWwudHlwZSA9PT0gXCJ0ZXh0YXJlYVwiKVxuICB9LFxuXG4gIHJlc3RvcmVGb2N1cyhmb2N1c2VkLCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKXtcbiAgICBpZighRE9NLmlzVGV4dHVhbElucHV0KGZvY3VzZWQpKXsgcmV0dXJuIH1cbiAgICBsZXQgd2FzRm9jdXNlZCA9IGZvY3VzZWQubWF0Y2hlcyhcIjpmb2N1c1wiKVxuICAgIGlmKGZvY3VzZWQucmVhZE9ubHkpeyBmb2N1c2VkLmJsdXIoKSB9XG4gICAgaWYoIXdhc0ZvY3VzZWQpeyBmb2N1c2VkLmZvY3VzKCkgfVxuICAgIGlmKHRoaXMuaGFzU2VsZWN0aW9uUmFuZ2UoZm9jdXNlZCkpe1xuICAgICAgZm9jdXNlZC5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKVxuICAgIH1cbiAgfSxcblxuICBpc0Zvcm1JbnB1dChlbCl7IHJldHVybiAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2kudGVzdChlbC50YWdOYW1lKSAmJiBlbC50eXBlICE9PSBcImJ1dHRvblwiIH0sXG5cbiAgc3luY0F0dHJzVG9Qcm9wcyhlbCl7XG4gICAgaWYoZWwgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50ICYmIENIRUNLQUJMRV9JTlBVVFMuaW5kZXhPZihlbC50eXBlLnRvTG9jYWxlTG93ZXJDYXNlKCkpID49IDApe1xuICAgICAgZWwuY2hlY2tlZCA9IGVsLmdldEF0dHJpYnV0ZShcImNoZWNrZWRcIikgIT09IG51bGxcbiAgICB9XG4gIH0sXG5cbiAgaXNUZXh0dWFsSW5wdXQoZWwpeyByZXR1cm4gRk9DVVNBQkxFX0lOUFVUUy5pbmRleE9mKGVsLnR5cGUpID49IDAgfSxcblxuICBpc05vd1RyaWdnZXJGb3JtRXh0ZXJuYWwoZWwsIHBoeFRyaWdnZXJFeHRlcm5hbCl7XG4gICAgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZSAmJiBlbC5nZXRBdHRyaWJ1dGUocGh4VHJpZ2dlckV4dGVybmFsKSAhPT0gbnVsbFxuICB9LFxuXG4gIHN5bmNQZW5kaW5nUmVmKGZyb21FbCwgdG9FbCwgZGlzYWJsZVdpdGgpe1xuICAgIGxldCByZWYgPSBmcm9tRWwuZ2V0QXR0cmlidXRlKFBIWF9SRUYpXG4gICAgaWYocmVmID09PSBudWxsKXsgcmV0dXJuIHRydWUgfVxuICAgIGxldCByZWZTcmMgPSBmcm9tRWwuZ2V0QXR0cmlidXRlKFBIWF9SRUZfU1JDKVxuXG4gICAgaWYoRE9NLmlzRm9ybUlucHV0KGZyb21FbCkgfHwgZnJvbUVsLmdldEF0dHJpYnV0ZShkaXNhYmxlV2l0aCkgIT09IG51bGwpe1xuICAgICAgaWYoRE9NLmlzVXBsb2FkSW5wdXQoZnJvbUVsKSl7IERPTS5tZXJnZUF0dHJzKGZyb21FbCwgdG9FbCwge2lzSWdub3JlZDogdHJ1ZX0pIH1cbiAgICAgIERPTS5wdXRQcml2YXRlKGZyb21FbCwgUEhYX1JFRiwgdG9FbClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICBQSFhfRVZFTlRfQ0xBU1NFUy5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7XG4gICAgICAgIGZyb21FbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSAmJiB0b0VsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKVxuICAgICAgfSlcbiAgICAgIHRvRWwuc2V0QXR0cmlidXRlKFBIWF9SRUYsIHJlZilcbiAgICAgIHRvRWwuc2V0QXR0cmlidXRlKFBIWF9SRUZfU1JDLCByZWZTcmMpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfSxcblxuICBjbGVhbkNoaWxkTm9kZXMoY29udGFpbmVyLCBwaHhVcGRhdGUpe1xuICAgIGlmKERPTS5pc1BoeFVwZGF0ZShjb250YWluZXIsIHBoeFVwZGF0ZSwgW1wiYXBwZW5kXCIsIFwicHJlcGVuZFwiXSkpe1xuICAgICAgbGV0IHRvUmVtb3ZlID0gW11cbiAgICAgIGNvbnRhaW5lci5jaGlsZE5vZGVzLmZvckVhY2goY2hpbGROb2RlID0+IHtcbiAgICAgICAgaWYoIWNoaWxkTm9kZS5pZCl7XG4gICAgICAgICAgLy8gU2tpcCB3YXJuaW5nIGlmIGl0J3MgYW4gZW1wdHkgdGV4dCBub2RlIChlLmcuIGEgbmV3LWxpbmUpXG4gICAgICAgICAgbGV0IGlzRW1wdHlUZXh0Tm9kZSA9IGNoaWxkTm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUgJiYgY2hpbGROb2RlLm5vZGVWYWx1ZS50cmltKCkgPT09IFwiXCJcbiAgICAgICAgICBpZighaXNFbXB0eVRleHROb2RlKXtcbiAgICAgICAgICAgIGxvZ0Vycm9yKFwib25seSBIVE1MIGVsZW1lbnQgdGFncyB3aXRoIGFuIGlkIGFyZSBhbGxvd2VkIGluc2lkZSBjb250YWluZXJzIHdpdGggcGh4LXVwZGF0ZS5cXG5cXG5cIiArXG4gICAgICAgICAgICAgIGByZW1vdmluZyBpbGxlZ2FsIG5vZGU6IFwiJHsoY2hpbGROb2RlLm91dGVySFRNTCB8fCBjaGlsZE5vZGUubm9kZVZhbHVlKS50cmltKCl9XCJcXG5cXG5gKVxuICAgICAgICAgIH1cbiAgICAgICAgICB0b1JlbW92ZS5wdXNoKGNoaWxkTm9kZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHRvUmVtb3ZlLmZvckVhY2goY2hpbGROb2RlID0+IGNoaWxkTm9kZS5yZW1vdmUoKSlcbiAgICB9XG4gIH0sXG5cbiAgcmVwbGFjZVJvb3RDb250YWluZXIoY29udGFpbmVyLCB0YWdOYW1lLCBhdHRycyl7XG4gICAgbGV0IHJldGFpbmVkQXR0cnMgPSBuZXcgU2V0KFtcImlkXCIsIFBIWF9TRVNTSU9OLCBQSFhfU1RBVElDLCBQSFhfTUFJTiwgUEhYX1JPT1RfSURdKVxuICAgIGlmKGNvbnRhaW5lci50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHRhZ05hbWUudG9Mb3dlckNhc2UoKSl7XG4gICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5hdHRyaWJ1dGVzKVxuICAgICAgICAuZmlsdGVyKGF0dHIgPT4gIXJldGFpbmVkQXR0cnMuaGFzKGF0dHIubmFtZS50b0xvd2VyQ2FzZSgpKSlcbiAgICAgICAgLmZvckVhY2goYXR0ciA9PiBjb250YWluZXIucmVtb3ZlQXR0cmlidXRlKGF0dHIubmFtZSkpXG5cbiAgICAgIE9iamVjdC5rZXlzKGF0dHJzKVxuICAgICAgICAuZmlsdGVyKG5hbWUgPT4gIXJldGFpbmVkQXR0cnMuaGFzKG5hbWUudG9Mb3dlckNhc2UoKSkpXG4gICAgICAgIC5mb3JFYWNoKGF0dHIgPT4gY29udGFpbmVyLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyc1thdHRyXSkpXG5cbiAgICAgIHJldHVybiBjb250YWluZXJcblxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgbmV3Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKVxuICAgICAgT2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goYXR0ciA9PiBuZXdDb250YWluZXIuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJzW2F0dHJdKSlcbiAgICAgIHJldGFpbmVkQXR0cnMuZm9yRWFjaChhdHRyID0+IG5ld0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoYXR0ciwgY29udGFpbmVyLmdldEF0dHJpYnV0ZShhdHRyKSkpXG4gICAgICBuZXdDb250YWluZXIuaW5uZXJIVE1MID0gY29udGFpbmVyLmlubmVySFRNTFxuICAgICAgY29udGFpbmVyLnJlcGxhY2VXaXRoKG5ld0NvbnRhaW5lcilcbiAgICAgIHJldHVybiBuZXdDb250YWluZXJcbiAgICB9XG4gIH0sXG5cbiAgZ2V0U3RpY2t5KGVsLCBuYW1lLCBkZWZhdWx0VmFsKXtcbiAgICBsZXQgb3AgPSAoRE9NLnByaXZhdGUoZWwsIFwic3RpY2t5XCIpIHx8IFtdKS5maW5kKChbZXhpc3RpbmdOYW1lLCBdKSA9PiBuYW1lID09PSBleGlzdGluZ05hbWUpXG4gICAgaWYob3Ape1xuICAgICAgbGV0IFtfbmFtZSwgX29wLCBzdGFzaGVkUmVzdWx0XSA9IG9wXG4gICAgICByZXR1cm4gc3Rhc2hlZFJlc3VsdFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHlwZW9mKGRlZmF1bHRWYWwpID09PSBcImZ1bmN0aW9uXCIgPyBkZWZhdWx0VmFsKCkgOiBkZWZhdWx0VmFsXG4gICAgfVxuICB9LFxuXG4gIGRlbGV0ZVN0aWNreShlbCwgbmFtZSl7XG4gICAgdGhpcy51cGRhdGVQcml2YXRlKGVsLCBcInN0aWNreVwiLCBbXSwgb3BzID0+IHtcbiAgICAgIHJldHVybiBvcHMuZmlsdGVyKChbZXhpc3RpbmdOYW1lLCBfXSkgPT4gZXhpc3RpbmdOYW1lICE9PSBuYW1lKVxuICAgIH0pXG4gIH0sXG5cbiAgcHV0U3RpY2t5KGVsLCBuYW1lLCBvcCl7XG4gICAgbGV0IHN0YXNoZWRSZXN1bHQgPSBvcChlbClcbiAgICB0aGlzLnVwZGF0ZVByaXZhdGUoZWwsIFwic3RpY2t5XCIsIFtdLCBvcHMgPT4ge1xuICAgICAgbGV0IGV4aXN0aW5nSW5kZXggPSBvcHMuZmluZEluZGV4KChbZXhpc3RpbmdOYW1lLCBdKSA9PiBuYW1lID09PSBleGlzdGluZ05hbWUpXG4gICAgICBpZihleGlzdGluZ0luZGV4ID49IDApe1xuICAgICAgICBvcHNbZXhpc3RpbmdJbmRleF0gPSBbbmFtZSwgb3AsIHN0YXNoZWRSZXN1bHRdXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHMucHVzaChbbmFtZSwgb3AsIHN0YXNoZWRSZXN1bHRdKVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9wc1xuICAgIH0pXG4gIH0sXG5cbiAgYXBwbHlTdGlja3lPcGVyYXRpb25zKGVsKXtcbiAgICBsZXQgb3BzID0gRE9NLnByaXZhdGUoZWwsIFwic3RpY2t5XCIpXG4gICAgaWYoIW9wcyl7IHJldHVybiB9XG5cbiAgICBvcHMuZm9yRWFjaCgoW25hbWUsIG9wLCBfc3Rhc2hlZF0pID0+IHRoaXMucHV0U3RpY2t5KGVsLCBuYW1lLCBvcCkpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRE9NXG4iLCAiaW1wb3J0IHtcbiAgUEhYX0FDVElWRV9FTlRSWV9SRUZTLFxuICBQSFhfTElWRV9GSUxFX1VQREFURUQsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGNoYW5uZWxVcGxvYWRlcixcbiAgbG9nRXJyb3Jcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVcGxvYWRFbnRyeSB7XG4gIHN0YXRpYyBpc0FjdGl2ZShmaWxlRWwsIGZpbGUpe1xuICAgIGxldCBpc05ldyA9IGZpbGUuX3BoeFJlZiA9PT0gdW5kZWZpbmVkXG4gICAgbGV0IGFjdGl2ZVJlZnMgPSBmaWxlRWwuZ2V0QXR0cmlidXRlKFBIWF9BQ1RJVkVfRU5UUllfUkVGUykuc3BsaXQoXCIsXCIpXG4gICAgbGV0IGlzQWN0aXZlID0gYWN0aXZlUmVmcy5pbmRleE9mKExpdmVVcGxvYWRlci5nZW5GaWxlUmVmKGZpbGUpKSA+PSAwXG4gICAgcmV0dXJuIGZpbGUuc2l6ZSA+IDAgJiYgKGlzTmV3IHx8IGlzQWN0aXZlKVxuICB9XG5cbiAgc3RhdGljIGlzUHJlZmxpZ2h0ZWQoZmlsZUVsLCBmaWxlKXtcbiAgICBsZXQgcHJlZmxpZ2h0ZWRSZWZzID0gZmlsZUVsLmdldEF0dHJpYnV0ZShQSFhfUFJFRkxJR0hURURfUkVGUykuc3BsaXQoXCIsXCIpXG4gICAgbGV0IGlzUHJlZmxpZ2h0ZWQgPSBwcmVmbGlnaHRlZFJlZnMuaW5kZXhPZihMaXZlVXBsb2FkZXIuZ2VuRmlsZVJlZihmaWxlKSkgPj0gMFxuICAgIHJldHVybiBpc1ByZWZsaWdodGVkICYmIHRoaXMuaXNBY3RpdmUoZmlsZUVsLCBmaWxlKVxuICB9XG5cbiAgY29uc3RydWN0b3IoZmlsZUVsLCBmaWxlLCB2aWV3KXtcbiAgICB0aGlzLnJlZiA9IExpdmVVcGxvYWRlci5nZW5GaWxlUmVmKGZpbGUpXG4gICAgdGhpcy5maWxlRWwgPSBmaWxlRWxcbiAgICB0aGlzLmZpbGUgPSBmaWxlXG4gICAgdGhpcy52aWV3ID0gdmlld1xuICAgIHRoaXMubWV0YSA9IG51bGxcbiAgICB0aGlzLl9pc0NhbmNlbGxlZCA9IGZhbHNlXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2VcbiAgICB0aGlzLl9wcm9ncmVzcyA9IDBcbiAgICB0aGlzLl9sYXN0UHJvZ3Jlc3NTZW50ID0gLTFcbiAgICB0aGlzLl9vbkRvbmUgPSBmdW5jdGlvbiAoKXsgfVxuICAgIHRoaXMuX29uRWxVcGRhdGVkID0gdGhpcy5vbkVsVXBkYXRlZC5iaW5kKHRoaXMpXG4gICAgdGhpcy5maWxlRWwuYWRkRXZlbnRMaXN0ZW5lcihQSFhfTElWRV9GSUxFX1VQREFURUQsIHRoaXMuX29uRWxVcGRhdGVkKVxuICB9XG5cbiAgbWV0YWRhdGEoKXsgcmV0dXJuIHRoaXMubWV0YSB9XG5cbiAgcHJvZ3Jlc3MocHJvZ3Jlc3Mpe1xuICAgIHRoaXMuX3Byb2dyZXNzID0gTWF0aC5mbG9vcihwcm9ncmVzcylcbiAgICBpZih0aGlzLl9wcm9ncmVzcyA+IHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQpe1xuICAgICAgaWYodGhpcy5fcHJvZ3Jlc3MgPj0gMTAwKXtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3MgPSAxMDBcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzU2VudCA9IDEwMFxuICAgICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlXG4gICAgICAgIHRoaXMudmlldy5wdXNoRmlsZVByb2dyZXNzKHRoaXMuZmlsZUVsLCB0aGlzLnJlZiwgMTAwLCAoKSA9PiB7XG4gICAgICAgICAgTGl2ZVVwbG9hZGVyLnVudHJhY2tGaWxlKHRoaXMuZmlsZUVsLCB0aGlzLmZpbGUpXG4gICAgICAgICAgdGhpcy5fb25Eb25lKClcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQgPSB0aGlzLl9wcm9ncmVzc1xuICAgICAgICB0aGlzLnZpZXcucHVzaEZpbGVQcm9ncmVzcyh0aGlzLmZpbGVFbCwgdGhpcy5yZWYsIHRoaXMuX3Byb2dyZXNzKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNhbmNlbCgpe1xuICAgIHRoaXMuX2lzQ2FuY2VsbGVkID0gdHJ1ZVxuICAgIHRoaXMuX2lzRG9uZSA9IHRydWVcbiAgICB0aGlzLl9vbkRvbmUoKVxuICB9XG5cbiAgaXNEb25lKCl7IHJldHVybiB0aGlzLl9pc0RvbmUgfVxuXG4gIGVycm9yKHJlYXNvbiA9IFwiZmFpbGVkXCIpe1xuICAgIHRoaXMuZmlsZUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoUEhYX0xJVkVfRklMRV9VUERBVEVELCB0aGlzLl9vbkVsVXBkYXRlZClcbiAgICB0aGlzLnZpZXcucHVzaEZpbGVQcm9ncmVzcyh0aGlzLmZpbGVFbCwgdGhpcy5yZWYsIHtlcnJvcjogcmVhc29ufSlcbiAgICBpZighRE9NLmlzQXV0b1VwbG9hZCh0aGlzLmZpbGVFbCkpeyBMaXZlVXBsb2FkZXIuY2xlYXJGaWxlcyh0aGlzLmZpbGVFbCkgfVxuICB9XG5cbiAgLy9wcml2YXRlXG5cbiAgb25Eb25lKGNhbGxiYWNrKXtcbiAgICB0aGlzLl9vbkRvbmUgPSAoKSA9PiB7XG4gICAgICB0aGlzLmZpbGVFbC5yZW1vdmVFdmVudExpc3RlbmVyKFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCwgdGhpcy5fb25FbFVwZGF0ZWQpXG4gICAgICBjYWxsYmFjaygpXG4gICAgfVxuICB9XG5cbiAgb25FbFVwZGF0ZWQoKXtcbiAgICBsZXQgYWN0aXZlUmVmcyA9IHRoaXMuZmlsZUVsLmdldEF0dHJpYnV0ZShQSFhfQUNUSVZFX0VOVFJZX1JFRlMpLnNwbGl0KFwiLFwiKVxuICAgIGlmKGFjdGl2ZVJlZnMuaW5kZXhPZih0aGlzLnJlZikgPT09IC0xKXsgdGhpcy5jYW5jZWwoKSB9XG4gIH1cblxuICB0b1ByZWZsaWdodFBheWxvYWQoKXtcbiAgICByZXR1cm4ge1xuICAgICAgbGFzdF9tb2RpZmllZDogdGhpcy5maWxlLmxhc3RNb2RpZmllZCxcbiAgICAgIG5hbWU6IHRoaXMuZmlsZS5uYW1lLFxuICAgICAgcmVsYXRpdmVfcGF0aDogdGhpcy5maWxlLndlYmtpdFJlbGF0aXZlUGF0aCxcbiAgICAgIHNpemU6IHRoaXMuZmlsZS5zaXplLFxuICAgICAgdHlwZTogdGhpcy5maWxlLnR5cGUsXG4gICAgICByZWY6IHRoaXMucmVmLFxuICAgICAgbWV0YTogdHlwZW9mKHRoaXMuZmlsZS5tZXRhKSA9PT0gXCJmdW5jdGlvblwiID8gdGhpcy5maWxlLm1ldGEoKSA6IHVuZGVmaW5lZFxuICAgIH1cbiAgfVxuXG4gIHVwbG9hZGVyKHVwbG9hZGVycyl7XG4gICAgaWYodGhpcy5tZXRhLnVwbG9hZGVyKXtcbiAgICAgIGxldCBjYWxsYmFjayA9IHVwbG9hZGVyc1t0aGlzLm1ldGEudXBsb2FkZXJdIHx8IGxvZ0Vycm9yKGBubyB1cGxvYWRlciBjb25maWd1cmVkIGZvciAke3RoaXMubWV0YS51cGxvYWRlcn1gKVxuICAgICAgcmV0dXJuIHtuYW1lOiB0aGlzLm1ldGEudXBsb2FkZXIsIGNhbGxiYWNrOiBjYWxsYmFja31cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtuYW1lOiBcImNoYW5uZWxcIiwgY2FsbGJhY2s6IGNoYW5uZWxVcGxvYWRlcn1cbiAgICB9XG4gIH1cblxuICB6aXBQb3N0RmxpZ2h0KHJlc3Ape1xuICAgIHRoaXMubWV0YSA9IHJlc3AuZW50cmllc1t0aGlzLnJlZl1cbiAgICBpZighdGhpcy5tZXRhKXsgbG9nRXJyb3IoYG5vIHByZWZsaWdodCB1cGxvYWQgcmVzcG9uc2UgcmV0dXJuZWQgd2l0aCByZWYgJHt0aGlzLnJlZn1gLCB7aW5wdXQ6IHRoaXMuZmlsZUVsLCByZXNwb25zZTogcmVzcH0pIH1cbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFBIWF9ET05FX1JFRlMsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTLFxuICBQSFhfVVBMT0FEX1JFRlxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBVcGxvYWRFbnRyeSBmcm9tIFwiLi91cGxvYWRfZW50cnlcIlxuXG5sZXQgbGl2ZVVwbG9hZGVyRmlsZVJlZiA9IDBcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGl2ZVVwbG9hZGVyIHtcbiAgc3RhdGljIGdlbkZpbGVSZWYoZmlsZSl7XG4gICAgbGV0IHJlZiA9IGZpbGUuX3BoeFJlZlxuICAgIGlmKHJlZiAhPT0gdW5kZWZpbmVkKXtcbiAgICAgIHJldHVybiByZWZcbiAgICB9IGVsc2Uge1xuICAgICAgZmlsZS5fcGh4UmVmID0gKGxpdmVVcGxvYWRlckZpbGVSZWYrKykudG9TdHJpbmcoKVxuICAgICAgcmV0dXJuIGZpbGUuX3BoeFJlZlxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRFbnRyeURhdGFVUkwoaW5wdXRFbCwgcmVmLCBjYWxsYmFjayl7XG4gICAgbGV0IGZpbGUgPSB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpLmZpbmQoZmlsZSA9PiB0aGlzLmdlbkZpbGVSZWYoZmlsZSkgPT09IHJlZilcbiAgICBjYWxsYmFjayhVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpKVxuICB9XG5cbiAgc3RhdGljIGhhc1VwbG9hZHNJblByb2dyZXNzKGZvcm1FbCl7XG4gICAgbGV0IGFjdGl2ZSA9IDBcbiAgICBET00uZmluZFVwbG9hZElucHV0cyhmb3JtRWwpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaWYoaW5wdXQuZ2V0QXR0cmlidXRlKFBIWF9QUkVGTElHSFRFRF9SRUZTKSAhPT0gaW5wdXQuZ2V0QXR0cmlidXRlKFBIWF9ET05FX1JFRlMpKXtcbiAgICAgICAgYWN0aXZlKytcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBhY3RpdmUgPiAwXG4gIH1cblxuICBzdGF0aWMgc2VyaWFsaXplVXBsb2FkcyhpbnB1dEVsKXtcbiAgICBsZXQgZmlsZXMgPSB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpXG4gICAgbGV0IGZpbGVEYXRhID0ge31cbiAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgbGV0IGVudHJ5ID0ge3BhdGg6IGlucHV0RWwubmFtZX1cbiAgICAgIGxldCB1cGxvYWRSZWYgPSBpbnB1dEVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRilcbiAgICAgIGZpbGVEYXRhW3VwbG9hZFJlZl0gPSBmaWxlRGF0YVt1cGxvYWRSZWZdIHx8IFtdXG4gICAgICBlbnRyeS5yZWYgPSB0aGlzLmdlbkZpbGVSZWYoZmlsZSlcbiAgICAgIGVudHJ5Lmxhc3RfbW9kaWZpZWQgPSBmaWxlLmxhc3RNb2RpZmllZFxuICAgICAgZW50cnkubmFtZSA9IGZpbGUubmFtZSB8fCBlbnRyeS5yZWZcbiAgICAgIGVudHJ5LnJlbGF0aXZlX3BhdGggPSBmaWxlLndlYmtpdFJlbGF0aXZlUGF0aFxuICAgICAgZW50cnkudHlwZSA9IGZpbGUudHlwZVxuICAgICAgZW50cnkuc2l6ZSA9IGZpbGUuc2l6ZVxuICAgICAgaWYodHlwZW9mKGZpbGUubWV0YSkgPT09IFwiZnVuY3Rpb25cIil7IGVudHJ5Lm1ldGEgPSBmaWxlLm1ldGEoKSB9XG4gICAgICBmaWxlRGF0YVt1cGxvYWRSZWZdLnB1c2goZW50cnkpXG4gICAgfSlcbiAgICByZXR1cm4gZmlsZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBjbGVhckZpbGVzKGlucHV0RWwpe1xuICAgIGlucHV0RWwudmFsdWUgPSBudWxsXG4gICAgaW5wdXRFbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpXG4gICAgRE9NLnB1dFByaXZhdGUoaW5wdXRFbCwgXCJmaWxlc1wiLCBbXSlcbiAgfVxuXG4gIHN0YXRpYyB1bnRyYWNrRmlsZShpbnB1dEVsLCBmaWxlKXtcbiAgICBET00ucHV0UHJpdmF0ZShpbnB1dEVsLCBcImZpbGVzXCIsIERPTS5wcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIikuZmlsdGVyKGYgPT4gIU9iamVjdC5pcyhmLCBmaWxlKSkpXG4gIH1cblxuICBzdGF0aWMgdHJhY2tGaWxlcyhpbnB1dEVsLCBmaWxlcywgZGF0YVRyYW5zZmVyKXtcbiAgICBpZihpbnB1dEVsLmdldEF0dHJpYnV0ZShcIm11bHRpcGxlXCIpICE9PSBudWxsKXtcbiAgICAgIGxldCBuZXdGaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+ICF0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpLmZpbmQoZiA9PiBPYmplY3QuaXMoZiwgZmlsZSkpKVxuICAgICAgRE9NLnB1dFByaXZhdGUoaW5wdXRFbCwgXCJmaWxlc1wiLCB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpLmNvbmNhdChuZXdGaWxlcykpXG4gICAgICBpbnB1dEVsLnZhbHVlID0gbnVsbFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZXNldCBpbnB1dEVsIGZpbGVzIHRvIGFsaWduIG91dHB1dCB3aXRoIHByb2dyYW1tYXRpYyBjaGFuZ2VzIChpLmUuIGRyYWcgYW5kIGRyb3ApXG4gICAgICBpZihkYXRhVHJhbnNmZXIgJiYgZGF0YVRyYW5zZmVyLmZpbGVzLmxlbmd0aCA+IDApeyBpbnB1dEVsLmZpbGVzID0gZGF0YVRyYW5zZmVyLmZpbGVzIH1cbiAgICAgIERPTS5wdXRQcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIiwgZmlsZXMpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFjdGl2ZUZpbGVJbnB1dHMoZm9ybUVsKXtcbiAgICBsZXQgZmlsZUlucHV0cyA9IERPTS5maW5kVXBsb2FkSW5wdXRzKGZvcm1FbClcbiAgICByZXR1cm4gQXJyYXkuZnJvbShmaWxlSW5wdXRzKS5maWx0ZXIoZWwgPT4gZWwuZmlsZXMgJiYgdGhpcy5hY3RpdmVGaWxlcyhlbCkubGVuZ3RoID4gMClcbiAgfVxuXG4gIHN0YXRpYyBhY3RpdmVGaWxlcyhpbnB1dCl7XG4gICAgcmV0dXJuIChET00ucHJpdmF0ZShpbnB1dCwgXCJmaWxlc1wiKSB8fCBbXSkuZmlsdGVyKGYgPT4gVXBsb2FkRW50cnkuaXNBY3RpdmUoaW5wdXQsIGYpKVxuICB9XG5cbiAgc3RhdGljIGlucHV0c0F3YWl0aW5nUHJlZmxpZ2h0KGZvcm1FbCl7XG4gICAgbGV0IGZpbGVJbnB1dHMgPSBET00uZmluZFVwbG9hZElucHV0cyhmb3JtRWwpXG4gICAgcmV0dXJuIEFycmF5LmZyb20oZmlsZUlucHV0cykuZmlsdGVyKGlucHV0ID0+IHRoaXMuZmlsZXNBd2FpdGluZ1ByZWZsaWdodChpbnB1dCkubGVuZ3RoID4gMClcbiAgfVxuXG4gIHN0YXRpYyBmaWxlc0F3YWl0aW5nUHJlZmxpZ2h0KGlucHV0KXtcbiAgICByZXR1cm4gdGhpcy5hY3RpdmVGaWxlcyhpbnB1dCkuZmlsdGVyKGYgPT4gIVVwbG9hZEVudHJ5LmlzUHJlZmxpZ2h0ZWQoaW5wdXQsIGYpKVxuICB9XG5cbiAgY29uc3RydWN0b3IoaW5wdXRFbCwgdmlldywgb25Db21wbGV0ZSl7XG4gICAgdGhpcy52aWV3ID0gdmlld1xuICAgIHRoaXMub25Db21wbGV0ZSA9IG9uQ29tcGxldGVcbiAgICB0aGlzLl9lbnRyaWVzID1cbiAgICAgIEFycmF5LmZyb20oTGl2ZVVwbG9hZGVyLmZpbGVzQXdhaXRpbmdQcmVmbGlnaHQoaW5wdXRFbCkgfHwgW10pXG4gICAgICAgIC5tYXAoZmlsZSA9PiBuZXcgVXBsb2FkRW50cnkoaW5wdXRFbCwgZmlsZSwgdmlldykpXG5cbiAgICB0aGlzLm51bUVudHJpZXNJblByb2dyZXNzID0gdGhpcy5fZW50cmllcy5sZW5ndGhcbiAgfVxuXG4gIGVudHJpZXMoKXsgcmV0dXJuIHRoaXMuX2VudHJpZXMgfVxuXG4gIGluaXRBZGFwdGVyVXBsb2FkKHJlc3AsIG9uRXJyb3IsIGxpdmVTb2NrZXQpe1xuICAgIHRoaXMuX2VudHJpZXMgPVxuICAgICAgdGhpcy5fZW50cmllcy5tYXAoZW50cnkgPT4ge1xuICAgICAgICBlbnRyeS56aXBQb3N0RmxpZ2h0KHJlc3ApXG4gICAgICAgIGVudHJ5Lm9uRG9uZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5udW1FbnRyaWVzSW5Qcm9ncmVzcy0tXG4gICAgICAgICAgaWYodGhpcy5udW1FbnRyaWVzSW5Qcm9ncmVzcyA9PT0gMCl7IHRoaXMub25Db21wbGV0ZSgpIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGVudHJ5XG4gICAgICB9KVxuXG4gICAgbGV0IGdyb3VwZWRFbnRyaWVzID0gdGhpcy5fZW50cmllcy5yZWR1Y2UoKGFjYywgZW50cnkpID0+IHtcbiAgICAgIGlmKCFlbnRyeS5tZXRhKXsgcmV0dXJuIGFjYyB9XG4gICAgICBsZXQge25hbWUsIGNhbGxiYWNrfSA9IGVudHJ5LnVwbG9hZGVyKGxpdmVTb2NrZXQudXBsb2FkZXJzKVxuICAgICAgYWNjW25hbWVdID0gYWNjW25hbWVdIHx8IHtjYWxsYmFjazogY2FsbGJhY2ssIGVudHJpZXM6IFtdfVxuICAgICAgYWNjW25hbWVdLmVudHJpZXMucHVzaChlbnRyeSlcbiAgICAgIHJldHVybiBhY2NcbiAgICB9LCB7fSlcblxuICAgIGZvcihsZXQgbmFtZSBpbiBncm91cGVkRW50cmllcyl7XG4gICAgICBsZXQge2NhbGxiYWNrLCBlbnRyaWVzfSA9IGdyb3VwZWRFbnRyaWVzW25hbWVdXG4gICAgICBjYWxsYmFjayhlbnRyaWVzLCBvbkVycm9yLCByZXNwLCBsaXZlU29ja2V0KVxuICAgIH1cbiAgfVxufVxuIiwgImxldCBBUklBID0ge1xuICBmb2N1c01haW4oKXtcbiAgICBsZXQgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW4gaDEsIG1haW4sIGgxXCIpXG4gICAgaWYodGFyZ2V0KXtcbiAgICAgIGxldCBvcmlnVGFiSW5kZXggPSB0YXJnZXQudGFiSW5kZXhcbiAgICAgIHRhcmdldC50YWJJbmRleCA9IC0xXG4gICAgICB0YXJnZXQuZm9jdXMoKVxuICAgICAgdGFyZ2V0LnRhYkluZGV4ID0gb3JpZ1RhYkluZGV4XG4gICAgfVxuICB9LFxuXG4gIGFueU9mKGluc3RhbmNlLCBjbGFzc2VzKXsgcmV0dXJuIGNsYXNzZXMuZmluZChuYW1lID0+IGluc3RhbmNlIGluc3RhbmNlb2YgbmFtZSkgfSxcblxuICBpc0ZvY3VzYWJsZShlbCwgaW50ZXJhY3RpdmVPbmx5KXtcbiAgICByZXR1cm4oXG4gICAgICAoZWwgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCAmJiBlbC5yZWwgIT09IFwiaWdub3JlXCIpIHx8XG4gICAgICAoZWwgaW5zdGFuY2VvZiBIVE1MQXJlYUVsZW1lbnQgJiYgZWwuaHJlZiAhPT0gdW5kZWZpbmVkKSB8fFxuICAgICAgKCFlbC5kaXNhYmxlZCAmJiAodGhpcy5hbnlPZihlbCwgW0hUTUxJbnB1dEVsZW1lbnQsIEhUTUxTZWxlY3RFbGVtZW50LCBIVE1MVGV4dEFyZWFFbGVtZW50LCBIVE1MQnV0dG9uRWxlbWVudF0pKSkgfHxcbiAgICAgIChlbCBpbnN0YW5jZW9mIEhUTUxJRnJhbWVFbGVtZW50KSB8fFxuICAgICAgKGVsLnRhYkluZGV4ID4gMCB8fCAoIWludGVyYWN0aXZlT25seSAmJiBlbC50YWJJbmRleCA9PT0gMCAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSAhPT0gbnVsbCAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiKSAhPT0gXCJ0cnVlXCIpKVxuICAgIClcbiAgfSxcblxuICBhdHRlbXB0Rm9jdXMoZWwsIGludGVyYWN0aXZlT25seSl7XG4gICAgaWYodGhpcy5pc0ZvY3VzYWJsZShlbCwgaW50ZXJhY3RpdmVPbmx5KSl7IHRyeXsgZWwuZm9jdXMoKSB9IGNhdGNoKGUpe30gfVxuICAgIHJldHVybiAhIWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5pc1NhbWVOb2RlKGVsKVxuICB9LFxuXG4gIGZvY3VzRmlyc3RJbnRlcmFjdGl2ZShlbCl7XG4gICAgbGV0IGNoaWxkID0gZWwuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICB3aGlsZShjaGlsZCl7XG4gICAgICBpZih0aGlzLmF0dGVtcHRGb2N1cyhjaGlsZCwgdHJ1ZSkgfHwgdGhpcy5mb2N1c0ZpcnN0SW50ZXJhY3RpdmUoY2hpbGQsIHRydWUpKXtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIGNoaWxkID0gY2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgfVxuICB9LFxuXG4gIGZvY3VzRmlyc3QoZWwpe1xuICAgIGxldCBjaGlsZCA9IGVsLmZpcnN0RWxlbWVudENoaWxkXG4gICAgd2hpbGUoY2hpbGQpe1xuICAgICAgaWYodGhpcy5hdHRlbXB0Rm9jdXMoY2hpbGQpIHx8IHRoaXMuZm9jdXNGaXJzdChjaGlsZCkpe1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH0sXG5cbiAgZm9jdXNMYXN0KGVsKXtcbiAgICBsZXQgY2hpbGQgPSBlbC5sYXN0RWxlbWVudENoaWxkXG4gICAgd2hpbGUoY2hpbGQpe1xuICAgICAgaWYodGhpcy5hdHRlbXB0Rm9jdXMoY2hpbGQpIHx8IHRoaXMuZm9jdXNMYXN0KGNoaWxkKSl7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICBjaGlsZCA9IGNoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEFSSUEiLCAiaW1wb3J0IHtcbiAgUEhYX0FDVElWRV9FTlRSWV9SRUZTLFxuICBQSFhfTElWRV9GSUxFX1VQREFURUQsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTLFxuICBQSFhfVVBMT0FEX1JFRlxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuaW1wb3J0IEFSSUEgZnJvbSBcIi4vYXJpYVwiXG5cbmxldCBIb29rcyA9IHtcbiAgTGl2ZUZpbGVVcGxvYWQ6IHtcbiAgICBhY3RpdmVSZWZzKCl7IHJldHVybiB0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfQUNUSVZFX0VOVFJZX1JFRlMpIH0sXG5cbiAgICBwcmVmbGlnaHRlZFJlZnMoKXsgcmV0dXJuIHRoaXMuZWwuZ2V0QXR0cmlidXRlKFBIWF9QUkVGTElHSFRFRF9SRUZTKSB9LFxuXG4gICAgbW91bnRlZCgpeyB0aGlzLnByZWZsaWdodGVkV2FzID0gdGhpcy5wcmVmbGlnaHRlZFJlZnMoKSB9LFxuXG4gICAgdXBkYXRlZCgpe1xuICAgICAgbGV0IG5ld1ByZWZsaWdodHMgPSB0aGlzLnByZWZsaWdodGVkUmVmcygpXG4gICAgICBpZih0aGlzLnByZWZsaWdodGVkV2FzICE9PSBuZXdQcmVmbGlnaHRzKXtcbiAgICAgICAgdGhpcy5wcmVmbGlnaHRlZFdhcyA9IG5ld1ByZWZsaWdodHNcbiAgICAgICAgaWYobmV3UHJlZmxpZ2h0cyA9PT0gXCJcIil7XG4gICAgICAgICAgdGhpcy5fX3ZpZXcuY2FuY2VsU3VibWl0KHRoaXMuZWwuZm9ybSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZih0aGlzLmFjdGl2ZVJlZnMoKSA9PT0gXCJcIil7IHRoaXMuZWwudmFsdWUgPSBudWxsIH1cbiAgICAgIHRoaXMuZWwuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoUEhYX0xJVkVfRklMRV9VUERBVEVEKSlcbiAgICB9XG4gIH0sXG5cbiAgTGl2ZUltZ1ByZXZpZXc6IHtcbiAgICBtb3VudGVkKCl7XG4gICAgICB0aGlzLnJlZiA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1waHgtZW50cnktcmVmXCIpXG4gICAgICB0aGlzLmlucHV0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRikpXG4gICAgICBMaXZlVXBsb2FkZXIuZ2V0RW50cnlEYXRhVVJMKHRoaXMuaW5wdXRFbCwgdGhpcy5yZWYsIHVybCA9PiB7XG4gICAgICAgIHRoaXMudXJsID0gdXJsXG4gICAgICAgIHRoaXMuZWwuc3JjID0gdXJsXG4gICAgICB9KVxuICAgIH0sXG4gICAgZGVzdHJveWVkKCl7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMudXJsKVxuICAgIH1cbiAgfSxcbiAgRm9jdXNXcmFwOiB7XG4gICAgbW91bnRlZCgpe1xuICAgICAgdGhpcy5mb2N1c1N0YXJ0ID0gdGhpcy5lbC5maXJzdEVsZW1lbnRDaGlsZFxuICAgICAgdGhpcy5mb2N1c0VuZCA9IHRoaXMuZWwubGFzdEVsZW1lbnRDaGlsZFxuICAgICAgdGhpcy5mb2N1c1N0YXJ0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCAoKSA9PiBBUklBLmZvY3VzTGFzdCh0aGlzLmVsKSlcbiAgICAgIHRoaXMuZm9jdXNFbmQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsICgpID0+IEFSSUEuZm9jdXNGaXJzdCh0aGlzLmVsKSlcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcInBoeDpzaG93LWVuZFwiLCAoKSA9PiB0aGlzLmVsLmZvY3VzKCkpXG4gICAgICBpZih3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKS5kaXNwbGF5ICE9PSBcIm5vbmVcIil7XG4gICAgICAgIEFSSUEuZm9jdXNGaXJzdCh0aGlzLmVsKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5sZXQgc2Nyb2xsVG9wID0gKCkgPT4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcFxubGV0IHdpbkhlaWdodCA9ICgpID0+IHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XG5cbmxldCBpc0F0Vmlld3BvcnRUb3AgPSAoZWwpID0+IHtcbiAgbGV0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICByZXR1cm4gcmVjdC50b3AgPj0gMCAmJiByZWN0LmxlZnQgPj0gMCAmJiByZWN0LnRvcCA8PSB3aW5IZWlnaHQoKVxufVxuXG5sZXQgaXNBdFZpZXdwb3J0Qm90dG9tID0gKGVsKSA9PiB7XG4gIGxldCByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgcmV0dXJuIHJlY3QucmlnaHQgPj0gMCAmJiByZWN0LmxlZnQgPj0gMCAmJiByZWN0LmJvdHRvbSA8PSB3aW5IZWlnaHQoKVxufVxuXG5sZXQgaXNXaXRoaW5WaWV3cG9ydCA9IChlbCkgPT4ge1xuICBsZXQgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gIHJldHVybiByZWN0LnRvcCA+PSAwICYmIHJlY3QubGVmdCA+PSAwICYmIHJlY3QudG9wIDw9IHdpbkhlaWdodCgpXG59XG5cbkhvb2tzLkluZmluaXRlU2Nyb2xsID0ge1xuICBtb3VudGVkKCl7XG4gICAgbGV0IHNjcm9sbEJlZm9yZSA9IHNjcm9sbFRvcCgpXG4gICAgbGV0IHRvcE92ZXJyYW4gPSBmYWxzZVxuICAgIGxldCB0aHJvdHRsZUludGVydmFsID0gNTAwXG4gICAgbGV0IHBlbmRpbmdPcCA9IG51bGxcblxuICAgIGxldCBvblRvcE92ZXJydW4gPSB0aGlzLnRocm90dGxlKHRocm90dGxlSW50ZXJ2YWwsICh0b3BFdmVudCwgZmlyc3RDaGlsZCkgPT4ge1xuICAgICAgcGVuZGluZ09wID0gKCkgPT4gdHJ1ZVxuICAgICAgdGhpcy5saXZlU29ja2V0LmV4ZWNKU0hvb2tQdXNoKHRoaXMuZWwsIHRvcEV2ZW50LCB7aWQ6IGZpcnN0Q2hpbGQuaWQsIF9vdmVycmFuOiB0cnVlfSwgKCkgPT4ge1xuICAgICAgICBwZW5kaW5nT3AgPSBudWxsXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBsZXQgb25GaXJzdENoaWxkQXRUb3AgPSB0aGlzLnRocm90dGxlKHRocm90dGxlSW50ZXJ2YWwsICh0b3BFdmVudCwgZmlyc3RDaGlsZCkgPT4ge1xuICAgICAgcGVuZGluZ09wID0gKCkgPT4gZmlyc3RDaGlsZC5zY3JvbGxJbnRvVmlldyh7YmxvY2s6IFwic3RhcnRcIn0pXG4gICAgICB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTSG9va1B1c2godGhpcy5lbCwgdG9wRXZlbnQsIHtpZDogZmlyc3RDaGlsZC5pZH0sICgpID0+IHtcbiAgICAgICAgcGVuZGluZ09wID0gbnVsbFxuICAgICAgICBpZighaXNXaXRoaW5WaWV3cG9ydChmaXJzdENoaWxkKSl7IGZpcnN0Q2hpbGQuc2Nyb2xsSW50b1ZpZXcoe2Jsb2NrOiBcInN0YXJ0XCJ9KSB9XG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBsZXQgb25MYXN0Q2hpbGRBdEJvdHRvbSA9IHRoaXMudGhyb3R0bGUodGhyb3R0bGVJbnRlcnZhbCwgKGJvdHRvbUV2ZW50LCBsYXN0Q2hpbGQpID0+IHtcbiAgICAgIHBlbmRpbmdPcCA9ICgpID0+IGxhc3RDaGlsZC5zY3JvbGxJbnRvVmlldyh7YmxvY2s6IFwiZW5kXCJ9KVxuICAgICAgdGhpcy5saXZlU29ja2V0LmV4ZWNKU0hvb2tQdXNoKHRoaXMuZWwsIGJvdHRvbUV2ZW50LCB7aWQ6IGxhc3RDaGlsZC5pZH0sICgpID0+IHtcbiAgICAgICAgcGVuZGluZ09wID0gbnVsbFxuICAgICAgICBpZighaXNXaXRoaW5WaWV3cG9ydChsYXN0Q2hpbGQpKXsgbGFzdENoaWxkLnNjcm9sbEludG9WaWV3KHtibG9jazogXCJlbmRcIn0pIH1cbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRoaXMub25TY3JvbGwgPSAoZSkgPT4ge1xuICAgICAgbGV0IHNjcm9sbE5vdyA9IHNjcm9sbFRvcCgpXG5cbiAgICAgIGlmKHBlbmRpbmdPcCl7XG4gICAgICAgIHNjcm9sbEJlZm9yZSA9IHNjcm9sbE5vd1xuICAgICAgICByZXR1cm4gcGVuZGluZ09wKClcbiAgICAgIH1cbiAgICAgIGxldCByZWN0ID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgbGV0IHRvcEV2ZW50ID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUodGhpcy5saXZlU29ja2V0LmJpbmRpbmcoXCJ2aWV3cG9ydC10b3BcIikpXG4gICAgICBsZXQgYm90dG9tRXZlbnQgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZSh0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhcInZpZXdwb3J0LWJvdHRvbVwiKSlcbiAgICAgIGxldCBsYXN0Q2hpbGQgPSB0aGlzLmVsLmxhc3RFbGVtZW50Q2hpbGRcbiAgICAgIGxldCBmaXJzdENoaWxkID0gdGhpcy5lbC5maXJzdEVsZW1lbnRDaGlsZFxuICAgICAgbGV0IGlzU2Nyb2xsaW5nVXAgPSBzY3JvbGxOb3cgPCBzY3JvbGxCZWZvcmVcbiAgICAgIGxldCBpc1Njcm9sbGluZ0Rvd24gPSBzY3JvbGxOb3cgPiBzY3JvbGxCZWZvcmVcblxuICAgICAgLy8gZWwgb3ZlcnJhbiB3aGlsZSBzY3JvbGxpbmcgdXBcbiAgICAgIGlmKGlzU2Nyb2xsaW5nVXAgJiYgdG9wRXZlbnQgJiYgIXRvcE92ZXJyYW4gJiYgcmVjdC50b3AgPj0gMCl7XG4gICAgICAgIHRvcE92ZXJyYW4gPSB0cnVlXG4gICAgICAgIG9uVG9wT3ZlcnJ1bih0b3BFdmVudCwgZmlyc3RDaGlsZClcbiAgICAgIH0gZWxzZSBpZihpc1Njcm9sbGluZ0Rvd24gJiYgdG9wT3ZlcnJhbiAmJiByZWN0LnRvcCA8PSAwKXtcbiAgICAgICAgdG9wT3ZlcnJhbiA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmKHRvcEV2ZW50ICYmIGlzU2Nyb2xsaW5nVXAgJiYgaXNBdFZpZXdwb3J0VG9wKGZpcnN0Q2hpbGQpKXtcbiAgICAgICAgb25GaXJzdENoaWxkQXRUb3AodG9wRXZlbnQsIGZpcnN0Q2hpbGQpXG4gICAgICB9IGVsc2UgaWYoYm90dG9tRXZlbnQgJiYgaXNTY3JvbGxpbmdEb3duICYmIGlzQXRWaWV3cG9ydEJvdHRvbShsYXN0Q2hpbGQpKXtcbiAgICAgICAgb25MYXN0Q2hpbGRBdEJvdHRvbShib3R0b21FdmVudCwgbGFzdENoaWxkKVxuICAgICAgfVxuICAgICAgc2Nyb2xsQmVmb3JlID0gc2Nyb2xsTm93XG4gICAgfVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpXG4gIH0sXG4gIGRlc3Ryb3llZCgpeyB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLm9uU2Nyb2xsKSB9LFxuXG4gIHRocm90dGxlKGludGVydmFsLCBjYWxsYmFjayl7XG4gICAgbGV0IGxhc3RDYWxsQXQgPSAwXG4gICAgbGV0IHRpbWVyXG5cbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgIGxldCBub3cgPSBEYXRlLm5vdygpXG4gICAgICBsZXQgcmVtYWluaW5nVGltZSA9IGludGVydmFsIC0gKG5vdyAtIGxhc3RDYWxsQXQpXG5cbiAgICAgIGlmKHJlbWFpbmluZ1RpbWUgPD0gMCB8fCByZW1haW5pbmdUaW1lID4gaW50ZXJ2YWwpe1xuICAgICAgICBpZih0aW1lcikge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICAgICAgICB0aW1lciA9IG51bGxcbiAgICAgICAgfVxuICAgICAgICBsYXN0Q2FsbEF0ID0gbm93XG4gICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpXG4gICAgICB9IGVsc2UgaWYoIXRpbWVyKXtcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBsYXN0Q2FsbEF0ID0gRGF0ZS5ub3coKVxuICAgICAgICAgIHRpbWVyID0gbnVsbFxuICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpXG4gICAgICAgIH0sIHJlbWFpbmluZ1RpbWUpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5leHBvcnQgZGVmYXVsdCBIb29rc1xuIiwgImltcG9ydCB7XG4gIG1heWJlXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBET01Qb3N0TW9ycGhSZXN0b3JlciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lckJlZm9yZSwgY29udGFpbmVyQWZ0ZXIsIHVwZGF0ZVR5cGUpe1xuICAgIGxldCBpZHNCZWZvcmUgPSBuZXcgU2V0KClcbiAgICBsZXQgaWRzQWZ0ZXIgPSBuZXcgU2V0KFsuLi5jb250YWluZXJBZnRlci5jaGlsZHJlbl0ubWFwKGNoaWxkID0+IGNoaWxkLmlkKSlcblxuICAgIGxldCBlbGVtZW50c1RvTW9kaWZ5ID0gW11cblxuICAgIEFycmF5LmZyb20oY29udGFpbmVyQmVmb3JlLmNoaWxkcmVuKS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgIGlmKGNoaWxkLmlkKXsgLy8gYWxsIG9mIG91ciBjaGlsZHJlbiBzaG91bGQgYmUgZWxlbWVudHMgd2l0aCBpZHNcbiAgICAgICAgaWRzQmVmb3JlLmFkZChjaGlsZC5pZClcbiAgICAgICAgaWYoaWRzQWZ0ZXIuaGFzKGNoaWxkLmlkKSl7XG4gICAgICAgICAgbGV0IHByZXZpb3VzRWxlbWVudElkID0gY2hpbGQucHJldmlvdXNFbGVtZW50U2libGluZyAmJiBjaGlsZC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlkXG4gICAgICAgICAgZWxlbWVudHNUb01vZGlmeS5wdXNoKHtlbGVtZW50SWQ6IGNoaWxkLmlkLCBwcmV2aW91c0VsZW1lbnRJZDogcHJldmlvdXNFbGVtZW50SWR9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIHRoaXMuY29udGFpbmVySWQgPSBjb250YWluZXJBZnRlci5pZFxuICAgIHRoaXMudXBkYXRlVHlwZSA9IHVwZGF0ZVR5cGVcbiAgICB0aGlzLmVsZW1lbnRzVG9Nb2RpZnkgPSBlbGVtZW50c1RvTW9kaWZ5XG4gICAgdGhpcy5lbGVtZW50SWRzVG9BZGQgPSBbLi4uaWRzQWZ0ZXJdLmZpbHRlcihpZCA9PiAhaWRzQmVmb3JlLmhhcyhpZCkpXG4gIH1cblxuICAvLyBXZSBkbyB0aGUgZm9sbG93aW5nIHRvIG9wdGltaXplIGFwcGVuZC9wcmVwZW5kIG9wZXJhdGlvbnM6XG4gIC8vICAgMSkgVHJhY2sgaWRzIG9mIG1vZGlmaWVkIGVsZW1lbnRzICYgb2YgbmV3IGVsZW1lbnRzXG4gIC8vICAgMikgQWxsIHRoZSBtb2RpZmllZCBlbGVtZW50cyBhcmUgcHV0IGJhY2sgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb24gaW4gdGhlIERPTSB0cmVlXG4gIC8vICAgICAgYnkgc3RvcmluZyB0aGUgaWQgb2YgdGhlaXIgcHJldmlvdXMgc2libGluZ1xuICAvLyAgIDMpIE5ldyBlbGVtZW50cyBhcmUgZ29pbmcgdG8gYmUgcHV0IGluIHRoZSByaWdodCBwbGFjZSBieSBtb3JwaGRvbSBkdXJpbmcgYXBwZW5kLlxuICAvLyAgICAgIEZvciBwcmVwZW5kLCB3ZSBtb3ZlIHRoZW0gdG8gdGhlIGZpcnN0IHBvc2l0aW9uIGluIHRoZSBjb250YWluZXJcbiAgcGVyZm9ybSgpe1xuICAgIGxldCBjb250YWluZXIgPSBET00uYnlJZCh0aGlzLmNvbnRhaW5lcklkKVxuICAgIHRoaXMuZWxlbWVudHNUb01vZGlmeS5mb3JFYWNoKGVsZW1lbnRUb01vZGlmeSA9PiB7XG4gICAgICBpZihlbGVtZW50VG9Nb2RpZnkucHJldmlvdXNFbGVtZW50SWQpe1xuICAgICAgICBtYXliZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50VG9Nb2RpZnkucHJldmlvdXNFbGVtZW50SWQpLCBwcmV2aW91c0VsZW0gPT4ge1xuICAgICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5lbGVtZW50SWQpLCBlbGVtID0+IHtcbiAgICAgICAgICAgIGxldCBpc0luUmlnaHRQbGFjZSA9IGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZyAmJiBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaWQgPT0gcHJldmlvdXNFbGVtLmlkXG4gICAgICAgICAgICBpZighaXNJblJpZ2h0UGxhY2Upe1xuICAgICAgICAgICAgICBwcmV2aW91c0VsZW0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgZWxlbSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgY29udGFpbmVyXG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5lbGVtZW50SWQpLCBlbGVtID0+IHtcbiAgICAgICAgICBsZXQgaXNJblJpZ2h0UGxhY2UgPSBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcgPT0gbnVsbFxuICAgICAgICAgIGlmKCFpc0luUmlnaHRQbGFjZSl7XG4gICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCBlbGVtKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYodGhpcy51cGRhdGVUeXBlID09IFwicHJlcGVuZFwiKXtcbiAgICAgIHRoaXMuZWxlbWVudElkc1RvQWRkLnJldmVyc2UoKS5mb3JFYWNoKGVsZW1JZCA9PiB7XG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1JZCksIGVsZW0gPT4gY29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyYmVnaW5cIiwgZWxlbSkpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwgInZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFID0gMTE7XG5cbmZ1bmN0aW9uIG1vcnBoQXR0cnMoZnJvbU5vZGUsIHRvTm9kZSkge1xuICAgIHZhciB0b05vZGVBdHRycyA9IHRvTm9kZS5hdHRyaWJ1dGVzO1xuICAgIHZhciBhdHRyO1xuICAgIHZhciBhdHRyTmFtZTtcbiAgICB2YXIgYXR0ck5hbWVzcGFjZVVSSTtcbiAgICB2YXIgYXR0clZhbHVlO1xuICAgIHZhciBmcm9tVmFsdWU7XG5cbiAgICAvLyBkb2N1bWVudC1mcmFnbWVudHMgZG9udCBoYXZlIGF0dHJpYnV0ZXMgc28gbGV0cyBub3QgZG8gYW55dGhpbmdcbiAgICBpZiAodG9Ob2RlLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFIHx8IGZyb21Ob2RlLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIGF0dHJpYnV0ZXMgb24gb3JpZ2luYWwgRE9NIGVsZW1lbnRcbiAgICBmb3IgKHZhciBpID0gdG9Ob2RlQXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgYXR0ciA9IHRvTm9kZUF0dHJzW2ldO1xuICAgICAgICBhdHRyTmFtZSA9IGF0dHIubmFtZTtcbiAgICAgICAgYXR0ck5hbWVzcGFjZVVSSSA9IGF0dHIubmFtZXNwYWNlVVJJO1xuICAgICAgICBhdHRyVmFsdWUgPSBhdHRyLnZhbHVlO1xuXG4gICAgICAgIGlmIChhdHRyTmFtZXNwYWNlVVJJKSB7XG4gICAgICAgICAgICBhdHRyTmFtZSA9IGF0dHIubG9jYWxOYW1lIHx8IGF0dHJOYW1lO1xuICAgICAgICAgICAgZnJvbVZhbHVlID0gZnJvbU5vZGUuZ2V0QXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUpO1xuXG4gICAgICAgICAgICBpZiAoZnJvbVZhbHVlICE9PSBhdHRyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0ci5wcmVmaXggPT09ICd4bWxucycpe1xuICAgICAgICAgICAgICAgICAgICBhdHRyTmFtZSA9IGF0dHIubmFtZTsgLy8gSXQncyBub3QgYWxsb3dlZCB0byBzZXQgYW4gYXR0cmlidXRlIHdpdGggdGhlIFhNTE5TIG5hbWVzcGFjZSB3aXRob3V0IHNwZWNpZnlpbmcgdGhlIGB4bWxuc2AgcHJlZml4XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnNldEF0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnJvbVZhbHVlID0gZnJvbU5vZGUuZ2V0QXR0cmlidXRlKGF0dHJOYW1lKTtcblxuICAgICAgICAgICAgaWYgKGZyb21WYWx1ZSAhPT0gYXR0clZhbHVlKSB7XG4gICAgICAgICAgICAgICAgZnJvbU5vZGUuc2V0QXR0cmlidXRlKGF0dHJOYW1lLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGFueSBleHRyYSBhdHRyaWJ1dGVzIGZvdW5kIG9uIHRoZSBvcmlnaW5hbCBET00gZWxlbWVudCB0aGF0XG4gICAgLy8gd2VyZW4ndCBmb3VuZCBvbiB0aGUgdGFyZ2V0IGVsZW1lbnQuXG4gICAgdmFyIGZyb21Ob2RlQXR0cnMgPSBmcm9tTm9kZS5hdHRyaWJ1dGVzO1xuXG4gICAgZm9yICh2YXIgZCA9IGZyb21Ob2RlQXR0cnMubGVuZ3RoIC0gMTsgZCA+PSAwOyBkLS0pIHtcbiAgICAgICAgYXR0ciA9IGZyb21Ob2RlQXR0cnNbZF07XG4gICAgICAgIGF0dHJOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICBhdHRyTmFtZXNwYWNlVVJJID0gYXR0ci5uYW1lc3BhY2VVUkk7XG5cbiAgICAgICAgaWYgKGF0dHJOYW1lc3BhY2VVUkkpIHtcbiAgICAgICAgICAgIGF0dHJOYW1lID0gYXR0ci5sb2NhbE5hbWUgfHwgYXR0ck5hbWU7XG5cbiAgICAgICAgICAgIGlmICghdG9Ob2RlLmhhc0F0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnJlbW92ZUF0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdG9Ob2RlLmhhc0F0dHJpYnV0ZShhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBmcm9tTm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgcmFuZ2U7IC8vIENyZWF0ZSBhIHJhbmdlIG9iamVjdCBmb3IgZWZmaWNlbnRseSByZW5kZXJpbmcgc3RyaW5ncyB0byBlbGVtZW50cy5cbnZhciBOU19YSFRNTCA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJztcblxudmFyIGRvYyA9IHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBkb2N1bWVudDtcbnZhciBIQVNfVEVNUExBVEVfU1VQUE9SVCA9ICEhZG9jICYmICdjb250ZW50JyBpbiBkb2MuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbnZhciBIQVNfUkFOR0VfU1VQUE9SVCA9ICEhZG9jICYmIGRvYy5jcmVhdGVSYW5nZSAmJiAnY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JyBpbiBkb2MuY3JlYXRlUmFuZ2UoKTtcblxuZnVuY3Rpb24gY3JlYXRlRnJhZ21lbnRGcm9tVGVtcGxhdGUoc3RyKSB7XG4gICAgdmFyIHRlbXBsYXRlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gc3RyO1xuICAgIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVJhbmdlKHN0cikge1xuICAgIGlmICghcmFuZ2UpIHtcbiAgICAgICAgcmFuZ2UgPSBkb2MuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZShkb2MuYm9keSk7XG4gICAgfVxuXG4gICAgdmFyIGZyYWdtZW50ID0gcmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHN0cik7XG4gICAgcmV0dXJuIGZyYWdtZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVdyYXAoc3RyKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2JvZHknKTtcbiAgICBmcmFnbWVudC5pbm5lckhUTUwgPSBzdHI7XG4gICAgcmV0dXJuIGZyYWdtZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbi8qKlxuICogVGhpcyBpcyBhYm91dCB0aGUgc2FtZVxuICogdmFyIGh0bWwgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHN0ciwgJ3RleHQvaHRtbCcpO1xuICogcmV0dXJuIGh0bWwuYm9keS5maXJzdENoaWxkO1xuICpcbiAqIEBtZXRob2QgdG9FbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKi9cbmZ1bmN0aW9uIHRvRWxlbWVudChzdHIpIHtcbiAgICBzdHIgPSBzdHIudHJpbSgpO1xuICAgIGlmIChIQVNfVEVNUExBVEVfU1VQUE9SVCkge1xuICAgICAgLy8gYXZvaWQgcmVzdHJpY3Rpb25zIG9uIGNvbnRlbnQgZm9yIHRoaW5ncyBsaWtlIGA8dHI+PHRoPkhpPC90aD48L3RyPmAgd2hpY2hcbiAgICAgIC8vIGNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCBkb2Vzbid0IHN1cHBvcnRcbiAgICAgIC8vIDx0ZW1wbGF0ZT4gc3VwcG9ydCBub3QgYXZhaWxhYmxlIGluIElFXG4gICAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tVGVtcGxhdGUoc3RyKTtcbiAgICB9IGVsc2UgaWYgKEhBU19SQU5HRV9TVVBQT1JUKSB7XG4gICAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tUmFuZ2Uoc3RyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tV3JhcChzdHIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0d28gbm9kZSdzIG5hbWVzIGFyZSB0aGUgc2FtZS5cbiAqXG4gKiBOT1RFOiBXZSBkb24ndCBib3RoZXIgY2hlY2tpbmcgYG5hbWVzcGFjZVVSSWAgYmVjYXVzZSB5b3Ugd2lsbCBuZXZlciBmaW5kIHR3byBIVE1MIGVsZW1lbnRzIHdpdGggdGhlIHNhbWVcbiAqICAgICAgIG5vZGVOYW1lIGFuZCBkaWZmZXJlbnQgbmFtZXNwYWNlIFVSSXMuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGIgVGhlIHRhcmdldCBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBjb21wYXJlTm9kZU5hbWVzKGZyb21FbCwgdG9FbCkge1xuICAgIHZhciBmcm9tTm9kZU5hbWUgPSBmcm9tRWwubm9kZU5hbWU7XG4gICAgdmFyIHRvTm9kZU5hbWUgPSB0b0VsLm5vZGVOYW1lO1xuICAgIHZhciBmcm9tQ29kZVN0YXJ0LCB0b0NvZGVTdGFydDtcblxuICAgIGlmIChmcm9tTm9kZU5hbWUgPT09IHRvTm9kZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnJvbUNvZGVTdGFydCA9IGZyb21Ob2RlTmFtZS5jaGFyQ29kZUF0KDApO1xuICAgIHRvQ29kZVN0YXJ0ID0gdG9Ob2RlTmFtZS5jaGFyQ29kZUF0KDApO1xuXG4gICAgLy8gSWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIGEgdmlydHVhbCBET00gbm9kZSBvciBTVkcgbm9kZSB0aGVuIHdlIG1heVxuICAgIC8vIG5lZWQgdG8gbm9ybWFsaXplIHRoZSB0YWcgbmFtZSBiZWZvcmUgY29tcGFyaW5nLiBOb3JtYWwgSFRNTCBlbGVtZW50cyB0aGF0IGFyZVxuICAgIC8vIGluIHRoZSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIlxuICAgIC8vIGFyZSBjb252ZXJ0ZWQgdG8gdXBwZXIgY2FzZVxuICAgIGlmIChmcm9tQ29kZVN0YXJ0IDw9IDkwICYmIHRvQ29kZVN0YXJ0ID49IDk3KSB7IC8vIGZyb20gaXMgdXBwZXIgYW5kIHRvIGlzIGxvd2VyXG4gICAgICAgIHJldHVybiBmcm9tTm9kZU5hbWUgPT09IHRvTm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICB9IGVsc2UgaWYgKHRvQ29kZVN0YXJ0IDw9IDkwICYmIGZyb21Db2RlU3RhcnQgPj0gOTcpIHsgLy8gdG8gaXMgdXBwZXIgYW5kIGZyb20gaXMgbG93ZXJcbiAgICAgICAgcmV0dXJuIHRvTm9kZU5hbWUgPT09IGZyb21Ob2RlTmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIGVsZW1lbnQsIG9wdGlvbmFsbHkgd2l0aCBhIGtub3duIG5hbWVzcGFjZSBVUkkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgdGhlIGVsZW1lbnQgbmFtZSwgZS5nLiAnZGl2JyBvciAnc3ZnJ1xuICogQHBhcmFtIHtzdHJpbmd9IFtuYW1lc3BhY2VVUkldIHRoZSBlbGVtZW50J3MgbmFtZXNwYWNlIFVSSSwgaS5lLiB0aGUgdmFsdWUgb2ZcbiAqIGl0cyBgeG1sbnNgIGF0dHJpYnV0ZSBvciBpdHMgaW5mZXJyZWQgbmFtZXNwYWNlLlxuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnROUyhuYW1lLCBuYW1lc3BhY2VVUkkpIHtcbiAgICByZXR1cm4gIW5hbWVzcGFjZVVSSSB8fCBuYW1lc3BhY2VVUkkgPT09IE5TX1hIVE1MID9cbiAgICAgICAgZG9jLmNyZWF0ZUVsZW1lbnQobmFtZSkgOlxuICAgICAgICBkb2MuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZVVSSSwgbmFtZSk7XG59XG5cbi8qKlxuICogQ29waWVzIHRoZSBjaGlsZHJlbiBvZiBvbmUgRE9NIGVsZW1lbnQgdG8gYW5vdGhlciBET00gZWxlbWVudFxuICovXG5mdW5jdGlvbiBtb3ZlQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKSB7XG4gICAgdmFyIGN1ckNoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgd2hpbGUgKGN1ckNoaWxkKSB7XG4gICAgICAgIHZhciBuZXh0Q2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgdG9FbC5hcHBlbmRDaGlsZChjdXJDaGlsZCk7XG4gICAgICAgIGN1ckNoaWxkID0gbmV4dENoaWxkO1xuICAgIH1cbiAgICByZXR1cm4gdG9FbDtcbn1cblxuZnVuY3Rpb24gc3luY0Jvb2xlYW5BdHRyUHJvcChmcm9tRWwsIHRvRWwsIG5hbWUpIHtcbiAgICBpZiAoZnJvbUVsW25hbWVdICE9PSB0b0VsW25hbWVdKSB7XG4gICAgICAgIGZyb21FbFtuYW1lXSA9IHRvRWxbbmFtZV07XG4gICAgICAgIGlmIChmcm9tRWxbbmFtZV0pIHtcbiAgICAgICAgICAgIGZyb21FbC5zZXRBdHRyaWJ1dGUobmFtZSwgJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxudmFyIHNwZWNpYWxFbEhhbmRsZXJzID0ge1xuICAgIE9QVElPTjogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHZhciBwYXJlbnROb2RlID0gZnJvbUVsLnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChwYXJlbnROb2RlKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50TmFtZSA9IHBhcmVudE5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnROYW1lID09PSAnT1BUR1JPVVAnKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50Tm9kZSA9IHBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICBwYXJlbnROYW1lID0gcGFyZW50Tm9kZSAmJiBwYXJlbnROb2RlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyZW50TmFtZSA9PT0gJ1NFTEVDVCcgJiYgIXBhcmVudE5vZGUuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZyb21FbC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykgJiYgIXRvRWwuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgTVMgRWRnZSBidWcgd2hlcmUgdGhlICdzZWxlY3RlZCcgYXR0cmlidXRlIGNhbiBvbmx5IGJlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZWQgaWYgc2V0IHRvIGEgbm9uLWVtcHR5IHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL2lzc3Vlcy8xMjA4NzY3OS9cbiAgICAgICAgICAgICAgICAgICAgZnJvbUVsLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byByZXNldCBzZWxlY3QgZWxlbWVudCdzIHNlbGVjdGVkSW5kZXggdG8gLTEsIG90aGVyd2lzZSBzZXR0aW5nXG4gICAgICAgICAgICAgICAgLy8gZnJvbUVsLnNlbGVjdGVkIHVzaW5nIHRoZSBzeW5jQm9vbGVhbkF0dHJQcm9wIGJlbG93IGhhcyBubyBlZmZlY3QuXG4gICAgICAgICAgICAgICAgLy8gVGhlIGNvcnJlY3Qgc2VsZWN0ZWRJbmRleCB3aWxsIGJlIHNldCBpbiB0aGUgU0VMRUNUIHNwZWNpYWwgaGFuZGxlciBiZWxvdy5cbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgJ3NlbGVjdGVkJyk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBUaGUgXCJ2YWx1ZVwiIGF0dHJpYnV0ZSBpcyBzcGVjaWFsIGZvciB0aGUgPGlucHV0PiBlbGVtZW50IHNpbmNlIGl0IHNldHNcbiAgICAgKiB0aGUgaW5pdGlhbCB2YWx1ZS4gQ2hhbmdpbmcgdGhlIFwidmFsdWVcIiBhdHRyaWJ1dGUgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgKiBcInZhbHVlXCIgcHJvcGVydHkgd2lsbCBoYXZlIG5vIGVmZmVjdCBzaW5jZSBpdCBpcyBvbmx5IHVzZWQgdG8gdGhlIHNldCB0aGVcbiAgICAgKiBpbml0aWFsIHZhbHVlLiAgU2ltaWxhciBmb3IgdGhlIFwiY2hlY2tlZFwiIGF0dHJpYnV0ZSwgYW5kIFwiZGlzYWJsZWRcIi5cbiAgICAgKi9cbiAgICBJTlBVVDogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHN5bmNCb29sZWFuQXR0clByb3AoZnJvbUVsLCB0b0VsLCAnY2hlY2tlZCcpO1xuICAgICAgICBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgaWYgKGZyb21FbC52YWx1ZSAhPT0gdG9FbC52YWx1ZSkge1xuICAgICAgICAgICAgZnJvbUVsLnZhbHVlID0gdG9FbC52YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdG9FbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgIGZyb21FbC5yZW1vdmVBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgVEVYVEFSRUE6IGZ1bmN0aW9uKGZyb21FbCwgdG9FbCkge1xuICAgICAgICB2YXIgbmV3VmFsdWUgPSB0b0VsLnZhbHVlO1xuICAgICAgICBpZiAoZnJvbUVsLnZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgZnJvbUVsLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmlyc3RDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgICBpZiAoZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgLy8gTmVlZGVkIGZvciBJRS4gQXBwYXJlbnRseSBJRSBzZXRzIHRoZSBwbGFjZWhvbGRlciBhcyB0aGVcbiAgICAgICAgICAgIC8vIG5vZGUgdmFsdWUgYW5kIHZpc2UgdmVyc2EuIFRoaXMgaWdub3JlcyBhbiBlbXB0eSB1cGRhdGUuXG4gICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSBmaXJzdENoaWxkLm5vZGVWYWx1ZTtcblxuICAgICAgICAgICAgaWYgKG9sZFZhbHVlID09IG5ld1ZhbHVlIHx8ICghbmV3VmFsdWUgJiYgb2xkVmFsdWUgPT0gZnJvbUVsLnBsYWNlaG9sZGVyKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgU0VMRUNUOiBmdW5jdGlvbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgICAgaWYgKCF0b0VsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKSkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgdG8gbG9vcCB0aHJvdWdoIGNoaWxkcmVuIG9mIGZyb21FbCwgbm90IHRvRWwgc2luY2Ugbm9kZXMgY2FuIGJlIG1vdmVkXG4gICAgICAgICAgICAvLyBmcm9tIHRvRWwgdG8gZnJvbUVsIGRpcmVjdGx5IHdoZW4gbW9ycGhpbmcuXG4gICAgICAgICAgICAvLyBBdCB0aGUgdGltZSB0aGlzIHNwZWNpYWwgaGFuZGxlciBpcyBpbnZva2VkLCBhbGwgY2hpbGRyZW4gaGF2ZSBhbHJlYWR5IGJlZW4gbW9ycGhlZFxuICAgICAgICAgICAgLy8gYW5kIGFwcGVuZGVkIHRvIC8gcmVtb3ZlZCBmcm9tIGZyb21FbCwgc28gdXNpbmcgZnJvbUVsIGhlcmUgaXMgc2FmZSBhbmQgY29ycmVjdC5cbiAgICAgICAgICAgIHZhciBjdXJDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgICAgICAgdmFyIG9wdGdyb3VwO1xuICAgICAgICAgICAgdmFyIG5vZGVOYW1lO1xuICAgICAgICAgICAgd2hpbGUoY3VyQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICBub2RlTmFtZSA9IGN1ckNoaWxkLm5vZGVOYW1lICYmIGN1ckNoaWxkLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVOYW1lID09PSAnT1BUR1JPVVAnKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwID0gY3VyQ2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIGN1ckNoaWxkID0gb3B0Z3JvdXAuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZU5hbWUgPT09ICdPUFRJT04nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyQ2hpbGQuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJDaGlsZCAmJiBvcHRncm91cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBvcHRncm91cC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnJvbUVsLnNlbGVjdGVkSW5kZXggPSBzZWxlY3RlZEluZGV4O1xuICAgICAgICB9XG4gICAgfVxufTtcblxudmFyIEVMRU1FTlRfTk9ERSA9IDE7XG52YXIgRE9DVU1FTlRfRlJBR01FTlRfTk9ERSQxID0gMTE7XG52YXIgVEVYVF9OT0RFID0gMztcbnZhciBDT01NRU5UX05PREUgPSA4O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuZnVuY3Rpb24gZGVmYXVsdEdldE5vZGVLZXkobm9kZSkge1xuICBpZiAobm9kZSkge1xuICAgIHJldHVybiAobm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoJ2lkJykpIHx8IG5vZGUuaWQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gbW9ycGhkb21GYWN0b3J5KG1vcnBoQXR0cnMpIHtcblxuICByZXR1cm4gZnVuY3Rpb24gbW9ycGhkb20oZnJvbU5vZGUsIHRvTm9kZSwgb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdG9Ob2RlID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKGZyb21Ob2RlLm5vZGVOYW1lID09PSAnI2RvY3VtZW50JyB8fCBmcm9tTm9kZS5ub2RlTmFtZSA9PT0gJ0hUTUwnIHx8IGZyb21Ob2RlLm5vZGVOYW1lID09PSAnQk9EWScpIHtcbiAgICAgICAgdmFyIHRvTm9kZUh0bWwgPSB0b05vZGU7XG4gICAgICAgIHRvTm9kZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdodG1sJyk7XG4gICAgICAgIHRvTm9kZS5pbm5lckhUTUwgPSB0b05vZGVIdG1sO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9Ob2RlID0gdG9FbGVtZW50KHRvTm9kZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0b05vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUkMSkge1xuICAgICAgdG9Ob2RlID0gdG9Ob2RlLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIH1cblxuICAgIHZhciBnZXROb2RlS2V5ID0gb3B0aW9ucy5nZXROb2RlS2V5IHx8IGRlZmF1bHRHZXROb2RlS2V5O1xuICAgIHZhciBvbkJlZm9yZU5vZGVBZGRlZCA9IG9wdGlvbnMub25CZWZvcmVOb2RlQWRkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25Ob2RlQWRkZWQgPSBvcHRpb25zLm9uTm9kZUFkZGVkIHx8IG5vb3A7XG4gICAgdmFyIG9uQmVmb3JlRWxVcGRhdGVkID0gb3B0aW9ucy5vbkJlZm9yZUVsVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBvbkVsVXBkYXRlZCA9IG9wdGlvbnMub25FbFVwZGF0ZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVOb2RlRGlzY2FyZGVkID0gb3B0aW9ucy5vbkJlZm9yZU5vZGVEaXNjYXJkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25Ob2RlRGlzY2FyZGVkID0gb3B0aW9ucy5vbk5vZGVEaXNjYXJkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZCA9IG9wdGlvbnMub25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBza2lwRnJvbUNoaWxkcmVuID0gb3B0aW9ucy5za2lwRnJvbUNoaWxkcmVuIHx8IG5vb3A7XG4gICAgdmFyIGFkZENoaWxkID0gb3B0aW9ucy5hZGRDaGlsZCB8fCBmdW5jdGlvbihwYXJlbnQsIGNoaWxkKXsgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCk7IH07XG4gICAgdmFyIGNoaWxkcmVuT25seSA9IG9wdGlvbnMuY2hpbGRyZW5Pbmx5ID09PSB0cnVlO1xuXG4gICAgLy8gVGhpcyBvYmplY3QgaXMgdXNlZCBhcyBhIGxvb2t1cCB0byBxdWlja2x5IGZpbmQgYWxsIGtleWVkIGVsZW1lbnRzIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZS5cbiAgICB2YXIgZnJvbU5vZGVzTG9va3VwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB2YXIga2V5ZWRSZW1vdmFsTGlzdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gYWRkS2V5ZWRSZW1vdmFsKGtleSkge1xuICAgICAga2V5ZWRSZW1vdmFsTGlzdC5wdXNoKGtleSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMobm9kZSwgc2tpcEtleWVkTm9kZXMpIHtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgdmFyIGN1ckNoaWxkID0gbm9kZS5maXJzdENoaWxkO1xuICAgICAgICB3aGlsZSAoY3VyQ2hpbGQpIHtcblxuICAgICAgICAgIHZhciBrZXkgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoc2tpcEtleWVkTm9kZXMgJiYgKGtleSA9IGdldE5vZGVLZXkoY3VyQ2hpbGQpKSkge1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIHNraXBwaW5nIGtleWVkIG5vZGVzIHRoZW4gd2UgYWRkIHRoZSBrZXlcbiAgICAgICAgICAgIC8vIHRvIGEgbGlzdCBzbyB0aGF0IGl0IGNhbiBiZSBoYW5kbGVkIGF0IHRoZSB2ZXJ5IGVuZC5cbiAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChrZXkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBPbmx5IHJlcG9ydCB0aGUgbm9kZSBhcyBkaXNjYXJkZWQgaWYgaXQgaXMgbm90IGtleWVkLiBXZSBkbyB0aGlzIGJlY2F1c2VcbiAgICAgICAgICAgIC8vIGF0IHRoZSBlbmQgd2UgbG9vcCB0aHJvdWdoIGFsbCBrZXllZCBlbGVtZW50cyB0aGF0IHdlcmUgdW5tYXRjaGVkXG4gICAgICAgICAgICAvLyBhbmQgdGhlbiBkaXNjYXJkIHRoZW0gaW4gb25lIGZpbmFsIHBhc3MuXG4gICAgICAgICAgICBvbk5vZGVEaXNjYXJkZWQoY3VyQ2hpbGQpO1xuICAgICAgICAgICAgaWYgKGN1ckNoaWxkLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMoY3VyQ2hpbGQsIHNraXBLZXllZE5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBSZW1vdmVzIGEgRE9NIG5vZGUgb3V0IG9mIHRoZSBvcmlnaW5hbCBET01cbiAgICAqXG4gICAgKiBAcGFyYW0gIHtOb2RlfSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZVxuICAgICogQHBhcmFtICB7Tm9kZX0gcGFyZW50Tm9kZSBUaGUgbm9kZXMgcGFyZW50XG4gICAgKiBAcGFyYW0gIHtCb29sZWFufSBza2lwS2V5ZWROb2RlcyBJZiB0cnVlIHRoZW4gZWxlbWVudHMgd2l0aCBrZXlzIHdpbGwgYmUgc2tpcHBlZCBhbmQgbm90IGRpc2NhcmRlZC5cbiAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSwgcGFyZW50Tm9kZSwgc2tpcEtleWVkTm9kZXMpIHtcbiAgICAgIGlmIChvbkJlZm9yZU5vZGVEaXNjYXJkZWQobm9kZSkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgIH1cblxuICAgICAgb25Ob2RlRGlzY2FyZGVkKG5vZGUpO1xuICAgICAgd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMobm9kZSwgc2tpcEtleWVkTm9kZXMpO1xuICAgIH1cblxuICAgIC8vIC8vIFRyZWVXYWxrZXIgaW1wbGVtZW50YXRpb24gaXMgbm8gZmFzdGVyLCBidXQga2VlcGluZyB0aGlzIGFyb3VuZCBpbiBjYXNlIHRoaXMgY2hhbmdlcyBpbiB0aGUgZnV0dXJlXG4gICAgLy8gZnVuY3Rpb24gaW5kZXhUcmVlKHJvb3QpIHtcbiAgICAvLyAgICAgdmFyIHRyZWVXYWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKFxuICAgIC8vICAgICAgICAgcm9vdCxcbiAgICAvLyAgICAgICAgIE5vZGVGaWx0ZXIuU0hPV19FTEVNRU5UKTtcbiAgICAvL1xuICAgIC8vICAgICB2YXIgZWw7XG4gICAgLy8gICAgIHdoaWxlKChlbCA9IHRyZWVXYWxrZXIubmV4dE5vZGUoKSkpIHtcbiAgICAvLyAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGVsKTtcbiAgICAvLyAgICAgICAgIGlmIChrZXkpIHtcbiAgICAvLyAgICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGVsO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgLy8gLy8gTm9kZUl0ZXJhdG9yIGltcGxlbWVudGF0aW9uIGlzIG5vIGZhc3RlciwgYnV0IGtlZXBpbmcgdGhpcyBhcm91bmQgaW4gY2FzZSB0aGlzIGNoYW5nZXMgaW4gdGhlIGZ1dHVyZVxuICAgIC8vXG4gICAgLy8gZnVuY3Rpb24gaW5kZXhUcmVlKG5vZGUpIHtcbiAgICAvLyAgICAgdmFyIG5vZGVJdGVyYXRvciA9IGRvY3VtZW50LmNyZWF0ZU5vZGVJdGVyYXRvcihub2RlLCBOb2RlRmlsdGVyLlNIT1dfRUxFTUVOVCk7XG4gICAgLy8gICAgIHZhciBlbDtcbiAgICAvLyAgICAgd2hpbGUoKGVsID0gbm9kZUl0ZXJhdG9yLm5leHROb2RlKCkpKSB7XG4gICAgLy8gICAgICAgICB2YXIga2V5ID0gZ2V0Tm9kZUtleShlbCk7XG4gICAgLy8gICAgICAgICBpZiAoa2V5KSB7XG4gICAgLy8gICAgICAgICAgICAgZnJvbU5vZGVzTG9va3VwW2tleV0gPSBlbDtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vIH1cblxuICAgIGZ1bmN0aW9uIGluZGV4VHJlZShub2RlKSB7XG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFIHx8IG5vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUkMSkge1xuICAgICAgICB2YXIgY3VyQ2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuICAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGN1ckNoaWxkKTtcbiAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGN1ckNoaWxkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFdhbGsgcmVjdXJzaXZlbHlcbiAgICAgICAgICBpbmRleFRyZWUoY3VyQ2hpbGQpO1xuXG4gICAgICAgICAgY3VyQ2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGluZGV4VHJlZShmcm9tTm9kZSk7XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVOb2RlQWRkZWQoZWwpIHtcbiAgICAgIG9uTm9kZUFkZGVkKGVsKTtcblxuICAgICAgdmFyIGN1ckNoaWxkID0gZWwuZmlyc3RDaGlsZDtcbiAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuICAgICAgICB2YXIgbmV4dFNpYmxpbmcgPSBjdXJDaGlsZC5uZXh0U2libGluZztcblxuICAgICAgICB2YXIga2V5ID0gZ2V0Tm9kZUtleShjdXJDaGlsZCk7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICB2YXIgdW5tYXRjaGVkRnJvbUVsID0gZnJvbU5vZGVzTG9va3VwW2tleV07XG4gICAgICAgICAgLy8gaWYgd2UgZmluZCBhIGR1cGxpY2F0ZSAjaWQgbm9kZSBpbiBjYWNoZSwgcmVwbGFjZSBgZWxgIHdpdGggY2FjaGUgdmFsdWVcbiAgICAgICAgICAvLyBhbmQgbW9ycGggaXQgdG8gdGhlIGNoaWxkIG5vZGUuXG4gICAgICAgICAgaWYgKHVubWF0Y2hlZEZyb21FbCAmJiBjb21wYXJlTm9kZU5hbWVzKGN1ckNoaWxkLCB1bm1hdGNoZWRGcm9tRWwpKSB7XG4gICAgICAgICAgICBjdXJDaGlsZC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh1bm1hdGNoZWRGcm9tRWwsIGN1ckNoaWxkKTtcbiAgICAgICAgICAgIG1vcnBoRWwodW5tYXRjaGVkRnJvbUVsLCBjdXJDaGlsZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhhbmRsZU5vZGVBZGRlZChjdXJDaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGNhbGwgZm9yIGN1ckNoaWxkIGFuZCBpdCdzIGNoaWxkcmVuIHRvIHNlZSBpZiB3ZSBmaW5kIHNvbWV0aGluZyBpblxuICAgICAgICAgIC8vIGZyb21Ob2Rlc0xvb2t1cFxuICAgICAgICAgIGhhbmRsZU5vZGVBZGRlZChjdXJDaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJDaGlsZCA9IG5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFudXBGcm9tRWwoZnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkLCBjdXJGcm9tTm9kZUtleSkge1xuICAgICAgLy8gV2UgaGF2ZSBwcm9jZXNzZWQgYWxsIG9mIHRoZSBcInRvIG5vZGVzXCIuIElmIGN1ckZyb21Ob2RlQ2hpbGQgaXNcbiAgICAgIC8vIG5vbi1udWxsIHRoZW4gd2Ugc3RpbGwgaGF2ZSBzb21lIGZyb20gbm9kZXMgbGVmdCBvdmVyIHRoYXQgbmVlZFxuICAgICAgLy8gdG8gYmUgcmVtb3ZlZFxuICAgICAgd2hpbGUgKGN1ckZyb21Ob2RlQ2hpbGQpIHtcbiAgICAgICAgdmFyIGZyb21OZXh0U2libGluZyA9IGN1ckZyb21Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIGlmICgoY3VyRnJvbU5vZGVLZXkgPSBnZXROb2RlS2V5KGN1ckZyb21Ob2RlQ2hpbGQpKSkge1xuICAgICAgICAgIC8vIFNpbmNlIHRoZSBub2RlIGlzIGtleWVkIGl0IG1pZ2h0IGJlIG1hdGNoZWQgdXAgbGF0ZXIgc28gd2UgZGVmZXJcbiAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICBhZGRLZXllZFJlbW92YWwoY3VyRnJvbU5vZGVLZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgIC8vICAgICAgIHN0aWxsIGEgY2hhbmNlIHRoZXkgd2lsbCBiZSBtYXRjaGVkIHVwIGxhdGVyXG4gICAgICAgICAgcmVtb3ZlTm9kZShjdXJGcm9tTm9kZUNoaWxkLCBmcm9tRWwsIHRydWUgLyogc2tpcCBrZXllZCBub2RlcyAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb3JwaEVsKGZyb21FbCwgdG9FbCwgY2hpbGRyZW5Pbmx5KSB7XG4gICAgICB2YXIgdG9FbEtleSA9IGdldE5vZGVLZXkodG9FbCk7XG5cbiAgICAgIGlmICh0b0VsS2V5KSB7XG4gICAgICAgIC8vIElmIGFuIGVsZW1lbnQgd2l0aCBhbiBJRCBpcyBiZWluZyBtb3JwaGVkIHRoZW4gaXQgd2lsbCBiZSBpbiB0aGUgZmluYWxcbiAgICAgICAgLy8gRE9NIHNvIGNsZWFyIGl0IG91dCBvZiB0aGUgc2F2ZWQgZWxlbWVudHMgY29sbGVjdGlvblxuICAgICAgICBkZWxldGUgZnJvbU5vZGVzTG9va3VwW3RvRWxLZXldO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWNoaWxkcmVuT25seSkge1xuICAgICAgICAvLyBvcHRpb25hbFxuICAgICAgICBpZiAob25CZWZvcmVFbFVwZGF0ZWQoZnJvbUVsLCB0b0VsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgYXR0cmlidXRlcyBvbiBvcmlnaW5hbCBET00gZWxlbWVudCBmaXJzdFxuICAgICAgICBtb3JwaEF0dHJzKGZyb21FbCwgdG9FbCk7XG4gICAgICAgIC8vIG9wdGlvbmFsXG4gICAgICAgIG9uRWxVcGRhdGVkKGZyb21FbCk7XG5cbiAgICAgICAgaWYgKG9uQmVmb3JlRWxDaGlsZHJlblVwZGF0ZWQoZnJvbUVsLCB0b0VsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZyb21FbC5ub2RlTmFtZSAhPT0gJ1RFWFRBUkVBJykge1xuICAgICAgICBtb3JwaENoaWxkcmVuKGZyb21FbCwgdG9FbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVjaWFsRWxIYW5kbGVycy5URVhUQVJFQShmcm9tRWwsIHRvRWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vcnBoQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKSB7XG4gICAgICB2YXIgc2tpcEZyb20gPSBza2lwRnJvbUNoaWxkcmVuKGZyb21FbCk7XG4gICAgICB2YXIgY3VyVG9Ob2RlQ2hpbGQgPSB0b0VsLmZpcnN0Q2hpbGQ7XG4gICAgICB2YXIgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgdmFyIGN1clRvTm9kZUtleTtcbiAgICAgIHZhciBjdXJGcm9tTm9kZUtleTtcblxuICAgICAgdmFyIGZyb21OZXh0U2libGluZztcbiAgICAgIHZhciB0b05leHRTaWJsaW5nO1xuICAgICAgdmFyIG1hdGNoaW5nRnJvbUVsO1xuXG4gICAgICAvLyB3YWxrIHRoZSBjaGlsZHJlblxuICAgICAgb3V0ZXI6IHdoaWxlIChjdXJUb05vZGVDaGlsZCkge1xuICAgICAgICB0b05leHRTaWJsaW5nID0gY3VyVG9Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIGN1clRvTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyVG9Ob2RlQ2hpbGQpO1xuXG4gICAgICAgIC8vIHdhbGsgdGhlIGZyb21Ob2RlIGNoaWxkcmVuIGFsbCB0aGUgd2F5IHRocm91Z2hcbiAgICAgICAgd2hpbGUgKCFza2lwRnJvbSAmJiBjdXJGcm9tTm9kZUNoaWxkKSB7XG4gICAgICAgICAgZnJvbU5leHRTaWJsaW5nID0gY3VyRnJvbU5vZGVDaGlsZC5uZXh0U2libGluZztcblxuICAgICAgICAgIGlmIChjdXJUb05vZGVDaGlsZC5pc1NhbWVOb2RlICYmIGN1clRvTm9kZUNoaWxkLmlzU2FtZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCkpIHtcbiAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gdG9OZXh0U2libGluZztcbiAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJGcm9tTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyRnJvbU5vZGVDaGlsZCk7XG5cbiAgICAgICAgICB2YXIgY3VyRnJvbU5vZGVUeXBlID0gY3VyRnJvbU5vZGVDaGlsZC5ub2RlVHlwZTtcblxuICAgICAgICAgIC8vIHRoaXMgbWVhbnMgaWYgdGhlIGN1ckZyb21Ob2RlQ2hpbGQgZG9lc250IGhhdmUgYSBtYXRjaCB3aXRoIHRoZSBjdXJUb05vZGVDaGlsZFxuICAgICAgICAgIHZhciBpc0NvbXBhdGlibGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBjdXJUb05vZGVDaGlsZC5ub2RlVHlwZSkge1xuICAgICAgICAgICAgaWYgKGN1ckZyb21Ob2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgIC8vIEJvdGggbm9kZXMgYmVpbmcgY29tcGFyZWQgYXJlIEVsZW1lbnQgbm9kZXNcblxuICAgICAgICAgICAgICBpZiAoY3VyVG9Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHRhcmdldCBub2RlIGhhcyBhIGtleSBzbyB3ZSB3YW50IHRvIG1hdGNoIGl0IHVwIHdpdGggdGhlIGNvcnJlY3QgZWxlbWVudFxuICAgICAgICAgICAgICAgIC8vIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZVxuICAgICAgICAgICAgICAgIGlmIChjdXJUb05vZGVLZXkgIT09IGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAvLyBUaGUgY3VycmVudCBlbGVtZW50IGluIHRoZSBvcmlnaW5hbCBET00gdHJlZSBkb2VzIG5vdCBoYXZlIGEgbWF0Y2hpbmcga2V5IHNvXG4gICAgICAgICAgICAgICAgICAvLyBsZXQncyBjaGVjayBvdXIgbG9va3VwIHRvIHNlZSBpZiB0aGVyZSBpcyBhIG1hdGNoaW5nIGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgICAvLyBET00gdHJlZVxuICAgICAgICAgICAgICAgICAgaWYgKChtYXRjaGluZ0Zyb21FbCA9IGZyb21Ob2Rlc0xvb2t1cFtjdXJUb05vZGVLZXldKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbU5leHRTaWJsaW5nID09PSBtYXRjaGluZ0Zyb21FbCkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3Igc2luZ2xlIGVsZW1lbnQgcmVtb3ZhbHMuIFRvIGF2b2lkIHJlbW92aW5nIHRoZSBvcmlnaW5hbFxuICAgICAgICAgICAgICAgICAgICAgIC8vIERPTSBub2RlIG91dCBvZiB0aGUgdHJlZSAoc2luY2UgdGhhdCBjYW4gYnJlYWsgQ1NTIHRyYW5zaXRpb25zLCBldGMuKSxcbiAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSB3aWxsIGluc3RlYWQgZGlzY2FyZCB0aGUgY3VycmVudCBub2RlIGFuZCB3YWl0IHVudGlsIHRoZSBuZXh0XG4gICAgICAgICAgICAgICAgICAgICAgLy8gaXRlcmF0aW9uIHRvIHByb3Blcmx5IG1hdGNoIHVwIHRoZSBrZXllZCB0YXJnZXQgZWxlbWVudCB3aXRoIGl0cyBtYXRjaGluZ1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsIHRyZWVcbiAgICAgICAgICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBmb3VuZCBhIG1hdGNoaW5nIGtleWVkIGVsZW1lbnQgc29tZXdoZXJlIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZS5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBMZXQncyBtb3ZlIHRoZSBvcmlnaW5hbCBET00gbm9kZSBpbnRvIHRoZSBjdXJyZW50IHBvc2l0aW9uIGFuZCBtb3JwaFxuICAgICAgICAgICAgICAgICAgICAgIC8vIGl0LlxuXG4gICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogV2UgdXNlIGluc2VydEJlZm9yZSBpbnN0ZWFkIG9mIHJlcGxhY2VDaGlsZCBiZWNhdXNlIHdlIHdhbnQgdG8gZ28gdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBgcmVtb3ZlTm9kZSgpYCBmdW5jdGlvbiBmb3IgdGhlIG5vZGUgdGhhdCBpcyBiZWluZyBkaXNjYXJkZWQgc28gdGhhdFxuICAgICAgICAgICAgICAgICAgICAgIC8vIGFsbCBsaWZlY3ljbGUgaG9va3MgYXJlIGNvcnJlY3RseSBpbnZva2VkXG4gICAgICAgICAgICAgICAgICAgICAgZnJvbUVsLmluc2VydEJlZm9yZShtYXRjaGluZ0Zyb21FbCwgY3VyRnJvbU5vZGVDaGlsZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBmcm9tTmV4dFNpYmxpbmcgPSBjdXJGcm9tTm9kZUNoaWxkLm5leHRTaWJsaW5nO1xuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGUgbm9kZSBpcyBrZXllZCBpdCBtaWdodCBiZSBtYXRjaGVkIHVwIGxhdGVyIHNvIHdlIGRlZmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCwgZnJvbUVsLCB0cnVlIC8qIHNraXAga2V5ZWQgbm9kZXMgKi8pO1xuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBtYXRjaGluZ0Zyb21FbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG5vZGVzIGFyZSBub3QgY29tcGF0aWJsZSBzaW5jZSB0aGUgXCJ0b1wiIG5vZGUgaGFzIGEga2V5IGFuZCB0aGVyZVxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBubyBtYXRjaGluZyBrZXllZCBub2RlIGluIHRoZSBzb3VyY2UgdHJlZVxuICAgICAgICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyRnJvbU5vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgaGFzIGEga2V5XG4gICAgICAgICAgICAgICAgaXNDb21wYXRpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBpc0NvbXBhdGlibGUgIT09IGZhbHNlICYmIGNvbXBhcmVOb2RlTmFtZXMoY3VyRnJvbU5vZGVDaGlsZCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgICBpZiAoaXNDb21wYXRpYmxlKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgZm91bmQgY29tcGF0aWJsZSBET00gZWxlbWVudHMgc28gdHJhbnNmb3JtXG4gICAgICAgICAgICAgICAgLy8gdGhlIGN1cnJlbnQgXCJmcm9tXCIgbm9kZSB0byBtYXRjaCB0aGUgY3VycmVudFxuICAgICAgICAgICAgICAgIC8vIHRhcmdldCBET00gbm9kZS5cbiAgICAgICAgICAgICAgICAvLyBNT1JQSFxuICAgICAgICAgICAgICAgIG1vcnBoRWwoY3VyRnJvbU5vZGVDaGlsZCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBURVhUX05PREUgfHwgY3VyRnJvbU5vZGVUeXBlID09IENPTU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgICAvLyBCb3RoIG5vZGVzIGJlaW5nIGNvbXBhcmVkIGFyZSBUZXh0IG9yIENvbW1lbnQgbm9kZXNcbiAgICAgICAgICAgICAgaXNDb21wYXRpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgLy8gU2ltcGx5IHVwZGF0ZSBub2RlVmFsdWUgb24gdGhlIG9yaWdpbmFsIG5vZGUgdG9cbiAgICAgICAgICAgICAgLy8gY2hhbmdlIHRoZSB0ZXh0IHZhbHVlXG4gICAgICAgICAgICAgIGlmIChjdXJGcm9tTm9kZUNoaWxkLm5vZGVWYWx1ZSAhPT0gY3VyVG9Ob2RlQ2hpbGQubm9kZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZC5ub2RlVmFsdWUgPSBjdXJUb05vZGVDaGlsZC5ub2RlVmFsdWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpc0NvbXBhdGlibGUpIHtcbiAgICAgICAgICAgIC8vIEFkdmFuY2UgYm90aCB0aGUgXCJ0b1wiIGNoaWxkIGFuZCB0aGUgXCJmcm9tXCIgY2hpbGQgc2luY2Ugd2UgZm91bmQgYSBtYXRjaFxuICAgICAgICAgICAgLy8gTm90aGluZyBlbHNlIHRvIGRvIGFzIHdlIGFscmVhZHkgcmVjdXJzaXZlbHkgY2FsbGVkIG1vcnBoQ2hpbGRyZW4gYWJvdmVcbiAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gdG9OZXh0U2libGluZztcbiAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBObyBjb21wYXRpYmxlIG1hdGNoIHNvIHJlbW92ZSB0aGUgb2xkIG5vZGUgZnJvbSB0aGUgRE9NIGFuZCBjb250aW51ZSB0cnlpbmcgdG8gZmluZCBhXG4gICAgICAgICAgLy8gbWF0Y2ggaW4gdGhlIG9yaWdpbmFsIERPTS4gSG93ZXZlciwgd2Ugb25seSBkbyB0aGlzIGlmIHRoZSBmcm9tIG5vZGUgaXMgbm90IGtleWVkXG4gICAgICAgICAgLy8gc2luY2UgaXQgaXMgcG9zc2libGUgdGhhdCBhIGtleWVkIG5vZGUgbWlnaHQgbWF0Y2ggdXAgd2l0aCBhIG5vZGUgc29tZXdoZXJlIGVsc2UgaW4gdGhlXG4gICAgICAgICAgLy8gdGFyZ2V0IHRyZWUgYW5kIHdlIGRvbid0IHdhbnQgdG8gZGlzY2FyZCBpdCBqdXN0IHlldCBzaW5jZSBpdCBzdGlsbCBtaWdodCBmaW5kIGFcbiAgICAgICAgICAvLyBob21lIGluIHRoZSBmaW5hbCBET00gdHJlZS4gQWZ0ZXIgZXZlcnl0aGluZyBpcyBkb25lIHdlIHdpbGwgcmVtb3ZlIGFueSBrZXllZCBub2Rlc1xuICAgICAgICAgIC8vIHRoYXQgZGlkbid0IGZpbmQgYSBob21lXG4gICAgICAgICAgaWYgKGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAvLyBTaW5jZSB0aGUgbm9kZSBpcyBrZXllZCBpdCBtaWdodCBiZSBtYXRjaGVkIHVwIGxhdGVyIHNvIHdlIGRlZmVyXG4gICAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICAgIHJlbW92ZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCwgZnJvbUVsLCB0cnVlIC8qIHNraXAga2V5ZWQgbm9kZXMgKi8pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgIH0gLy8gRU5EOiB3aGlsZShjdXJGcm9tTm9kZUNoaWxkKSB7fVxuXG4gICAgICAgIC8vIElmIHdlIGdvdCB0aGlzIGZhciB0aGVuIHdlIGRpZCBub3QgZmluZCBhIGNhbmRpZGF0ZSBtYXRjaCBmb3JcbiAgICAgICAgLy8gb3VyIFwidG8gbm9kZVwiIGFuZCB3ZSBleGhhdXN0ZWQgYWxsIG9mIHRoZSBjaGlsZHJlbiBcImZyb21cIlxuICAgICAgICAvLyBub2Rlcy4gVGhlcmVmb3JlLCB3ZSB3aWxsIGp1c3QgYXBwZW5kIHRoZSBjdXJyZW50IFwidG9cIiBub2RlXG4gICAgICAgIC8vIHRvIHRoZSBlbmRcbiAgICAgICAgaWYgKGN1clRvTm9kZUtleSAmJiAobWF0Y2hpbmdGcm9tRWwgPSBmcm9tTm9kZXNMb29rdXBbY3VyVG9Ob2RlS2V5XSkgJiYgY29tcGFyZU5vZGVOYW1lcyhtYXRjaGluZ0Zyb21FbCwgY3VyVG9Ob2RlQ2hpbGQpKSB7XG4gICAgICAgICAgLy8gTU9SUEhcbiAgICAgICAgICBpZighc2tpcEZyb20peyBhZGRDaGlsZChmcm9tRWwsIG1hdGNoaW5nRnJvbUVsKTsgfVxuICAgICAgICAgIG1vcnBoRWwobWF0Y2hpbmdGcm9tRWwsIGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgb25CZWZvcmVOb2RlQWRkZWRSZXN1bHQgPSBvbkJlZm9yZU5vZGVBZGRlZChjdXJUb05vZGVDaGlsZCk7XG4gICAgICAgICAgaWYgKG9uQmVmb3JlTm9kZUFkZGVkUmVzdWx0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKG9uQmVmb3JlTm9kZUFkZGVkUmVzdWx0KSB7XG4gICAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gb25CZWZvcmVOb2RlQWRkZWRSZXN1bHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjdXJUb05vZGVDaGlsZC5hY3R1YWxpemUpIHtcbiAgICAgICAgICAgICAgY3VyVG9Ob2RlQ2hpbGQgPSBjdXJUb05vZGVDaGlsZC5hY3R1YWxpemUoZnJvbUVsLm93bmVyRG9jdW1lbnQgfHwgZG9jKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZENoaWxkKGZyb21FbCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgaGFuZGxlTm9kZUFkZGVkKGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjdXJUb05vZGVDaGlsZCA9IHRvTmV4dFNpYmxpbmc7XG4gICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICB9XG5cbiAgICAgIGNsZWFudXBGcm9tRWwoZnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkLCBjdXJGcm9tTm9kZUtleSk7XG5cbiAgICAgIHZhciBzcGVjaWFsRWxIYW5kbGVyID0gc3BlY2lhbEVsSGFuZGxlcnNbZnJvbUVsLm5vZGVOYW1lXTtcbiAgICAgIGlmIChzcGVjaWFsRWxIYW5kbGVyKSB7XG4gICAgICAgIHNwZWNpYWxFbEhhbmRsZXIoZnJvbUVsLCB0b0VsKTtcbiAgICAgIH1cbiAgICB9IC8vIEVORDogbW9ycGhDaGlsZHJlbiguLi4pXG5cbiAgICB2YXIgbW9ycGhlZE5vZGUgPSBmcm9tTm9kZTtcbiAgICB2YXIgbW9ycGhlZE5vZGVUeXBlID0gbW9ycGhlZE5vZGUubm9kZVR5cGU7XG4gICAgdmFyIHRvTm9kZVR5cGUgPSB0b05vZGUubm9kZVR5cGU7XG5cbiAgICBpZiAoIWNoaWxkcmVuT25seSkge1xuICAgICAgLy8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIHdlIGFyZSBnaXZlbiB0d28gRE9NIG5vZGVzIHRoYXQgYXJlIG5vdFxuICAgICAgLy8gY29tcGF0aWJsZSAoZS5nLiA8ZGl2PiAtLT4gPHNwYW4+IG9yIDxkaXY+IC0tPiBURVhUKVxuICAgICAgaWYgKG1vcnBoZWROb2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgIGlmICh0b05vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgICBpZiAoIWNvbXBhcmVOb2RlTmFtZXMoZnJvbU5vZGUsIHRvTm9kZSkpIHtcbiAgICAgICAgICAgIG9uTm9kZURpc2NhcmRlZChmcm9tTm9kZSk7XG4gICAgICAgICAgICBtb3JwaGVkTm9kZSA9IG1vdmVDaGlsZHJlbihmcm9tTm9kZSwgY3JlYXRlRWxlbWVudE5TKHRvTm9kZS5ub2RlTmFtZSwgdG9Ob2RlLm5hbWVzcGFjZVVSSSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBHb2luZyBmcm9tIGFuIGVsZW1lbnQgbm9kZSB0byBhIHRleHQgbm9kZVxuICAgICAgICAgIG1vcnBoZWROb2RlID0gdG9Ob2RlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1vcnBoZWROb2RlVHlwZSA9PT0gVEVYVF9OT0RFIHx8IG1vcnBoZWROb2RlVHlwZSA9PT0gQ09NTUVOVF9OT0RFKSB7IC8vIFRleHQgb3IgY29tbWVudCBub2RlXG4gICAgICAgIGlmICh0b05vZGVUeXBlID09PSBtb3JwaGVkTm9kZVR5cGUpIHtcbiAgICAgICAgICBpZiAobW9ycGhlZE5vZGUubm9kZVZhbHVlICE9PSB0b05vZGUubm9kZVZhbHVlKSB7XG4gICAgICAgICAgICBtb3JwaGVkTm9kZS5ub2RlVmFsdWUgPSB0b05vZGUubm9kZVZhbHVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBtb3JwaGVkTm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBUZXh0IG5vZGUgdG8gc29tZXRoaW5nIGVsc2VcbiAgICAgICAgICBtb3JwaGVkTm9kZSA9IHRvTm9kZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtb3JwaGVkTm9kZSA9PT0gdG9Ob2RlKSB7XG4gICAgICAvLyBUaGUgXCJ0byBub2RlXCIgd2FzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIFwiZnJvbSBub2RlXCIgc28gd2UgaGFkIHRvXG4gICAgICAvLyB0b3NzIG91dCB0aGUgXCJmcm9tIG5vZGVcIiBhbmQgdXNlIHRoZSBcInRvIG5vZGVcIlxuICAgICAgb25Ob2RlRGlzY2FyZGVkKGZyb21Ob2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRvTm9kZS5pc1NhbWVOb2RlICYmIHRvTm9kZS5pc1NhbWVOb2RlKG1vcnBoZWROb2RlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1vcnBoRWwobW9ycGhlZE5vZGUsIHRvTm9kZSwgY2hpbGRyZW5Pbmx5KTtcblxuICAgICAgLy8gV2Ugbm93IG5lZWQgdG8gbG9vcCBvdmVyIGFueSBrZXllZCBub2RlcyB0aGF0IG1pZ2h0IG5lZWQgdG8gYmVcbiAgICAgIC8vIHJlbW92ZWQuIFdlIG9ubHkgZG8gdGhlIHJlbW92YWwgaWYgd2Uga25vdyB0aGF0IHRoZSBrZXllZCBub2RlXG4gICAgICAvLyBuZXZlciBmb3VuZCBhIG1hdGNoLiBXaGVuIGEga2V5ZWQgbm9kZSBpcyBtYXRjaGVkIHVwIHdlIHJlbW92ZVxuICAgICAgLy8gaXQgb3V0IG9mIGZyb21Ob2Rlc0xvb2t1cCBhbmQgd2UgdXNlIGZyb21Ob2Rlc0xvb2t1cCB0byBkZXRlcm1pbmVcbiAgICAgIC8vIGlmIGEga2V5ZWQgbm9kZSBoYXMgYmVlbiBtYXRjaGVkIHVwIG9yIG5vdFxuICAgICAgaWYgKGtleWVkUmVtb3ZhbExpc3QpIHtcbiAgICAgICAgZm9yICh2YXIgaT0wLCBsZW49a2V5ZWRSZW1vdmFsTGlzdC5sZW5ndGg7IGk8bGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgZWxUb1JlbW92ZSA9IGZyb21Ob2Rlc0xvb2t1cFtrZXllZFJlbW92YWxMaXN0W2ldXTtcbiAgICAgICAgICBpZiAoZWxUb1JlbW92ZSkge1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShlbFRvUmVtb3ZlLCBlbFRvUmVtb3ZlLnBhcmVudE5vZGUsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNoaWxkcmVuT25seSAmJiBtb3JwaGVkTm9kZSAhPT0gZnJvbU5vZGUgJiYgZnJvbU5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgaWYgKG1vcnBoZWROb2RlLmFjdHVhbGl6ZSkge1xuICAgICAgICBtb3JwaGVkTm9kZSA9IG1vcnBoZWROb2RlLmFjdHVhbGl6ZShmcm9tTm9kZS5vd25lckRvY3VtZW50IHx8IGRvYyk7XG4gICAgICB9XG4gICAgICAvLyBJZiB3ZSBoYWQgdG8gc3dhcCBvdXQgdGhlIGZyb20gbm9kZSB3aXRoIGEgbmV3IG5vZGUgYmVjYXVzZSB0aGUgb2xkXG4gICAgICAvLyBub2RlIHdhcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB0YXJnZXQgbm9kZSB0aGVuIHdlIG5lZWQgdG9cbiAgICAgIC8vIHJlcGxhY2UgdGhlIG9sZCBET00gbm9kZSBpbiB0aGUgb3JpZ2luYWwgRE9NIHRyZWUuIFRoaXMgaXMgb25seVxuICAgICAgLy8gcG9zc2libGUgaWYgdGhlIG9yaWdpbmFsIERPTSBub2RlIHdhcyBwYXJ0IG9mIGEgRE9NIHRyZWUgd2hpY2hcbiAgICAgIC8vIHdlIGtub3cgaXMgdGhlIGNhc2UgaWYgaXQgaGFzIGEgcGFyZW50IG5vZGUuXG4gICAgICBmcm9tTm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChtb3JwaGVkTm9kZSwgZnJvbU5vZGUpO1xuICAgIH1cblxuICAgIHJldHVybiBtb3JwaGVkTm9kZTtcbiAgfTtcbn1cblxudmFyIG1vcnBoZG9tID0gbW9ycGhkb21GYWN0b3J5KG1vcnBoQXR0cnMpO1xuXG5leHBvcnQgZGVmYXVsdCBtb3JwaGRvbTtcbiIsICJpbXBvcnQge1xuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfRElTQUJMRV9XSVRILFxuICBQSFhfRkVFREJBQ0tfRk9SLFxuICBQSFhfUFJVTkUsXG4gIFBIWF9ST09UX0lELFxuICBQSFhfU0VTU0lPTixcbiAgUEhYX1NLSVAsXG4gIFBIWF9TVEFUSUMsXG4gIFBIWF9UUklHR0VSX0FDVElPTixcbiAgUEhYX1VQREFURSxcbiAgUEhYX1NUUkVBTSxcbiAgUEhYX1NUUkVBTV9SRUYsXG4gIFBIWF9WSUVXUE9SVF9UT1AsXG4gIFBIWF9WSUVXUE9SVF9CT1RUT00sXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGRldGVjdER1cGxpY2F0ZUlkcyxcbiAgaXNDaWRcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5pbXBvcnQgRE9NUG9zdE1vcnBoUmVzdG9yZXIgZnJvbSBcIi4vZG9tX3Bvc3RfbW9ycGhfcmVzdG9yZXJcIlxuaW1wb3J0IG1vcnBoZG9tIGZyb20gXCJtb3JwaGRvbVwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERPTVBhdGNoIHtcbiAgc3RhdGljIHBhdGNoRWwoZnJvbUVsLCB0b0VsLCBhY3RpdmVFbGVtZW50KXtcbiAgICBtb3JwaGRvbShmcm9tRWwsIHRvRWwsIHtcbiAgICAgIGNoaWxkcmVuT25seTogZmFsc2UsXG4gICAgICBvbkJlZm9yZUVsVXBkYXRlZDogKGZyb21FbCwgdG9FbCkgPT4ge1xuICAgICAgICBpZihhY3RpdmVFbGVtZW50ICYmIGFjdGl2ZUVsZW1lbnQuaXNTYW1lTm9kZShmcm9tRWwpICYmIERPTS5pc0Zvcm1JbnB1dChmcm9tRWwpKXtcbiAgICAgICAgICBET00ubWVyZ2VGb2N1c2VkSW5wdXQoZnJvbUVsLCB0b0VsKVxuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHZpZXcsIGNvbnRhaW5lciwgaWQsIGh0bWwsIHN0cmVhbXMsIHRhcmdldENJRCl7XG4gICAgdGhpcy52aWV3ID0gdmlld1xuICAgIHRoaXMubGl2ZVNvY2tldCA9IHZpZXcubGl2ZVNvY2tldFxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyXG4gICAgdGhpcy5pZCA9IGlkXG4gICAgdGhpcy5yb290SUQgPSB2aWV3LnJvb3QuaWRcbiAgICB0aGlzLmh0bWwgPSBodG1sXG4gICAgdGhpcy5zdHJlYW1zID0gc3RyZWFtc1xuICAgIHRoaXMuc3RyZWFtSW5zZXJ0cyA9IHt9XG4gICAgdGhpcy50YXJnZXRDSUQgPSB0YXJnZXRDSURcbiAgICB0aGlzLmNpZFBhdGNoID0gaXNDaWQodGhpcy50YXJnZXRDSUQpXG4gICAgdGhpcy5wZW5kaW5nUmVtb3ZlcyA9IFtdXG4gICAgdGhpcy5waHhSZW1vdmUgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhcInJlbW92ZVwiKVxuICAgIHRoaXMuY2FsbGJhY2tzID0ge1xuICAgICAgYmVmb3JlYWRkZWQ6IFtdLCBiZWZvcmV1cGRhdGVkOiBbXSwgYmVmb3JlcGh4Q2hpbGRBZGRlZDogW10sXG4gICAgICBhZnRlcmFkZGVkOiBbXSwgYWZ0ZXJ1cGRhdGVkOiBbXSwgYWZ0ZXJkaXNjYXJkZWQ6IFtdLCBhZnRlcnBoeENoaWxkQWRkZWQ6IFtdLFxuICAgICAgYWZ0ZXJ0cmFuc2l0aW9uc0Rpc2NhcmRlZDogW11cbiAgICB9XG4gIH1cblxuICBiZWZvcmUoa2luZCwgY2FsbGJhY2speyB0aGlzLmNhbGxiYWNrc1tgYmVmb3JlJHtraW5kfWBdLnB1c2goY2FsbGJhY2spIH1cbiAgYWZ0ZXIoa2luZCwgY2FsbGJhY2speyB0aGlzLmNhbGxiYWNrc1tgYWZ0ZXIke2tpbmR9YF0ucHVzaChjYWxsYmFjaykgfVxuXG4gIHRyYWNrQmVmb3JlKGtpbmQsIC4uLmFyZ3Mpe1xuICAgIHRoaXMuY2FsbGJhY2tzW2BiZWZvcmUke2tpbmR9YF0uZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayguLi5hcmdzKSlcbiAgfVxuXG4gIHRyYWNrQWZ0ZXIoa2luZCwgLi4uYXJncyl7XG4gICAgdGhpcy5jYWxsYmFja3NbYGFmdGVyJHtraW5kfWBdLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soLi4uYXJncykpXG4gIH1cblxuICBtYXJrUHJ1bmFibGVDb250ZW50Rm9yUmVtb3ZhbCgpe1xuICAgIGxldCBwaHhVcGRhdGUgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfVVBEQVRFKVxuICAgIERPTS5hbGwodGhpcy5jb250YWluZXIsIGBbJHtwaHhVcGRhdGV9PSR7UEhYX1NUUkVBTX1dYCwgZWwgPT4gZWwuaW5uZXJIVE1MID0gXCJcIilcbiAgICBET00uYWxsKHRoaXMuY29udGFpbmVyLCBgWyR7cGh4VXBkYXRlfT1hcHBlbmRdID4gKiwgWyR7cGh4VXBkYXRlfT1wcmVwZW5kXSA+ICpgLCBlbCA9PiB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoUEhYX1BSVU5FLCBcIlwiKVxuICAgIH0pXG4gIH1cblxuICBwZXJmb3JtKCl7XG4gICAgbGV0IHt2aWV3LCBsaXZlU29ja2V0LCBjb250YWluZXIsIGh0bWx9ID0gdGhpc1xuICAgIGxldCB0YXJnZXRDb250YWluZXIgPSB0aGlzLmlzQ0lEUGF0Y2goKSA/IHRoaXMudGFyZ2V0Q0lEQ29udGFpbmVyKGh0bWwpIDogY29udGFpbmVyXG4gICAgaWYodGhpcy5pc0NJRFBhdGNoKCkgJiYgIXRhcmdldENvbnRhaW5lcil7IHJldHVybiB9XG5cbiAgICBsZXQgZm9jdXNlZCA9IGxpdmVTb2NrZXQuZ2V0QWN0aXZlRWxlbWVudCgpXG4gICAgbGV0IHtzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kfSA9IGZvY3VzZWQgJiYgRE9NLmhhc1NlbGVjdGlvblJhbmdlKGZvY3VzZWQpID8gZm9jdXNlZCA6IHt9XG4gICAgbGV0IHBoeFVwZGF0ZSA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVVBEQVRFKVxuICAgIGxldCBwaHhGZWVkYmFja0ZvciA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKVxuICAgIGxldCBkaXNhYmxlV2l0aCA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfRElTQUJMRV9XSVRIKVxuICAgIGxldCBwaHhWaWV3cG9ydFRvcCA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVklFV1BPUlRfVE9QKVxuICAgIGxldCBwaHhWaWV3cG9ydEJvdHRvbSA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVklFV1BPUlRfQk9UVE9NKVxuICAgIGxldCBwaHhUcmlnZ2VyRXh0ZXJuYWwgPSBsaXZlU29ja2V0LmJpbmRpbmcoUEhYX1RSSUdHRVJfQUNUSU9OKVxuICAgIGxldCBhZGRlZCA9IFtdXG4gICAgbGV0IHRyYWNrZWRJbnB1dHMgPSBbXVxuICAgIGxldCB1cGRhdGVzID0gW11cbiAgICBsZXQgYXBwZW5kUHJlcGVuZFVwZGF0ZXMgPSBbXVxuXG4gICAgbGV0IGV4dGVybmFsRm9ybVRyaWdnZXJlZCA9IG51bGxcblxuICAgIGxldCBkaWZmSFRNTCA9IGxpdmVTb2NrZXQudGltZShcInByZW1vcnBoIGNvbnRhaW5lciBwcmVwXCIsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkRGlmZkhUTUwoY29udGFpbmVyLCBodG1sLCBwaHhVcGRhdGUsIHRhcmdldENvbnRhaW5lcilcbiAgICB9KVxuXG4gICAgdGhpcy50cmFja0JlZm9yZShcImFkZGVkXCIsIGNvbnRhaW5lcilcbiAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBjb250YWluZXIsIGNvbnRhaW5lcilcblxuICAgIGxpdmVTb2NrZXQudGltZShcIm1vcnBoZG9tXCIsICgpID0+IHtcbiAgICAgIHRoaXMuc3RyZWFtcy5mb3JFYWNoKChbcmVmLCBpbnNlcnRzLCBkZWxldGVJZHMsIHJlc2V0XSkgPT4ge1xuICAgICAgICBPYmplY3QuZW50cmllcyhpbnNlcnRzKS5mb3JFYWNoKChba2V5LCBbc3RyZWFtQXQsIGxpbWl0XV0pID0+IHtcbiAgICAgICAgICB0aGlzLnN0cmVhbUluc2VydHNba2V5XSA9IHtyZWYsIHN0cmVhbUF0LCBsaW1pdH1cbiAgICAgICAgfSlcbiAgICAgICAgaWYocmVzZXQgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgRE9NLmFsbChjb250YWluZXIsIGBbJHtQSFhfU1RSRUFNX1JFRn09XCIke3JlZn1cIl1gLCBjaGlsZCA9PiB7XG4gICAgICAgICAgICBpZighaW5zZXJ0c1tjaGlsZC5pZF0pe1xuICAgICAgICAgICAgICB0aGlzLnJlbW92ZVN0cmVhbUNoaWxkRWxlbWVudChjaGlsZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZUlkcy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICBsZXQgY2hpbGQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2lkPVwiJHtpZH1cIl1gKVxuICAgICAgICAgIGlmKGNoaWxkKXsgdGhpcy5yZW1vdmVTdHJlYW1DaGlsZEVsZW1lbnQoY2hpbGQpIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG5cbiAgICAgIG1vcnBoZG9tKHRhcmdldENvbnRhaW5lciwgZGlmZkhUTUwsIHtcbiAgICAgICAgY2hpbGRyZW5Pbmx5OiB0YXJnZXRDb250YWluZXIuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpID09PSBudWxsLFxuICAgICAgICBnZXROb2RlS2V5OiAobm9kZSkgPT4ge1xuICAgICAgICAgIHJldHVybiBET00uaXNQaHhEZXN0cm95ZWQobm9kZSkgPyBudWxsIDogbm9kZS5pZFxuICAgICAgICB9LFxuICAgICAgICAvLyBza2lwIGluZGV4aW5nIGZyb20gY2hpbGRyZW4gd2hlbiBjb250YWluZXIgaXMgc3RyZWFtXG4gICAgICAgIHNraXBGcm9tQ2hpbGRyZW46IChmcm9tKSA9PiB7IHJldHVybiBmcm9tLmdldEF0dHJpYnV0ZShwaHhVcGRhdGUpID09PSBQSFhfU1RSRUFNIH0sXG4gICAgICAgIC8vIHRlbGwgbW9ycGhkb20gaG93IHRvIGFkZCBhIGNoaWxkXG4gICAgICAgIGFkZENoaWxkOiAocGFyZW50LCBjaGlsZCkgPT4ge1xuICAgICAgICAgIGxldCB7cmVmLCBzdHJlYW1BdCwgbGltaXR9ID0gdGhpcy5nZXRTdHJlYW1JbnNlcnQoY2hpbGQpXG4gICAgICAgICAgaWYocmVmID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCkgfVxuXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShjaGlsZCwgUEhYX1NUUkVBTV9SRUYsIGVsID0+IGVsLnNldEF0dHJpYnV0ZShQSFhfU1RSRUFNX1JFRiwgcmVmKSlcblxuICAgICAgICAgIC8vIHN0cmVhbWluZ1xuICAgICAgICAgIGlmKHN0cmVhbUF0ID09PSAwKXtcbiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmJlZ2luXCIsIGNoaWxkKVxuICAgICAgICAgIH0gZWxzZSBpZihzdHJlYW1BdCA9PT0gLTEpe1xuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKVxuICAgICAgICAgIH0gZWxzZSBpZihzdHJlYW1BdCA+IDApe1xuICAgICAgICAgICAgbGV0IHNpYmxpbmcgPSBBcnJheS5mcm9tKHBhcmVudC5jaGlsZHJlbilbc3RyZWFtQXRdXG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBzaWJsaW5nKVxuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgY2hpbGRyZW4gPSBsaW1pdCAhPT0gbnVsbCAmJiBBcnJheS5mcm9tKHBhcmVudC5jaGlsZHJlbilcbiAgICAgICAgICBsZXQgY2hpbGRyZW5Ub1JlbW92ZSA9IFtdXG4gICAgICAgICAgaWYobGltaXQgJiYgbGltaXQgPCAwICYmIGNoaWxkcmVuLmxlbmd0aCA+IGxpbWl0ICogLTEpe1xuICAgICAgICAgICAgY2hpbGRyZW5Ub1JlbW92ZSA9IGNoaWxkcmVuLnNsaWNlKDAsIGNoaWxkcmVuLmxlbmd0aCArIGxpbWl0KVxuICAgICAgICAgIH0gZWxzZSBpZihsaW1pdCAmJiBsaW1pdCA+PSAwICYmIGNoaWxkcmVuLmxlbmd0aCA+IGxpbWl0KXtcbiAgICAgICAgICAgIGNoaWxkcmVuVG9SZW1vdmUgPSBjaGlsZHJlbi5zbGljZShsaW1pdClcbiAgICAgICAgICB9XG4gICAgICAgICAgY2hpbGRyZW5Ub1JlbW92ZS5mb3JFYWNoKHJlbW92ZUNoaWxkID0+IHtcbiAgICAgICAgICAgIC8vIGRvIG5vdCByZW1vdmUgY2hpbGQgYXMgcGFydCBvZiBsaW1pdCBpZiB3ZSBhcmUgcmUtYWRkaW5nIGl0XG4gICAgICAgICAgICBpZighdGhpcy5zdHJlYW1JbnNlcnRzW3JlbW92ZUNoaWxkLmlkXSl7XG4gICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3RyZWFtQ2hpbGRFbGVtZW50KHJlbW92ZUNoaWxkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIG9uQmVmb3JlTm9kZUFkZGVkOiAoZWwpID0+IHtcbiAgICAgICAgICBET00ubWF5YmVBZGRQcml2YXRlSG9va3MoZWwsIHBoeFZpZXdwb3J0VG9wLCBwaHhWaWV3cG9ydEJvdHRvbSlcbiAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwiYWRkZWRcIiwgZWwpXG4gICAgICAgICAgcmV0dXJuIGVsXG4gICAgICAgIH0sXG4gICAgICAgIG9uTm9kZUFkZGVkOiAoZWwpID0+IHtcbiAgICAgICAgICBpZihlbC5nZXRBdHRyaWJ1dGUpeyB0aGlzLm1heWJlUmVPcmRlclN0cmVhbShlbCkgfVxuXG4gICAgICAgICAgLy8gaGFjayB0byBmaXggU2FmYXJpIGhhbmRsaW5nIG9mIGltZyBzcmNzZXQgYW5kIHZpZGVvIHRhZ3NcbiAgICAgICAgICBpZihlbCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQgJiYgZWwuc3Jjc2V0KXtcbiAgICAgICAgICAgIGVsLnNyY3NldCA9IGVsLnNyY3NldFxuICAgICAgICAgIH0gZWxzZSBpZihlbCBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQgJiYgZWwuYXV0b3BsYXkpe1xuICAgICAgICAgICAgZWwucGxheSgpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKERPTS5pc05vd1RyaWdnZXJGb3JtRXh0ZXJuYWwoZWwsIHBoeFRyaWdnZXJFeHRlcm5hbCkpe1xuICAgICAgICAgICAgZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkID0gZWxcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZihlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSAmJiBET00uaXNGb3JtSW5wdXQoZWwpKXtcbiAgICAgICAgICAgIHRyYWNrZWRJbnB1dHMucHVzaChlbClcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gbmVzdGVkIHZpZXcgaGFuZGxpbmdcbiAgICAgICAgICBpZigoRE9NLmlzUGh4Q2hpbGQoZWwpICYmIHZpZXcub3duc0VsZW1lbnQoZWwpKSB8fCBET00uaXNQaHhTdGlja3koZWwpICYmIHZpZXcub3duc0VsZW1lbnQoZWwucGFyZW50Tm9kZSkpe1xuICAgICAgICAgICAgdGhpcy50cmFja0FmdGVyKFwicGh4Q2hpbGRBZGRlZFwiLCBlbClcbiAgICAgICAgICB9XG4gICAgICAgICAgYWRkZWQucHVzaChlbClcbiAgICAgICAgfSxcbiAgICAgICAgb25Ob2RlRGlzY2FyZGVkOiAoZWwpID0+IHRoaXMub25Ob2RlRGlzY2FyZGVkKGVsKSxcbiAgICAgICAgb25CZWZvcmVOb2RlRGlzY2FyZGVkOiAoZWwpID0+IHtcbiAgICAgICAgICBpZihlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKFBIWF9QUlVORSkgIT09IG51bGwpeyByZXR1cm4gdHJ1ZSB9XG4gICAgICAgICAgaWYoZWwucGFyZW50RWxlbWVudCAhPT0gbnVsbCAmJiBlbC5pZCAmJlxuICAgICAgICAgICAgRE9NLmlzUGh4VXBkYXRlKGVsLnBhcmVudEVsZW1lbnQsIHBoeFVwZGF0ZSwgW1BIWF9TVFJFQU0sIFwiYXBwZW5kXCIsIFwicHJlcGVuZFwiXSkpe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKHRoaXMubWF5YmVQZW5kaW5nUmVtb3ZlKGVsKSl7IHJldHVybiBmYWxzZSB9XG4gICAgICAgICAgaWYodGhpcy5za2lwQ0lEU2libGluZyhlbCkpeyByZXR1cm4gZmFsc2UgfVxuXG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgb25FbFVwZGF0ZWQ6IChlbCkgPT4ge1xuICAgICAgICAgIGlmKERPTS5pc05vd1RyaWdnZXJGb3JtRXh0ZXJuYWwoZWwsIHBoeFRyaWdnZXJFeHRlcm5hbCkpe1xuICAgICAgICAgICAgZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkID0gZWxcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlcy5wdXNoKGVsKVxuICAgICAgICAgIHRoaXMubWF5YmVSZU9yZGVyU3RyZWFtKGVsKVxuICAgICAgICB9LFxuICAgICAgICBvbkJlZm9yZUVsVXBkYXRlZDogKGZyb21FbCwgdG9FbCkgPT4ge1xuICAgICAgICAgIERPTS5tYXliZUFkZFByaXZhdGVIb29rcyh0b0VsLCBwaHhWaWV3cG9ydFRvcCwgcGh4Vmlld3BvcnRCb3R0b20pXG4gICAgICAgICAgRE9NLmNsZWFuQ2hpbGROb2Rlcyh0b0VsLCBwaHhVcGRhdGUpXG4gICAgICAgICAgaWYodGhpcy5za2lwQ0lEU2libGluZyh0b0VsKSl7IHJldHVybiBmYWxzZSB9XG4gICAgICAgICAgaWYoRE9NLmlzUGh4U3RpY2t5KGZyb21FbCkpeyByZXR1cm4gZmFsc2UgfVxuICAgICAgICAgIGlmKERPTS5pc0lnbm9yZWQoZnJvbUVsLCBwaHhVcGRhdGUpIHx8IChmcm9tRWwuZm9ybSAmJiBmcm9tRWwuZm9ybS5pc1NhbWVOb2RlKGV4dGVybmFsRm9ybVRyaWdnZXJlZCkpKXtcbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIERPTS5tZXJnZUF0dHJzKGZyb21FbCwgdG9FbCwge2lzSWdub3JlZDogdHJ1ZX0pXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyhmcm9tRWwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoZnJvbUVsLnR5cGUgPT09IFwibnVtYmVyXCIgJiYgKGZyb21FbC52YWxpZGl0eSAmJiBmcm9tRWwudmFsaWRpdHkuYmFkSW5wdXQpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICAgICAgICBpZighRE9NLnN5bmNQZW5kaW5nUmVmKGZyb21FbCwgdG9FbCwgZGlzYWJsZVdpdGgpKXtcbiAgICAgICAgICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGZyb21FbCkpe1xuICAgICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICAgIHVwZGF0ZXMucHVzaChmcm9tRWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBET00uYXBwbHlTdGlja3lPcGVyYXRpb25zKGZyb21FbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIG5lc3RlZCB2aWV3IGhhbmRsaW5nXG4gICAgICAgICAgaWYoRE9NLmlzUGh4Q2hpbGQodG9FbCkpe1xuICAgICAgICAgICAgbGV0IHByZXZTZXNzaW9uID0gZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTilcbiAgICAgICAgICAgIERPTS5tZXJnZUF0dHJzKGZyb21FbCwgdG9FbCwge2V4Y2x1ZGU6IFtQSFhfU1RBVElDXX0pXG4gICAgICAgICAgICBpZihwcmV2U2Vzc2lvbiAhPT0gXCJcIil7IGZyb21FbC5zZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04sIHByZXZTZXNzaW9uKSB9XG4gICAgICAgICAgICBmcm9tRWwuc2V0QXR0cmlidXRlKFBIWF9ST09UX0lELCB0aGlzLnJvb3RJRClcbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnMoZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gaW5wdXQgaGFuZGxpbmdcbiAgICAgICAgICBET00uY29weVByaXZhdGVzKHRvRWwsIGZyb21FbClcblxuICAgICAgICAgIGxldCBpc0ZvY3VzZWRGb3JtRWwgPSBmb2N1c2VkICYmIGZyb21FbC5pc1NhbWVOb2RlKGZvY3VzZWQpICYmIERPTS5pc0Zvcm1JbnB1dChmcm9tRWwpXG4gICAgICAgICAgaWYoaXNGb2N1c2VkRm9ybUVsICYmIGZyb21FbC50eXBlICE9PSBcImhpZGRlblwiKXtcbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIERPTS5tZXJnZUZvY3VzZWRJbnB1dChmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICBET00uc3luY0F0dHJzVG9Qcm9wcyhmcm9tRWwpXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyhmcm9tRWwpXG4gICAgICAgICAgICB0cmFja2VkSW5wdXRzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKERPTS5pc1BoeFVwZGF0ZSh0b0VsLCBwaHhVcGRhdGUsIFtcImFwcGVuZFwiLCBcInByZXBlbmRcIl0pKXtcbiAgICAgICAgICAgICAgYXBwZW5kUHJlcGVuZFVwZGF0ZXMucHVzaChuZXcgRE9NUG9zdE1vcnBoUmVzdG9yZXIoZnJvbUVsLCB0b0VsLCB0b0VsLmdldEF0dHJpYnV0ZShwaHhVcGRhdGUpKSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgRE9NLnN5bmNBdHRyc1RvUHJvcHModG9FbClcbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnModG9FbClcbiAgICAgICAgICAgIGlmKHRvRWwuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSAmJiBET00uaXNGb3JtSW5wdXQodG9FbCkpe1xuICAgICAgICAgICAgICB0cmFja2VkSW5wdXRzLnB1c2godG9FbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpZihsaXZlU29ja2V0LmlzRGVidWdFbmFibGVkKCkpeyBkZXRlY3REdXBsaWNhdGVJZHMoKSB9XG5cbiAgICBpZihhcHBlbmRQcmVwZW5kVXBkYXRlcy5sZW5ndGggPiAwKXtcbiAgICAgIGxpdmVTb2NrZXQudGltZShcInBvc3QtbW9ycGggYXBwZW5kL3ByZXBlbmQgcmVzdG9yYXRpb25cIiwgKCkgPT4ge1xuICAgICAgICBhcHBlbmRQcmVwZW5kVXBkYXRlcy5mb3JFYWNoKHVwZGF0ZSA9PiB1cGRhdGUucGVyZm9ybSgpKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICB0cmFja2VkSW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgRE9NLm1heWJlSGlkZUZlZWRiYWNrKHRhcmdldENvbnRhaW5lciwgaW5wdXQsIHBoeEZlZWRiYWNrRm9yKVxuICAgIH0pXG5cbiAgICBsaXZlU29ja2V0LnNpbGVuY2VFdmVudHMoKCkgPT4gRE9NLnJlc3RvcmVGb2N1cyhmb2N1c2VkLCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKSlcbiAgICBET00uZGlzcGF0Y2hFdmVudChkb2N1bWVudCwgXCJwaHg6dXBkYXRlXCIpXG4gICAgYWRkZWQuZm9yRWFjaChlbCA9PiB0aGlzLnRyYWNrQWZ0ZXIoXCJhZGRlZFwiLCBlbCkpXG4gICAgdXBkYXRlcy5mb3JFYWNoKGVsID0+IHRoaXMudHJhY2tBZnRlcihcInVwZGF0ZWRcIiwgZWwpKVxuXG4gICAgdGhpcy50cmFuc2l0aW9uUGVuZGluZ1JlbW92ZXMoKVxuXG4gICAgaWYoZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkKXtcbiAgICAgIGxpdmVTb2NrZXQudW5sb2FkKClcbiAgICAgIC8vIHVzZSBwcm90b3R5cGUncyBzdWJtaXQgaW4gY2FzZSB0aGVyZSdzIGEgZm9ybSBjb250cm9sIHdpdGggbmFtZSBvciBpZCBvZiBcInN1Ym1pdFwiXG4gICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSFRNTEZvcm1FbGVtZW50L3N1Ym1pdFxuICAgICAgT2JqZWN0LmdldFByb3RvdHlwZU9mKGV4dGVybmFsRm9ybVRyaWdnZXJlZCkuc3VibWl0LmNhbGwoZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkKVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgb25Ob2RlRGlzY2FyZGVkKGVsKXtcbiAgICAvLyBuZXN0ZWQgdmlldyBoYW5kbGluZ1xuICAgIGlmKERPTS5pc1BoeENoaWxkKGVsKSB8fCBET00uaXNQaHhTdGlja3koZWwpKXsgdGhpcy5saXZlU29ja2V0LmRlc3Ryb3lWaWV3QnlFbChlbCkgfVxuICAgIHRoaXMudHJhY2tBZnRlcihcImRpc2NhcmRlZFwiLCBlbClcbiAgfVxuXG4gIG1heWJlUGVuZGluZ1JlbW92ZShub2RlKXtcbiAgICBpZihub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZSh0aGlzLnBoeFJlbW92ZSkgIT09IG51bGwpe1xuICAgICAgdGhpcy5wZW5kaW5nUmVtb3Zlcy5wdXNoKG5vZGUpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICByZW1vdmVTdHJlYW1DaGlsZEVsZW1lbnQoY2hpbGQpe1xuICAgIGlmKCF0aGlzLm1heWJlUGVuZGluZ1JlbW92ZShjaGlsZCkpe1xuICAgICAgY2hpbGQucmVtb3ZlKClcbiAgICAgIHRoaXMub25Ob2RlRGlzY2FyZGVkKGNoaWxkKVxuICAgIH1cbiAgfVxuXG4gIGdldFN0cmVhbUluc2VydChlbCl7XG4gICAgbGV0IGluc2VydCA9IGVsLmlkID8gdGhpcy5zdHJlYW1JbnNlcnRzW2VsLmlkXSA6IHt9XG4gICAgcmV0dXJuIGluc2VydCB8fCB7fVxuICB9XG5cbiAgbWF5YmVSZU9yZGVyU3RyZWFtKGVsKXtcbiAgICBsZXQge3JlZiwgc3RyZWFtQXQsIGxpbWl0fSA9IHRoaXMuZ2V0U3RyZWFtSW5zZXJ0KGVsKVxuICAgIGlmKHN0cmVhbUF0ID09PSB1bmRlZmluZWQpeyByZXR1cm4gfVxuXG4gICAgLy8gd2UgbmVlZCB0byB0aGUgUEhYX1NUUkVBTV9SRUYgaGVyZSBhcyB3ZWxsIGFzIGFkZENoaWxkIGlzIGludm9rZWQgb25seSBmb3IgcGFyZW50c1xuICAgIERPTS5wdXRTdGlja3koZWwsIFBIWF9TVFJFQU1fUkVGLCBlbCA9PiBlbC5zZXRBdHRyaWJ1dGUoUEhYX1NUUkVBTV9SRUYsIHJlZikpXG5cbiAgICBpZihzdHJlYW1BdCA9PT0gMCl7XG4gICAgICBlbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShlbCwgZWwucGFyZW50RWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZClcbiAgICB9IGVsc2UgaWYoc3RyZWFtQXQgPiAwKXtcbiAgICAgIGxldCBjaGlsZHJlbiA9IEFycmF5LmZyb20oZWwucGFyZW50RWxlbWVudC5jaGlsZHJlbilcbiAgICAgIGxldCBvbGRJbmRleCA9IGNoaWxkcmVuLmluZGV4T2YoZWwpXG4gICAgICBpZihzdHJlYW1BdCA+PSBjaGlsZHJlbi5sZW5ndGggLSAxKXtcbiAgICAgICAgZWwucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChlbClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBzaWJsaW5nID0gY2hpbGRyZW5bc3RyZWFtQXRdXG4gICAgICAgIGlmKG9sZEluZGV4ID4gc3RyZWFtQXQpe1xuICAgICAgICAgIGVsLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVsLCBzaWJsaW5nKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVsLCBzaWJsaW5nLm5leHRFbGVtZW50U2libGluZylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRyYW5zaXRpb25QZW5kaW5nUmVtb3Zlcygpe1xuICAgIGxldCB7cGVuZGluZ1JlbW92ZXMsIGxpdmVTb2NrZXR9ID0gdGhpc1xuICAgIGlmKHBlbmRpbmdSZW1vdmVzLmxlbmd0aCA+IDApe1xuICAgICAgbGl2ZVNvY2tldC50cmFuc2l0aW9uUmVtb3ZlcyhwZW5kaW5nUmVtb3ZlcylcbiAgICAgIGxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIHBlbmRpbmdSZW1vdmVzLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgIGxldCBjaGlsZCA9IERPTS5maXJzdFBoeENoaWxkKGVsKVxuICAgICAgICAgIGlmKGNoaWxkKXsgbGl2ZVNvY2tldC5kZXN0cm95Vmlld0J5RWwoY2hpbGQpIH1cbiAgICAgICAgICBlbC5yZW1vdmUoKVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnRyYWNrQWZ0ZXIoXCJ0cmFuc2l0aW9uc0Rpc2NhcmRlZFwiLCBwZW5kaW5nUmVtb3ZlcylcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgaXNDSURQYXRjaCgpeyByZXR1cm4gdGhpcy5jaWRQYXRjaCB9XG5cbiAgc2tpcENJRFNpYmxpbmcoZWwpe1xuICAgIHJldHVybiBlbC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgZWwuZ2V0QXR0cmlidXRlKFBIWF9TS0lQKSAhPT0gbnVsbFxuICB9XG5cbiAgdGFyZ2V0Q0lEQ29udGFpbmVyKGh0bWwpe1xuICAgIGlmKCF0aGlzLmlzQ0lEUGF0Y2goKSl7IHJldHVybiB9XG4gICAgbGV0IFtmaXJzdCwgLi4ucmVzdF0gPSBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KHRoaXMuY29udGFpbmVyLCB0aGlzLnRhcmdldENJRClcbiAgICBpZihyZXN0Lmxlbmd0aCA9PT0gMCAmJiBET00uY2hpbGROb2RlTGVuZ3RoKGh0bWwpID09PSAxKXtcbiAgICAgIHJldHVybiBmaXJzdFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmlyc3QgJiYgZmlyc3QucGFyZW50Tm9kZVxuICAgIH1cbiAgfVxuXG4gIC8vIGJ1aWxkcyBIVE1MIGZvciBtb3JwaGRvbSBwYXRjaFxuICAvLyAtIGZvciBmdWxsIHBhdGNoZXMgb2YgTGl2ZVZpZXcgb3IgYSBjb21wb25lbnQgd2l0aCBhIHNpbmdsZVxuICAvLyAgIHJvb3Qgbm9kZSwgc2ltcGx5IHJldHVybnMgdGhlIEhUTUxcbiAgLy8gLSBmb3IgcGF0Y2hlcyBvZiBhIGNvbXBvbmVudCB3aXRoIG11bHRpcGxlIHJvb3Qgbm9kZXMsIHRoZVxuICAvLyAgIHBhcmVudCBub2RlIGJlY29tZXMgdGhlIHRhcmdldCBjb250YWluZXIgYW5kIG5vbi1jb21wb25lbnRcbiAgLy8gICBzaWJsaW5ncyBhcmUgbWFya2VkIGFzIHNraXAuXG4gIGJ1aWxkRGlmZkhUTUwoY29udGFpbmVyLCBodG1sLCBwaHhVcGRhdGUsIHRhcmdldENvbnRhaW5lcil7XG4gICAgbGV0IGlzQ0lEUGF0Y2ggPSB0aGlzLmlzQ0lEUGF0Y2goKVxuICAgIGxldCBpc0NJRFdpdGhTaW5nbGVSb290ID0gaXNDSURQYXRjaCAmJiB0YXJnZXRDb250YWluZXIuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpID09PSB0aGlzLnRhcmdldENJRC50b1N0cmluZygpXG4gICAgaWYoIWlzQ0lEUGF0Y2ggfHwgaXNDSURXaXRoU2luZ2xlUm9vdCl7XG4gICAgICByZXR1cm4gaHRtbFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb21wb25lbnQgcGF0Y2ggd2l0aCBtdWx0aXBsZSBDSUQgcm9vdHNcbiAgICAgIGxldCBkaWZmQ29udGFpbmVyID0gbnVsbFxuICAgICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgICBkaWZmQ29udGFpbmVyID0gRE9NLmNsb25lTm9kZSh0YXJnZXRDb250YWluZXIpXG4gICAgICBsZXQgW2ZpcnN0Q29tcG9uZW50LCAuLi5yZXN0XSA9IERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QoZGlmZkNvbnRhaW5lciwgdGhpcy50YXJnZXRDSUQpXG4gICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG4gICAgICByZXN0LmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpXG4gICAgICBBcnJheS5mcm9tKGRpZmZDb250YWluZXIuY2hpbGROb2RlcykuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgIC8vIHdlIGNhbiBvbmx5IHNraXAgdHJhY2thYmxlIG5vZGVzIHdpdGggYW4gSURcbiAgICAgICAgaWYoY2hpbGQuaWQgJiYgY2hpbGQubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFICYmIGNoaWxkLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKSAhPT0gdGhpcy50YXJnZXRDSUQudG9TdHJpbmcoKSl7XG4gICAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKFBIWF9TS0lQLCBcIlwiKVxuICAgICAgICAgIGNoaWxkLmlubmVySFRNTCA9IFwiXCJcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIEFycmF5LmZyb20odGVtcGxhdGUuY29udGVudC5jaGlsZE5vZGVzKS5mb3JFYWNoKGVsID0+IGRpZmZDb250YWluZXIuaW5zZXJ0QmVmb3JlKGVsLCBmaXJzdENvbXBvbmVudCkpXG4gICAgICBmaXJzdENvbXBvbmVudC5yZW1vdmUoKVxuICAgICAgcmV0dXJuIGRpZmZDb250YWluZXIub3V0ZXJIVE1MXG4gICAgfVxuICB9XG5cbiAgaW5kZXhPZihwYXJlbnQsIGNoaWxkKXsgcmV0dXJuIEFycmF5LmZyb20ocGFyZW50LmNoaWxkcmVuKS5pbmRleE9mKGNoaWxkKSB9XG59XG4iLCAiaW1wb3J0IHtcbiAgQ09NUE9ORU5UUyxcbiAgRFlOQU1JQ1MsXG4gIFRFTVBMQVRFUyxcbiAgRVZFTlRTLFxuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfU0tJUCxcbiAgUkVQTFksXG4gIFNUQVRJQyxcbiAgVElUTEUsXG4gIFNUUkVBTSxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgaXNPYmplY3QsXG4gIGxvZ0Vycm9yLFxuICBpc0NpZCxcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlZCB7XG4gIHN0YXRpYyBleHRyYWN0KGRpZmYpe1xuICAgIGxldCB7W1JFUExZXTogcmVwbHksIFtFVkVOVFNdOiBldmVudHMsIFtUSVRMRV06IHRpdGxlfSA9IGRpZmZcbiAgICBkZWxldGUgZGlmZltSRVBMWV1cbiAgICBkZWxldGUgZGlmZltFVkVOVFNdXG4gICAgZGVsZXRlIGRpZmZbVElUTEVdXG4gICAgcmV0dXJuIHtkaWZmLCB0aXRsZSwgcmVwbHk6IHJlcGx5IHx8IG51bGwsIGV2ZW50czogZXZlbnRzIHx8IFtdfVxuICB9XG5cbiAgY29uc3RydWN0b3Iodmlld0lkLCByZW5kZXJlZCl7XG4gICAgdGhpcy52aWV3SWQgPSB2aWV3SWRcbiAgICB0aGlzLnJlbmRlcmVkID0ge31cbiAgICB0aGlzLm1lcmdlRGlmZihyZW5kZXJlZClcbiAgfVxuXG4gIHBhcmVudFZpZXdJZCgpeyByZXR1cm4gdGhpcy52aWV3SWQgfVxuXG4gIHRvU3RyaW5nKG9ubHlDaWRzKXtcbiAgICBsZXQgW3N0ciwgc3RyZWFtc10gPSB0aGlzLnJlY3Vyc2l2ZVRvU3RyaW5nKHRoaXMucmVuZGVyZWQsIHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU10sIG9ubHlDaWRzKVxuICAgIHJldHVybiBbc3RyLCBzdHJlYW1zXVxuICB9XG5cbiAgcmVjdXJzaXZlVG9TdHJpbmcocmVuZGVyZWQsIGNvbXBvbmVudHMgPSByZW5kZXJlZFtDT01QT05FTlRTXSwgb25seUNpZHMpe1xuICAgIG9ubHlDaWRzID0gb25seUNpZHMgPyBuZXcgU2V0KG9ubHlDaWRzKSA6IG51bGxcbiAgICBsZXQgb3V0cHV0ID0ge2J1ZmZlcjogXCJcIiwgY29tcG9uZW50czogY29tcG9uZW50cywgb25seUNpZHM6IG9ubHlDaWRzLCBzdHJlYW1zOiBuZXcgU2V0KCl9XG4gICAgdGhpcy50b091dHB1dEJ1ZmZlcihyZW5kZXJlZCwgbnVsbCwgb3V0cHV0KVxuICAgIHJldHVybiBbb3V0cHV0LmJ1ZmZlciwgb3V0cHV0LnN0cmVhbXNdXG4gIH1cblxuICBjb21wb25lbnRDSURzKGRpZmYpeyByZXR1cm4gT2JqZWN0LmtleXMoZGlmZltDT01QT05FTlRTXSB8fCB7fSkubWFwKGkgPT4gcGFyc2VJbnQoaSkpIH1cblxuICBpc0NvbXBvbmVudE9ubHlEaWZmKGRpZmYpe1xuICAgIGlmKCFkaWZmW0NPTVBPTkVOVFNdKXsgcmV0dXJuIGZhbHNlIH1cbiAgICByZXR1cm4gT2JqZWN0LmtleXMoZGlmZikubGVuZ3RoID09PSAxXG4gIH1cblxuICBnZXRDb21wb25lbnQoZGlmZiwgY2lkKXsgcmV0dXJuIGRpZmZbQ09NUE9ORU5UU11bY2lkXSB9XG5cbiAgbWVyZ2VEaWZmKGRpZmYpe1xuICAgIGxldCBuZXdjID0gZGlmZltDT01QT05FTlRTXVxuICAgIGxldCBjYWNoZSA9IHt9XG4gICAgZGVsZXRlIGRpZmZbQ09NUE9ORU5UU11cbiAgICB0aGlzLnJlbmRlcmVkID0gdGhpcy5tdXRhYmxlTWVyZ2UodGhpcy5yZW5kZXJlZCwgZGlmZilcbiAgICB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdID0gdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXSB8fCB7fVxuXG4gICAgaWYobmV3Yyl7XG4gICAgICBsZXQgb2xkYyA9IHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU11cblxuICAgICAgZm9yKGxldCBjaWQgaW4gbmV3Yyl7XG4gICAgICAgIG5ld2NbY2lkXSA9IHRoaXMuY2FjaGVkRmluZENvbXBvbmVudChjaWQsIG5ld2NbY2lkXSwgb2xkYywgbmV3YywgY2FjaGUpXG4gICAgICB9XG5cbiAgICAgIGZvcihsZXQgY2lkIGluIG5ld2MpeyBvbGRjW2NpZF0gPSBuZXdjW2NpZF0gfVxuICAgICAgZGlmZltDT01QT05FTlRTXSA9IG5ld2NcbiAgICB9XG4gIH1cblxuICBjYWNoZWRGaW5kQ29tcG9uZW50KGNpZCwgY2RpZmYsIG9sZGMsIG5ld2MsIGNhY2hlKXtcbiAgICBpZihjYWNoZVtjaWRdKXtcbiAgICAgIHJldHVybiBjYWNoZVtjaWRdXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBuZGlmZiwgc3RhdCwgc2NpZCA9IGNkaWZmW1NUQVRJQ11cblxuICAgICAgaWYoaXNDaWQoc2NpZCkpe1xuICAgICAgICBsZXQgdGRpZmZcblxuICAgICAgICBpZihzY2lkID4gMCl7XG4gICAgICAgICAgdGRpZmYgPSB0aGlzLmNhY2hlZEZpbmRDb21wb25lbnQoc2NpZCwgbmV3Y1tzY2lkXSwgb2xkYywgbmV3YywgY2FjaGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGRpZmYgPSBvbGRjWy1zY2lkXVxuICAgICAgICB9XG5cbiAgICAgICAgc3RhdCA9IHRkaWZmW1NUQVRJQ11cbiAgICAgICAgbmRpZmYgPSB0aGlzLmNsb25lTWVyZ2UodGRpZmYsIGNkaWZmKVxuICAgICAgICBuZGlmZltTVEFUSUNdID0gc3RhdFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmRpZmYgPSBjZGlmZltTVEFUSUNdICE9PSB1bmRlZmluZWQgPyBjZGlmZiA6IHRoaXMuY2xvbmVNZXJnZShvbGRjW2NpZF0gfHwge30sIGNkaWZmKVxuICAgICAgfVxuXG4gICAgICBjYWNoZVtjaWRdID0gbmRpZmZcbiAgICAgIHJldHVybiBuZGlmZlxuICAgIH1cbiAgfVxuXG4gIG11dGFibGVNZXJnZSh0YXJnZXQsIHNvdXJjZSl7XG4gICAgaWYoc291cmNlW1NUQVRJQ10gIT09IHVuZGVmaW5lZCl7XG4gICAgICByZXR1cm4gc291cmNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZG9NdXRhYmxlTWVyZ2UodGFyZ2V0LCBzb3VyY2UpXG4gICAgICByZXR1cm4gdGFyZ2V0XG4gICAgfVxuICB9XG5cbiAgZG9NdXRhYmxlTWVyZ2UodGFyZ2V0LCBzb3VyY2Upe1xuICAgIGZvcihsZXQga2V5IGluIHNvdXJjZSl7XG4gICAgICBsZXQgdmFsID0gc291cmNlW2tleV1cbiAgICAgIGxldCB0YXJnZXRWYWwgPSB0YXJnZXRba2V5XVxuICAgICAgbGV0IGlzT2JqVmFsID0gaXNPYmplY3QodmFsKVxuICAgICAgaWYoaXNPYmpWYWwgJiYgdmFsW1NUQVRJQ10gPT09IHVuZGVmaW5lZCAmJiBpc09iamVjdCh0YXJnZXRWYWwpKXtcbiAgICAgICAgdGhpcy5kb011dGFibGVNZXJnZSh0YXJnZXRWYWwsIHZhbClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gdmFsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2xvbmVNZXJnZSh0YXJnZXQsIHNvdXJjZSl7XG4gICAgbGV0IG1lcmdlZCA9IHsuLi50YXJnZXQsIC4uLnNvdXJjZX1cbiAgICBmb3IobGV0IGtleSBpbiBtZXJnZWQpe1xuICAgICAgbGV0IHZhbCA9IHNvdXJjZVtrZXldXG4gICAgICBsZXQgdGFyZ2V0VmFsID0gdGFyZ2V0W2tleV1cbiAgICAgIGlmKGlzT2JqZWN0KHZhbCkgJiYgdmFsW1NUQVRJQ10gPT09IHVuZGVmaW5lZCAmJiBpc09iamVjdCh0YXJnZXRWYWwpKXtcbiAgICAgICAgbWVyZ2VkW2tleV0gPSB0aGlzLmNsb25lTWVyZ2UodGFyZ2V0VmFsLCB2YWwpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXJnZWRcbiAgfVxuXG4gIGNvbXBvbmVudFRvU3RyaW5nKGNpZCl7XG4gICAgbGV0IFtzdHIsIHN0cmVhbXNdID0gdGhpcy5yZWN1cnNpdmVDSURUb1N0cmluZyh0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdLCBjaWQsIG51bGwsIGZhbHNlKVxuICAgIHJldHVybiBbc3RyLCBzdHJlYW1zXVxuICB9XG5cbiAgcHJ1bmVDSURzKGNpZHMpe1xuICAgIGNpZHMuZm9yRWFjaChjaWQgPT4gZGVsZXRlIHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU11bY2lkXSlcbiAgfVxuXG4gIC8vIHByaXZhdGVcblxuICBnZXQoKXsgcmV0dXJuIHRoaXMucmVuZGVyZWQgfVxuXG4gIGlzTmV3RmluZ2VycHJpbnQoZGlmZiA9IHt9KXsgcmV0dXJuICEhZGlmZltTVEFUSUNdIH1cblxuICB0ZW1wbGF0ZVN0YXRpYyhwYXJ0LCB0ZW1wbGF0ZXMpe1xuICAgIGlmKHR5cGVvZiAocGFydCkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiB0ZW1wbGF0ZXNbcGFydF1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBhcnRcbiAgICB9XG4gIH1cblxuICB0b091dHB1dEJ1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpe1xuICAgIGlmKHJlbmRlcmVkW0RZTkFNSUNTXSl7IHJldHVybiB0aGlzLmNvbXByZWhlbnNpb25Ub0J1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpIH1cbiAgICBsZXQge1tTVEFUSUNdOiBzdGF0aWNzfSA9IHJlbmRlcmVkXG4gICAgc3RhdGljcyA9IHRoaXMudGVtcGxhdGVTdGF0aWMoc3RhdGljcywgdGVtcGxhdGVzKVxuXG4gICAgb3V0cHV0LmJ1ZmZlciArPSBzdGF0aWNzWzBdXG4gICAgZm9yKGxldCBpID0gMTsgaSA8IHN0YXRpY3MubGVuZ3RoOyBpKyspe1xuICAgICAgdGhpcy5keW5hbWljVG9CdWZmZXIocmVuZGVyZWRbaSAtIDFdLCB0ZW1wbGF0ZXMsIG91dHB1dClcbiAgICAgIG91dHB1dC5idWZmZXIgKz0gc3RhdGljc1tpXVxuICAgIH1cbiAgfVxuXG4gIGNvbXByZWhlbnNpb25Ub0J1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpe1xuICAgIGxldCB7W0RZTkFNSUNTXTogZHluYW1pY3MsIFtTVEFUSUNdOiBzdGF0aWNzLCBbU1RSRUFNXTogc3RyZWFtfSA9IHJlbmRlcmVkXG4gICAgbGV0IFtfcmVmLCBfaW5zZXJ0cywgZGVsZXRlSWRzLCByZXNldF0gPSBzdHJlYW0gfHwgW251bGwsIHt9LCBbXSwgbnVsbF1cbiAgICBzdGF0aWNzID0gdGhpcy50ZW1wbGF0ZVN0YXRpYyhzdGF0aWNzLCB0ZW1wbGF0ZXMpXG4gICAgbGV0IGNvbXBUZW1wbGF0ZXMgPSB0ZW1wbGF0ZXMgfHwgcmVuZGVyZWRbVEVNUExBVEVTXVxuICAgIGZvcihsZXQgZCA9IDA7IGQgPCBkeW5hbWljcy5sZW5ndGg7IGQrKyl7XG4gICAgICBsZXQgZHluYW1pYyA9IGR5bmFtaWNzW2RdXG4gICAgICBvdXRwdXQuYnVmZmVyICs9IHN0YXRpY3NbMF1cbiAgICAgIGZvcihsZXQgaSA9IDE7IGkgPCBzdGF0aWNzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgdGhpcy5keW5hbWljVG9CdWZmZXIoZHluYW1pY1tpIC0gMV0sIGNvbXBUZW1wbGF0ZXMsIG91dHB1dClcbiAgICAgICAgb3V0cHV0LmJ1ZmZlciArPSBzdGF0aWNzW2ldXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYoc3RyZWFtICE9PSB1bmRlZmluZWQgJiYgKHJlbmRlcmVkW0RZTkFNSUNTXS5sZW5ndGggPiAwIHx8IGRlbGV0ZUlkcy5sZW5ndGggPiAwIHx8IHJlc2V0KSl7XG4gICAgICBkZWxldGUgcmVuZGVyZWRbU1RSRUFNXVxuICAgICAgcmVuZGVyZWRbRFlOQU1JQ1NdID0gW11cbiAgICAgIG91dHB1dC5zdHJlYW1zLmFkZChzdHJlYW0pXG4gICAgfVxuICB9XG5cbiAgZHluYW1pY1RvQnVmZmVyKHJlbmRlcmVkLCB0ZW1wbGF0ZXMsIG91dHB1dCl7XG4gICAgaWYodHlwZW9mIChyZW5kZXJlZCkgPT09IFwibnVtYmVyXCIpe1xuICAgICAgbGV0IFtzdHIsIHN0cmVhbXNdID0gdGhpcy5yZWN1cnNpdmVDSURUb1N0cmluZyhvdXRwdXQuY29tcG9uZW50cywgcmVuZGVyZWQsIG91dHB1dC5vbmx5Q2lkcylcbiAgICAgIG91dHB1dC5idWZmZXIgKz0gc3RyXG4gICAgICBvdXRwdXQuc3RyZWFtcyA9IG5ldyBTZXQoWy4uLm91dHB1dC5zdHJlYW1zLCAuLi5zdHJlYW1zXSlcbiAgICB9IGVsc2UgaWYoaXNPYmplY3QocmVuZGVyZWQpKXtcbiAgICAgIHRoaXMudG9PdXRwdXRCdWZmZXIocmVuZGVyZWQsIHRlbXBsYXRlcywgb3V0cHV0KVxuICAgIH0gZWxzZSB7XG4gICAgICBvdXRwdXQuYnVmZmVyICs9IHJlbmRlcmVkXG4gICAgfVxuICB9XG5cbiAgcmVjdXJzaXZlQ0lEVG9TdHJpbmcoY29tcG9uZW50cywgY2lkLCBvbmx5Q2lkcywgYWxsb3dSb290Q29tbWVudHMgPSB0cnVlKXtcbiAgICBsZXQgY29tcG9uZW50ID0gY29tcG9uZW50c1tjaWRdIHx8IGxvZ0Vycm9yKGBubyBjb21wb25lbnQgZm9yIENJRCAke2NpZH1gLCBjb21wb25lbnRzKVxuICAgIGxldCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKVxuICAgIGxldCBbaHRtbCwgc3RyZWFtc10gPSB0aGlzLnJlY3Vyc2l2ZVRvU3RyaW5nKGNvbXBvbmVudCwgY29tcG9uZW50cywgb25seUNpZHMpXG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuICAgIGxldCBjb250YWluZXIgPSB0ZW1wbGF0ZS5jb250ZW50XG4gICAgbGV0IHNraXAgPSBvbmx5Q2lkcyAmJiAhb25seUNpZHMuaGFzKGNpZClcblxuICAgIGxldCBbaGFzQ2hpbGROb2RlcywgaGFzQ2hpbGRDb21wb25lbnRzXSA9XG4gICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZE5vZGVzKS5yZWR1Y2UoKFtoYXNOb2RlcywgaGFzQ29tcG9uZW50c10sIGNoaWxkLCBpKSA9PiB7XG4gICAgICAgIGlmKGNoaWxkLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSl7XG4gICAgICAgICAgaWYoY2hpbGQuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpKXtcbiAgICAgICAgICAgIHJldHVybiBbaGFzTm9kZXMsIHRydWVdXG4gICAgICAgICAgfVxuICAgICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5ULCBjaWQpXG4gICAgICAgICAgaWYoIWNoaWxkLmlkKXsgY2hpbGQuaWQgPSBgJHt0aGlzLnBhcmVudFZpZXdJZCgpfS0ke2NpZH0tJHtpfWAgfVxuICAgICAgICAgIGlmKHNraXApe1xuICAgICAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKFBIWF9TS0lQLCBcIlwiKVxuICAgICAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gXCJcIlxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gW3RydWUsIGhhc0NvbXBvbmVudHNdXG4gICAgICAgIH0gZWxzZSBpZihjaGlsZC5ub2RlVHlwZSA9PT0gTm9kZS5DT01NRU5UX05PREUpe1xuICAgICAgICAgIC8vIHdlIGhhdmUgdG8gc3RyaXAgcm9vdCBjb21tZW50cyB3aGVuIHJlbmRlcmluZyBhIGNvbXBvbmVudCBkaXJlY3RseVxuICAgICAgICAgIC8vIGZvciBwYXRjaGluZyBiZWNhdXNlIHRoZSBtb3JwaGRvbSB0YXJnZXQgbXVzdCBiZSBleGFjdGx5IHRoZSByb290IGVudHJ5cG9pbnRcbiAgICAgICAgICBpZighYWxsb3dSb290Q29tbWVudHMpeyBjaGlsZC5yZW1vdmUoKSB9XG4gICAgICAgICAgcmV0dXJuIFtoYXNOb2RlcywgaGFzQ29tcG9uZW50c11cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZihjaGlsZC5ub2RlVmFsdWUudHJpbSgpICE9PSBcIlwiKXtcbiAgICAgICAgICAgIGxvZ0Vycm9yKFwib25seSBIVE1MIGVsZW1lbnQgdGFncyBhcmUgYWxsb3dlZCBhdCB0aGUgcm9vdCBvZiBjb21wb25lbnRzLlxcblxcblwiICtcbiAgICAgICAgICAgICAgYGdvdDogXCIke2NoaWxkLm5vZGVWYWx1ZS50cmltKCl9XCJcXG5cXG5gICtcbiAgICAgICAgICAgICAgXCJ3aXRoaW46XFxuXCIsIHRlbXBsYXRlLmlubmVySFRNTC50cmltKCkpXG4gICAgICAgICAgICBjaGlsZC5yZXBsYWNlV2l0aCh0aGlzLmNyZWF0ZVNwYW4oY2hpbGQubm9kZVZhbHVlLCBjaWQpKVxuICAgICAgICAgICAgcmV0dXJuIFt0cnVlLCBoYXNDb21wb25lbnRzXVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGlsZC5yZW1vdmUoKVxuICAgICAgICAgICAgcmV0dXJuIFtoYXNOb2RlcywgaGFzQ29tcG9uZW50c11cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIFtmYWxzZSwgZmFsc2VdKVxuXG4gICAgaWYoIWhhc0NoaWxkTm9kZXMgJiYgIWhhc0NoaWxkQ29tcG9uZW50cyl7XG4gICAgICBsb2dFcnJvcihcImV4cGVjdGVkIGF0IGxlYXN0IG9uZSBIVE1MIGVsZW1lbnQgdGFnIGluc2lkZSBhIGNvbXBvbmVudCwgYnV0IHRoZSBjb21wb25lbnQgaXMgZW1wdHk6XFxuXCIsXG4gICAgICAgIHRlbXBsYXRlLmlubmVySFRNTC50cmltKCkpXG4gICAgICByZXR1cm4gW3RoaXMuY3JlYXRlU3BhbihcIlwiLCBjaWQpLm91dGVySFRNTCwgc3RyZWFtc11cbiAgICB9IGVsc2UgaWYoIWhhc0NoaWxkTm9kZXMgJiYgaGFzQ2hpbGRDb21wb25lbnRzKXtcbiAgICAgIGxvZ0Vycm9yKFwiZXhwZWN0ZWQgYXQgbGVhc3Qgb25lIEhUTUwgZWxlbWVudCB0YWcgZGlyZWN0bHkgaW5zaWRlIGEgY29tcG9uZW50LCBidXQgb25seSBzdWJjb21wb25lbnRzIHdlcmUgZm91bmQuIEEgY29tcG9uZW50IG11c3QgcmVuZGVyIGF0IGxlYXN0IG9uZSBIVE1MIHRhZyBkaXJlY3RseSBpbnNpZGUgaXRzZWxmLlwiLFxuICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwudHJpbSgpKVxuICAgICAgcmV0dXJuIFt0ZW1wbGF0ZS5pbm5lckhUTUwsIHN0cmVhbXNdXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbdGVtcGxhdGUuaW5uZXJIVE1MLCBzdHJlYW1zXVxuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZVNwYW4odGV4dCwgY2lkKXtcbiAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpXG4gICAgc3Bhbi5pbm5lclRleHQgPSB0ZXh0XG4gICAgc3Bhbi5zZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVCwgY2lkKVxuICAgIHJldHVybiBzcGFuXG4gIH1cbn0iLCAibGV0IHZpZXdIb29rSUQgPSAxXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3SG9vayB7XG4gIHN0YXRpYyBtYWtlSUQoKXsgcmV0dXJuIHZpZXdIb29rSUQrKyB9XG4gIHN0YXRpYyBlbGVtZW50SUQoZWwpeyByZXR1cm4gZWwucGh4SG9va0lkIH1cblxuICBjb25zdHJ1Y3Rvcih2aWV3LCBlbCwgY2FsbGJhY2tzKXtcbiAgICB0aGlzLl9fdmlldyA9IHZpZXdcbiAgICB0aGlzLmxpdmVTb2NrZXQgPSB2aWV3LmxpdmVTb2NrZXRcbiAgICB0aGlzLl9fY2FsbGJhY2tzID0gY2FsbGJhY2tzXG4gICAgdGhpcy5fX2xpc3RlbmVycyA9IG5ldyBTZXQoKVxuICAgIHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCA9IGZhbHNlXG4gICAgdGhpcy5lbCA9IGVsXG4gICAgdGhpcy5lbC5waHhIb29rSWQgPSB0aGlzLmNvbnN0cnVjdG9yLm1ha2VJRCgpXG4gICAgZm9yKGxldCBrZXkgaW4gdGhpcy5fX2NhbGxiYWNrcyl7IHRoaXNba2V5XSA9IHRoaXMuX19jYWxsYmFja3Nba2V5XSB9XG4gIH1cblxuICBfX21vdW50ZWQoKXsgdGhpcy5tb3VudGVkICYmIHRoaXMubW91bnRlZCgpIH1cbiAgX191cGRhdGVkKCl7IHRoaXMudXBkYXRlZCAmJiB0aGlzLnVwZGF0ZWQoKSB9XG4gIF9fYmVmb3JlVXBkYXRlKCl7IHRoaXMuYmVmb3JlVXBkYXRlICYmIHRoaXMuYmVmb3JlVXBkYXRlKCkgfVxuICBfX2Rlc3Ryb3llZCgpeyB0aGlzLmRlc3Ryb3llZCAmJiB0aGlzLmRlc3Ryb3llZCgpIH1cbiAgX19yZWNvbm5lY3RlZCgpe1xuICAgIGlmKHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCl7XG4gICAgICB0aGlzLl9faXNEaXNjb25uZWN0ZWQgPSBmYWxzZVxuICAgICAgdGhpcy5yZWNvbm5lY3RlZCAmJiB0aGlzLnJlY29ubmVjdGVkKClcbiAgICB9XG4gIH1cbiAgX19kaXNjb25uZWN0ZWQoKXtcbiAgICB0aGlzLl9faXNEaXNjb25uZWN0ZWQgPSB0cnVlXG4gICAgdGhpcy5kaXNjb25uZWN0ZWQgJiYgdGhpcy5kaXNjb25uZWN0ZWQoKVxuICB9XG5cbiAgcHVzaEV2ZW50KGV2ZW50LCBwYXlsb2FkID0ge30sIG9uUmVwbHkgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LnB1c2hIb29rRXZlbnQodGhpcy5lbCwgbnVsbCwgZXZlbnQsIHBheWxvYWQsIG9uUmVwbHkpXG4gIH1cblxuICBwdXNoRXZlbnRUbyhwaHhUYXJnZXQsIGV2ZW50LCBwYXlsb2FkID0ge30sIG9uUmVwbHkgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LndpdGhpblRhcmdldHMocGh4VGFyZ2V0LCAodmlldywgdGFyZ2V0Q3R4KSA9PiB7XG4gICAgICByZXR1cm4gdmlldy5wdXNoSG9va0V2ZW50KHRoaXMuZWwsIHRhcmdldEN0eCwgZXZlbnQsIHBheWxvYWQsIG9uUmVwbHkpXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZUV2ZW50KGV2ZW50LCBjYWxsYmFjayl7XG4gICAgbGV0IGNhbGxiYWNrUmVmID0gKGN1c3RvbUV2ZW50LCBieXBhc3MpID0+IGJ5cGFzcyA/IGV2ZW50IDogY2FsbGJhY2soY3VzdG9tRXZlbnQuZGV0YWlsKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGBwaHg6JHtldmVudH1gLCBjYWxsYmFja1JlZilcbiAgICB0aGlzLl9fbGlzdGVuZXJzLmFkZChjYWxsYmFja1JlZilcbiAgICByZXR1cm4gY2FsbGJhY2tSZWZcbiAgfVxuXG4gIHJlbW92ZUhhbmRsZUV2ZW50KGNhbGxiYWNrUmVmKXtcbiAgICBsZXQgZXZlbnQgPSBjYWxsYmFja1JlZihudWxsLCB0cnVlKVxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGBwaHg6JHtldmVudH1gLCBjYWxsYmFja1JlZilcbiAgICB0aGlzLl9fbGlzdGVuZXJzLmRlbGV0ZShjYWxsYmFja1JlZilcbiAgfVxuXG4gIHVwbG9hZChuYW1lLCBmaWxlcyl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LmRpc3BhdGNoVXBsb2FkcyhudWxsLCBuYW1lLCBmaWxlcylcbiAgfVxuXG4gIHVwbG9hZFRvKHBoeFRhcmdldCwgbmFtZSwgZmlsZXMpe1xuICAgIHJldHVybiB0aGlzLl9fdmlldy53aXRoaW5UYXJnZXRzKHBoeFRhcmdldCwgKHZpZXcsIHRhcmdldEN0eCkgPT4ge1xuICAgICAgdmlldy5kaXNwYXRjaFVwbG9hZHModGFyZ2V0Q3R4LCBuYW1lLCBmaWxlcylcbiAgICB9KVxuICB9XG5cbiAgX19jbGVhbnVwX18oKXtcbiAgICB0aGlzLl9fbGlzdGVuZXJzLmZvckVhY2goY2FsbGJhY2tSZWYgPT4gdGhpcy5yZW1vdmVIYW5kbGVFdmVudChjYWxsYmFja1JlZikpXG4gIH1cbn1cbiIsICJpbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5pbXBvcnQgQVJJQSBmcm9tIFwiLi9hcmlhXCJcblxubGV0IGZvY3VzU3RhY2sgPSBudWxsXG5cbmxldCBKUyA9IHtcbiAgZXhlYyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZGVmYXVsdHMpe1xuICAgIGxldCBbZGVmYXVsdEtpbmQsIGRlZmF1bHRBcmdzXSA9IGRlZmF1bHRzIHx8IFtudWxsLCB7Y2FsbGJhY2s6IGRlZmF1bHRzICYmIGRlZmF1bHRzLmNhbGxiYWNrfV1cbiAgICBsZXQgY29tbWFuZHMgPSBwaHhFdmVudC5jaGFyQXQoMCkgPT09IFwiW1wiID9cbiAgICAgIEpTT04ucGFyc2UocGh4RXZlbnQpIDogW1tkZWZhdWx0S2luZCwgZGVmYXVsdEFyZ3NdXVxuXG5cblxuICAgIGNvbW1hbmRzLmZvckVhY2goKFtraW5kLCBhcmdzXSkgPT4ge1xuICAgICAgaWYoa2luZCA9PT0gZGVmYXVsdEtpbmQgJiYgZGVmYXVsdEFyZ3MuZGF0YSl7XG4gICAgICAgIGFyZ3MuZGF0YSA9IE9iamVjdC5hc3NpZ24oYXJncy5kYXRhIHx8IHt9LCBkZWZhdWx0QXJncy5kYXRhKVxuICAgICAgICBhcmdzLmNhbGxiYWNrID0gYXJncy5jYWxsYmFjayB8fCBkZWZhdWx0QXJncy5jYWxsYmFja1xuICAgICAgfVxuICAgICAgdGhpcy5maWx0ZXJUb0Vscyhzb3VyY2VFbCwgYXJncykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgIHRoaXNbYGV4ZWNfJHtraW5kfWBdKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwgYXJncylcbiAgICAgIH0pXG4gICAgfSlcbiAgfSxcblxuICBpc1Zpc2libGUoZWwpe1xuICAgIHJldHVybiAhIShlbC5vZmZzZXRXaWR0aCB8fCBlbC5vZmZzZXRIZWlnaHQgfHwgZWwuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggPiAwKVxuICB9LFxuXG4gIC8vIHByaXZhdGVcblxuICAvLyBjb21tYW5kc1xuXG4gIGV4ZWNfZXhlYyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIFthdHRyLCB0b10pe1xuICAgIGxldCBub2RlcyA9IHRvID8gRE9NLmFsbChkb2N1bWVudCwgdG8pIDogW3NvdXJjZUVsXVxuICAgIG5vZGVzLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICBsZXQgZW5jb2RlZEpTID0gbm9kZS5nZXRBdHRyaWJ1dGUoYXR0cilcbiAgICAgIGlmKCFlbmNvZGVkSlMpeyB0aHJvdyBuZXcgRXJyb3IoYGV4cGVjdGVkICR7YXR0cn0gdG8gY29udGFpbiBKUyBjb21tYW5kIG9uIFwiJHt0b31cImApIH1cbiAgICAgIHZpZXcubGl2ZVNvY2tldC5leGVjSlMobm9kZSwgZW5jb2RlZEpTLCBldmVudFR5cGUpXG4gICAgfSlcbiAgfSxcblxuICBleGVjX2Rpc3BhdGNoKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge3RvLCBldmVudCwgZGV0YWlsLCBidWJibGVzfSl7XG4gICAgZGV0YWlsID0gZGV0YWlsIHx8IHt9XG4gICAgZGV0YWlsLmRpc3BhdGNoZXIgPSBzb3VyY2VFbFxuICAgIERPTS5kaXNwYXRjaEV2ZW50KGVsLCBldmVudCwge2RldGFpbCwgYnViYmxlc30pXG4gIH0sXG5cbiAgZXhlY19wdXNoKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwgYXJncyl7XG4gICAgaWYoIXZpZXcuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG5cbiAgICBsZXQge2V2ZW50LCBkYXRhLCB0YXJnZXQsIHBhZ2VfbG9hZGluZywgbG9hZGluZywgdmFsdWUsIGRpc3BhdGNoZXIsIGNhbGxiYWNrfSA9IGFyZ3NcbiAgICBsZXQgcHVzaE9wdHMgPSB7bG9hZGluZywgdmFsdWUsIHRhcmdldCwgcGFnZV9sb2FkaW5nOiAhIXBhZ2VfbG9hZGluZ31cbiAgICBsZXQgdGFyZ2V0U3JjID0gZXZlbnRUeXBlID09PSBcImNoYW5nZVwiICYmIGRpc3BhdGNoZXIgPyBkaXNwYXRjaGVyIDogc291cmNlRWxcbiAgICBsZXQgcGh4VGFyZ2V0ID0gdGFyZ2V0IHx8IHRhcmdldFNyYy5nZXRBdHRyaWJ1dGUodmlldy5iaW5kaW5nKFwidGFyZ2V0XCIpKSB8fCB0YXJnZXRTcmNcbiAgICB2aWV3LndpdGhpblRhcmdldHMocGh4VGFyZ2V0LCAodGFyZ2V0VmlldywgdGFyZ2V0Q3R4KSA9PiB7XG4gICAgICBpZihldmVudFR5cGUgPT09IFwiY2hhbmdlXCIpe1xuICAgICAgICBsZXQge25ld0NpZCwgX3RhcmdldH0gPSBhcmdzXG4gICAgICAgIF90YXJnZXQgPSBfdGFyZ2V0IHx8IChET00uaXNGb3JtSW5wdXQoc291cmNlRWwpID8gc291cmNlRWwubmFtZSA6IHVuZGVmaW5lZClcbiAgICAgICAgaWYoX3RhcmdldCl7IHB1c2hPcHRzLl90YXJnZXQgPSBfdGFyZ2V0IH1cbiAgICAgICAgdGFyZ2V0Vmlldy5wdXNoSW5wdXQoc291cmNlRWwsIHRhcmdldEN0eCwgbmV3Q2lkLCBldmVudCB8fCBwaHhFdmVudCwgcHVzaE9wdHMsIGNhbGxiYWNrKVxuICAgICAgfSBlbHNlIGlmKGV2ZW50VHlwZSA9PT0gXCJzdWJtaXRcIil7XG4gICAgICAgIGxldCB7c3VibWl0dGVyfSA9IGFyZ3NcbiAgICAgICAgdGFyZ2V0Vmlldy5zdWJtaXRGb3JtKHNvdXJjZUVsLCB0YXJnZXRDdHgsIGV2ZW50IHx8IHBoeEV2ZW50LCBzdWJtaXR0ZXIsIHB1c2hPcHRzLCBjYWxsYmFjaylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFZpZXcucHVzaEV2ZW50KGV2ZW50VHlwZSwgc291cmNlRWwsIHRhcmdldEN0eCwgZXZlbnQgfHwgcGh4RXZlbnQsIGRhdGEsIHB1c2hPcHRzLCBjYWxsYmFjaylcbiAgICAgIH1cbiAgICB9KVxuICB9LFxuXG4gIGV4ZWNfbmF2aWdhdGUoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7aHJlZiwgcmVwbGFjZX0pe1xuICAgIHZpZXcubGl2ZVNvY2tldC5oaXN0b3J5UmVkaXJlY3QoaHJlZiwgcmVwbGFjZSA/IFwicmVwbGFjZVwiIDogXCJwdXNoXCIpXG4gIH0sXG5cbiAgZXhlY19wYXRjaChldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtocmVmLCByZXBsYWNlfSl7XG4gICAgdmlldy5saXZlU29ja2V0LnB1c2hIaXN0b3J5UGF0Y2goaHJlZiwgcmVwbGFjZSA/IFwicmVwbGFjZVwiIDogXCJwdXNoXCIsIHNvdXJjZUVsKVxuICB9LFxuXG4gIGV4ZWNfZm9jdXMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsKXtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IEFSSUEuYXR0ZW1wdEZvY3VzKGVsKSlcbiAgfSxcblxuICBleGVjX2ZvY3VzX2ZpcnN0KGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBBUklBLmZvY3VzRmlyc3RJbnRlcmFjdGl2ZShlbCkgfHwgQVJJQS5mb2N1c0ZpcnN0KGVsKSlcbiAgfSxcblxuICBleGVjX3B1c2hfZm9jdXMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsKXtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IGZvY3VzU3RhY2sgPSBlbCB8fCBzb3VyY2VFbClcbiAgfSxcblxuICBleGVjX3BvcF9mb2N1cyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwpe1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgaWYoZm9jdXNTdGFjayl7IGZvY3VzU3RhY2suZm9jdXMoKSB9XG4gICAgICBmb2N1c1N0YWNrID0gbnVsbFxuICAgIH0pXG4gIH0sXG5cbiAgZXhlY19hZGRfY2xhc3MoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7bmFtZXMsIHRyYW5zaXRpb24sIHRpbWV9KXtcbiAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgbmFtZXMsIFtdLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KVxuICB9LFxuXG4gIGV4ZWNfcmVtb3ZlX2NsYXNzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge25hbWVzLCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIFtdLCBuYW1lcywgdHJhbnNpdGlvbiwgdGltZSwgdmlldylcbiAgfSxcblxuICBleGVjX3RyYW5zaXRpb24oZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7dGltZSwgdHJhbnNpdGlvbn0pe1xuICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBbXSwgW10sIHRyYW5zaXRpb24sIHRpbWUsIHZpZXcpXG4gIH0sXG5cbiAgZXhlY190b2dnbGUoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7ZGlzcGxheSwgaW5zLCBvdXRzLCB0aW1lfSl7XG4gICAgdGhpcy50b2dnbGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgaW5zLCBvdXRzLCB0aW1lKVxuICB9LFxuXG4gIGV4ZWNfc2hvdyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5zaG93KGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIHRpbWUpXG4gIH0sXG5cbiAgZXhlY19oaWRlKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2Rpc3BsYXksIHRyYW5zaXRpb24sIHRpbWV9KXtcbiAgICB0aGlzLmhpZGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZSlcbiAgfSxcblxuICBleGVjX3NldF9hdHRyKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2F0dHI6IFthdHRyLCB2YWxdfSl7XG4gICAgdGhpcy5zZXRPclJlbW92ZUF0dHJzKGVsLCBbW2F0dHIsIHZhbF1dLCBbXSlcbiAgfSxcblxuICBleGVjX3JlbW92ZV9hdHRyKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2F0dHJ9KXtcbiAgICB0aGlzLnNldE9yUmVtb3ZlQXR0cnMoZWwsIFtdLCBbYXR0cl0pXG4gIH0sXG5cbiAgLy8gdXRpbHMgZm9yIGNvbW1hbmRzXG5cbiAgc2hvdyhldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lKXtcbiAgICBpZighdGhpcy5pc1Zpc2libGUoZWwpKXtcbiAgICAgIHRoaXMudG9nZ2xlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIG51bGwsIHRpbWUpXG4gICAgfVxuICB9LFxuXG4gIGhpZGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZSl7XG4gICAgaWYodGhpcy5pc1Zpc2libGUoZWwpKXtcbiAgICAgIHRoaXMudG9nZ2xlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIG51bGwsIHRyYW5zaXRpb24sIHRpbWUpXG4gICAgfVxuICB9LFxuXG4gIHRvZ2dsZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCBpbnMsIG91dHMsIHRpbWUpe1xuICAgIGxldCBbaW5DbGFzc2VzLCBpblN0YXJ0Q2xhc3NlcywgaW5FbmRDbGFzc2VzXSA9IGlucyB8fCBbW10sIFtdLCBbXV1cbiAgICBsZXQgW291dENsYXNzZXMsIG91dFN0YXJ0Q2xhc3Nlcywgb3V0RW5kQ2xhc3Nlc10gPSBvdXRzIHx8IFtbXSwgW10sIFtdXVxuICAgIGlmKGluQ2xhc3Nlcy5sZW5ndGggPiAwIHx8IG91dENsYXNzZXMubGVuZ3RoID4gMCl7XG4gICAgICBpZih0aGlzLmlzVmlzaWJsZShlbCkpe1xuICAgICAgICBsZXQgb25TdGFydCA9ICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgb3V0U3RhcnRDbGFzc2VzLCBpbkNsYXNzZXMuY29uY2F0KGluU3RhcnRDbGFzc2VzKS5jb25jYXQoaW5FbmRDbGFzc2VzKSlcbiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBvdXRDbGFzc2VzLCBbXSlcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIG91dEVuZENsYXNzZXMsIG91dFN0YXJ0Q2xhc3NlcykpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpoaWRlLXN0YXJ0XCIpKVxuICAgICAgICB2aWV3LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBbXSwgb3V0Q2xhc3Nlcy5jb25jYXQob3V0RW5kQ2xhc3NlcykpXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJ0b2dnbGVcIiwgY3VycmVudEVsID0+IGN1cnJlbnRFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCIpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6aGlkZS1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZihldmVudFR5cGUgPT09IFwicmVtb3ZlXCIpeyByZXR1cm4gfVxuICAgICAgICBsZXQgb25TdGFydCA9ICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgaW5TdGFydENsYXNzZXMsIG91dENsYXNzZXMuY29uY2F0KG91dFN0YXJ0Q2xhc3NlcykuY29uY2F0KG91dEVuZENsYXNzZXMpKVxuICAgICAgICAgIGxldCBzdGlja3lEaXNwbGF5ID0gZGlzcGxheSB8fCB0aGlzLmRlZmF1bHREaXNwbGF5KGVsKVxuICAgICAgICAgIERPTS5wdXRTdGlja3koZWwsIFwidG9nZ2xlXCIsIGN1cnJlbnRFbCA9PiBjdXJyZW50RWwuc3R5bGUuZGlzcGxheSA9IHN0aWNreURpc3BsYXkpXG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgaW5DbGFzc2VzLCBbXSlcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGluRW5kQ2xhc3NlcywgaW5TdGFydENsYXNzZXMpKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6c2hvdy1zdGFydFwiKSlcbiAgICAgICAgdmlldy50cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIGluQ2xhc3Nlcy5jb25jYXQoaW5FbmRDbGFzc2VzKSlcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpzaG93LWVuZFwiKSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYodGhpcy5pc1Zpc2libGUoZWwpKXtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6aGlkZS1zdGFydFwiKSlcbiAgICAgICAgICBET00ucHV0U3RpY2t5KGVsLCBcInRvZ2dsZVwiLCBjdXJyZW50RWwgPT4gY3VycmVudEVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIilcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpoaWRlLWVuZFwiKSlcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OnNob3ctc3RhcnRcIikpXG4gICAgICAgICAgbGV0IHN0aWNreURpc3BsYXkgPSBkaXNwbGF5IHx8IHRoaXMuZGVmYXVsdERpc3BsYXkoZWwpXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJ0b2dnbGVcIiwgY3VycmVudEVsID0+IGN1cnJlbnRFbC5zdHlsZS5kaXNwbGF5ID0gc3RpY2t5RGlzcGxheSlcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpzaG93LWVuZFwiKSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBhZGRzLCByZW1vdmVzLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KXtcbiAgICBsZXQgW3RyYW5zaXRpb25SdW4sIHRyYW5zaXRpb25TdGFydCwgdHJhbnNpdGlvbkVuZF0gPSB0cmFuc2l0aW9uIHx8IFtbXSwgW10sIFtdXVxuICAgIGlmKHRyYW5zaXRpb25SdW4ubGVuZ3RoID4gMCl7XG4gICAgICBsZXQgb25TdGFydCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIHRyYW5zaXRpb25TdGFydCwgW10uY29uY2F0KHRyYW5zaXRpb25SdW4pLmNvbmNhdCh0cmFuc2l0aW9uRW5kKSlcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIHRyYW5zaXRpb25SdW4sIFtdKVxuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIHRyYW5zaXRpb25FbmQsIHRyYW5zaXRpb25TdGFydCkpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBsZXQgb25Eb25lID0gKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGFkZHMuY29uY2F0KHRyYW5zaXRpb25FbmQpLCByZW1vdmVzLmNvbmNhdCh0cmFuc2l0aW9uUnVuKS5jb25jYXQodHJhbnNpdGlvblN0YXJ0KSlcbiAgICAgIHJldHVybiB2aWV3LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKVxuICAgIH1cblxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgbGV0IFtwcmV2QWRkcywgcHJldlJlbW92ZXNdID0gRE9NLmdldFN0aWNreShlbCwgXCJjbGFzc2VzXCIsIFtbXSwgW11dKVxuICAgICAgbGV0IGtlZXBBZGRzID0gYWRkcy5maWx0ZXIobmFtZSA9PiBwcmV2QWRkcy5pbmRleE9mKG5hbWUpIDwgMCAmJiAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKG5hbWUpKVxuICAgICAgbGV0IGtlZXBSZW1vdmVzID0gcmVtb3Zlcy5maWx0ZXIobmFtZSA9PiBwcmV2UmVtb3Zlcy5pbmRleE9mKG5hbWUpIDwgMCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMobmFtZSkpXG4gICAgICBsZXQgbmV3QWRkcyA9IHByZXZBZGRzLmZpbHRlcihuYW1lID0+IHJlbW92ZXMuaW5kZXhPZihuYW1lKSA8IDApLmNvbmNhdChrZWVwQWRkcylcbiAgICAgIGxldCBuZXdSZW1vdmVzID0gcHJldlJlbW92ZXMuZmlsdGVyKG5hbWUgPT4gYWRkcy5pbmRleE9mKG5hbWUpIDwgMCkuY29uY2F0KGtlZXBSZW1vdmVzKVxuXG4gICAgICBET00ucHV0U3RpY2t5KGVsLCBcImNsYXNzZXNcIiwgY3VycmVudEVsID0+IHtcbiAgICAgICAgY3VycmVudEVsLmNsYXNzTGlzdC5yZW1vdmUoLi4ubmV3UmVtb3ZlcylcbiAgICAgICAgY3VycmVudEVsLmNsYXNzTGlzdC5hZGQoLi4ubmV3QWRkcylcbiAgICAgICAgcmV0dXJuIFtuZXdBZGRzLCBuZXdSZW1vdmVzXVxuICAgICAgfSlcbiAgICB9KVxuICB9LFxuXG4gIHNldE9yUmVtb3ZlQXR0cnMoZWwsIHNldHMsIHJlbW92ZXMpe1xuICAgIGxldCBbcHJldlNldHMsIHByZXZSZW1vdmVzXSA9IERPTS5nZXRTdGlja3koZWwsIFwiYXR0cnNcIiwgW1tdLCBbXV0pXG5cbiAgICBsZXQgYWx0ZXJlZEF0dHJzID0gc2V0cy5tYXAoKFthdHRyLCBfdmFsXSkgPT4gYXR0cikuY29uY2F0KHJlbW92ZXMpO1xuICAgIGxldCBuZXdTZXRzID0gcHJldlNldHMuZmlsdGVyKChbYXR0ciwgX3ZhbF0pID0+ICFhbHRlcmVkQXR0cnMuaW5jbHVkZXMoYXR0cikpLmNvbmNhdChzZXRzKTtcbiAgICBsZXQgbmV3UmVtb3ZlcyA9IHByZXZSZW1vdmVzLmZpbHRlcigoYXR0cikgPT4gIWFsdGVyZWRBdHRycy5pbmNsdWRlcyhhdHRyKSkuY29uY2F0KHJlbW92ZXMpO1xuXG4gICAgRE9NLnB1dFN0aWNreShlbCwgXCJhdHRyc1wiLCBjdXJyZW50RWwgPT4ge1xuICAgICAgbmV3UmVtb3Zlcy5mb3JFYWNoKGF0dHIgPT4gY3VycmVudEVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKSlcbiAgICAgIG5ld1NldHMuZm9yRWFjaCgoW2F0dHIsIHZhbF0pID0+IGN1cnJlbnRFbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsKSlcbiAgICAgIHJldHVybiBbbmV3U2V0cywgbmV3UmVtb3Zlc11cbiAgICB9KVxuICB9LFxuXG4gIGhhc0FsbENsYXNzZXMoZWwsIGNsYXNzZXMpeyByZXR1cm4gY2xhc3Nlcy5ldmVyeShuYW1lID0+IGVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKSkgfSxcblxuICBpc1RvZ2dsZWRPdXQoZWwsIG91dENsYXNzZXMpe1xuICAgIHJldHVybiAhdGhpcy5pc1Zpc2libGUoZWwpIHx8IHRoaXMuaGFzQWxsQ2xhc3NlcyhlbCwgb3V0Q2xhc3NlcylcbiAgfSxcblxuICBmaWx0ZXJUb0Vscyhzb3VyY2VFbCwge3RvfSl7XG4gICAgcmV0dXJuIHRvID8gRE9NLmFsbChkb2N1bWVudCwgdG8pIDogW3NvdXJjZUVsXVxuICB9LFxuXG4gIGRlZmF1bHREaXNwbGF5KGVsKXtcbiAgICByZXR1cm4ge3RyOiBcInRhYmxlLXJvd1wiLCB0ZDogXCJ0YWJsZS1jZWxsXCJ9W2VsLnRhZ05hbWUudG9Mb3dlckNhc2UoKV0gfHwgXCJibG9ja1wiXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSlMiLCAiaW1wb3J0IHtcbiAgQkVGT1JFX1VOTE9BRF9MT0FERVJfVElNRU9VVCxcbiAgQ0hFQ0tBQkxFX0lOUFVUUyxcbiAgQ09OU0VDVVRJVkVfUkVMT0FEUyxcbiAgUEhYX0FVVE9fUkVDT1ZFUixcbiAgUEhYX0NPTVBPTkVOVCxcbiAgUEhYX0NPTk5FQ1RFRF9DTEFTUyxcbiAgUEhYX0RJU0FCTEVfV0lUSCxcbiAgUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFLFxuICBQSFhfRElTQUJMRUQsXG4gIFBIWF9MT0FESU5HX0NMQVNTLFxuICBQSFhfRVZFTlRfQ0xBU1NFUyxcbiAgUEhYX0VSUk9SX0NMQVNTLFxuICBQSFhfQ0xJRU5UX0VSUk9SX0NMQVNTLFxuICBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTLFxuICBQSFhfRkVFREJBQ0tfRk9SLFxuICBQSFhfSEFTX1NVQk1JVFRFRCxcbiAgUEhYX0hPT0ssXG4gIFBIWF9QQUdFX0xPQURJTkcsXG4gIFBIWF9QQVJFTlRfSUQsXG4gIFBIWF9QUk9HUkVTUyxcbiAgUEhYX1JFQURPTkxZLFxuICBQSFhfUkVGLFxuICBQSFhfUkVGX1NSQyxcbiAgUEhYX1JPT1RfSUQsXG4gIFBIWF9TRVNTSU9OLFxuICBQSFhfU1RBVElDLFxuICBQSFhfVFJBQ0tfU1RBVElDLFxuICBQSFhfVFJBQ0tfVVBMT0FEUyxcbiAgUEhYX1VQREFURSxcbiAgUEhYX1VQTE9BRF9SRUYsXG4gIFBIWF9WSUVXX1NFTEVDVE9SLFxuICBQSFhfTUFJTixcbiAgUEhYX01PVU5URUQsXG4gIFBVU0hfVElNRU9VVCxcbiAgUEhYX1ZJRVdQT1JUX1RPUCxcbiAgUEhYX1ZJRVdQT1JUX0JPVFRPTSxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2xvbmUsXG4gIGNsb3Nlc3RQaHhCaW5kaW5nLFxuICBpc0VtcHR5LFxuICBpc0VxdWFsT2JqLFxuICBsb2dFcnJvcixcbiAgbWF5YmUsXG4gIGlzQ2lkLFxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBCcm93c2VyIGZyb20gXCIuL2Jyb3dzZXJcIlxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuaW1wb3J0IERPTVBhdGNoIGZyb20gXCIuL2RvbV9wYXRjaFwiXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuaW1wb3J0IFJlbmRlcmVkIGZyb20gXCIuL3JlbmRlcmVkXCJcbmltcG9ydCBWaWV3SG9vayBmcm9tIFwiLi92aWV3X2hvb2tcIlxuaW1wb3J0IEpTIGZyb20gXCIuL2pzXCJcblxubGV0IHNlcmlhbGl6ZUZvcm0gPSAoZm9ybSwgbWV0YWRhdGEsIG9ubHlOYW1lcyA9IFtdKSA9PiB7XG4gIGxldCB7c3VibWl0dGVyLCAuLi5tZXRhfSA9IG1ldGFkYXRhXG5cbiAgLy8gVE9ETzogUmVwbGFjZSB3aXRoIGBuZXcgRm9ybURhdGEoZm9ybSwgc3VibWl0dGVyKWAgd2hlbiBzdXBwb3J0ZWQgYnkgbGF0ZXN0IGJyb3dzZXJzLFxuICAvLyAgICAgICBhbmQgbWVudGlvbiBgZm9ybWRhdGEtc3VibWl0dGVyLXBvbHlmaWxsYCBpbiB0aGUgZG9jcy5cbiAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pXG5cbiAgLy8gVE9ETzogUmVtb3ZlIHdoZW4gRm9ybURhdGEgY29uc3RydWN0b3Igc3VwcG9ydHMgdGhlIHN1Ym1pdHRlciBhcmd1bWVudC5cbiAgaWYoc3VibWl0dGVyICYmIHN1Ym1pdHRlci5oYXNBdHRyaWJ1dGUoXCJuYW1lXCIpICYmIHN1Ym1pdHRlci5mb3JtICYmIHN1Ym1pdHRlci5mb3JtID09PSBmb3JtKXtcbiAgICBmb3JtRGF0YS5hcHBlbmQoc3VibWl0dGVyLm5hbWUsIHN1Ym1pdHRlci52YWx1ZSlcbiAgfVxuXG4gIGxldCB0b1JlbW92ZSA9IFtdXG5cbiAgZm9ybURhdGEuZm9yRWFjaCgodmFsLCBrZXksIF9pbmRleCkgPT4ge1xuICAgIGlmKHZhbCBpbnN0YW5jZW9mIEZpbGUpeyB0b1JlbW92ZS5wdXNoKGtleSkgfVxuICB9KVxuXG4gIC8vIENsZWFudXAgYWZ0ZXIgYnVpbGRpbmcgZmlsZURhdGFcbiAgdG9SZW1vdmUuZm9yRWFjaChrZXkgPT4gZm9ybURhdGEuZGVsZXRlKGtleSkpXG5cbiAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKVxuICBmb3IobGV0IFtrZXksIHZhbF0gb2YgZm9ybURhdGEuZW50cmllcygpKXtcbiAgICBpZihvbmx5TmFtZXMubGVuZ3RoID09PSAwIHx8IG9ubHlOYW1lcy5pbmRleE9mKGtleSkgPj0gMCl7XG4gICAgICBwYXJhbXMuYXBwZW5kKGtleSwgdmFsKVxuICAgIH1cbiAgfVxuICBmb3IobGV0IG1ldGFLZXkgaW4gbWV0YSl7IHBhcmFtcy5hcHBlbmQobWV0YUtleSwgbWV0YVttZXRhS2V5XSkgfVxuXG4gIHJldHVybiBwYXJhbXMudG9TdHJpbmcoKVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3IHtcbiAgY29uc3RydWN0b3IoZWwsIGxpdmVTb2NrZXQsIHBhcmVudFZpZXcsIGZsYXNoLCBsaXZlUmVmZXJlcil7XG4gICAgdGhpcy5pc0RlYWQgPSBmYWxzZVxuICAgIHRoaXMubGl2ZVNvY2tldCA9IGxpdmVTb2NrZXRcbiAgICB0aGlzLmZsYXNoID0gZmxhc2hcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudFZpZXdcbiAgICB0aGlzLnJvb3QgPSBwYXJlbnRWaWV3ID8gcGFyZW50Vmlldy5yb290IDogdGhpc1xuICAgIHRoaXMuZWwgPSBlbFxuICAgIHRoaXMuaWQgPSB0aGlzLmVsLmlkXG4gICAgdGhpcy5yZWYgPSAwXG4gICAgdGhpcy5jaGlsZEpvaW5zID0gMFxuICAgIHRoaXMubG9hZGVyVGltZXIgPSBudWxsXG4gICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgIHRoaXMucHJ1bmluZ0NJRHMgPSBbXVxuICAgIHRoaXMucmVkaXJlY3QgPSBmYWxzZVxuICAgIHRoaXMuaHJlZiA9IG51bGxcbiAgICB0aGlzLmpvaW5Db3VudCA9IHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQuam9pbkNvdW50IC0gMSA6IDBcbiAgICB0aGlzLmpvaW5QZW5kaW5nID0gdHJ1ZVxuICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2VcbiAgICB0aGlzLmpvaW5DYWxsYmFjayA9IGZ1bmN0aW9uKG9uRG9uZSl7IG9uRG9uZSAmJiBvbkRvbmUoKSB9XG4gICAgdGhpcy5zdG9wQ2FsbGJhY2sgPSBmdW5jdGlvbigpeyB9XG4gICAgdGhpcy5wZW5kaW5nSm9pbk9wcyA9IHRoaXMucGFyZW50ID8gbnVsbCA6IFtdXG4gICAgdGhpcy52aWV3SG9va3MgPSB7fVxuICAgIHRoaXMudXBsb2FkZXJzID0ge31cbiAgICB0aGlzLmZvcm1TdWJtaXRzID0gW11cbiAgICB0aGlzLmNoaWxkcmVuID0gdGhpcy5wYXJlbnQgPyBudWxsIDoge31cbiAgICB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF0gPSB7fVxuICAgIHRoaXMuY2hhbm5lbCA9IHRoaXMubGl2ZVNvY2tldC5jaGFubmVsKGBsdjoke3RoaXMuaWR9YCwgKCkgPT4ge1xuICAgICAgbGV0IHVybCA9IHRoaXMuaHJlZiAmJiB0aGlzLmV4cGFuZFVSTCh0aGlzLmhyZWYpXG4gICAgICByZXR1cm4ge1xuICAgICAgICByZWRpcmVjdDogdGhpcy5yZWRpcmVjdCA/IHVybCA6IHVuZGVmaW5lZCxcbiAgICAgICAgdXJsOiB0aGlzLnJlZGlyZWN0ID8gdW5kZWZpbmVkIDogdXJsIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgcGFyYW1zOiB0aGlzLmNvbm5lY3RQYXJhbXMobGl2ZVJlZmVyZXIpLFxuICAgICAgICBzZXNzaW9uOiB0aGlzLmdldFNlc3Npb24oKSxcbiAgICAgICAgc3RhdGljOiB0aGlzLmdldFN0YXRpYygpLFxuICAgICAgICBmbGFzaDogdGhpcy5mbGFzaCxcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgc2V0SHJlZihocmVmKXsgdGhpcy5ocmVmID0gaHJlZiB9XG5cbiAgc2V0UmVkaXJlY3QoaHJlZil7XG4gICAgdGhpcy5yZWRpcmVjdCA9IHRydWVcbiAgICB0aGlzLmhyZWYgPSBocmVmXG4gIH1cblxuICBpc01haW4oKXsgcmV0dXJuIHRoaXMuZWwuaGFzQXR0cmlidXRlKFBIWF9NQUlOKSB9XG5cbiAgY29ubmVjdFBhcmFtcyhsaXZlUmVmZXJlcil7XG4gICAgbGV0IHBhcmFtcyA9IHRoaXMubGl2ZVNvY2tldC5wYXJhbXModGhpcy5lbClcbiAgICBsZXQgbWFuaWZlc3QgPVxuICAgICAgRE9NLmFsbChkb2N1bWVudCwgYFske3RoaXMuYmluZGluZyhQSFhfVFJBQ0tfU1RBVElDKX1dYClcbiAgICAgICAgLm1hcChub2RlID0+IG5vZGUuc3JjIHx8IG5vZGUuaHJlZikuZmlsdGVyKHVybCA9PiB0eXBlb2YgKHVybCkgPT09IFwic3RyaW5nXCIpXG5cbiAgICBpZihtYW5pZmVzdC5sZW5ndGggPiAwKXsgcGFyYW1zW1wiX3RyYWNrX3N0YXRpY1wiXSA9IG1hbmlmZXN0IH1cbiAgICBwYXJhbXNbXCJfbW91bnRzXCJdID0gdGhpcy5qb2luQ291bnRcbiAgICBwYXJhbXNbXCJfbGl2ZV9yZWZlcmVyXCJdID0gbGl2ZVJlZmVyZXJcblxuICAgIHJldHVybiBwYXJhbXNcbiAgfVxuXG4gIGlzQ29ubmVjdGVkKCl7IHJldHVybiB0aGlzLmNoYW5uZWwuY2FuUHVzaCgpIH1cblxuICBnZXRTZXNzaW9uKCl7IHJldHVybiB0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTikgfVxuXG4gIGdldFN0YXRpYygpe1xuICAgIGxldCB2YWwgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfU1RBVElDKVxuICAgIHJldHVybiB2YWwgPT09IFwiXCIgPyBudWxsIDogdmFsXG4gIH1cblxuICBkZXN0cm95KGNhbGxiYWNrID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIHRoaXMuZGVzdHJveUFsbENoaWxkcmVuKClcbiAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWVcbiAgICBkZWxldGUgdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdXG4gICAgaWYodGhpcy5wYXJlbnQpeyBkZWxldGUgdGhpcy5yb290LmNoaWxkcmVuW3RoaXMucGFyZW50LmlkXVt0aGlzLmlkXSB9XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMubG9hZGVyVGltZXIpXG4gICAgbGV0IG9uRmluaXNoZWQgPSAoKSA9PiB7XG4gICAgICBjYWxsYmFjaygpXG4gICAgICBmb3IobGV0IGlkIGluIHRoaXMudmlld0hvb2tzKXtcbiAgICAgICAgdGhpcy5kZXN0cm95SG9vayh0aGlzLnZpZXdIb29rc1tpZF0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgRE9NLm1hcmtQaHhDaGlsZERlc3Ryb3llZCh0aGlzLmVsKVxuXG4gICAgdGhpcy5sb2coXCJkZXN0cm95ZWRcIiwgKCkgPT4gW1widGhlIGNoaWxkIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgcGFyZW50XCJdKVxuICAgIHRoaXMuY2hhbm5lbC5sZWF2ZSgpXG4gICAgICAucmVjZWl2ZShcIm9rXCIsIG9uRmluaXNoZWQpXG4gICAgICAucmVjZWl2ZShcImVycm9yXCIsIG9uRmluaXNoZWQpXG4gICAgICAucmVjZWl2ZShcInRpbWVvdXRcIiwgb25GaW5pc2hlZClcbiAgfVxuXG4gIHNldENvbnRhaW5lckNsYXNzZXMoLi4uY2xhc3Nlcyl7XG4gICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKFxuICAgICAgUEhYX0NPTk5FQ1RFRF9DTEFTUyxcbiAgICAgIFBIWF9MT0FESU5HX0NMQVNTLFxuICAgICAgUEhYX0VSUk9SX0NMQVNTLFxuICAgICAgUEhYX0NMSUVOVF9FUlJPUl9DTEFTUyxcbiAgICAgIFBIWF9TRVJWRVJfRVJST1JfQ0xBU1NcbiAgICApXG4gICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKC4uLmNsYXNzZXMpXG4gIH1cblxuICBzaG93TG9hZGVyKHRpbWVvdXQpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVyKVxuICAgIGlmKHRpbWVvdXQpe1xuICAgICAgdGhpcy5sb2FkZXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zaG93TG9hZGVyKCksIHRpbWVvdXQpXG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcihsZXQgaWQgaW4gdGhpcy52aWV3SG9va3MpeyB0aGlzLnZpZXdIb29rc1tpZF0uX19kaXNjb25uZWN0ZWQoKSB9XG4gICAgICB0aGlzLnNldENvbnRhaW5lckNsYXNzZXMoUEhYX0xPQURJTkdfQ0xBU1MpXG4gICAgfVxuICB9XG5cbiAgZXhlY0FsbChiaW5kaW5nKXtcbiAgICBET00uYWxsKHRoaXMuZWwsIGBbJHtiaW5kaW5nfV1gLCBlbCA9PiB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTKGVsLCBlbC5nZXRBdHRyaWJ1dGUoYmluZGluZykpKVxuICB9XG5cbiAgaGlkZUxvYWRlcigpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVyKVxuICAgIHRoaXMuc2V0Q29udGFpbmVyQ2xhc3NlcyhQSFhfQ09OTkVDVEVEX0NMQVNTKVxuICAgIHRoaXMuZXhlY0FsbCh0aGlzLmJpbmRpbmcoXCJjb25uZWN0ZWRcIikpXG4gIH1cblxuICB0cmlnZ2VyUmVjb25uZWN0ZWQoKXtcbiAgICBmb3IobGV0IGlkIGluIHRoaXMudmlld0hvb2tzKXsgdGhpcy52aWV3SG9va3NbaWRdLl9fcmVjb25uZWN0ZWQoKSB9XG4gIH1cblxuICBsb2coa2luZCwgbXNnQ2FsbGJhY2spe1xuICAgIHRoaXMubGl2ZVNvY2tldC5sb2codGhpcywga2luZCwgbXNnQ2FsbGJhY2spXG4gIH1cblxuICB0cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSA9IGZ1bmN0aW9uKCl7fSl7XG4gICAgdGhpcy5saXZlU29ja2V0LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKVxuICB9XG5cbiAgd2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsIGNhbGxiYWNrKXtcbiAgICBpZihwaHhUYXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBwaHhUYXJnZXQgaW5zdGFuY2VvZiBTVkdFbGVtZW50KXtcbiAgICAgIHJldHVybiB0aGlzLmxpdmVTb2NrZXQub3duZXIocGh4VGFyZ2V0LCB2aWV3ID0+IGNhbGxiYWNrKHZpZXcsIHBoeFRhcmdldCkpXG4gICAgfVxuXG4gICAgaWYoaXNDaWQocGh4VGFyZ2V0KSl7XG4gICAgICBsZXQgdGFyZ2V0cyA9IERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QodGhpcy5lbCwgcGh4VGFyZ2V0KVxuICAgICAgaWYodGFyZ2V0cy5sZW5ndGggPT09IDApe1xuICAgICAgICBsb2dFcnJvcihgbm8gY29tcG9uZW50IGZvdW5kIG1hdGNoaW5nIHBoeC10YXJnZXQgb2YgJHtwaHhUYXJnZXR9YClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMsIHBhcnNlSW50KHBoeFRhcmdldCkpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB0YXJnZXRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHBoeFRhcmdldCkpXG4gICAgICBpZih0YXJnZXRzLmxlbmd0aCA9PT0gMCl7IGxvZ0Vycm9yKGBub3RoaW5nIGZvdW5kIG1hdGNoaW5nIHRoZSBwaHgtdGFyZ2V0IHNlbGVjdG9yIFwiJHtwaHhUYXJnZXR9XCJgKSB9XG4gICAgICB0YXJnZXRzLmZvckVhY2godGFyZ2V0ID0+IHRoaXMubGl2ZVNvY2tldC5vd25lcih0YXJnZXQsIHZpZXcgPT4gY2FsbGJhY2sodmlldywgdGFyZ2V0KSkpXG4gICAgfVxuICB9XG5cbiAgYXBwbHlEaWZmKHR5cGUsIHJhd0RpZmYsIGNhbGxiYWNrKXtcbiAgICB0aGlzLmxvZyh0eXBlLCAoKSA9PiBbXCJcIiwgY2xvbmUocmF3RGlmZildKVxuICAgIGxldCB7ZGlmZiwgcmVwbHksIGV2ZW50cywgdGl0bGV9ID0gUmVuZGVyZWQuZXh0cmFjdChyYXdEaWZmKVxuICAgIGNhbGxiYWNrKHtkaWZmLCByZXBseSwgZXZlbnRzfSlcbiAgICBpZih0aXRsZSl7IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gRE9NLnB1dFRpdGxlKHRpdGxlKSkgfVxuICB9XG5cbiAgb25Kb2luKHJlc3Ape1xuICAgIGxldCB7cmVuZGVyZWQsIGNvbnRhaW5lcn0gPSByZXNwXG4gICAgaWYoY29udGFpbmVyKXtcbiAgICAgIGxldCBbdGFnLCBhdHRyc10gPSBjb250YWluZXJcbiAgICAgIHRoaXMuZWwgPSBET00ucmVwbGFjZVJvb3RDb250YWluZXIodGhpcy5lbCwgdGFnLCBhdHRycylcbiAgICB9XG4gICAgdGhpcy5jaGlsZEpvaW5zID0gMFxuICAgIHRoaXMuam9pblBlbmRpbmcgPSB0cnVlXG4gICAgdGhpcy5mbGFzaCA9IG51bGxcblxuICAgIEJyb3dzZXIuZHJvcExvY2FsKHRoaXMubGl2ZVNvY2tldC5sb2NhbFN0b3JhZ2UsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwgQ09OU0VDVVRJVkVfUkVMT0FEUylcbiAgICB0aGlzLmFwcGx5RGlmZihcIm1vdW50XCIsIHJlbmRlcmVkLCAoe2RpZmYsIGV2ZW50c30pID0+IHtcbiAgICAgIHRoaXMucmVuZGVyZWQgPSBuZXcgUmVuZGVyZWQodGhpcy5pZCwgZGlmZilcbiAgICAgIGxldCBbaHRtbCwgc3RyZWFtc10gPSB0aGlzLnJlbmRlckNvbnRhaW5lcihudWxsLCBcImpvaW5cIilcbiAgICAgIHRoaXMuZHJvcFBlbmRpbmdSZWZzKClcbiAgICAgIGxldCBmb3JtcyA9IHRoaXMuZm9ybXNGb3JSZWNvdmVyeShodG1sKVxuICAgICAgdGhpcy5qb2luQ291bnQrK1xuXG4gICAgICBpZihmb3Jtcy5sZW5ndGggPiAwKXtcbiAgICAgICAgZm9ybXMuZm9yRWFjaCgoW2Zvcm0sIG5ld0Zvcm0sIG5ld0NpZF0sIGkpID0+IHtcbiAgICAgICAgICB0aGlzLnB1c2hGb3JtUmVjb3ZlcnkoZm9ybSwgbmV3Q2lkLCByZXNwID0+IHtcbiAgICAgICAgICAgIGlmKGkgPT09IGZvcm1zLmxlbmd0aCAtIDEpe1xuICAgICAgICAgICAgICB0aGlzLm9uSm9pbkNvbXBsZXRlKHJlc3AsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vbkpvaW5Db21wbGV0ZShyZXNwLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGRyb3BQZW5kaW5nUmVmcygpe1xuICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHtQSFhfUkVGX1NSQ309XCIke3RoaXMuaWR9XCJdWyR7UEhYX1JFRn1dYCwgZWwgPT4ge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUYpXG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1JFRl9TUkMpXG4gICAgfSlcbiAgfVxuXG4gIG9uSm9pbkNvbXBsZXRlKHtsaXZlX3BhdGNofSwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKXtcbiAgICAvLyBJbiBvcmRlciB0byBwcm92aWRlIGEgYmV0dGVyIGV4cGVyaWVuY2UsIHdlIHdhbnQgdG8gam9pblxuICAgIC8vIGFsbCBMaXZlVmlld3MgZmlyc3QgYW5kIG9ubHkgdGhlbiBhcHBseSB0aGVpciBwYXRjaGVzLlxuICAgIGlmKHRoaXMuam9pbkNvdW50ID4gMSB8fCAodGhpcy5wYXJlbnQgJiYgIXRoaXMucGFyZW50LmlzSm9pblBlbmRpbmcoKSkpe1xuICAgICAgcmV0dXJuIHRoaXMuYXBwbHlKb2luUGF0Y2gobGl2ZV9wYXRjaCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKVxuICAgIH1cblxuICAgIC8vIE9uZSBkb3duc2lkZSBvZiB0aGlzIGFwcHJvYWNoIGlzIHRoYXQgd2UgbmVlZCB0byBmaW5kIHBoeENoaWxkcmVuXG4gICAgLy8gaW4gdGhlIGh0bWwgZnJhZ21lbnQsIGluc3RlYWQgb2YgZGlyZWN0bHkgb24gdGhlIERPTS4gVGhlIGZyYWdtZW50XG4gICAgLy8gYWxzbyBkb2VzIG5vdCBpbmNsdWRlIFBIWF9TVEFUSUMsIHNvIHdlIG5lZWQgdG8gY29weSBpdCBvdmVyIGZyb21cbiAgICAvLyB0aGUgRE9NLlxuICAgIGxldCBuZXdDaGlsZHJlbiA9IERPTS5maW5kUGh4Q2hpbGRyZW5JbkZyYWdtZW50KGh0bWwsIHRoaXMuaWQpLmZpbHRlcih0b0VsID0+IHtcbiAgICAgIGxldCBmcm9tRWwgPSB0b0VsLmlkICYmIHRoaXMuZWwucXVlcnlTZWxlY3RvcihgW2lkPVwiJHt0b0VsLmlkfVwiXWApXG4gICAgICBsZXQgcGh4U3RhdGljID0gZnJvbUVsICYmIGZyb21FbC5nZXRBdHRyaWJ1dGUoUEhYX1NUQVRJQylcbiAgICAgIGlmKHBoeFN0YXRpYyl7IHRvRWwuc2V0QXR0cmlidXRlKFBIWF9TVEFUSUMsIHBoeFN0YXRpYykgfVxuICAgICAgcmV0dXJuIHRoaXMuam9pbkNoaWxkKHRvRWwpXG4gICAgfSlcblxuICAgIGlmKG5ld0NoaWxkcmVuLmxlbmd0aCA9PT0gMCl7XG4gICAgICBpZih0aGlzLnBhcmVudCl7XG4gICAgICAgIHRoaXMucm9vdC5wZW5kaW5nSm9pbk9wcy5wdXNoKFt0aGlzLCAoKSA9PiB0aGlzLmFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyldKVxuICAgICAgICB0aGlzLnBhcmVudC5hY2tKb2luKHRoaXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uQWxsQ2hpbGRKb2luc0NvbXBsZXRlKClcbiAgICAgICAgdGhpcy5hcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9vdC5wZW5kaW5nSm9pbk9wcy5wdXNoKFt0aGlzLCAoKSA9PiB0aGlzLmFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyldKVxuICAgIH1cbiAgfVxuXG4gIGF0dGFjaFRydWVEb2NFbCgpe1xuICAgIHRoaXMuZWwgPSBET00uYnlJZCh0aGlzLmlkKVxuICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKFBIWF9ST09UX0lELCB0aGlzLnJvb3QuaWQpXG4gIH1cblxuICBleGVjTmV3TW91bnRlZCgpe1xuICAgIGxldCBwaHhWaWV3cG9ydFRvcCA9IHRoaXMuYmluZGluZyhQSFhfVklFV1BPUlRfVE9QKVxuICAgIGxldCBwaHhWaWV3cG9ydEJvdHRvbSA9IHRoaXMuYmluZGluZyhQSFhfVklFV1BPUlRfQk9UVE9NKVxuICAgIERPTS5hbGwodGhpcy5lbCwgYFske3BoeFZpZXdwb3J0VG9wfV0sIFske3BoeFZpZXdwb3J0Qm90dG9tfV1gLCBob29rRWwgPT4ge1xuICAgICAgRE9NLm1heWJlQWRkUHJpdmF0ZUhvb2tzKGhvb2tFbCwgcGh4Vmlld3BvcnRUb3AsIHBoeFZpZXdwb3J0Qm90dG9tKVxuICAgICAgdGhpcy5tYXliZUFkZE5ld0hvb2soaG9va0VsKVxuICAgIH0pXG4gICAgRE9NLmFsbCh0aGlzLmVsLCBgWyR7dGhpcy5iaW5kaW5nKFBIWF9IT09LKX1dLCBbZGF0YS1waHgtJHtQSFhfSE9PS31dYCwgaG9va0VsID0+IHtcbiAgICAgIHRoaXMubWF5YmVBZGROZXdIb29rKGhvb2tFbClcbiAgICB9KVxuICAgIERPTS5hbGwodGhpcy5lbCwgYFske3RoaXMuYmluZGluZyhQSFhfTU9VTlRFRCl9XWAsIGVsID0+IHRoaXMubWF5YmVNb3VudGVkKGVsKSlcbiAgfVxuXG4gIGFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyl7XG4gICAgdGhpcy5hdHRhY2hUcnVlRG9jRWwoKVxuICAgIGxldCBwYXRjaCA9IG5ldyBET01QYXRjaCh0aGlzLCB0aGlzLmVsLCB0aGlzLmlkLCBodG1sLCBzdHJlYW1zLCBudWxsKVxuICAgIHBhdGNoLm1hcmtQcnVuYWJsZUNvbnRlbnRGb3JSZW1vdmFsKClcbiAgICB0aGlzLnBlcmZvcm1QYXRjaChwYXRjaCwgZmFsc2UpXG4gICAgdGhpcy5qb2luTmV3Q2hpbGRyZW4oKVxuICAgIHRoaXMuZXhlY05ld01vdW50ZWQoKVxuXG4gICAgdGhpcy5qb2luUGVuZGluZyA9IGZhbHNlXG4gICAgdGhpcy5saXZlU29ja2V0LmRpc3BhdGNoRXZlbnRzKGV2ZW50cylcbiAgICB0aGlzLmFwcGx5UGVuZGluZ1VwZGF0ZXMoKVxuXG4gICAgaWYobGl2ZV9wYXRjaCl7XG4gICAgICBsZXQge2tpbmQsIHRvfSA9IGxpdmVfcGF0Y2hcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5oaXN0b3J5UGF0Y2godG8sIGtpbmQpXG4gICAgfVxuICAgIHRoaXMuaGlkZUxvYWRlcigpXG4gICAgaWYodGhpcy5qb2luQ291bnQgPiAxKXsgdGhpcy50cmlnZ2VyUmVjb25uZWN0ZWQoKSB9XG4gICAgdGhpcy5zdG9wQ2FsbGJhY2soKVxuICB9XG5cbiAgdHJpZ2dlckJlZm9yZVVwZGF0ZUhvb2soZnJvbUVsLCB0b0VsKXtcbiAgICB0aGlzLmxpdmVTb2NrZXQudHJpZ2dlckRPTShcIm9uQmVmb3JlRWxVcGRhdGVkXCIsIFtmcm9tRWwsIHRvRWxdKVxuICAgIGxldCBob29rID0gdGhpcy5nZXRIb29rKGZyb21FbClcbiAgICBsZXQgaXNJZ25vcmVkID0gaG9vayAmJiBET00uaXNJZ25vcmVkKGZyb21FbCwgdGhpcy5iaW5kaW5nKFBIWF9VUERBVEUpKVxuICAgIGlmKGhvb2sgJiYgIWZyb21FbC5pc0VxdWFsTm9kZSh0b0VsKSAmJiAhKGlzSWdub3JlZCAmJiBpc0VxdWFsT2JqKGZyb21FbC5kYXRhc2V0LCB0b0VsLmRhdGFzZXQpKSl7XG4gICAgICBob29rLl9fYmVmb3JlVXBkYXRlKClcbiAgICAgIHJldHVybiBob29rXG4gICAgfVxuICB9XG5cbiAgbWF5YmVNb3VudGVkKGVsKXtcbiAgICBsZXQgcGh4TW91bnRlZCA9IGVsLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX01PVU5URUQpKVxuICAgIGxldCBoYXNCZWVuSW52b2tlZCA9IHBoeE1vdW50ZWQgJiYgRE9NLnByaXZhdGUoZWwsIFwibW91bnRlZFwiKVxuICAgIGlmKHBoeE1vdW50ZWQgJiYgIWhhc0JlZW5JbnZva2VkKXtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5leGVjSlMoZWwsIHBoeE1vdW50ZWQpXG4gICAgICBET00ucHV0UHJpdmF0ZShlbCwgXCJtb3VudGVkXCIsIHRydWUpXG4gICAgfVxuICB9XG5cbiAgbWF5YmVBZGROZXdIb29rKGVsLCBmb3JjZSl7XG4gICAgbGV0IG5ld0hvb2sgPSB0aGlzLmFkZEhvb2soZWwpXG4gICAgaWYobmV3SG9vayl7IG5ld0hvb2suX19tb3VudGVkKCkgfVxuICB9XG5cbiAgcGVyZm9ybVBhdGNoKHBhdGNoLCBwcnVuZUNpZHMpe1xuICAgIGxldCByZW1vdmVkRWxzID0gW11cbiAgICBsZXQgcGh4Q2hpbGRyZW5BZGRlZCA9IGZhbHNlXG4gICAgbGV0IHVwZGF0ZWRIb29rSWRzID0gbmV3IFNldCgpXG5cbiAgICBwYXRjaC5hZnRlcihcImFkZGVkXCIsIGVsID0+IHtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC50cmlnZ2VyRE9NKFwib25Ob2RlQWRkZWRcIiwgW2VsXSlcbiAgICAgIHRoaXMubWF5YmVBZGROZXdIb29rKGVsKVxuICAgICAgaWYoZWwuZ2V0QXR0cmlidXRlKXsgdGhpcy5tYXliZU1vdW50ZWQoZWwpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJwaHhDaGlsZEFkZGVkXCIsIGVsID0+IHtcbiAgICAgIGlmKERPTS5pc1BoeFN0aWNreShlbCkpe1xuICAgICAgICB0aGlzLmxpdmVTb2NrZXQuam9pblJvb3RWaWV3cygpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwaHhDaGlsZHJlbkFkZGVkID0gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5iZWZvcmUoXCJ1cGRhdGVkXCIsIChmcm9tRWwsIHRvRWwpID0+IHtcbiAgICAgIGxldCBob29rID0gdGhpcy50cmlnZ2VyQmVmb3JlVXBkYXRlSG9vayhmcm9tRWwsIHRvRWwpXG4gICAgICBpZihob29rKXsgdXBkYXRlZEhvb2tJZHMuYWRkKGZyb21FbC5pZCkgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5hZnRlcihcInVwZGF0ZWRcIiwgZWwgPT4ge1xuICAgICAgaWYodXBkYXRlZEhvb2tJZHMuaGFzKGVsLmlkKSl7IHRoaXMuZ2V0SG9vayhlbCkuX191cGRhdGVkKCkgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5hZnRlcihcImRpc2NhcmRlZFwiLCAoZWwpID0+IHtcbiAgICAgIGlmKGVsLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSl7IHJlbW92ZWRFbHMucHVzaChlbCkgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5hZnRlcihcInRyYW5zaXRpb25zRGlzY2FyZGVkXCIsIGVscyA9PiB0aGlzLmFmdGVyRWxlbWVudHNSZW1vdmVkKGVscywgcHJ1bmVDaWRzKSlcbiAgICBwYXRjaC5wZXJmb3JtKClcbiAgICB0aGlzLmFmdGVyRWxlbWVudHNSZW1vdmVkKHJlbW92ZWRFbHMsIHBydW5lQ2lkcylcblxuICAgIHJldHVybiBwaHhDaGlsZHJlbkFkZGVkXG4gIH1cblxuICBhZnRlckVsZW1lbnRzUmVtb3ZlZChlbGVtZW50cywgcHJ1bmVDaWRzKXtcbiAgICBsZXQgZGVzdHJveWVkQ0lEcyA9IFtdXG4gICAgZWxlbWVudHMuZm9yRWFjaChwYXJlbnQgPT4ge1xuICAgICAgbGV0IGNvbXBvbmVudHMgPSBET00uYWxsKHBhcmVudCwgYFske1BIWF9DT01QT05FTlR9XWApXG4gICAgICBsZXQgaG9va3MgPSBET00uYWxsKHBhcmVudCwgYFske3RoaXMuYmluZGluZyhQSFhfSE9PSyl9XWApXG4gICAgICBjb21wb25lbnRzLmNvbmNhdChwYXJlbnQpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICBsZXQgY2lkID0gdGhpcy5jb21wb25lbnRJRChlbClcbiAgICAgICAgaWYoaXNDaWQoY2lkKSAmJiBkZXN0cm95ZWRDSURzLmluZGV4T2YoY2lkKSA9PT0gLTEpeyBkZXN0cm95ZWRDSURzLnB1c2goY2lkKSB9XG4gICAgICB9KVxuICAgICAgaG9va3MuY29uY2F0KHBhcmVudCkuZm9yRWFjaChob29rRWwgPT4ge1xuICAgICAgICBsZXQgaG9vayA9IHRoaXMuZ2V0SG9vayhob29rRWwpXG4gICAgICAgIGhvb2sgJiYgdGhpcy5kZXN0cm95SG9vayhob29rKVxuICAgICAgfSlcbiAgICB9KVxuICAgIC8vIFdlIHNob3VsZCBub3QgcHJ1bmVDaWRzIG9uIGpvaW5zLiBPdGhlcndpc2UsIGluIGNhc2Ugb2ZcbiAgICAvLyByZWpvaW5zLCB3ZSBtYXkgbm90aWZ5IGNpZHMgdGhhdCBubyBsb25nZXIgYmVsb25nIHRvIHRoZVxuICAgIC8vIGN1cnJlbnQgTGl2ZVZpZXcgdG8gYmUgcmVtb3ZlZC5cbiAgICBpZihwcnVuZUNpZHMpe1xuICAgICAgdGhpcy5tYXliZVB1c2hDb21wb25lbnRzRGVzdHJveWVkKGRlc3Ryb3llZENJRHMpXG4gICAgfVxuICB9XG5cbiAgam9pbk5ld0NoaWxkcmVuKCl7XG4gICAgRE9NLmZpbmRQaHhDaGlsZHJlbih0aGlzLmVsLCB0aGlzLmlkKS5mb3JFYWNoKGVsID0+IHRoaXMuam9pbkNoaWxkKGVsKSlcbiAgfVxuXG4gIGdldENoaWxkQnlJZChpZCl7IHJldHVybiB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF1baWRdIH1cblxuICBnZXREZXNjZW5kZW50QnlFbChlbCl7XG4gICAgaWYoZWwuaWQgPT09IHRoaXMuaWQpe1xuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5bZWwuZ2V0QXR0cmlidXRlKFBIWF9QQVJFTlRfSUQpXVtlbC5pZF1cbiAgICB9XG4gIH1cblxuICBkZXN0cm95RGVzY2VuZGVudChpZCl7XG4gICAgZm9yKGxldCBwYXJlbnRJZCBpbiB0aGlzLnJvb3QuY2hpbGRyZW4pe1xuICAgICAgZm9yKGxldCBjaGlsZElkIGluIHRoaXMucm9vdC5jaGlsZHJlbltwYXJlbnRJZF0pe1xuICAgICAgICBpZihjaGlsZElkID09PSBpZCl7IHJldHVybiB0aGlzLnJvb3QuY2hpbGRyZW5bcGFyZW50SWRdW2NoaWxkSWRdLmRlc3Ryb3koKSB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgam9pbkNoaWxkKGVsKXtcbiAgICBsZXQgY2hpbGQgPSB0aGlzLmdldENoaWxkQnlJZChlbC5pZClcbiAgICBpZighY2hpbGQpe1xuICAgICAgbGV0IHZpZXcgPSBuZXcgVmlldyhlbCwgdGhpcy5saXZlU29ja2V0LCB0aGlzKVxuICAgICAgdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdW3ZpZXcuaWRdID0gdmlld1xuICAgICAgdmlldy5qb2luKClcbiAgICAgIHRoaXMuY2hpbGRKb2lucysrXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGlzSm9pblBlbmRpbmcoKXsgcmV0dXJuIHRoaXMuam9pblBlbmRpbmcgfVxuXG4gIGFja0pvaW4oX2NoaWxkKXtcbiAgICB0aGlzLmNoaWxkSm9pbnMtLVxuXG4gICAgaWYodGhpcy5jaGlsZEpvaW5zID09PSAwKXtcbiAgICAgIGlmKHRoaXMucGFyZW50KXtcbiAgICAgICAgdGhpcy5wYXJlbnQuYWNrSm9pbih0aGlzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vbkFsbENoaWxkSm9pbnNDb21wbGV0ZSgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25BbGxDaGlsZEpvaW5zQ29tcGxldGUoKXtcbiAgICB0aGlzLmpvaW5DYWxsYmFjaygoKSA9PiB7XG4gICAgICB0aGlzLnBlbmRpbmdKb2luT3BzLmZvckVhY2goKFt2aWV3LCBvcF0pID0+IHtcbiAgICAgICAgaWYoIXZpZXcuaXNEZXN0cm95ZWQoKSl7IG9wKCkgfVxuICAgICAgfSlcbiAgICAgIHRoaXMucGVuZGluZ0pvaW5PcHMgPSBbXVxuICAgIH0pXG4gIH1cblxuICB1cGRhdGUoZGlmZiwgZXZlbnRzKXtcbiAgICBpZih0aGlzLmlzSm9pblBlbmRpbmcoKSB8fCAodGhpcy5saXZlU29ja2V0Lmhhc1BlbmRpbmdMaW5rKCkgJiYgdGhpcy5yb290LmlzTWFpbigpKSl7XG4gICAgICByZXR1cm4gdGhpcy5wZW5kaW5nRGlmZnMucHVzaCh7ZGlmZiwgZXZlbnRzfSlcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcmVkLm1lcmdlRGlmZihkaWZmKVxuICAgIGxldCBwaHhDaGlsZHJlbkFkZGVkID0gZmFsc2VcblxuICAgIC8vIFdoZW4gdGhlIGRpZmYgb25seSBjb250YWlucyBjb21wb25lbnQgZGlmZnMsIHRoZW4gd2FsayBjb21wb25lbnRzXG4gICAgLy8gYW5kIHBhdGNoIG9ubHkgdGhlIHBhcmVudCBjb21wb25lbnQgY29udGFpbmVycyBmb3VuZCBpbiB0aGUgZGlmZi5cbiAgICAvLyBPdGhlcndpc2UsIHBhdGNoIGVudGlyZSBMViBjb250YWluZXIuXG4gICAgaWYodGhpcy5yZW5kZXJlZC5pc0NvbXBvbmVudE9ubHlEaWZmKGRpZmYpKXtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC50aW1lKFwiY29tcG9uZW50IHBhdGNoIGNvbXBsZXRlXCIsICgpID0+IHtcbiAgICAgICAgbGV0IHBhcmVudENpZHMgPSBET00uZmluZFBhcmVudENJRHModGhpcy5lbCwgdGhpcy5yZW5kZXJlZC5jb21wb25lbnRDSURzKGRpZmYpKVxuICAgICAgICBwYXJlbnRDaWRzLmZvckVhY2gocGFyZW50Q0lEID0+IHtcbiAgICAgICAgICBpZih0aGlzLmNvbXBvbmVudFBhdGNoKHRoaXMucmVuZGVyZWQuZ2V0Q29tcG9uZW50KGRpZmYsIHBhcmVudENJRCksIHBhcmVudENJRCkpeyBwaHhDaGlsZHJlbkFkZGVkID0gdHJ1ZSB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZighaXNFbXB0eShkaWZmKSl7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQudGltZShcImZ1bGwgcGF0Y2ggY29tcGxldGVcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgW2h0bWwsIHN0cmVhbXNdID0gdGhpcy5yZW5kZXJDb250YWluZXIoZGlmZiwgXCJ1cGRhdGVcIilcbiAgICAgICAgbGV0IHBhdGNoID0gbmV3IERPTVBhdGNoKHRoaXMsIHRoaXMuZWwsIHRoaXMuaWQsIGh0bWwsIHN0cmVhbXMsIG51bGwpXG4gICAgICAgIHBoeENoaWxkcmVuQWRkZWQgPSB0aGlzLnBlcmZvcm1QYXRjaChwYXRjaCwgdHJ1ZSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdGhpcy5saXZlU29ja2V0LmRpc3BhdGNoRXZlbnRzKGV2ZW50cylcbiAgICBpZihwaHhDaGlsZHJlbkFkZGVkKXsgdGhpcy5qb2luTmV3Q2hpbGRyZW4oKSB9XG4gIH1cblxuICByZW5kZXJDb250YWluZXIoZGlmZiwga2luZCl7XG4gICAgcmV0dXJuIHRoaXMubGl2ZVNvY2tldC50aW1lKGB0b1N0cmluZyBkaWZmICgke2tpbmR9KWAsICgpID0+IHtcbiAgICAgIGxldCB0YWcgPSB0aGlzLmVsLnRhZ05hbWVcbiAgICAgIC8vIERvbid0IHNraXAgYW55IGNvbXBvbmVudCBpbiB0aGUgZGlmZiBub3IgYW55IG1hcmtlZCBhcyBwcnVuZWRcbiAgICAgIC8vIChhcyB0aGV5IG1heSBoYXZlIGJlZW4gYWRkZWQgYmFjaylcbiAgICAgIGxldCBjaWRzID0gZGlmZiA/IHRoaXMucmVuZGVyZWQuY29tcG9uZW50Q0lEcyhkaWZmKS5jb25jYXQodGhpcy5wcnVuaW5nQ0lEcykgOiBudWxsXG4gICAgICBsZXQgW2h0bWwsIHN0cmVhbXNdID0gdGhpcy5yZW5kZXJlZC50b1N0cmluZyhjaWRzKVxuICAgICAgcmV0dXJuIFtgPCR7dGFnfT4ke2h0bWx9PC8ke3RhZ30+YCwgc3RyZWFtc11cbiAgICB9KVxuICB9XG5cbiAgY29tcG9uZW50UGF0Y2goZGlmZiwgY2lkKXtcbiAgICBpZihpc0VtcHR5KGRpZmYpKSByZXR1cm4gZmFsc2VcbiAgICBsZXQgW2h0bWwsIHN0cmVhbXNdID0gdGhpcy5yZW5kZXJlZC5jb21wb25lbnRUb1N0cmluZyhjaWQpXG4gICAgbGV0IHBhdGNoID0gbmV3IERPTVBhdGNoKHRoaXMsIHRoaXMuZWwsIHRoaXMuaWQsIGh0bWwsIHN0cmVhbXMsIGNpZClcbiAgICBsZXQgY2hpbGRyZW5BZGRlZCA9IHRoaXMucGVyZm9ybVBhdGNoKHBhdGNoLCB0cnVlKVxuICAgIHJldHVybiBjaGlsZHJlbkFkZGVkXG4gIH1cblxuICBnZXRIb29rKGVsKXsgcmV0dXJuIHRoaXMudmlld0hvb2tzW1ZpZXdIb29rLmVsZW1lbnRJRChlbCldIH1cblxuICBhZGRIb29rKGVsKXtcbiAgICBpZihWaWV3SG9vay5lbGVtZW50SUQoZWwpIHx8ICFlbC5nZXRBdHRyaWJ1dGUpeyByZXR1cm4gfVxuICAgIGxldCBob29rTmFtZSA9IGVsLmdldEF0dHJpYnV0ZShgZGF0YS1waHgtJHtQSFhfSE9PS31gKSB8fCBlbC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9IT09LKSlcbiAgICBpZihob29rTmFtZSAmJiAhdGhpcy5vd25zRWxlbWVudChlbCkpeyByZXR1cm4gfVxuICAgIGxldCBjYWxsYmFja3MgPSB0aGlzLmxpdmVTb2NrZXQuZ2V0SG9va0NhbGxiYWNrcyhob29rTmFtZSlcblxuICAgIGlmKGNhbGxiYWNrcyl7XG4gICAgICBpZighZWwuaWQpeyBsb2dFcnJvcihgbm8gRE9NIElEIGZvciBob29rIFwiJHtob29rTmFtZX1cIi4gSG9va3MgcmVxdWlyZSBhIHVuaXF1ZSBJRCBvbiBlYWNoIGVsZW1lbnQuYCwgZWwpIH1cbiAgICAgIGxldCBob29rID0gbmV3IFZpZXdIb29rKHRoaXMsIGVsLCBjYWxsYmFja3MpXG4gICAgICB0aGlzLnZpZXdIb29rc1tWaWV3SG9vay5lbGVtZW50SUQoaG9vay5lbCldID0gaG9va1xuICAgICAgcmV0dXJuIGhvb2tcbiAgICB9IGVsc2UgaWYoaG9va05hbWUgIT09IG51bGwpe1xuICAgICAgbG9nRXJyb3IoYHVua25vd24gaG9vayBmb3VuZCBmb3IgXCIke2hvb2tOYW1lfVwiYCwgZWwpXG4gICAgfVxuICB9XG5cbiAgZGVzdHJveUhvb2soaG9vayl7XG4gICAgaG9vay5fX2Rlc3Ryb3llZCgpXG4gICAgaG9vay5fX2NsZWFudXBfXygpXG4gICAgZGVsZXRlIHRoaXMudmlld0hvb2tzW1ZpZXdIb29rLmVsZW1lbnRJRChob29rLmVsKV1cbiAgfVxuXG4gIGFwcGx5UGVuZGluZ1VwZGF0ZXMoKXtcbiAgICB0aGlzLnBlbmRpbmdEaWZmcy5mb3JFYWNoKCh7ZGlmZiwgZXZlbnRzfSkgPT4gdGhpcy51cGRhdGUoZGlmZiwgZXZlbnRzKSlcbiAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgdGhpcy5lYWNoQ2hpbGQoY2hpbGQgPT4gY2hpbGQuYXBwbHlQZW5kaW5nVXBkYXRlcygpKVxuICB9XG5cbiAgZWFjaENoaWxkKGNhbGxiYWNrKXtcbiAgICBsZXQgY2hpbGRyZW4gPSB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF0gfHwge31cbiAgICBmb3IobGV0IGlkIGluIGNoaWxkcmVuKXsgY2FsbGJhY2sodGhpcy5nZXRDaGlsZEJ5SWQoaWQpKSB9XG4gIH1cblxuICBvbkNoYW5uZWwoZXZlbnQsIGNiKXtcbiAgICB0aGlzLmxpdmVTb2NrZXQub25DaGFubmVsKHRoaXMuY2hhbm5lbCwgZXZlbnQsIHJlc3AgPT4ge1xuICAgICAgaWYodGhpcy5pc0pvaW5QZW5kaW5nKCkpe1xuICAgICAgICB0aGlzLnJvb3QucGVuZGluZ0pvaW5PcHMucHVzaChbdGhpcywgKCkgPT4gY2IocmVzcCldKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5saXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4gY2IocmVzcCkpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGJpbmRDaGFubmVsKCl7XG4gICAgLy8gVGhlIGRpZmYgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQgYnkgdGhlIHJlZ3VsYXIgdXBkYXRlIG9wZXJhdGlvbnMuXG4gICAgLy8gQWxsIG90aGVyIG9wZXJhdGlvbnMgYXJlIHF1ZXVlZCB0byBiZSBhcHBsaWVkIG9ubHkgYWZ0ZXIgam9pbi5cbiAgICB0aGlzLmxpdmVTb2NrZXQub25DaGFubmVsKHRoaXMuY2hhbm5lbCwgXCJkaWZmXCIsIChyYXdEaWZmKSA9PiB7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuYXBwbHlEaWZmKFwidXBkYXRlXCIsIHJhd0RpZmYsICh7ZGlmZiwgZXZlbnRzfSkgPT4gdGhpcy51cGRhdGUoZGlmZiwgZXZlbnRzKSlcbiAgICAgIH0pXG4gICAgfSlcbiAgICB0aGlzLm9uQ2hhbm5lbChcInJlZGlyZWN0XCIsICh7dG8sIGZsYXNofSkgPT4gdGhpcy5vblJlZGlyZWN0KHt0bywgZmxhc2h9KSlcbiAgICB0aGlzLm9uQ2hhbm5lbChcImxpdmVfcGF0Y2hcIiwgKHJlZGlyKSA9PiB0aGlzLm9uTGl2ZVBhdGNoKHJlZGlyKSlcbiAgICB0aGlzLm9uQ2hhbm5lbChcImxpdmVfcmVkaXJlY3RcIiwgKHJlZGlyKSA9PiB0aGlzLm9uTGl2ZVJlZGlyZWN0KHJlZGlyKSlcbiAgICB0aGlzLmNoYW5uZWwub25FcnJvcihyZWFzb24gPT4gdGhpcy5vbkVycm9yKHJlYXNvbikpXG4gICAgdGhpcy5jaGFubmVsLm9uQ2xvc2UocmVhc29uID0+IHRoaXMub25DbG9zZShyZWFzb24pKVxuICB9XG5cbiAgZGVzdHJveUFsbENoaWxkcmVuKCl7IHRoaXMuZWFjaENoaWxkKGNoaWxkID0+IGNoaWxkLmRlc3Ryb3koKSkgfVxuXG4gIG9uTGl2ZVJlZGlyZWN0KHJlZGlyKXtcbiAgICBsZXQge3RvLCBraW5kLCBmbGFzaH0gPSByZWRpclxuICAgIGxldCB1cmwgPSB0aGlzLmV4cGFuZFVSTCh0bylcbiAgICB0aGlzLmxpdmVTb2NrZXQuaGlzdG9yeVJlZGlyZWN0KHVybCwga2luZCwgZmxhc2gpXG4gIH1cblxuICBvbkxpdmVQYXRjaChyZWRpcil7XG4gICAgbGV0IHt0bywga2luZH0gPSByZWRpclxuICAgIHRoaXMuaHJlZiA9IHRoaXMuZXhwYW5kVVJMKHRvKVxuICAgIHRoaXMubGl2ZVNvY2tldC5oaXN0b3J5UGF0Y2godG8sIGtpbmQpXG4gIH1cblxuICBleHBhbmRVUkwodG8pe1xuICAgIHJldHVybiB0by5zdGFydHNXaXRoKFwiL1wiKSA/IGAke3dpbmRvdy5sb2NhdGlvbi5wcm90b2NvbH0vLyR7d2luZG93LmxvY2F0aW9uLmhvc3R9JHt0b31gIDogdG9cbiAgfVxuXG4gIG9uUmVkaXJlY3Qoe3RvLCBmbGFzaH0peyB0aGlzLmxpdmVTb2NrZXQucmVkaXJlY3QodG8sIGZsYXNoKSB9XG5cbiAgaXNEZXN0cm95ZWQoKXsgcmV0dXJuIHRoaXMuZGVzdHJveWVkIH1cblxuICBqb2luRGVhZCgpeyB0aGlzLmlzRGVhZCA9IHRydWUgfVxuXG4gIGpvaW4oY2FsbGJhY2spe1xuICAgIHRoaXMuc2hvd0xvYWRlcih0aGlzLmxpdmVTb2NrZXQubG9hZGVyVGltZW91dClcbiAgICB0aGlzLmJpbmRDaGFubmVsKClcbiAgICBpZih0aGlzLmlzTWFpbigpKXtcbiAgICAgIHRoaXMuc3RvcENhbGxiYWNrID0gdGhpcy5saXZlU29ja2V0LndpdGhQYWdlTG9hZGluZyh7dG86IHRoaXMuaHJlZiwga2luZDogXCJpbml0aWFsXCJ9KVxuICAgIH1cbiAgICB0aGlzLmpvaW5DYWxsYmFjayA9IChvbkRvbmUpID0+IHtcbiAgICAgIG9uRG9uZSA9IG9uRG9uZSB8fCBmdW5jdGlvbigpe31cbiAgICAgIGNhbGxiYWNrID8gY2FsbGJhY2sodGhpcy5qb2luQ291bnQsIG9uRG9uZSkgOiBvbkRvbmUoKVxuICAgIH1cbiAgICB0aGlzLmxpdmVTb2NrZXQud3JhcFB1c2godGhpcywge3RpbWVvdXQ6IGZhbHNlfSwgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuY2hhbm5lbC5qb2luKClcbiAgICAgICAgLnJlY2VpdmUoXCJva1wiLCBkYXRhID0+IHtcbiAgICAgICAgICBpZighdGhpcy5pc0Rlc3Ryb3llZCgpKXtcbiAgICAgICAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHRoaXMub25Kb2luKGRhdGEpKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCByZXNwID0+ICF0aGlzLmlzRGVzdHJveWVkKCkgJiYgdGhpcy5vbkpvaW5FcnJvcihyZXNwKSlcbiAgICAgICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+ICF0aGlzLmlzRGVzdHJveWVkKCkgJiYgdGhpcy5vbkpvaW5FcnJvcih7cmVhc29uOiBcInRpbWVvdXRcIn0pKVxuICAgIH0pXG4gIH1cblxuICBvbkpvaW5FcnJvcihyZXNwKXtcbiAgICBpZihyZXNwLnJlYXNvbiA9PT0gXCJyZWxvYWRcIil7XG4gICAgICB0aGlzLmxvZyhcImVycm9yXCIsICgpID0+IFtgZmFpbGVkIG1vdW50IHdpdGggJHtyZXNwLnN0YXR1c30uIEZhbGxpbmcgYmFjayB0byBwYWdlIHJlcXVlc3RgLCByZXNwXSlcbiAgICAgIGlmKHRoaXMuaXNNYWluKCkpeyB0aGlzLm9uUmVkaXJlY3Qoe3RvOiB0aGlzLmhyZWZ9KSB9XG4gICAgICByZXR1cm5cbiAgICB9IGVsc2UgaWYocmVzcC5yZWFzb24gPT09IFwidW5hdXRob3JpemVkXCIgfHwgcmVzcC5yZWFzb24gPT09IFwic3RhbGVcIil7XG4gICAgICB0aGlzLmxvZyhcImVycm9yXCIsICgpID0+IFtcInVuYXV0aG9yaXplZCBsaXZlX3JlZGlyZWN0LiBGYWxsaW5nIGJhY2sgdG8gcGFnZSByZXF1ZXN0XCIsIHJlc3BdKVxuICAgICAgaWYodGhpcy5pc01haW4oKSl7IHRoaXMub25SZWRpcmVjdCh7dG86IHRoaXMuaHJlZn0pIH1cbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZihyZXNwLnJlZGlyZWN0IHx8IHJlc3AubGl2ZV9yZWRpcmVjdCl7XG4gICAgICB0aGlzLmpvaW5QZW5kaW5nID0gZmFsc2VcbiAgICAgIHRoaXMuY2hhbm5lbC5sZWF2ZSgpXG4gICAgfVxuICAgIGlmKHJlc3AucmVkaXJlY3QpeyByZXR1cm4gdGhpcy5vblJlZGlyZWN0KHJlc3AucmVkaXJlY3QpIH1cbiAgICBpZihyZXNwLmxpdmVfcmVkaXJlY3QpeyByZXR1cm4gdGhpcy5vbkxpdmVSZWRpcmVjdChyZXNwLmxpdmVfcmVkaXJlY3QpIH1cbiAgICB0aGlzLmRpc3BsYXlFcnJvcihbUEhYX0xPQURJTkdfQ0xBU1MsIFBIWF9FUlJPUl9DTEFTUywgUEhYX1NFUlZFUl9FUlJPUl9DTEFTU10pXG4gICAgdGhpcy5sb2coXCJlcnJvclwiLCAoKSA9PiBbXCJ1bmFibGUgdG8gam9pblwiLCByZXNwXSlcbiAgICBpZih0aGlzLmxpdmVTb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMubGl2ZVNvY2tldC5yZWxvYWRXaXRoSml0dGVyKHRoaXMpIH1cbiAgfVxuXG4gIG9uQ2xvc2UocmVhc29uKXtcbiAgICBpZih0aGlzLmlzRGVzdHJveWVkKCkpeyByZXR1cm4gfVxuICAgIGlmKHRoaXMubGl2ZVNvY2tldC5oYXNQZW5kaW5nTGluaygpICYmIHJlYXNvbiAhPT0gXCJsZWF2ZVwiKXtcbiAgICAgIHJldHVybiB0aGlzLmxpdmVTb2NrZXQucmVsb2FkV2l0aEppdHRlcih0aGlzKVxuICAgIH1cbiAgICB0aGlzLmRlc3Ryb3lBbGxDaGlsZHJlbigpXG4gICAgdGhpcy5saXZlU29ja2V0LmRyb3BBY3RpdmVFbGVtZW50KHRoaXMpXG4gICAgLy8gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBjYW4gYmUgbnVsbCBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMVxuICAgIGlmKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpeyBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKSB9XG4gICAgaWYodGhpcy5saXZlU29ja2V0LmlzVW5sb2FkZWQoKSl7XG4gICAgICB0aGlzLnNob3dMb2FkZXIoQkVGT1JFX1VOTE9BRF9MT0FERVJfVElNRU9VVClcbiAgICB9XG4gIH1cblxuICBvbkVycm9yKHJlYXNvbil7XG4gICAgdGhpcy5vbkNsb3NlKHJlYXNvbilcbiAgICBpZih0aGlzLmxpdmVTb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMubG9nKFwiZXJyb3JcIiwgKCkgPT4gW1widmlldyBjcmFzaGVkXCIsIHJlYXNvbl0pIH1cbiAgICBpZighdGhpcy5saXZlU29ja2V0LmlzVW5sb2FkZWQoKSl7XG4gICAgICBpZih0aGlzLmxpdmVTb2NrZXQuaXNDb25uZWN0ZWQoKSl7XG4gICAgICAgIHRoaXMuZGlzcGxheUVycm9yKFtQSFhfTE9BRElOR19DTEFTUywgUEhYX0VSUk9SX0NMQVNTLCBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGlzcGxheUVycm9yKFtQSFhfTE9BRElOR19DTEFTUywgUEhYX0VSUk9SX0NMQVNTLCBQSFhfQ0xJRU5UX0VSUk9SX0NMQVNTXSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkaXNwbGF5RXJyb3IoY2xhc3Nlcyl7XG4gICAgaWYodGhpcy5pc01haW4oKSl7IERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgXCJwaHg6cGFnZS1sb2FkaW5nLXN0YXJ0XCIsIHtkZXRhaWw6IHt0bzogdGhpcy5ocmVmLCBraW5kOiBcImVycm9yXCJ9fSkgfVxuICAgIHRoaXMuc2hvd0xvYWRlcigpXG4gICAgdGhpcy5zZXRDb250YWluZXJDbGFzc2VzKC4uLmNsYXNzZXMpXG4gICAgdGhpcy5leGVjQWxsKHRoaXMuYmluZGluZyhcImRpc2Nvbm5lY3RlZFwiKSlcbiAgfVxuXG4gIHB1c2hXaXRoUmVwbHkocmVmR2VuZXJhdG9yLCBldmVudCwgcGF5bG9hZCwgb25SZXBseSA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH1cblxuICAgIGxldCBbcmVmLCBbZWxdLCBvcHRzXSA9IHJlZkdlbmVyYXRvciA/IHJlZkdlbmVyYXRvcigpIDogW251bGwsIFtdLCB7fV1cbiAgICBsZXQgb25Mb2FkaW5nRG9uZSA9IGZ1bmN0aW9uKCl7IH1cbiAgICBpZihvcHRzLnBhZ2VfbG9hZGluZyB8fCAoZWwgJiYgKGVsLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX1BBR0VfTE9BRElORykpICE9PSBudWxsKSkpe1xuICAgICAgb25Mb2FkaW5nRG9uZSA9IHRoaXMubGl2ZVNvY2tldC53aXRoUGFnZUxvYWRpbmcoe2tpbmQ6IFwiZWxlbWVudFwiLCB0YXJnZXQ6IGVsfSlcbiAgICB9XG5cbiAgICBpZih0eXBlb2YgKHBheWxvYWQuY2lkKSAhPT0gXCJudW1iZXJcIil7IGRlbGV0ZSBwYXlsb2FkLmNpZCB9XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubGl2ZVNvY2tldC53cmFwUHVzaCh0aGlzLCB7dGltZW91dDogdHJ1ZX0sICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbm5lbC5wdXNoKGV2ZW50LCBwYXlsb2FkLCBQVVNIX1RJTUVPVVQpLnJlY2VpdmUoXCJva1wiLCByZXNwID0+IHtcbiAgICAgICAgICBsZXQgZmluaXNoID0gKGhvb2tSZXBseSkgPT4ge1xuICAgICAgICAgICAgaWYocmVzcC5yZWRpcmVjdCl7IHRoaXMub25SZWRpcmVjdChyZXNwLnJlZGlyZWN0KSB9XG4gICAgICAgICAgICBpZihyZXNwLmxpdmVfcGF0Y2gpeyB0aGlzLm9uTGl2ZVBhdGNoKHJlc3AubGl2ZV9wYXRjaCkgfVxuICAgICAgICAgICAgaWYocmVzcC5saXZlX3JlZGlyZWN0KXsgdGhpcy5vbkxpdmVSZWRpcmVjdChyZXNwLmxpdmVfcmVkaXJlY3QpIH1cbiAgICAgICAgICAgIG9uTG9hZGluZ0RvbmUoKVxuICAgICAgICAgICAgb25SZXBseShyZXNwLCBob29rUmVwbHkpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKHJlc3AuZGlmZil7XG4gICAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuYXBwbHlEaWZmKFwidXBkYXRlXCIsIHJlc3AuZGlmZiwgKHtkaWZmLCByZXBseSwgZXZlbnRzfSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHJlZiAhPT0gbnVsbCl7IHRoaXMudW5kb1JlZnMocmVmKSB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoZGlmZiwgZXZlbnRzKVxuICAgICAgICAgICAgICAgIGZpbmlzaChyZXBseSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKHJlZiAhPT0gbnVsbCl7IHRoaXMudW5kb1JlZnMocmVmKSB9XG4gICAgICAgICAgICBmaW5pc2gobnVsbClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIClcbiAgfVxuXG4gIHVuZG9SZWZzKHJlZil7XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9IC8vIGV4aXQgaWYgZXh0ZXJuYWwgZm9ybSB0cmlnZ2VyZWRcblxuICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHtQSFhfUkVGX1NSQ309XCIke3RoaXMuaWR9XCJdWyR7UEhYX1JFRn09XCIke3JlZn1cIl1gLCBlbCA9PiB7XG4gICAgICBsZXQgZGlzYWJsZWRWYWwgPSBlbC5nZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVEKVxuICAgICAgLy8gcmVtb3ZlIHJlZnNcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVGKVxuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUZfU1JDKVxuICAgICAgLy8gcmVzdG9yZSBpbnB1dHNcbiAgICAgIGlmKGVsLmdldEF0dHJpYnV0ZShQSFhfUkVBRE9OTFkpICE9PSBudWxsKXtcbiAgICAgICAgZWwucmVhZE9ubHkgPSBmYWxzZVxuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1JFQURPTkxZKVxuICAgICAgfVxuICAgICAgaWYoZGlzYWJsZWRWYWwgIT09IG51bGwpe1xuICAgICAgICBlbC5kaXNhYmxlZCA9IGRpc2FibGVkVmFsID09PSBcInRydWVcIiA/IHRydWUgOiBmYWxzZVxuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX0RJU0FCTEVEKVxuICAgICAgfVxuICAgICAgLy8gcmVtb3ZlIGNsYXNzZXNcbiAgICAgIFBIWF9FVkVOVF9DTEFTU0VTLmZvckVhY2goY2xhc3NOYW1lID0+IERPTS5yZW1vdmVDbGFzcyhlbCwgY2xhc3NOYW1lKSlcbiAgICAgIC8vIHJlc3RvcmUgZGlzYWJsZXNcbiAgICAgIGxldCBkaXNhYmxlUmVzdG9yZSA9IGVsLmdldEF0dHJpYnV0ZShQSFhfRElTQUJMRV9XSVRIX1JFU1RPUkUpXG4gICAgICBpZihkaXNhYmxlUmVzdG9yZSAhPT0gbnVsbCl7XG4gICAgICAgIGVsLmlubmVyVGV4dCA9IGRpc2FibGVSZXN0b3JlXG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfRElTQUJMRV9XSVRIX1JFU1RPUkUpXG4gICAgICB9XG4gICAgICBsZXQgdG9FbCA9IERPTS5wcml2YXRlKGVsLCBQSFhfUkVGKVxuICAgICAgaWYodG9FbCl7XG4gICAgICAgIGxldCBob29rID0gdGhpcy50cmlnZ2VyQmVmb3JlVXBkYXRlSG9vayhlbCwgdG9FbClcbiAgICAgICAgRE9NUGF0Y2gucGF0Y2hFbChlbCwgdG9FbCwgdGhpcy5saXZlU29ja2V0LmdldEFjdGl2ZUVsZW1lbnQoKSlcbiAgICAgICAgaWYoaG9vayl7IGhvb2suX191cGRhdGVkKCkgfVxuICAgICAgICBET00uZGVsZXRlUHJpdmF0ZShlbCwgUEhYX1JFRilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgcHV0UmVmKGVsZW1lbnRzLCBldmVudCwgb3B0cyA9IHt9KXtcbiAgICBsZXQgbmV3UmVmID0gdGhpcy5yZWYrK1xuICAgIGxldCBkaXNhYmxlV2l0aCA9IHRoaXMuYmluZGluZyhQSFhfRElTQUJMRV9XSVRIKVxuICAgIGlmKG9wdHMubG9hZGluZyl7IGVsZW1lbnRzID0gZWxlbWVudHMuY29uY2F0KERPTS5hbGwoZG9jdW1lbnQsIG9wdHMubG9hZGluZykpfVxuXG4gICAgZWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKGBwaHgtJHtldmVudH0tbG9hZGluZ2ApXG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoUEhYX1JFRiwgbmV3UmVmKVxuICAgICAgZWwuc2V0QXR0cmlidXRlKFBIWF9SRUZfU1JDLCB0aGlzLmVsLmlkKVxuICAgICAgbGV0IGRpc2FibGVUZXh0ID0gZWwuZ2V0QXR0cmlidXRlKGRpc2FibGVXaXRoKVxuICAgICAgaWYoZGlzYWJsZVRleHQgIT09IG51bGwpe1xuICAgICAgICBpZighZWwuZ2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSkpe1xuICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShQSFhfRElTQUJMRV9XSVRIX1JFU1RPUkUsIGVsLmlubmVyVGV4dClcbiAgICAgICAgfVxuICAgICAgICBpZihkaXNhYmxlVGV4dCAhPT0gXCJcIil7IGVsLmlubmVyVGV4dCA9IGRpc2FibGVUZXh0IH1cbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIilcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBbbmV3UmVmLCBlbGVtZW50cywgb3B0c11cbiAgfVxuXG4gIGNvbXBvbmVudElEKGVsKXtcbiAgICBsZXQgY2lkID0gZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKVxuICAgIHJldHVybiBjaWQgPyBwYXJzZUludChjaWQpIDogbnVsbFxuICB9XG5cbiAgdGFyZ2V0Q29tcG9uZW50SUQodGFyZ2V0LCB0YXJnZXRDdHgsIG9wdHMgPSB7fSl7XG4gICAgaWYoaXNDaWQodGFyZ2V0Q3R4KSl7IHJldHVybiB0YXJnZXRDdHggfVxuXG4gICAgbGV0IGNpZE9yU2VsZWN0b3IgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcInRhcmdldFwiKSlcbiAgICBpZihpc0NpZChjaWRPclNlbGVjdG9yKSl7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoY2lkT3JTZWxlY3RvcilcbiAgICB9IGVsc2UgaWYodGFyZ2V0Q3R4ICYmIChjaWRPclNlbGVjdG9yICE9PSBudWxsIHx8IG9wdHMudGFyZ2V0KSl7XG4gICAgICByZXR1cm4gdGhpcy5jbG9zZXN0Q29tcG9uZW50SUQodGFyZ2V0Q3R4KVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGNsb3Nlc3RDb21wb25lbnRJRCh0YXJnZXRDdHgpe1xuICAgIGlmKGlzQ2lkKHRhcmdldEN0eCkpe1xuICAgICAgcmV0dXJuIHRhcmdldEN0eFxuICAgIH0gZWxzZSBpZih0YXJnZXRDdHgpe1xuICAgICAgcmV0dXJuIG1heWJlKHRhcmdldEN0eC5jbG9zZXN0KGBbJHtQSFhfQ09NUE9ORU5UfV1gKSwgZWwgPT4gdGhpcy5vd25zRWxlbWVudChlbCkgJiYgdGhpcy5jb21wb25lbnRJRChlbCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgcHVzaEhvb2tFdmVudChlbCwgdGFyZ2V0Q3R4LCBldmVudCwgcGF5bG9hZCwgb25SZXBseSl7XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7XG4gICAgICB0aGlzLmxvZyhcImhvb2tcIiwgKCkgPT4gW1widW5hYmxlIHRvIHB1c2ggaG9vayBldmVudC4gTGl2ZVZpZXcgbm90IGNvbm5lY3RlZFwiLCBldmVudCwgcGF5bG9hZF0pXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgbGV0IFtyZWYsIGVscywgb3B0c10gPSB0aGlzLnB1dFJlZihbZWxdLCBcImhvb2tcIilcbiAgICB0aGlzLnB1c2hXaXRoUmVwbHkoKCkgPT4gW3JlZiwgZWxzLCBvcHRzXSwgXCJldmVudFwiLCB7XG4gICAgICB0eXBlOiBcImhvb2tcIixcbiAgICAgIGV2ZW50OiBldmVudCxcbiAgICAgIHZhbHVlOiBwYXlsb2FkLFxuICAgICAgY2lkOiB0aGlzLmNsb3Nlc3RDb21wb25lbnRJRCh0YXJnZXRDdHgpXG4gICAgfSwgKHJlc3AsIHJlcGx5KSA9PiBvblJlcGx5KHJlcGx5LCByZWYpKVxuXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgZXh0cmFjdE1ldGEoZWwsIG1ldGEsIHZhbHVlKXtcbiAgICBsZXQgcHJlZml4ID0gdGhpcy5iaW5kaW5nKFwidmFsdWUtXCIpXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGVsLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspe1xuICAgICAgaWYoIW1ldGEpeyBtZXRhID0ge30gfVxuICAgICAgbGV0IG5hbWUgPSBlbC5hdHRyaWJ1dGVzW2ldLm5hbWVcbiAgICAgIGlmKG5hbWUuc3RhcnRzV2l0aChwcmVmaXgpKXsgbWV0YVtuYW1lLnJlcGxhY2UocHJlZml4LCBcIlwiKV0gPSBlbC5nZXRBdHRyaWJ1dGUobmFtZSkgfVxuICAgIH1cbiAgICBpZihlbC52YWx1ZSAhPT0gdW5kZWZpbmVkICYmICEoZWwgaW5zdGFuY2VvZiBIVE1MRm9ybUVsZW1lbnQpKXtcbiAgICAgIGlmKCFtZXRhKXsgbWV0YSA9IHt9IH1cbiAgICAgIG1ldGEudmFsdWUgPSBlbC52YWx1ZVxuXG4gICAgICBpZihlbC50YWdOYW1lID09PSBcIklOUFVUXCIgJiYgQ0hFQ0tBQkxFX0lOUFVUUy5pbmRleE9mKGVsLnR5cGUpID49IDAgJiYgIWVsLmNoZWNrZWQpe1xuICAgICAgICBkZWxldGUgbWV0YS52YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZih2YWx1ZSl7XG4gICAgICBpZighbWV0YSl7IG1ldGEgPSB7fSB9XG4gICAgICBmb3IobGV0IGtleSBpbiB2YWx1ZSl7IG1ldGFba2V5XSA9IHZhbHVlW2tleV0gfVxuICAgIH1cbiAgICByZXR1cm4gbWV0YVxuICB9XG5cblxuICBwdXNoRXZlbnQodHlwZSwgZWwsIHRhcmdldEN0eCwgcGh4RXZlbnQsIG1ldGEsIG9wdHMgPSB7fSwgb25SZXBseSl7XG4gICAgdGhpcy5wdXNoV2l0aFJlcGx5KCgpID0+IHRoaXMucHV0UmVmKFtlbF0sIHR5cGUsIG9wdHMpLCBcImV2ZW50XCIsIHtcbiAgICAgIHR5cGU6IHR5cGUsXG4gICAgICBldmVudDogcGh4RXZlbnQsXG4gICAgICB2YWx1ZTogdGhpcy5leHRyYWN0TWV0YShlbCwgbWV0YSwgb3B0cy52YWx1ZSksXG4gICAgICBjaWQ6IHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoZWwsIHRhcmdldEN0eCwgb3B0cylcbiAgICB9LCAocmVzcCwgcmVwbHkpID0+IG9uUmVwbHkgJiYgb25SZXBseShyZXBseSkpXG4gIH1cblxuICBwdXNoRmlsZVByb2dyZXNzKGZpbGVFbCwgZW50cnlSZWYsIHByb2dyZXNzLCBvblJlcGx5ID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIHRoaXMubGl2ZVNvY2tldC53aXRoaW5Pd25lcnMoZmlsZUVsLmZvcm0sICh2aWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIHZpZXcucHVzaFdpdGhSZXBseShudWxsLCBcInByb2dyZXNzXCIsIHtcbiAgICAgICAgZXZlbnQ6IGZpbGVFbC5nZXRBdHRyaWJ1dGUodmlldy5iaW5kaW5nKFBIWF9QUk9HUkVTUykpLFxuICAgICAgICByZWY6IGZpbGVFbC5nZXRBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpLFxuICAgICAgICBlbnRyeV9yZWY6IGVudHJ5UmVmLFxuICAgICAgICBwcm9ncmVzczogcHJvZ3Jlc3MsXG4gICAgICAgIGNpZDogdmlldy50YXJnZXRDb21wb25lbnRJRChmaWxlRWwuZm9ybSwgdGFyZ2V0Q3R4KVxuICAgICAgfSwgb25SZXBseSlcbiAgICB9KVxuICB9XG5cbiAgcHVzaElucHV0KGlucHV0RWwsIHRhcmdldEN0eCwgZm9yY2VDaWQsIHBoeEV2ZW50LCBvcHRzLCBjYWxsYmFjayl7XG4gICAgbGV0IHVwbG9hZHNcbiAgICBsZXQgY2lkID0gaXNDaWQoZm9yY2VDaWQpID8gZm9yY2VDaWQgOiB0aGlzLnRhcmdldENvbXBvbmVudElEKGlucHV0RWwuZm9ybSwgdGFyZ2V0Q3R4KVxuICAgIGxldCByZWZHZW5lcmF0b3IgPSAoKSA9PiB0aGlzLnB1dFJlZihbaW5wdXRFbCwgaW5wdXRFbC5mb3JtXSwgXCJjaGFuZ2VcIiwgb3B0cylcbiAgICBsZXQgZm9ybURhdGFcbiAgICBsZXQgbWV0YSAgPSB0aGlzLmV4dHJhY3RNZXRhKGlucHV0RWwuZm9ybSlcbiAgICBpZihpbnB1dEVsLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIikpKXtcbiAgICAgIGZvcm1EYXRhID0gc2VyaWFsaXplRm9ybShpbnB1dEVsLmZvcm0sIHtfdGFyZ2V0OiBvcHRzLl90YXJnZXQsIC4uLm1ldGF9LCBbaW5wdXRFbC5uYW1lXSlcbiAgICB9IGVsc2Uge1xuICAgICAgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGlucHV0RWwuZm9ybSwge190YXJnZXQ6IG9wdHMuX3RhcmdldCwgLi4ubWV0YX0pXG4gICAgfVxuICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGlucHV0RWwpICYmIGlucHV0RWwuZmlsZXMgJiYgaW5wdXRFbC5maWxlcy5sZW5ndGggPiAwKXtcbiAgICAgIExpdmVVcGxvYWRlci50cmFja0ZpbGVzKGlucHV0RWwsIEFycmF5LmZyb20oaW5wdXRFbC5maWxlcykpXG4gICAgfVxuICAgIHVwbG9hZHMgPSBMaXZlVXBsb2FkZXIuc2VyaWFsaXplVXBsb2FkcyhpbnB1dEVsKVxuXG4gICAgbGV0IGV2ZW50ID0ge1xuICAgICAgdHlwZTogXCJmb3JtXCIsXG4gICAgICBldmVudDogcGh4RXZlbnQsXG4gICAgICB2YWx1ZTogZm9ybURhdGEsXG4gICAgICB1cGxvYWRzOiB1cGxvYWRzLFxuICAgICAgY2lkOiBjaWRcbiAgICB9XG4gICAgdGhpcy5wdXNoV2l0aFJlcGx5KHJlZkdlbmVyYXRvciwgXCJldmVudFwiLCBldmVudCwgcmVzcCA9PiB7XG4gICAgICBET00uc2hvd0Vycm9yKGlucHV0RWwsIHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9GRUVEQkFDS19GT1IpKVxuICAgICAgaWYoRE9NLmlzVXBsb2FkSW5wdXQoaW5wdXRFbCkgJiYgRE9NLmlzQXV0b1VwbG9hZChpbnB1dEVsKSl7XG4gICAgICAgIGlmKExpdmVVcGxvYWRlci5maWxlc0F3YWl0aW5nUHJlZmxpZ2h0KGlucHV0RWwpLmxlbmd0aCA+IDApe1xuICAgICAgICAgIGxldCBbcmVmLCBfZWxzXSA9IHJlZkdlbmVyYXRvcigpXG4gICAgICAgICAgdGhpcy51cGxvYWRGaWxlcyhpbnB1dEVsLmZvcm0sIHRhcmdldEN0eCwgcmVmLCBjaWQsIChfdXBsb2FkcykgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcClcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckF3YWl0aW5nU3VibWl0KGlucHV0RWwuZm9ybSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICB0cmlnZ2VyQXdhaXRpbmdTdWJtaXQoZm9ybUVsKXtcbiAgICBsZXQgYXdhaXRpbmdTdWJtaXQgPSB0aGlzLmdldFNjaGVkdWxlZFN1Ym1pdChmb3JtRWwpXG4gICAgaWYoYXdhaXRpbmdTdWJtaXQpe1xuICAgICAgbGV0IFtfZWwsIF9yZWYsIF9vcHRzLCBjYWxsYmFja10gPSBhd2FpdGluZ1N1Ym1pdFxuICAgICAgdGhpcy5jYW5jZWxTdWJtaXQoZm9ybUVsKVxuICAgICAgY2FsbGJhY2soKVxuICAgIH1cbiAgfVxuXG4gIGdldFNjaGVkdWxlZFN1Ym1pdChmb3JtRWwpe1xuICAgIHJldHVybiB0aGlzLmZvcm1TdWJtaXRzLmZpbmQoKFtlbCwgX3JlZiwgX29wdHMsIF9jYWxsYmFja10pID0+IGVsLmlzU2FtZU5vZGUoZm9ybUVsKSlcbiAgfVxuXG4gIHNjaGVkdWxlU3VibWl0KGZvcm1FbCwgcmVmLCBvcHRzLCBjYWxsYmFjayl7XG4gICAgaWYodGhpcy5nZXRTY2hlZHVsZWRTdWJtaXQoZm9ybUVsKSl7IHJldHVybiB0cnVlIH1cbiAgICB0aGlzLmZvcm1TdWJtaXRzLnB1c2goW2Zvcm1FbCwgcmVmLCBvcHRzLCBjYWxsYmFja10pXG4gIH1cblxuICBjYW5jZWxTdWJtaXQoZm9ybUVsKXtcbiAgICB0aGlzLmZvcm1TdWJtaXRzID0gdGhpcy5mb3JtU3VibWl0cy5maWx0ZXIoKFtlbCwgcmVmLCBfY2FsbGJhY2tdKSA9PiB7XG4gICAgICBpZihlbC5pc1NhbWVOb2RlKGZvcm1FbCkpe1xuICAgICAgICB0aGlzLnVuZG9SZWZzKHJlZilcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBkaXNhYmxlRm9ybShmb3JtRWwsIG9wdHMgPSB7fSl7XG4gICAgbGV0IGZpbHRlcklnbm9yZWQgPSBlbCA9PiB7XG4gICAgICBsZXQgdXNlcklnbm9yZWQgPSBjbG9zZXN0UGh4QmluZGluZyhlbCwgYCR7dGhpcy5iaW5kaW5nKFBIWF9VUERBVEUpfT1pZ25vcmVgLCBlbC5mb3JtKVxuICAgICAgcmV0dXJuICEodXNlcklnbm9yZWQgfHwgY2xvc2VzdFBoeEJpbmRpbmcoZWwsIFwiZGF0YS1waHgtdXBkYXRlPWlnbm9yZVwiLCBlbC5mb3JtKSlcbiAgICB9XG4gICAgbGV0IGZpbHRlckRpc2FibGVzID0gZWwgPT4ge1xuICAgICAgcmV0dXJuIGVsLmhhc0F0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX0RJU0FCTEVfV0lUSCkpXG4gICAgfVxuICAgIGxldCBmaWx0ZXJCdXR0b24gPSBlbCA9PiBlbC50YWdOYW1lID09IFwiQlVUVE9OXCJcblxuICAgIGxldCBmaWx0ZXJJbnB1dCA9IGVsID0+IFtcIklOUFVUXCIsIFwiVEVYVEFSRUFcIiwgXCJTRUxFQ1RcIl0uaW5jbHVkZXMoZWwudGFnTmFtZSlcblxuICAgIGxldCBmb3JtRWxlbWVudHMgPSBBcnJheS5mcm9tKGZvcm1FbC5lbGVtZW50cylcbiAgICBsZXQgZGlzYWJsZXMgPSBmb3JtRWxlbWVudHMuZmlsdGVyKGZpbHRlckRpc2FibGVzKVxuICAgIGxldCBidXR0b25zID0gZm9ybUVsZW1lbnRzLmZpbHRlcihmaWx0ZXJCdXR0b24pLmZpbHRlcihmaWx0ZXJJZ25vcmVkKVxuICAgIGxldCBpbnB1dHMgPSBmb3JtRWxlbWVudHMuZmlsdGVyKGZpbHRlcklucHV0KS5maWx0ZXIoZmlsdGVySWdub3JlZClcblxuICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZShQSFhfRElTQUJMRUQsIGJ1dHRvbi5kaXNhYmxlZClcbiAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICB9KVxuICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShQSFhfUkVBRE9OTFksIGlucHV0LnJlYWRPbmx5KVxuICAgICAgaW5wdXQucmVhZE9ubHkgPSB0cnVlXG4gICAgICBpZihpbnB1dC5maWxlcyl7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShQSFhfRElTQUJMRUQsIGlucHV0LmRpc2FibGVkKVxuICAgICAgICBpbnB1dC5kaXNhYmxlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9KVxuICAgIGZvcm1FbC5zZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9QQUdFX0xPQURJTkcpLCBcIlwiKVxuICAgIHJldHVybiB0aGlzLnB1dFJlZihbZm9ybUVsXS5jb25jYXQoZGlzYWJsZXMpLmNvbmNhdChidXR0b25zKS5jb25jYXQoaW5wdXRzKSwgXCJzdWJtaXRcIiwgb3B0cylcbiAgfVxuXG4gIHB1c2hGb3JtU3VibWl0KGZvcm1FbCwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgc3VibWl0dGVyLCBvcHRzLCBvblJlcGx5KXtcbiAgICBsZXQgcmVmR2VuZXJhdG9yID0gKCkgPT4gdGhpcy5kaXNhYmxlRm9ybShmb3JtRWwsIG9wdHMpXG4gICAgbGV0IGNpZCA9IHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoZm9ybUVsLCB0YXJnZXRDdHgpXG4gICAgaWYoTGl2ZVVwbG9hZGVyLmhhc1VwbG9hZHNJblByb2dyZXNzKGZvcm1FbCkpe1xuICAgICAgbGV0IFtyZWYsIF9lbHNdID0gcmVmR2VuZXJhdG9yKClcbiAgICAgIGxldCBwdXNoID0gKCkgPT4gdGhpcy5wdXNoRm9ybVN1Ym1pdChmb3JtRWwsIHN1Ym1pdHRlciwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgb3B0cywgb25SZXBseSlcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlU3VibWl0KGZvcm1FbCwgcmVmLCBvcHRzLCBwdXNoKVxuICAgIH0gZWxzZSBpZihMaXZlVXBsb2FkZXIuaW5wdXRzQXdhaXRpbmdQcmVmbGlnaHQoZm9ybUVsKS5sZW5ndGggPiAwKXtcbiAgICAgIGxldCBbcmVmLCBlbHNdID0gcmVmR2VuZXJhdG9yKClcbiAgICAgIGxldCBwcm94eVJlZkdlbiA9ICgpID0+IFtyZWYsIGVscywgb3B0c11cbiAgICAgIHRoaXMudXBsb2FkRmlsZXMoZm9ybUVsLCB0YXJnZXRDdHgsIHJlZiwgY2lkLCAoX3VwbG9hZHMpID0+IHtcbiAgICAgICAgbGV0IG1ldGEgPSB0aGlzLmV4dHJhY3RNZXRhKGZvcm1FbClcbiAgICAgICAgbGV0IGZvcm1EYXRhID0gc2VyaWFsaXplRm9ybShmb3JtRWwsIHtzdWJtaXR0ZXIsIC4uLm1ldGF9KVxuICAgICAgICB0aGlzLnB1c2hXaXRoUmVwbHkocHJveHlSZWZHZW4sIFwiZXZlbnRcIiwge1xuICAgICAgICAgIHR5cGU6IFwiZm9ybVwiLFxuICAgICAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgICAgICB2YWx1ZTogZm9ybURhdGEsXG4gICAgICAgICAgY2lkOiBjaWRcbiAgICAgICAgfSwgb25SZXBseSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmKCEoZm9ybUVsLmhhc0F0dHJpYnV0ZShQSFhfUkVGKSAmJiBmb3JtRWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwicGh4LXN1Ym1pdC1sb2FkaW5nXCIpKSl7XG4gICAgICBsZXQgbWV0YSA9IHRoaXMuZXh0cmFjdE1ldGEoZm9ybUVsKVxuICAgICAgbGV0IGZvcm1EYXRhID0gc2VyaWFsaXplRm9ybShmb3JtRWwsIHtzdWJtaXR0ZXIsIC4uLm1ldGF9KVxuICAgICAgdGhpcy5wdXNoV2l0aFJlcGx5KHJlZkdlbmVyYXRvciwgXCJldmVudFwiLCB7XG4gICAgICAgIHR5cGU6IFwiZm9ybVwiLFxuICAgICAgICBldmVudDogcGh4RXZlbnQsXG4gICAgICAgIHZhbHVlOiBmb3JtRGF0YSxcbiAgICAgICAgY2lkOiBjaWRcbiAgICAgIH0sIG9uUmVwbHkpXG4gICAgfVxuICB9XG5cbiAgdXBsb2FkRmlsZXMoZm9ybUVsLCB0YXJnZXRDdHgsIHJlZiwgY2lkLCBvbkNvbXBsZXRlKXtcbiAgICBsZXQgam9pbkNvdW50QXRVcGxvYWQgPSB0aGlzLmpvaW5Db3VudFxuICAgIGxldCBpbnB1dEVscyA9IExpdmVVcGxvYWRlci5hY3RpdmVGaWxlSW5wdXRzKGZvcm1FbClcbiAgICBsZXQgbnVtRmlsZUlucHV0c0luUHJvZ3Jlc3MgPSBpbnB1dEVscy5sZW5ndGhcblxuICAgIC8vIGdldCBlYWNoIGZpbGUgaW5wdXRcbiAgICBpbnB1dEVscy5mb3JFYWNoKGlucHV0RWwgPT4ge1xuICAgICAgbGV0IHVwbG9hZGVyID0gbmV3IExpdmVVcGxvYWRlcihpbnB1dEVsLCB0aGlzLCAoKSA9PiB7XG4gICAgICAgIG51bUZpbGVJbnB1dHNJblByb2dyZXNzLS1cbiAgICAgICAgaWYobnVtRmlsZUlucHV0c0luUHJvZ3Jlc3MgPT09IDApeyBvbkNvbXBsZXRlKCkgfVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMudXBsb2FkZXJzW2lucHV0RWxdID0gdXBsb2FkZXJcbiAgICAgIGxldCBlbnRyaWVzID0gdXBsb2FkZXIuZW50cmllcygpLm1hcChlbnRyeSA9PiBlbnRyeS50b1ByZWZsaWdodFBheWxvYWQoKSlcblxuICAgICAgbGV0IHBheWxvYWQgPSB7XG4gICAgICAgIHJlZjogaW5wdXRFbC5nZXRBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpLFxuICAgICAgICBlbnRyaWVzOiBlbnRyaWVzLFxuICAgICAgICBjaWQ6IHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoaW5wdXRFbC5mb3JtLCB0YXJnZXRDdHgpXG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9nKFwidXBsb2FkXCIsICgpID0+IFtcInNlbmRpbmcgcHJlZmxpZ2h0IHJlcXVlc3RcIiwgcGF5bG9hZF0pXG5cbiAgICAgIHRoaXMucHVzaFdpdGhSZXBseShudWxsLCBcImFsbG93X3VwbG9hZFwiLCBwYXlsb2FkLCByZXNwID0+IHtcbiAgICAgICAgdGhpcy5sb2coXCJ1cGxvYWRcIiwgKCkgPT4gW1wiZ290IHByZWZsaWdodCByZXNwb25zZVwiLCByZXNwXSlcbiAgICAgICAgaWYocmVzcC5lcnJvcil7XG4gICAgICAgICAgdGhpcy51bmRvUmVmcyhyZWYpXG4gICAgICAgICAgbGV0IFtlbnRyeV9yZWYsIHJlYXNvbl0gPSByZXNwLmVycm9yXG4gICAgICAgICAgdGhpcy5sb2coXCJ1cGxvYWRcIiwgKCkgPT4gW2BlcnJvciBmb3IgZW50cnkgJHtlbnRyeV9yZWZ9YCwgcmVhc29uXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgb25FcnJvciA9IChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaGFubmVsLm9uRXJyb3IoKCkgPT4ge1xuICAgICAgICAgICAgICBpZih0aGlzLmpvaW5Db3VudCA9PT0gam9pbkNvdW50QXRVcGxvYWQpeyBjYWxsYmFjaygpIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwbG9hZGVyLmluaXRBZGFwdGVyVXBsb2FkKHJlc3AsIG9uRXJyb3IsIHRoaXMubGl2ZVNvY2tldClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgZGlzcGF0Y2hVcGxvYWRzKHRhcmdldEN0eCwgbmFtZSwgZmlsZXNPckJsb2JzKXtcbiAgICBsZXQgdGFyZ2V0RWxlbWVudCA9IHRoaXMudGFyZ2V0Q3R4RWxlbWVudCh0YXJnZXRDdHgpIHx8IHRoaXMuZWw7XG4gICAgbGV0IGlucHV0cyA9IERPTS5maW5kVXBsb2FkSW5wdXRzKHRhcmdldEVsZW1lbnQpLmZpbHRlcihlbCA9PiBlbC5uYW1lID09PSBuYW1lKVxuICAgIGlmKGlucHV0cy5sZW5ndGggPT09IDApeyBsb2dFcnJvcihgbm8gbGl2ZSBmaWxlIGlucHV0cyBmb3VuZCBtYXRjaGluZyB0aGUgbmFtZSBcIiR7bmFtZX1cImApIH1cbiAgICBlbHNlIGlmKGlucHV0cy5sZW5ndGggPiAxKXsgbG9nRXJyb3IoYGR1cGxpY2F0ZSBsaXZlIGZpbGUgaW5wdXRzIGZvdW5kIG1hdGNoaW5nIHRoZSBuYW1lIFwiJHtuYW1lfVwiYCkgfVxuICAgIGVsc2UgeyBET00uZGlzcGF0Y2hFdmVudChpbnB1dHNbMF0sIFBIWF9UUkFDS19VUExPQURTLCB7ZGV0YWlsOiB7ZmlsZXM6IGZpbGVzT3JCbG9ic319KSB9XG4gIH1cblxuICB0YXJnZXRDdHhFbGVtZW50KHRhcmdldEN0eCkge1xuICAgIGlmKGlzQ2lkKHRhcmdldEN0eCkpe1xuICAgICAgbGV0IFt0YXJnZXRdID0gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdCh0aGlzLmVsLCB0YXJnZXRDdHgpXG4gICAgICByZXR1cm4gdGFyZ2V0XG4gICAgfSBlbHNlIGlmKHRhcmdldEN0eCkge1xuICAgICAgcmV0dXJuIHRhcmdldEN0eFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHB1c2hGb3JtUmVjb3ZlcnkoZm9ybSwgbmV3Q2lkLCBjYWxsYmFjayl7XG4gICAgdGhpcy5saXZlU29ja2V0LndpdGhpbk93bmVycyhmb3JtLCAodmlldywgdGFyZ2V0Q3R4KSA9PiB7XG4gICAgICBsZXQgcGh4Q2hhbmdlID0gdGhpcy5iaW5kaW5nKFwiY2hhbmdlXCIpXG4gICAgICBsZXQgaW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLmVsZW1lbnRzKS5maWx0ZXIoZWwgPT4gRE9NLmlzRm9ybUlucHV0KGVsKSAmJiBlbC5uYW1lICYmICFlbC5oYXNBdHRyaWJ1dGUocGh4Q2hhbmdlKSlcbiAgICAgIGlmKGlucHV0cy5sZW5ndGggPT09IDApeyByZXR1cm4gfVxuXG4gICAgICAvLyB3ZSBtdXN0IGNsZWFyIHRyYWNrZWQgdXBsb2FkcyBiZWZvcmUgcmVjb3ZlcnkgYXMgdGhleSBubyBsb25nZXIgaGF2ZSB2YWxpZCByZWZzXG4gICAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiBpbnB1dC5oYXNBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpICYmIExpdmVVcGxvYWRlci5jbGVhckZpbGVzKGlucHV0KSlcbiAgICAgIGxldCBpbnB1dCA9IGlucHV0cy5maW5kKGVsID0+IGVsLnR5cGUgIT09IFwiaGlkZGVuXCIpIHx8IGlucHV0c1swXVxuXG4gICAgICBsZXQgcGh4RXZlbnQgPSBmb3JtLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX0FVVE9fUkVDT1ZFUikpIHx8IGZvcm0uZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcImNoYW5nZVwiKSlcbiAgICAgIEpTLmV4ZWMoXCJjaGFuZ2VcIiwgcGh4RXZlbnQsIHZpZXcsIGlucHV0LCBbXCJwdXNoXCIsIHtfdGFyZ2V0OiBpbnB1dC5uYW1lLCBuZXdDaWQ6IG5ld0NpZCwgY2FsbGJhY2s6IGNhbGxiYWNrfV0pXG4gICAgfSlcbiAgfVxuXG4gIHB1c2hMaW5rUGF0Y2goaHJlZiwgdGFyZ2V0RWwsIGNhbGxiYWNrKXtcbiAgICBsZXQgbGlua1JlZiA9IHRoaXMubGl2ZVNvY2tldC5zZXRQZW5kaW5nTGluayhocmVmKVxuICAgIGxldCByZWZHZW4gPSB0YXJnZXRFbCA/ICgpID0+IHRoaXMucHV0UmVmKFt0YXJnZXRFbF0sIFwiY2xpY2tcIikgOiBudWxsXG4gICAgbGV0IGZhbGxiYWNrID0gKCkgPT4gdGhpcy5saXZlU29ja2V0LnJlZGlyZWN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICAgIGxldCB1cmwgPSBocmVmLnN0YXJ0c1dpdGgoXCIvXCIpID8gYCR7bG9jYXRpb24ucHJvdG9jb2x9Ly8ke2xvY2F0aW9uLmhvc3R9JHtocmVmfWAgOiBocmVmXG5cbiAgICBsZXQgcHVzaCA9IHRoaXMucHVzaFdpdGhSZXBseShyZWZHZW4sIFwibGl2ZV9wYXRjaFwiLCB7dXJsfSwgcmVzcCA9PiB7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIGlmKHJlc3AubGlua19yZWRpcmVjdCl7XG4gICAgICAgICAgdGhpcy5saXZlU29ja2V0LnJlcGxhY2VNYWluKGhyZWYsIG51bGwsIGNhbGxiYWNrLCBsaW5rUmVmKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmKHRoaXMubGl2ZVNvY2tldC5jb21taXRQZW5kaW5nTGluayhsaW5rUmVmKSl7XG4gICAgICAgICAgICB0aGlzLmhyZWYgPSBocmVmXG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuYXBwbHlQZW5kaW5nVXBkYXRlcygpXG4gICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2sobGlua1JlZilcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgaWYocHVzaCl7XG4gICAgICBwdXNoLnJlY2VpdmUoXCJ0aW1lb3V0XCIsIGZhbGxiYWNrKVxuICAgIH0gZWxzZSB7XG4gICAgICBmYWxsYmFjaygpXG4gICAgfVxuICB9XG5cbiAgZm9ybXNGb3JSZWNvdmVyeShodG1sKXtcbiAgICBpZih0aGlzLmpvaW5Db3VudCA9PT0gMCl7IHJldHVybiBbXSB9XG5cbiAgICBsZXQgcGh4Q2hhbmdlID0gdGhpcy5iaW5kaW5nKFwiY2hhbmdlXCIpXG4gICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuXG4gICAgcmV0dXJuIChcbiAgICAgIERPTS5hbGwodGhpcy5lbCwgYGZvcm1bJHtwaHhDaGFuZ2V9XWApXG4gICAgICAgIC5maWx0ZXIoZm9ybSA9PiBmb3JtLmlkICYmIHRoaXMub3duc0VsZW1lbnQoZm9ybSkpXG4gICAgICAgIC5maWx0ZXIoZm9ybSA9PiBmb3JtLmVsZW1lbnRzLmxlbmd0aCA+IDApXG4gICAgICAgIC5maWx0ZXIoZm9ybSA9PiBmb3JtLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX0FVVE9fUkVDT1ZFUikpICE9PSBcImlnbm9yZVwiKVxuICAgICAgICAubWFwKGZvcm0gPT4ge1xuICAgICAgICAgIC8vIGF0dHJpYnV0ZSBnaXZlbiB2aWEgSlMgbW9kdWxlIG5lZWRzIHRvIGJlIGVzY2FwZWQgYXMgaXQgY29udGFpbnMgdGhlIHN5bWJvbHMgW11cIixcbiAgICAgICAgICAvLyB3aGljaCByZXN1bHQgaW4gYW4gaW52YWxpZCBjc3Mgc2VsZWN0b3Igb3RoZXJ3aXNlLlxuICAgICAgICAgIGNvbnN0IHBoeENoYW5nZVZhbHVlID0gZm9ybS5nZXRBdHRyaWJ1dGUocGh4Q2hhbmdlKS5yZXBsYWNlQWxsKC8oW1xcW1xcXVwiXSkvZywgJ1xcXFwkMScpXG4gICAgICAgICAgbGV0IG5ld0Zvcm0gPSB0ZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoYGZvcm1baWQ9XCIke2Zvcm0uaWR9XCJdWyR7cGh4Q2hhbmdlfT1cIiR7cGh4Q2hhbmdlVmFsdWV9XCJdYClcbiAgICAgICAgICBpZihuZXdGb3JtKXtcbiAgICAgICAgICAgIHJldHVybiBbZm9ybSwgbmV3Rm9ybSwgdGhpcy50YXJnZXRDb21wb25lbnRJRChuZXdGb3JtKV1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFtmb3JtLCBmb3JtLCB0aGlzLnRhcmdldENvbXBvbmVudElEKGZvcm0pXVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmZpbHRlcigoW2Zvcm0sIG5ld0Zvcm0sIG5ld0NpZF0pID0+IG5ld0Zvcm0pXG4gICAgKVxuICB9XG5cbiAgbWF5YmVQdXNoQ29tcG9uZW50c0Rlc3Ryb3llZChkZXN0cm95ZWRDSURzKXtcbiAgICBsZXQgd2lsbERlc3Ryb3lDSURzID0gZGVzdHJveWVkQ0lEcy5maWx0ZXIoY2lkID0+IHtcbiAgICAgIHJldHVybiBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KHRoaXMuZWwsIGNpZCkubGVuZ3RoID09PSAwXG4gICAgfSlcbiAgICBpZih3aWxsRGVzdHJveUNJRHMubGVuZ3RoID4gMCl7XG4gICAgICB0aGlzLnBydW5pbmdDSURzLnB1c2goLi4ud2lsbERlc3Ryb3lDSURzKVxuXG4gICAgICB0aGlzLnB1c2hXaXRoUmVwbHkobnVsbCwgXCJjaWRzX3dpbGxfZGVzdHJveVwiLCB7Y2lkczogd2lsbERlc3Ryb3lDSURzfSwgKCkgPT4ge1xuICAgICAgICAvLyBUaGUgY2lkcyBhcmUgZWl0aGVyIGJhY2sgb24gdGhlIHBhZ2Ugb3IgdGhleSB3aWxsIGJlIGZ1bGx5IHJlbW92ZWQsXG4gICAgICAgIC8vIHNvIHdlIGNhbiByZW1vdmUgdGhlbSBmcm9tIHRoZSBwcnVuaW5nQ0lEcy5cbiAgICAgICAgdGhpcy5wcnVuaW5nQ0lEcyA9IHRoaXMucHJ1bmluZ0NJRHMuZmlsdGVyKGNpZCA9PiB3aWxsRGVzdHJveUNJRHMuaW5kZXhPZihjaWQpICE9PSAtMSlcblxuICAgICAgICAvLyBTZWUgaWYgYW55IG9mIHRoZSBjaWRzIHdlIHdhbnRlZCB0byBkZXN0cm95IHdlcmUgYWRkZWQgYmFjayxcbiAgICAgICAgLy8gaWYgdGhleSB3ZXJlIGFkZGVkIGJhY2ssIHdlIGRvbid0IGFjdHVhbGx5IGRlc3Ryb3kgdGhlbS5cbiAgICAgICAgbGV0IGNvbXBsZXRlbHlEZXN0cm95Q0lEcyA9IHdpbGxEZXN0cm95Q0lEcy5maWx0ZXIoY2lkID0+IHtcbiAgICAgICAgICByZXR1cm4gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdCh0aGlzLmVsLCBjaWQpLmxlbmd0aCA9PT0gMFxuICAgICAgICB9KVxuXG4gICAgICAgIGlmKGNvbXBsZXRlbHlEZXN0cm95Q0lEcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICB0aGlzLnB1c2hXaXRoUmVwbHkobnVsbCwgXCJjaWRzX2Rlc3Ryb3llZFwiLCB7Y2lkczogY29tcGxldGVseURlc3Ryb3lDSURzfSwgKHJlc3ApID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWQucHJ1bmVDSURzKHJlc3AuY2lkcylcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIG93bnNFbGVtZW50KGVsKXtcbiAgICBsZXQgcGFyZW50Vmlld0VsID0gZWwuY2xvc2VzdChQSFhfVklFV19TRUxFQ1RPUilcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKFBIWF9QQVJFTlRfSUQpID09PSB0aGlzLmlkIHx8XG4gICAgICAocGFyZW50Vmlld0VsICYmIHBhcmVudFZpZXdFbC5pZCA9PT0gdGhpcy5pZCkgfHxcbiAgICAgICghcGFyZW50Vmlld0VsICYmIHRoaXMuaXNEZWFkKVxuICB9XG5cbiAgc3VibWl0Rm9ybShmb3JtLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBzdWJtaXR0ZXIsIG9wdHMgPSB7fSl7XG4gICAgRE9NLnB1dFByaXZhdGUoZm9ybSwgUEhYX0hBU19TVUJNSVRURUQsIHRydWUpXG4gICAgbGV0IHBoeEZlZWRiYWNrID0gdGhpcy5saXZlU29ja2V0LmJpbmRpbmcoUEhYX0ZFRURCQUNLX0ZPUilcbiAgICBsZXQgaW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLmVsZW1lbnRzKVxuICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IERPTS5wdXRQcml2YXRlKGlucHV0LCBQSFhfSEFTX1NVQk1JVFRFRCwgdHJ1ZSkpXG4gICAgdGhpcy5saXZlU29ja2V0LmJsdXJBY3RpdmVFbGVtZW50KHRoaXMpXG4gICAgdGhpcy5wdXNoRm9ybVN1Ym1pdChmb3JtLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBzdWJtaXR0ZXIsIG9wdHMsICgpID0+IHtcbiAgICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IERPTS5zaG93RXJyb3IoaW5wdXQsIHBoeEZlZWRiYWNrKSlcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXN0b3JlUHJldmlvdXNseUFjdGl2ZUZvY3VzKClcbiAgICB9KVxuICB9XG5cbiAgYmluZGluZyhraW5kKXsgcmV0dXJuIHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKGtpbmQpIH1cbn1cbiIsICIvKiogSW5pdGlhbGl6ZXMgdGhlIExpdmVTb2NrZXRcbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGVuZFBvaW50IC0gVGhlIHN0cmluZyBXZWJTb2NrZXQgZW5kcG9pbnQsIGllLCBgXCJ3c3M6Ly9leGFtcGxlLmNvbS9saXZlXCJgLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcIi9saXZlXCJgIChpbmhlcml0ZWQgaG9zdCAmIHByb3RvY29sKVxuICogQHBhcmFtIHtQaG9lbml4LlNvY2tldH0gc29ja2V0IC0gdGhlIHJlcXVpcmVkIFBob2VuaXggU29ja2V0IGNsYXNzIGltcG9ydGVkIGZyb20gXCJwaG9lbml4XCIuIEZvciBleGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge1NvY2tldH0gZnJvbSBcInBob2VuaXhcIlxuICogICAgIGltcG9ydCB7TGl2ZVNvY2tldH0gZnJvbSBcInBob2VuaXhfbGl2ZV92aWV3XCJcbiAqICAgICBsZXQgbGl2ZVNvY2tldCA9IG5ldyBMaXZlU29ja2V0KFwiL2xpdmVcIiwgU29ja2V0LCB7Li4ufSlcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHNdIC0gT3B0aW9uYWwgY29uZmlndXJhdGlvbi4gT3V0c2lkZSBvZiBrZXlzIGxpc3RlZCBiZWxvdywgYWxsXG4gKiBjb25maWd1cmF0aW9uIGlzIHBhc3NlZCBkaXJlY3RseSB0byB0aGUgUGhvZW5peCBTb2NrZXQgY29uc3RydWN0b3IuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMuZGVmYXVsdHNdIC0gVGhlIG9wdGlvbmFsIGRlZmF1bHRzIHRvIHVzZSBmb3IgdmFyaW91cyBiaW5kaW5ncyxcbiAqIHN1Y2ggYXMgYHBoeC1kZWJvdW5jZWAuIFN1cHBvcnRzIHRoZSBmb2xsb3dpbmcga2V5czpcbiAqXG4gKiAgIC0gZGVib3VuY2UgLSB0aGUgbWlsbGlzZWNvbmQgcGh4LWRlYm91bmNlIHRpbWUuIERlZmF1bHRzIDMwMFxuICogICAtIHRocm90dGxlIC0gdGhlIG1pbGxpc2Vjb25kIHBoeC10aHJvdHRsZSB0aW1lLiBEZWZhdWx0cyAzMDBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5wYXJhbXNdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIGZvciBwYXNzaW5nIGNvbm5lY3QgcGFyYW1zLlxuICogVGhlIGZ1bmN0aW9uIHJlY2VpdmVzIHRoZSBlbGVtZW50IGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIExpdmVWaWV3LiBGb3IgZXhhbXBsZTpcbiAqXG4gKiAgICAgKGVsKSA9PiB7dmlldzogZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1teS12aWV3LW5hbWVcIiwgdG9rZW46IHdpbmRvdy5teVRva2VufVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5iaW5kaW5nUHJlZml4XSAtIFRoZSBvcHRpb25hbCBwcmVmaXggdG8gdXNlIGZvciBhbGwgcGh4IERPTSBhbm5vdGF0aW9ucy5cbiAqIERlZmF1bHRzIHRvIFwicGh4LVwiLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmhvb2tzXSAtIFRoZSBvcHRpb25hbCBvYmplY3QgZm9yIHJlZmVyZW5jaW5nIExpdmVWaWV3IGhvb2sgY2FsbGJhY2tzLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLnVwbG9hZGVyc10gLSBUaGUgb3B0aW9uYWwgb2JqZWN0IGZvciByZWZlcmVuY2luZyBMaXZlVmlldyB1cGxvYWRlciBjYWxsYmFja3MuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLmxvYWRlclRpbWVvdXRdIC0gVGhlIG9wdGlvbmFsIGRlbGF5IGluIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBhcHBseVxuICogbG9hZGluZyBzdGF0ZXMuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLm1heFJlbG9hZHNdIC0gVGhlIG1heGltdW0gcmVsb2FkcyBiZWZvcmUgZW50ZXJpbmcgZmFpbHNhZmUgbW9kZS5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMucmVsb2FkSml0dGVyTWluXSAtIFRoZSBtaW5pbXVtIHRpbWUgYmV0d2VlbiBub3JtYWwgcmVsb2FkIGF0dGVtcHRzLlxuICogQHBhcmFtIHtpbnRlZ2VyfSBbb3B0cy5yZWxvYWRKaXR0ZXJNYXhdIC0gVGhlIG1heGltdW0gdGltZSBiZXR3ZWVuIG5vcm1hbCByZWxvYWQgYXR0ZW1wdHMuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLmZhaWxzYWZlSml0dGVyXSAtIFRoZSB0aW1lIGJldHdlZW4gcmVsb2FkIGF0dGVtcHRzIGluIGZhaWxzYWZlIG1vZGUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy52aWV3TG9nZ2VyXSAtIFRoZSBvcHRpb25hbCBmdW5jdGlvbiB0byBsb2cgZGVidWcgaW5mb3JtYXRpb24uIEZvciBleGFtcGxlOlxuICpcbiAqICAgICAodmlldywga2luZCwgbXNnLCBvYmopID0+IGNvbnNvbGUubG9nKGAke3ZpZXcuaWR9ICR7a2luZH06ICR7bXNnfSAtIGAsIG9iailcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMubWV0YWRhdGFdIC0gVGhlIG9wdGlvbmFsIG9iamVjdCBtYXBwaW5nIGV2ZW50IG5hbWVzIHRvIGZ1bmN0aW9ucyBmb3JcbiAqIHBvcHVsYXRpbmcgZXZlbnQgbWV0YWRhdGEuIEZvciBleGFtcGxlOlxuICpcbiAqICAgICBtZXRhZGF0YToge1xuICogICAgICAgY2xpY2s6IChlLCBlbCkgPT4ge1xuICogICAgICAgICByZXR1cm4ge1xuICogICAgICAgICAgIGN0cmxLZXk6IGUuY3RybEtleSxcbiAqICAgICAgICAgICBtZXRhS2V5OiBlLm1ldGFLZXksXG4gKiAgICAgICAgICAgZGV0YWlsOiBlLmRldGFpbCB8fCAxLFxuICogICAgICAgICB9XG4gKiAgICAgICB9LFxuICogICAgICAga2V5ZG93bjogKGUsIGVsKSA9PiB7XG4gKiAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAga2V5OiBlLmtleSxcbiAqICAgICAgICAgICBjdHJsS2V5OiBlLmN0cmxLZXksXG4gKiAgICAgICAgICAgbWV0YUtleTogZS5tZXRhS2V5LFxuICogICAgICAgICAgIHNoaWZ0S2V5OiBlLnNoaWZ0S2V5XG4gKiAgICAgICAgIH1cbiAqICAgICAgIH1cbiAqICAgICB9XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMuc2Vzc2lvblN0b3JhZ2VdIC0gQW4gb3B0aW9uYWwgU3RvcmFnZSBjb21wYXRpYmxlIG9iamVjdFxuICogVXNlZnVsIHdoZW4gTGl2ZVZpZXcgd29uJ3QgaGF2ZSBhY2Nlc3MgdG8gYHNlc3Npb25TdG9yYWdlYC4gIEZvciBleGFtcGxlLCBUaGlzIGNvdWxkXG4gKiBoYXBwZW4gaWYgYSBzaXRlIGxvYWRzIGEgY3Jvc3MtZG9tYWluIExpdmVWaWV3IGluIGFuIGlmcmFtZS4gIEV4YW1wbGUgdXNhZ2U6XG4gKlxuICogICAgIGNsYXNzIEluTWVtb3J5U3RvcmFnZSB7XG4gKiAgICAgICBjb25zdHJ1Y3RvcigpIHsgdGhpcy5zdG9yYWdlID0ge30gfVxuICogICAgICAgZ2V0SXRlbShrZXlOYW1lKSB7IHJldHVybiB0aGlzLnN0b3JhZ2Vba2V5TmFtZV0gfHwgbnVsbCB9XG4gKiAgICAgICByZW1vdmVJdGVtKGtleU5hbWUpIHsgZGVsZXRlIHRoaXMuc3RvcmFnZVtrZXlOYW1lXSB9XG4gKiAgICAgICBzZXRJdGVtKGtleU5hbWUsIGtleVZhbHVlKSB7IHRoaXMuc3RvcmFnZVtrZXlOYW1lXSA9IGtleVZhbHVlIH1cbiAqICAgICB9XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmxvY2FsU3RvcmFnZV0gLSBBbiBvcHRpb25hbCBTdG9yYWdlIGNvbXBhdGlibGUgb2JqZWN0XG4gKiBVc2VmdWwgZm9yIHdoZW4gTGl2ZVZpZXcgd29uJ3QgaGF2ZSBhY2Nlc3MgdG8gYGxvY2FsU3RvcmFnZWAuXG4gKiBTZWUgYG9wdHMuc2Vzc2lvblN0b3JhZ2VgIGZvciBleGFtcGxlcy5cbiovXG5cbmltcG9ydCB7XG4gIEJJTkRJTkdfUFJFRklYLFxuICBDT05TRUNVVElWRV9SRUxPQURTLFxuICBERUZBVUxUUyxcbiAgRkFJTFNBRkVfSklUVEVSLFxuICBMT0FERVJfVElNRU9VVCxcbiAgTUFYX1JFTE9BRFMsXG4gIFBIWF9ERUJPVU5DRSxcbiAgUEhYX0RST1BfVEFSR0VULFxuICBQSFhfSEFTX0ZPQ1VTRUQsXG4gIFBIWF9LRVksXG4gIFBIWF9MSU5LX1NUQVRFLFxuICBQSFhfTElWRV9MSU5LLFxuICBQSFhfTFZfREVCVUcsXG4gIFBIWF9MVl9MQVRFTkNZX1NJTSxcbiAgUEhYX0xWX1BST0ZJTEUsXG4gIFBIWF9NQUlOLFxuICBQSFhfUEFSRU5UX0lELFxuICBQSFhfVklFV19TRUxFQ1RPUixcbiAgUEhYX1JPT1RfSUQsXG4gIFBIWF9USFJPVFRMRSxcbiAgUEhYX1RSQUNLX1VQTE9BRFMsXG4gIFBIWF9TRVNTSU9OLFxuICBQSFhfRkVFREJBQ0tfRk9SLFxuICBSRUxPQURfSklUVEVSX01JTixcbiAgUkVMT0FEX0pJVFRFUl9NQVgsXG4gIFBIWF9SRUYsXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGNsb25lLFxuICBjbG9zZXN0UGh4QmluZGluZyxcbiAgY2xvc3VyZSxcbiAgZGVidWcsXG4gIGlzT2JqZWN0LFxuICBtYXliZVxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBCcm93c2VyIGZyb20gXCIuL2Jyb3dzZXJcIlxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuaW1wb3J0IEhvb2tzIGZyb20gXCIuL2hvb2tzXCJcbmltcG9ydCBMaXZlVXBsb2FkZXIgZnJvbSBcIi4vbGl2ZV91cGxvYWRlclwiXG5pbXBvcnQgVmlldyBmcm9tIFwiLi92aWV3XCJcbmltcG9ydCBKUyBmcm9tIFwiLi9qc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpdmVTb2NrZXQge1xuICBjb25zdHJ1Y3Rvcih1cmwsIHBoeFNvY2tldCwgb3B0cyA9IHt9KXtcbiAgICB0aGlzLnVubG9hZGVkID0gZmFsc2VcbiAgICBpZighcGh4U29ja2V0IHx8IHBoeFNvY2tldC5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIk9iamVjdFwiKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgXG4gICAgICBhIHBob2VuaXggU29ja2V0IG11c3QgYmUgcHJvdmlkZWQgYXMgdGhlIHNlY29uZCBhcmd1bWVudCB0byB0aGUgTGl2ZVNvY2tldCBjb25zdHJ1Y3Rvci4gRm9yIGV4YW1wbGU6XG5cbiAgICAgICAgICBpbXBvcnQge1NvY2tldH0gZnJvbSBcInBob2VuaXhcIlxuICAgICAgICAgIGltcG9ydCB7TGl2ZVNvY2tldH0gZnJvbSBcInBob2VuaXhfbGl2ZV92aWV3XCJcbiAgICAgICAgICBsZXQgbGl2ZVNvY2tldCA9IG5ldyBMaXZlU29ja2V0KFwiL2xpdmVcIiwgU29ja2V0LCB7Li4ufSlcbiAgICAgIGApXG4gICAgfVxuICAgIHRoaXMuc29ja2V0ID0gbmV3IHBoeFNvY2tldCh1cmwsIG9wdHMpXG4gICAgdGhpcy5iaW5kaW5nUHJlZml4ID0gb3B0cy5iaW5kaW5nUHJlZml4IHx8IEJJTkRJTkdfUFJFRklYXG4gICAgdGhpcy5vcHRzID0gb3B0c1xuICAgIHRoaXMucGFyYW1zID0gY2xvc3VyZShvcHRzLnBhcmFtcyB8fCB7fSlcbiAgICB0aGlzLnZpZXdMb2dnZXIgPSBvcHRzLnZpZXdMb2dnZXJcbiAgICB0aGlzLm1ldGFkYXRhQ2FsbGJhY2tzID0gb3B0cy5tZXRhZGF0YSB8fCB7fVxuICAgIHRoaXMuZGVmYXVsdHMgPSBPYmplY3QuYXNzaWduKGNsb25lKERFRkFVTFRTKSwgb3B0cy5kZWZhdWx0cyB8fCB7fSlcbiAgICB0aGlzLmFjdGl2ZUVsZW1lbnQgPSBudWxsXG4gICAgdGhpcy5wcmV2QWN0aXZlID0gbnVsbFxuICAgIHRoaXMuc2lsZW5jZWQgPSBmYWxzZVxuICAgIHRoaXMubWFpbiA9IG51bGxcbiAgICB0aGlzLm91dGdvaW5nTWFpbkVsID0gbnVsbFxuICAgIHRoaXMuY2xpY2tTdGFydGVkQXRUYXJnZXQgPSBudWxsXG4gICAgdGhpcy5saW5rUmVmID0gMVxuICAgIHRoaXMucm9vdHMgPSB7fVxuICAgIHRoaXMuaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmXG4gICAgdGhpcy5wZW5kaW5nTGluayA9IG51bGxcbiAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IGNsb25lKHdpbmRvdy5sb2NhdGlvbilcbiAgICB0aGlzLmhvb2tzID0gb3B0cy5ob29rcyB8fCB7fVxuICAgIHRoaXMudXBsb2FkZXJzID0gb3B0cy51cGxvYWRlcnMgfHwge31cbiAgICB0aGlzLmxvYWRlclRpbWVvdXQgPSBvcHRzLmxvYWRlclRpbWVvdXQgfHwgTE9BREVSX1RJTUVPVVRcbiAgICB0aGlzLnJlbG9hZFdpdGhKaXR0ZXJUaW1lciA9IG51bGxcbiAgICB0aGlzLm1heFJlbG9hZHMgPSBvcHRzLm1heFJlbG9hZHMgfHwgTUFYX1JFTE9BRFNcbiAgICB0aGlzLnJlbG9hZEppdHRlck1pbiA9IG9wdHMucmVsb2FkSml0dGVyTWluIHx8IFJFTE9BRF9KSVRURVJfTUlOXG4gICAgdGhpcy5yZWxvYWRKaXR0ZXJNYXggPSBvcHRzLnJlbG9hZEppdHRlck1heCB8fCBSRUxPQURfSklUVEVSX01BWFxuICAgIHRoaXMuZmFpbHNhZmVKaXR0ZXIgPSBvcHRzLmZhaWxzYWZlSml0dGVyIHx8IEZBSUxTQUZFX0pJVFRFUlxuICAgIHRoaXMubG9jYWxTdG9yYWdlID0gb3B0cy5sb2NhbFN0b3JhZ2UgfHwgd2luZG93LmxvY2FsU3RvcmFnZVxuICAgIHRoaXMuc2Vzc2lvblN0b3JhZ2UgPSBvcHRzLnNlc3Npb25TdG9yYWdlIHx8IHdpbmRvdy5zZXNzaW9uU3RvcmFnZVxuICAgIHRoaXMuYm91bmRUb3BMZXZlbEV2ZW50cyA9IGZhbHNlXG4gICAgdGhpcy5kb21DYWxsYmFja3MgPSBPYmplY3QuYXNzaWduKHtvbk5vZGVBZGRlZDogY2xvc3VyZSgpLCBvbkJlZm9yZUVsVXBkYXRlZDogY2xvc3VyZSgpfSwgb3B0cy5kb20gfHwge30pXG4gICAgdGhpcy50cmFuc2l0aW9ucyA9IG5ldyBUcmFuc2l0aW9uU2V0KClcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIF9lID0+IHtcbiAgICAgIHRoaXMudW5sb2FkZWQgPSB0cnVlXG4gICAgfSlcbiAgICB0aGlzLnNvY2tldC5vbk9wZW4oKCkgPT4ge1xuICAgICAgaWYodGhpcy5pc1VubG9hZGVkKCkpe1xuICAgICAgICAvLyByZWxvYWQgcGFnZSBpZiBiZWluZyByZXN0b3JlZCBmcm9tIGJhY2svZm9yd2FyZCBjYWNoZSBhbmQgYnJvd3NlciBkb2VzIG5vdCBlbWl0IFwicGFnZXNob3dcIlxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8gcHVibGljXG5cbiAgaXNQcm9maWxlRW5hYmxlZCgpeyByZXR1cm4gdGhpcy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFBIWF9MVl9QUk9GSUxFKSA9PT0gXCJ0cnVlXCIgfVxuXG4gIGlzRGVidWdFbmFibGVkKCl7IHJldHVybiB0aGlzLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEhYX0xWX0RFQlVHKSA9PT0gXCJ0cnVlXCIgfVxuXG4gIGlzRGVidWdEaXNhYmxlZCgpeyByZXR1cm4gdGhpcy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFBIWF9MVl9ERUJVRykgPT09IFwiZmFsc2VcIiB9XG5cbiAgZW5hYmxlRGVidWcoKXsgdGhpcy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFBIWF9MVl9ERUJVRywgXCJ0cnVlXCIpIH1cblxuICBlbmFibGVQcm9maWxpbmcoKXsgdGhpcy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFBIWF9MVl9QUk9GSUxFLCBcInRydWVcIikgfVxuXG4gIGRpc2FibGVEZWJ1ZygpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEhYX0xWX0RFQlVHLCBcImZhbHNlXCIpIH1cblxuICBkaXNhYmxlUHJvZmlsaW5nKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShQSFhfTFZfUFJPRklMRSkgfVxuXG4gIGVuYWJsZUxhdGVuY3lTaW0odXBwZXJCb3VuZE1zKXtcbiAgICB0aGlzLmVuYWJsZURlYnVnKClcbiAgICBjb25zb2xlLmxvZyhcImxhdGVuY3kgc2ltdWxhdG9yIGVuYWJsZWQgZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGlzIGJyb3dzZXIgc2Vzc2lvbi4gQ2FsbCBkaXNhYmxlTGF0ZW5jeVNpbSgpIHRvIGRpc2FibGVcIilcbiAgICB0aGlzLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEhYX0xWX0xBVEVOQ1lfU0lNLCB1cHBlckJvdW5kTXMpXG4gIH1cblxuICBkaXNhYmxlTGF0ZW5jeVNpbSgpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oUEhYX0xWX0xBVEVOQ1lfU0lNKSB9XG5cbiAgZ2V0TGF0ZW5jeVNpbSgpe1xuICAgIGxldCBzdHIgPSB0aGlzLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEhYX0xWX0xBVEVOQ1lfU0lNKVxuICAgIHJldHVybiBzdHIgPyBwYXJzZUludChzdHIpIDogbnVsbFxuICB9XG5cbiAgZ2V0U29ja2V0KCl7IHJldHVybiB0aGlzLnNvY2tldCB9XG5cbiAgY29ubmVjdCgpe1xuICAgIC8vIGVuYWJsZSBkZWJ1ZyBieSBkZWZhdWx0IGlmIG9uIGxvY2FsaG9zdCBhbmQgbm90IGV4cGxpY2l0bHkgZGlzYWJsZWRcbiAgICBpZih3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09IFwibG9jYWxob3N0XCIgJiYgIXRoaXMuaXNEZWJ1Z0Rpc2FibGVkKCkpeyB0aGlzLmVuYWJsZURlYnVnKCkgfVxuICAgIGxldCBkb0Nvbm5lY3QgPSAoKSA9PiB7XG4gICAgICBpZih0aGlzLmpvaW5Sb290Vmlld3MoKSl7XG4gICAgICAgIHRoaXMuYmluZFRvcExldmVsRXZlbnRzKClcbiAgICAgICAgdGhpcy5zb2NrZXQuY29ubmVjdCgpXG4gICAgICB9IGVsc2UgaWYodGhpcy5tYWluKXtcbiAgICAgICAgdGhpcy5zb2NrZXQuY29ubmVjdCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmJpbmRUb3BMZXZlbEV2ZW50cyh7ZGVhZDogdHJ1ZX0pXG4gICAgICB9XG4gICAgICB0aGlzLmpvaW5EZWFkVmlldygpXG4gICAgfVxuICAgIGlmKFtcImNvbXBsZXRlXCIsIFwibG9hZGVkXCIsIFwiaW50ZXJhY3RpdmVcIl0uaW5kZXhPZihkb2N1bWVudC5yZWFkeVN0YXRlKSA+PSAwKXtcbiAgICAgIGRvQ29ubmVjdCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IGRvQ29ubmVjdCgpKVxuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3QoY2FsbGJhY2spe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnJlbG9hZFdpdGhKaXR0ZXJUaW1lcilcbiAgICB0aGlzLnNvY2tldC5kaXNjb25uZWN0KGNhbGxiYWNrKVxuICB9XG5cbiAgcmVwbGFjZVRyYW5zcG9ydCh0cmFuc3BvcnQpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnJlbG9hZFdpdGhKaXR0ZXJUaW1lcilcbiAgICB0aGlzLnNvY2tldC5yZXBsYWNlVHJhbnNwb3J0KHRyYW5zcG9ydClcbiAgICB0aGlzLmNvbm5lY3QoKVxuICB9XG5cbiAgZXhlY0pTKGVsLCBlbmNvZGVkSlMsIGV2ZW50VHlwZSA9IG51bGwpe1xuICAgIHRoaXMub3duZXIoZWwsIHZpZXcgPT4gSlMuZXhlYyhldmVudFR5cGUsIGVuY29kZWRKUywgdmlldywgZWwpKVxuICB9XG5cbiAgLy8gcHJpdmF0ZVxuXG4gIGV4ZWNKU0hvb2tQdXNoKGVsLCBwaHhFdmVudCwgZGF0YSwgY2FsbGJhY2spe1xuICAgIHRoaXMud2l0aGluT3duZXJzKGVsLCB2aWV3ID0+IHtcbiAgICAgIEpTLmV4ZWMoXCJob29rXCIsIHBoeEV2ZW50LCB2aWV3LCBlbCwgW1wicHVzaFwiLCB7ZGF0YSwgY2FsbGJhY2t9XSlcbiAgICB9KVxuICB9XG5cbiAgdW5sb2FkKCl7XG4gICAgaWYodGhpcy51bmxvYWRlZCl7IHJldHVybiB9XG4gICAgaWYodGhpcy5tYWluICYmIHRoaXMuaXNDb25uZWN0ZWQoKSl7IHRoaXMubG9nKHRoaXMubWFpbiwgXCJzb2NrZXRcIiwgKCkgPT4gW1wiZGlzY29ubmVjdCBmb3IgcGFnZSBuYXZcIl0pIH1cbiAgICB0aGlzLnVubG9hZGVkID0gdHJ1ZVxuICAgIHRoaXMuZGVzdHJveUFsbFZpZXdzKClcbiAgICB0aGlzLmRpc2Nvbm5lY3QoKVxuICB9XG5cbiAgdHJpZ2dlckRPTShraW5kLCBhcmdzKXsgdGhpcy5kb21DYWxsYmFja3Nba2luZF0oLi4uYXJncykgfVxuXG4gIHRpbWUobmFtZSwgZnVuYyl7XG4gICAgaWYoIXRoaXMuaXNQcm9maWxlRW5hYmxlZCgpIHx8ICFjb25zb2xlLnRpbWUpeyByZXR1cm4gZnVuYygpIH1cbiAgICBjb25zb2xlLnRpbWUobmFtZSlcbiAgICBsZXQgcmVzdWx0ID0gZnVuYygpXG4gICAgY29uc29sZS50aW1lRW5kKG5hbWUpXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgbG9nKHZpZXcsIGtpbmQsIG1zZ0NhbGxiYWNrKXtcbiAgICBpZih0aGlzLnZpZXdMb2dnZXIpe1xuICAgICAgbGV0IFttc2csIG9ial0gPSBtc2dDYWxsYmFjaygpXG4gICAgICB0aGlzLnZpZXdMb2dnZXIodmlldywga2luZCwgbXNnLCBvYmopXG4gICAgfSBlbHNlIGlmKHRoaXMuaXNEZWJ1Z0VuYWJsZWQoKSl7XG4gICAgICBsZXQgW21zZywgb2JqXSA9IG1zZ0NhbGxiYWNrKClcbiAgICAgIGRlYnVnKHZpZXcsIGtpbmQsIG1zZywgb2JqKVxuICAgIH1cbiAgfVxuXG4gIHJlcXVlc3RET01VcGRhdGUoY2FsbGJhY2spe1xuICAgIHRoaXMudHJhbnNpdGlvbnMuYWZ0ZXIoY2FsbGJhY2spXG4gIH1cblxuICB0cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSA9IGZ1bmN0aW9uKCl7fSl7XG4gICAgdGhpcy50cmFuc2l0aW9ucy5hZGRUcmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSlcbiAgfVxuXG4gIG9uQ2hhbm5lbChjaGFubmVsLCBldmVudCwgY2Ipe1xuICAgIGNoYW5uZWwub24oZXZlbnQsIGRhdGEgPT4ge1xuICAgICAgbGV0IGxhdGVuY3kgPSB0aGlzLmdldExhdGVuY3lTaW0oKVxuICAgICAgaWYoIWxhdGVuY3kpe1xuICAgICAgICBjYihkYXRhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjYihkYXRhKSwgbGF0ZW5jeSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgd3JhcFB1c2godmlldywgb3B0cywgcHVzaCl7XG4gICAgbGV0IGxhdGVuY3kgPSB0aGlzLmdldExhdGVuY3lTaW0oKVxuICAgIGxldCBvbGRKb2luQ291bnQgPSB2aWV3LmpvaW5Db3VudFxuICAgIGlmKCFsYXRlbmN5KXtcbiAgICAgIGlmKHRoaXMuaXNDb25uZWN0ZWQoKSAmJiBvcHRzLnRpbWVvdXQpe1xuICAgICAgICByZXR1cm4gcHVzaCgpLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IHtcbiAgICAgICAgICBpZih2aWV3LmpvaW5Db3VudCA9PT0gb2xkSm9pbkNvdW50ICYmICF2aWV3LmlzRGVzdHJveWVkKCkpe1xuICAgICAgICAgICAgdGhpcy5yZWxvYWRXaXRoSml0dGVyKHZpZXcsICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5sb2codmlldywgXCJ0aW1lb3V0XCIsICgpID0+IFtcInJlY2VpdmVkIHRpbWVvdXQgd2hpbGUgY29tbXVuaWNhdGluZyB3aXRoIHNlcnZlci4gRmFsbGluZyBiYWNrIHRvIGhhcmQgcmVmcmVzaCBmb3IgcmVjb3ZlcnlcIl0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwdXNoKClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZmFrZVB1c2ggPSB7XG4gICAgICByZWNlaXZlczogW10sXG4gICAgICByZWNlaXZlKGtpbmQsIGNiKXsgdGhpcy5yZWNlaXZlcy5wdXNoKFtraW5kLCBjYl0pIH1cbiAgICB9XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZih2aWV3LmlzRGVzdHJveWVkKCkpeyByZXR1cm4gfVxuICAgICAgZmFrZVB1c2gucmVjZWl2ZXMucmVkdWNlKChhY2MsIFtraW5kLCBjYl0pID0+IGFjYy5yZWNlaXZlKGtpbmQsIGNiKSwgcHVzaCgpKVxuICAgIH0sIGxhdGVuY3kpXG4gICAgcmV0dXJuIGZha2VQdXNoXG4gIH1cblxuICByZWxvYWRXaXRoSml0dGVyKHZpZXcsIGxvZyl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyKVxuICAgIHRoaXMuZGlzY29ubmVjdCgpXG4gICAgbGV0IG1pbk1zID0gdGhpcy5yZWxvYWRKaXR0ZXJNaW5cbiAgICBsZXQgbWF4TXMgPSB0aGlzLnJlbG9hZEppdHRlck1heFxuICAgIGxldCBhZnRlck1zID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heE1zIC0gbWluTXMgKyAxKSkgKyBtaW5Nc1xuICAgIGxldCB0cmllcyA9IEJyb3dzZXIudXBkYXRlTG9jYWwodGhpcy5sb2NhbFN0b3JhZ2UsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwgQ09OU0VDVVRJVkVfUkVMT0FEUywgMCwgY291bnQgPT4gY291bnQgKyAxKVxuICAgIGlmKHRyaWVzID4gdGhpcy5tYXhSZWxvYWRzKXtcbiAgICAgIGFmdGVyTXMgPSB0aGlzLmZhaWxzYWZlSml0dGVyXG4gICAgfVxuICAgIHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBpZiB2aWV3IGhhcyByZWNvdmVyZWQsIHN1Y2ggYXMgdHJhbnNwb3J0IHJlcGxhY2VkLCB0aGVuIGNhbmNlbFxuICAgICAgaWYodmlldy5pc0Rlc3Ryb3llZCgpIHx8IHZpZXcuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG4gICAgICB2aWV3LmRlc3Ryb3koKVxuICAgICAgbG9nID8gbG9nKCkgOiB0aGlzLmxvZyh2aWV3LCBcImpvaW5cIiwgKCkgPT4gW2BlbmNvdW50ZXJlZCAke3RyaWVzfSBjb25zZWN1dGl2ZSByZWxvYWRzYF0pXG4gICAgICBpZih0cmllcyA+IHRoaXMubWF4UmVsb2Fkcyl7XG4gICAgICAgIHRoaXMubG9nKHZpZXcsIFwiam9pblwiLCAoKSA9PiBbYGV4Y2VlZGVkICR7dGhpcy5tYXhSZWxvYWRzfSBjb25zZWN1dGl2ZSByZWxvYWRzLiBFbnRlcmluZyBmYWlsc2FmZSBtb2RlYF0pXG4gICAgICB9XG4gICAgICBpZih0aGlzLmhhc1BlbmRpbmdMaW5rKCkpe1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB0aGlzLnBlbmRpbmdMaW5rXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgIH1cbiAgICB9LCBhZnRlck1zKVxuICB9XG5cbiAgZ2V0SG9va0NhbGxiYWNrcyhuYW1lKXtcbiAgICByZXR1cm4gbmFtZSAmJiBuYW1lLnN0YXJ0c1dpdGgoXCJQaG9lbml4LlwiKSA/IEhvb2tzW25hbWUuc3BsaXQoXCIuXCIpWzFdXSA6IHRoaXMuaG9va3NbbmFtZV1cbiAgfVxuXG4gIGlzVW5sb2FkZWQoKXsgcmV0dXJuIHRoaXMudW5sb2FkZWQgfVxuXG4gIGlzQ29ubmVjdGVkKCl7IHJldHVybiB0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpIH1cblxuICBnZXRCaW5kaW5nUHJlZml4KCl7IHJldHVybiB0aGlzLmJpbmRpbmdQcmVmaXggfVxuXG4gIGJpbmRpbmcoa2luZCl7IHJldHVybiBgJHt0aGlzLmdldEJpbmRpbmdQcmVmaXgoKX0ke2tpbmR9YCB9XG5cbiAgY2hhbm5lbCh0b3BpYywgcGFyYW1zKXsgcmV0dXJuIHRoaXMuc29ja2V0LmNoYW5uZWwodG9waWMsIHBhcmFtcykgfVxuXG4gIGpvaW5EZWFkVmlldygpe1xuICAgIGxldCBib2R5ID0gZG9jdW1lbnQuYm9keVxuICAgIGlmKGJvZHkgJiYgIXRoaXMuaXNQaHhWaWV3KGJvZHkpICYmICF0aGlzLmlzUGh4Vmlldyhkb2N1bWVudC5maXJzdEVsZW1lbnRDaGlsZCkpe1xuICAgICAgbGV0IHZpZXcgPSB0aGlzLm5ld1Jvb3RWaWV3KGJvZHkpXG4gICAgICB2aWV3LnNldEhyZWYodGhpcy5nZXRIcmVmKCkpXG4gICAgICB2aWV3LmpvaW5EZWFkKClcbiAgICAgIGlmKCF0aGlzLm1haW4peyB0aGlzLm1haW4gPSB2aWV3IH1cbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdmlldy5leGVjTmV3TW91bnRlZCgpKVxuICAgIH1cbiAgfVxuXG4gIGpvaW5Sb290Vmlld3MoKXtcbiAgICBsZXQgcm9vdHNGb3VuZCA9IGZhbHNlXG4gICAgRE9NLmFsbChkb2N1bWVudCwgYCR7UEhYX1ZJRVdfU0VMRUNUT1J9Om5vdChbJHtQSFhfUEFSRU5UX0lEfV0pYCwgcm9vdEVsID0+IHtcbiAgICAgIGlmKCF0aGlzLmdldFJvb3RCeUlkKHJvb3RFbC5pZCkpe1xuICAgICAgICBsZXQgdmlldyA9IHRoaXMubmV3Um9vdFZpZXcocm9vdEVsKVxuICAgICAgICB2aWV3LnNldEhyZWYodGhpcy5nZXRIcmVmKCkpXG4gICAgICAgIHZpZXcuam9pbigpXG4gICAgICAgIGlmKHJvb3RFbC5oYXNBdHRyaWJ1dGUoUEhYX01BSU4pKXsgdGhpcy5tYWluID0gdmlldyB9XG4gICAgICB9XG4gICAgICByb290c0ZvdW5kID0gdHJ1ZVxuICAgIH0pXG4gICAgcmV0dXJuIHJvb3RzRm91bmRcbiAgfVxuXG4gIHJlZGlyZWN0KHRvLCBmbGFzaCl7XG4gICAgdGhpcy51bmxvYWQoKVxuICAgIEJyb3dzZXIucmVkaXJlY3QodG8sIGZsYXNoKVxuICB9XG5cbiAgcmVwbGFjZU1haW4oaHJlZiwgZmxhc2gsIGNhbGxiYWNrID0gbnVsbCwgbGlua1JlZiA9IHRoaXMuc2V0UGVuZGluZ0xpbmsoaHJlZikpe1xuICAgIGxldCBsaXZlUmVmZXJlciA9IHRoaXMuY3VycmVudExvY2F0aW9uLmhyZWZcbiAgICB0aGlzLm91dGdvaW5nTWFpbkVsID0gdGhpcy5vdXRnb2luZ01haW5FbCB8fCB0aGlzLm1haW4uZWxcbiAgICBsZXQgbmV3TWFpbkVsID0gRE9NLmNsb25lTm9kZSh0aGlzLm91dGdvaW5nTWFpbkVsLCBcIlwiKVxuICAgIHRoaXMubWFpbi5zaG93TG9hZGVyKHRoaXMubG9hZGVyVGltZW91dClcbiAgICB0aGlzLm1haW4uZGVzdHJveSgpXG5cbiAgICB0aGlzLm1haW4gPSB0aGlzLm5ld1Jvb3RWaWV3KG5ld01haW5FbCwgZmxhc2gsIGxpdmVSZWZlcmVyKVxuICAgIHRoaXMubWFpbi5zZXRSZWRpcmVjdChocmVmKVxuICAgIHRoaXMudHJhbnNpdGlvblJlbW92ZXMoKVxuICAgIHRoaXMubWFpbi5qb2luKChqb2luQ291bnQsIG9uRG9uZSkgPT4ge1xuICAgICAgaWYoam9pbkNvdW50ID09PSAxICYmIHRoaXMuY29tbWl0UGVuZGluZ0xpbmsobGlua1JlZikpe1xuICAgICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICAgIERPTS5maW5kUGh4U3RpY2t5KGRvY3VtZW50KS5mb3JFYWNoKGVsID0+IG5ld01haW5FbC5hcHBlbmRDaGlsZChlbCkpXG4gICAgICAgICAgdGhpcy5vdXRnb2luZ01haW5FbC5yZXBsYWNlV2l0aChuZXdNYWluRWwpXG4gICAgICAgICAgdGhpcy5vdXRnb2luZ01haW5FbCA9IG51bGxcbiAgICAgICAgICBjYWxsYmFjayAmJiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gY2FsbGJhY2sobGlua1JlZikpXG4gICAgICAgICAgb25Eb25lKClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgdHJhbnNpdGlvblJlbW92ZXMoZWxlbWVudHMpe1xuICAgIGxldCByZW1vdmVBdHRyID0gdGhpcy5iaW5kaW5nKFwicmVtb3ZlXCIpXG4gICAgZWxlbWVudHMgPSBlbGVtZW50cyB8fCBET00uYWxsKGRvY3VtZW50LCBgWyR7cmVtb3ZlQXR0cn1dYClcbiAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIHRoaXMuZXhlY0pTKGVsLCBlbC5nZXRBdHRyaWJ1dGUocmVtb3ZlQXR0ciksIFwicmVtb3ZlXCIpXG4gICAgfSlcbiAgfVxuXG4gIGlzUGh4VmlldyhlbCl7IHJldHVybiBlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKFBIWF9TRVNTSU9OKSAhPT0gbnVsbCB9XG5cbiAgbmV3Um9vdFZpZXcoZWwsIGZsYXNoLCBsaXZlUmVmZXJlcil7XG4gICAgbGV0IHZpZXcgPSBuZXcgVmlldyhlbCwgdGhpcywgbnVsbCwgZmxhc2gsIGxpdmVSZWZlcmVyKVxuICAgIHRoaXMucm9vdHNbdmlldy5pZF0gPSB2aWV3XG4gICAgcmV0dXJuIHZpZXdcbiAgfVxuXG4gIG93bmVyKGNoaWxkRWwsIGNhbGxiYWNrKXtcbiAgICBsZXQgdmlldyA9IG1heWJlKGNoaWxkRWwuY2xvc2VzdChQSFhfVklFV19TRUxFQ1RPUiksIGVsID0+IHRoaXMuZ2V0Vmlld0J5RWwoZWwpKSB8fCB0aGlzLm1haW5cbiAgICBpZih2aWV3KXsgY2FsbGJhY2sodmlldykgfVxuICB9XG5cbiAgd2l0aGluT3duZXJzKGNoaWxkRWwsIGNhbGxiYWNrKXtcbiAgICB0aGlzLm93bmVyKGNoaWxkRWwsIHZpZXcgPT4gY2FsbGJhY2sodmlldywgY2hpbGRFbCkpXG4gIH1cblxuICBnZXRWaWV3QnlFbChlbCl7XG4gICAgbGV0IHJvb3RJZCA9IGVsLmdldEF0dHJpYnV0ZShQSFhfUk9PVF9JRClcbiAgICByZXR1cm4gbWF5YmUodGhpcy5nZXRSb290QnlJZChyb290SWQpLCByb290ID0+IHJvb3QuZ2V0RGVzY2VuZGVudEJ5RWwoZWwpKVxuICB9XG5cbiAgZ2V0Um9vdEJ5SWQoaWQpeyByZXR1cm4gdGhpcy5yb290c1tpZF0gfVxuXG4gIGRlc3Ryb3lBbGxWaWV3cygpe1xuICAgIGZvcihsZXQgaWQgaW4gdGhpcy5yb290cyl7XG4gICAgICB0aGlzLnJvb3RzW2lkXS5kZXN0cm95KClcbiAgICAgIGRlbGV0ZSB0aGlzLnJvb3RzW2lkXVxuICAgIH1cbiAgICB0aGlzLm1haW4gPSBudWxsXG4gIH1cblxuICBkZXN0cm95Vmlld0J5RWwoZWwpe1xuICAgIGxldCByb290ID0gdGhpcy5nZXRSb290QnlJZChlbC5nZXRBdHRyaWJ1dGUoUEhYX1JPT1RfSUQpKVxuICAgIGlmKHJvb3QgJiYgcm9vdC5pZCA9PT0gZWwuaWQpe1xuICAgICAgcm9vdC5kZXN0cm95KClcbiAgICAgIGRlbGV0ZSB0aGlzLnJvb3RzW3Jvb3QuaWRdXG4gICAgfSBlbHNlIGlmKHJvb3Qpe1xuICAgICAgcm9vdC5kZXN0cm95RGVzY2VuZGVudChlbC5pZClcbiAgICB9XG4gIH1cblxuICBzZXRBY3RpdmVFbGVtZW50KHRhcmdldCl7XG4gICAgaWYodGhpcy5hY3RpdmVFbGVtZW50ID09PSB0YXJnZXQpeyByZXR1cm4gfVxuICAgIHRoaXMuYWN0aXZlRWxlbWVudCA9IHRhcmdldFxuICAgIGxldCBjYW5jZWwgPSAoKSA9PiB7XG4gICAgICBpZih0YXJnZXQgPT09IHRoaXMuYWN0aXZlRWxlbWVudCl7IHRoaXMuYWN0aXZlRWxlbWVudCA9IG51bGwgfVxuICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMpXG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMpXG4gICAgfVxuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBjYW5jZWwpXG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBjYW5jZWwpXG4gIH1cblxuICBnZXRBY3RpdmVFbGVtZW50KCl7XG4gICAgaWYoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZG9jdW1lbnQuYm9keSl7XG4gICAgICByZXR1cm4gdGhpcy5hY3RpdmVFbGVtZW50IHx8IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBjYW4gYmUgbnVsbCBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMVxuICAgICAgcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keVxuICAgIH1cbiAgfVxuXG4gIGRyb3BBY3RpdmVFbGVtZW50KHZpZXcpe1xuICAgIGlmKHRoaXMucHJldkFjdGl2ZSAmJiB2aWV3Lm93bnNFbGVtZW50KHRoaXMucHJldkFjdGl2ZSkpe1xuICAgICAgdGhpcy5wcmV2QWN0aXZlID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHJlc3RvcmVQcmV2aW91c2x5QWN0aXZlRm9jdXMoKXtcbiAgICBpZih0aGlzLnByZXZBY3RpdmUgJiYgdGhpcy5wcmV2QWN0aXZlICE9PSBkb2N1bWVudC5ib2R5KXtcbiAgICAgIHRoaXMucHJldkFjdGl2ZS5mb2N1cygpXG4gICAgfVxuICB9XG5cbiAgYmx1ckFjdGl2ZUVsZW1lbnQoKXtcbiAgICB0aGlzLnByZXZBY3RpdmUgPSB0aGlzLmdldEFjdGl2ZUVsZW1lbnQoKVxuICAgIGlmKHRoaXMucHJldkFjdGl2ZSAhPT0gZG9jdW1lbnQuYm9keSl7IHRoaXMucHJldkFjdGl2ZS5ibHVyKCkgfVxuICB9XG5cbiAgYmluZFRvcExldmVsRXZlbnRzKHtkZWFkfSA9IHt9KXtcbiAgICBpZih0aGlzLmJvdW5kVG9wTGV2ZWxFdmVudHMpeyByZXR1cm4gfVxuXG4gICAgdGhpcy5ib3VuZFRvcExldmVsRXZlbnRzID0gdHJ1ZVxuICAgIC8vIGVudGVyIGZhaWxzYWZlIHJlbG9hZCBpZiBzZXJ2ZXIgaGFzIGdvbmUgYXdheSBpbnRlbnRpb25hbGx5LCBzdWNoIGFzIFwiZGlzY29ubmVjdFwiIGJyb2FkY2FzdFxuICAgIHRoaXMuc29ja2V0Lm9uQ2xvc2UoZXZlbnQgPT4ge1xuICAgICAgLy8gZmFpbHNhZmUgcmVsb2FkIGlmIG5vcm1hbCBjbG9zdXJlIGFuZCB3ZSBzdGlsbCBoYXZlIGEgbWFpbiBMVlxuICAgICAgaWYoZXZlbnQgJiYgZXZlbnQuY29kZSA9PT0gMTAwMCAmJiB0aGlzLm1haW4peyByZXR1cm4gdGhpcy5yZWxvYWRXaXRoSml0dGVyKHRoaXMubWFpbikgfVxuICAgIH0pXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCl7IH0pIC8vIGVuc3VyZSBhbGwgY2xpY2sgZXZlbnRzIGJ1YmJsZSBmb3IgbW9iaWxlIFNhZmFyaVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZXNob3dcIiwgZSA9PiB7XG4gICAgICBpZihlLnBlcnNpc3RlZCl7IC8vIHJlbG9hZCBwYWdlIGlmIGJlaW5nIHJlc3RvcmVkIGZyb20gYmFjay9mb3J3YXJkIGNhY2hlXG4gICAgICAgIHRoaXMuZ2V0U29ja2V0KCkuZGlzY29ubmVjdCgpXG4gICAgICAgIHRoaXMud2l0aFBhZ2VMb2FkaW5nKHt0bzogd2luZG93LmxvY2F0aW9uLmhyZWYsIGtpbmQ6IFwicmVkaXJlY3RcIn0pXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgfVxuICAgIH0sIHRydWUpXG4gICAgaWYoIWRlYWQpeyB0aGlzLmJpbmROYXYoKSB9XG4gICAgdGhpcy5iaW5kQ2xpY2tzKClcbiAgICBpZighZGVhZCl7IHRoaXMuYmluZEZvcm1zKCkgfVxuICAgIHRoaXMuYmluZCh7a2V5dXA6IFwia2V5dXBcIiwga2V5ZG93bjogXCJrZXlkb3duXCJ9LCAoZSwgdHlwZSwgdmlldywgdGFyZ2V0RWwsIHBoeEV2ZW50LCBldmVudFRhcmdldCkgPT4ge1xuICAgICAgbGV0IG1hdGNoS2V5ID0gdGFyZ2V0RWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfS0VZKSlcbiAgICAgIGxldCBwcmVzc2VkS2V5ID0gZS5rZXkgJiYgZS5rZXkudG9Mb3dlckNhc2UoKSAvLyBjaHJvbWUgY2xpY2tlZCBhdXRvY29tcGxldGVzIHNlbmQgYSBrZXlkb3duIHdpdGhvdXQga2V5XG4gICAgICBpZihtYXRjaEtleSAmJiBtYXRjaEtleS50b0xvd2VyQ2FzZSgpICE9PSBwcmVzc2VkS2V5KXsgcmV0dXJuIH1cblxuICAgICAgbGV0IGRhdGEgPSB7a2V5OiBlLmtleSwgLi4udGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpfVxuICAgICAgSlMuZXhlYyh0eXBlLCBwaHhFdmVudCwgdmlldywgdGFyZ2V0RWwsIFtcInB1c2hcIiwge2RhdGF9XSlcbiAgICB9KVxuICAgIHRoaXMuYmluZCh7Ymx1cjogXCJmb2N1c291dFwiLCBmb2N1czogXCJmb2N1c2luXCJ9LCAoZSwgdHlwZSwgdmlldywgdGFyZ2V0RWwsIHBoeEV2ZW50LCBldmVudFRhcmdldCkgPT4ge1xuICAgICAgaWYoIWV2ZW50VGFyZ2V0KXtcbiAgICAgICAgbGV0IGRhdGEgPSB7a2V5OiBlLmtleSwgLi4udGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpfVxuICAgICAgICBKUy5leGVjKHR5cGUsIHBoeEV2ZW50LCB2aWV3LCB0YXJnZXRFbCwgW1wicHVzaFwiLCB7ZGF0YX1dKVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5iaW5kKHtibHVyOiBcImJsdXJcIiwgZm9jdXM6IFwiZm9jdXNcIn0sIChlLCB0eXBlLCB2aWV3LCB0YXJnZXRFbCwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgcGh4VGFyZ2V0KSA9PiB7XG4gICAgICAvLyBibHVyIGFuZCBmb2N1cyBhcmUgdHJpZ2dlcmVkIG9uIGRvY3VtZW50IGFuZCB3aW5kb3cuIERpc2NhcmQgb25lIHRvIGF2b2lkIGR1cHNcbiAgICAgIGlmKHBoeFRhcmdldCA9PT0gXCJ3aW5kb3dcIil7XG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpXG4gICAgICAgIEpTLmV4ZWModHlwZSwgcGh4RXZlbnQsIHZpZXcsIHRhcmdldEVsLCBbXCJwdXNoXCIsIHtkYXRhfV0pXG4gICAgICB9XG4gICAgfSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBlID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgbGV0IGRyb3BUYXJnZXRJZCA9IG1heWJlKGNsb3Nlc3RQaHhCaW5kaW5nKGUudGFyZ2V0LCB0aGlzLmJpbmRpbmcoUEhYX0RST1BfVEFSR0VUKSksIHRydWVUYXJnZXQgPT4ge1xuICAgICAgICByZXR1cm4gdHJ1ZVRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9EUk9QX1RBUkdFVCkpXG4gICAgICB9KVxuICAgICAgbGV0IGRyb3BUYXJnZXQgPSBkcm9wVGFyZ2V0SWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZHJvcFRhcmdldElkKVxuICAgICAgbGV0IGZpbGVzID0gQXJyYXkuZnJvbShlLmRhdGFUcmFuc2Zlci5maWxlcyB8fCBbXSlcbiAgICAgIGlmKCFkcm9wVGFyZ2V0IHx8IGRyb3BUYXJnZXQuZGlzYWJsZWQgfHwgZmlsZXMubGVuZ3RoID09PSAwIHx8ICEoZHJvcFRhcmdldC5maWxlcyBpbnN0YW5jZW9mIEZpbGVMaXN0KSl7IHJldHVybiB9XG5cbiAgICAgIExpdmVVcGxvYWRlci50cmFja0ZpbGVzKGRyb3BUYXJnZXQsIGZpbGVzLCBlLmRhdGFUcmFuc2ZlcilcbiAgICAgIGRyb3BUYXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJpbnB1dFwiLCB7YnViYmxlczogdHJ1ZX0pKVxuICAgIH0pXG4gICAgdGhpcy5vbihQSFhfVFJBQ0tfVVBMT0FEUywgZSA9PiB7XG4gICAgICBsZXQgdXBsb2FkVGFyZ2V0ID0gZS50YXJnZXRcbiAgICAgIGlmKCFET00uaXNVcGxvYWRJbnB1dCh1cGxvYWRUYXJnZXQpKXsgcmV0dXJuIH1cbiAgICAgIGxldCBmaWxlcyA9IEFycmF5LmZyb20oZS5kZXRhaWwuZmlsZXMgfHwgW10pLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBGaWxlIHx8IGYgaW5zdGFuY2VvZiBCbG9iKVxuICAgICAgTGl2ZVVwbG9hZGVyLnRyYWNrRmlsZXModXBsb2FkVGFyZ2V0LCBmaWxlcylcbiAgICAgIHVwbG9hZFRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIsIHtidWJibGVzOiB0cnVlfSkpXG4gICAgfSlcbiAgfVxuXG4gIGV2ZW50TWV0YShldmVudE5hbWUsIGUsIHRhcmdldEVsKXtcbiAgICBsZXQgY2FsbGJhY2sgPSB0aGlzLm1ldGFkYXRhQ2FsbGJhY2tzW2V2ZW50TmFtZV1cbiAgICByZXR1cm4gY2FsbGJhY2sgPyBjYWxsYmFjayhlLCB0YXJnZXRFbCkgOiB7fVxuICB9XG5cbiAgc2V0UGVuZGluZ0xpbmsoaHJlZil7XG4gICAgdGhpcy5saW5rUmVmKytcbiAgICB0aGlzLnBlbmRpbmdMaW5rID0gaHJlZlxuICAgIHJldHVybiB0aGlzLmxpbmtSZWZcbiAgfVxuXG4gIGNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpe1xuICAgIGlmKHRoaXMubGlua1JlZiAhPT0gbGlua1JlZil7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ocmVmID0gdGhpcy5wZW5kaW5nTGlua1xuICAgICAgdGhpcy5wZW5kaW5nTGluayA9IG51bGxcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgZ2V0SHJlZigpeyByZXR1cm4gdGhpcy5ocmVmIH1cblxuICBoYXNQZW5kaW5nTGluaygpeyByZXR1cm4gISF0aGlzLnBlbmRpbmdMaW5rIH1cblxuICBiaW5kKGV2ZW50cywgY2FsbGJhY2spe1xuICAgIGZvcihsZXQgZXZlbnQgaW4gZXZlbnRzKXtcbiAgICAgIGxldCBicm93c2VyRXZlbnROYW1lID0gZXZlbnRzW2V2ZW50XVxuXG4gICAgICB0aGlzLm9uKGJyb3dzZXJFdmVudE5hbWUsIGUgPT4ge1xuICAgICAgICBsZXQgYmluZGluZyA9IHRoaXMuYmluZGluZyhldmVudClcbiAgICAgICAgbGV0IHdpbmRvd0JpbmRpbmcgPSB0aGlzLmJpbmRpbmcoYHdpbmRvdy0ke2V2ZW50fWApXG4gICAgICAgIGxldCB0YXJnZXRQaHhFdmVudCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSAmJiBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoYmluZGluZylcbiAgICAgICAgaWYodGFyZ2V0UGh4RXZlbnQpe1xuICAgICAgICAgIHRoaXMuZGVib3VuY2UoZS50YXJnZXQsIGUsIGJyb3dzZXJFdmVudE5hbWUsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGUudGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soZSwgZXZlbnQsIHZpZXcsIGUudGFyZ2V0LCB0YXJnZXRQaHhFdmVudCwgbnVsbClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7d2luZG93QmluZGluZ31dYCwgZWwgPT4ge1xuICAgICAgICAgICAgbGV0IHBoeEV2ZW50ID0gZWwuZ2V0QXR0cmlidXRlKHdpbmRvd0JpbmRpbmcpXG4gICAgICAgICAgICB0aGlzLmRlYm91bmNlKGVsLCBlLCBicm93c2VyRXZlbnROYW1lLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGVsLCB2aWV3ID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlLCBldmVudCwgdmlldywgZWwsIHBoeEV2ZW50LCBcIndpbmRvd1wiKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGJpbmRDbGlja3MoKXtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4gdGhpcy5jbGlja1N0YXJ0ZWRBdFRhcmdldCA9IGUudGFyZ2V0KVxuICAgIHRoaXMuYmluZENsaWNrKFwiY2xpY2tcIiwgXCJjbGlja1wiLCBmYWxzZSlcbiAgICB0aGlzLmJpbmRDbGljayhcIm1vdXNlZG93blwiLCBcImNhcHR1cmUtY2xpY2tcIiwgdHJ1ZSlcbiAgfVxuXG4gIGJpbmRDbGljayhldmVudE5hbWUsIGJpbmRpbmdOYW1lLCBjYXB0dXJlKXtcbiAgICBsZXQgY2xpY2sgPSB0aGlzLmJpbmRpbmcoYmluZGluZ05hbWUpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBlID0+IHtcbiAgICAgIGxldCB0YXJnZXQgPSBudWxsXG4gICAgICBpZihjYXB0dXJlKXtcbiAgICAgICAgdGFyZ2V0ID0gZS50YXJnZXQubWF0Y2hlcyhgWyR7Y2xpY2t9XWApID8gZS50YXJnZXQgOiBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKGBbJHtjbGlja31dYClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBjbGlja1N0YXJ0ZWRBdFRhcmdldCA9IHRoaXMuY2xpY2tTdGFydGVkQXRUYXJnZXQgfHwgZS50YXJnZXRcbiAgICAgICAgdGFyZ2V0ID0gY2xvc2VzdFBoeEJpbmRpbmcoY2xpY2tTdGFydGVkQXRUYXJnZXQsIGNsaWNrKVxuICAgICAgICB0aGlzLmRpc3BhdGNoQ2xpY2tBd2F5KGUsIGNsaWNrU3RhcnRlZEF0VGFyZ2V0KVxuICAgICAgICB0aGlzLmNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gbnVsbFxuICAgICAgfVxuICAgICAgbGV0IHBoeEV2ZW50ID0gdGFyZ2V0ICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoY2xpY2spXG4gICAgICBpZighcGh4RXZlbnQpe1xuICAgICAgICBpZighY2FwdHVyZSAmJiBET00uaXNOZXdQYWdlQ2xpY2soZSwgd2luZG93LmxvY2F0aW9uKSl7IHRoaXMudW5sb2FkKCkgfVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYodGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIikgPT09IFwiI1wiKXsgZS5wcmV2ZW50RGVmYXVsdCgpIH1cblxuICAgICAgLy8gbm9vcCBpZiB3ZSBhcmUgaW4gdGhlIG1pZGRsZSBvZiBhd2FpdGluZyBhbiBhY2sgZm9yIHRoaXMgZWwgYWxyZWFkeVxuICAgICAgaWYodGFyZ2V0Lmhhc0F0dHJpYnV0ZShQSFhfUkVGKSl7IHJldHVybiB9XG5cbiAgICAgIHRoaXMuZGVib3VuY2UodGFyZ2V0LCBlLCBcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy53aXRoaW5Pd25lcnModGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgICBKUy5leGVjKFwiY2xpY2tcIiwgcGh4RXZlbnQsIHZpZXcsIHRhcmdldCwgW1wicHVzaFwiLCB7ZGF0YTogdGhpcy5ldmVudE1ldGEoXCJjbGlja1wiLCBlLCB0YXJnZXQpfV0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0sIGNhcHR1cmUpXG4gIH1cblxuICBkaXNwYXRjaENsaWNrQXdheShlLCBjbGlja1N0YXJ0ZWRBdCl7XG4gICAgbGV0IHBoeENsaWNrQXdheSA9IHRoaXMuYmluZGluZyhcImNsaWNrLWF3YXlcIilcbiAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7cGh4Q2xpY2tBd2F5fV1gLCBlbCA9PiB7XG4gICAgICBpZighKGVsLmlzU2FtZU5vZGUoY2xpY2tTdGFydGVkQXQpIHx8IGVsLmNvbnRhaW5zKGNsaWNrU3RhcnRlZEF0KSkpe1xuICAgICAgICB0aGlzLndpdGhpbk93bmVycyhlLnRhcmdldCwgdmlldyA9PiB7XG4gICAgICAgICAgbGV0IHBoeEV2ZW50ID0gZWwuZ2V0QXR0cmlidXRlKHBoeENsaWNrQXdheSlcbiAgICAgICAgICBpZihKUy5pc1Zpc2libGUoZWwpKXtcbiAgICAgICAgICAgIEpTLmV4ZWMoXCJjbGlja1wiLCBwaHhFdmVudCwgdmlldywgZWwsIFtcInB1c2hcIiwge2RhdGE6IHRoaXMuZXZlbnRNZXRhKFwiY2xpY2tcIiwgZSwgZS50YXJnZXQpfV0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBiaW5kTmF2KCl7XG4gICAgaWYoIUJyb3dzZXIuY2FuUHVzaFN0YXRlKCkpeyByZXR1cm4gfVxuICAgIGlmKGhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24peyBoaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uID0gXCJtYW51YWxcIiB9XG4gICAgbGV0IHNjcm9sbFRpbWVyID0gbnVsbFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIF9lID0+IHtcbiAgICAgIGNsZWFyVGltZW91dChzY3JvbGxUaW1lcilcbiAgICAgIHNjcm9sbFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIEJyb3dzZXIudXBkYXRlQ3VycmVudFN0YXRlKHN0YXRlID0+IE9iamVjdC5hc3NpZ24oc3RhdGUsIHtzY3JvbGw6IHdpbmRvdy5zY3JvbGxZfSkpXG4gICAgICB9LCAxMDApXG4gICAgfSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsIGV2ZW50ID0+IHtcbiAgICAgIGlmKCF0aGlzLnJlZ2lzdGVyTmV3TG9jYXRpb24od2luZG93LmxvY2F0aW9uKSl7IHJldHVybiB9XG4gICAgICBsZXQge3R5cGUsIGlkLCByb290LCBzY3JvbGx9ID0gZXZlbnQuc3RhdGUgfHwge31cbiAgICAgIGxldCBocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWZcblxuICAgICAgRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBcInBoeDpuYXZpZ2F0ZVwiLCB7ZGV0YWlsOiB7aHJlZiwgcGF0Y2g6IHR5cGUgPT09IFwicGF0Y2hcIiwgcG9wOiB0cnVlfX0pXG4gICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICBpZih0aGlzLm1haW4uaXNDb25uZWN0ZWQoKSAmJiAodHlwZSA9PT0gXCJwYXRjaFwiICYmIGlkID09PSB0aGlzLm1haW4uaWQpKXtcbiAgICAgICAgICB0aGlzLm1haW4ucHVzaExpbmtQYXRjaChocmVmLCBudWxsLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1heWJlU2Nyb2xsKHNjcm9sbClcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucmVwbGFjZU1haW4oaHJlZiwgbnVsbCwgKCkgPT4ge1xuICAgICAgICAgICAgaWYocm9vdCl7IHRoaXMucmVwbGFjZVJvb3RIaXN0b3J5KCkgfVxuICAgICAgICAgICAgdGhpcy5tYXliZVNjcm9sbChzY3JvbGwpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LCBmYWxzZSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xuICAgICAgbGV0IHRhcmdldCA9IGNsb3Nlc3RQaHhCaW5kaW5nKGUudGFyZ2V0LCBQSFhfTElWRV9MSU5LKVxuICAgICAgbGV0IHR5cGUgPSB0YXJnZXQgJiYgdGFyZ2V0LmdldEF0dHJpYnV0ZShQSFhfTElWRV9MSU5LKVxuICAgICAgaWYoIXR5cGUgfHwgIXRoaXMuaXNDb25uZWN0ZWQoKSB8fCAhdGhpcy5tYWluIHx8IERPTS53YW50c05ld1RhYihlKSl7IHJldHVybiB9XG5cbiAgICAgIGxldCBocmVmID0gdGFyZ2V0LmhyZWZcbiAgICAgIGxldCBsaW5rU3RhdGUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFBIWF9MSU5LX1NUQVRFKVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpIC8vIGRvIG5vdCBidWJibGUgY2xpY2sgdG8gcmVndWxhciBwaHgtY2xpY2sgYmluZGluZ3NcbiAgICAgIGlmKHRoaXMucGVuZGluZ0xpbmsgPT09IGhyZWYpeyByZXR1cm4gfVxuXG4gICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICBpZih0eXBlID09PSBcInBhdGNoXCIpe1xuICAgICAgICAgIHRoaXMucHVzaEhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIHRhcmdldClcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09IFwicmVkaXJlY3RcIil7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5UmVkaXJlY3QoaHJlZiwgbGlua1N0YXRlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgJHtQSFhfTElWRV9MSU5LfSB0byBiZSBcInBhdGNoXCIgb3IgXCJyZWRpcmVjdFwiLCBnb3Q6ICR7dHlwZX1gKVxuICAgICAgICB9XG4gICAgICAgIGxldCBwaHhDbGljayA9IHRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwiY2xpY2tcIikpXG4gICAgICAgIGlmKHBoeENsaWNrKXtcbiAgICAgICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4gdGhpcy5leGVjSlModGFyZ2V0LCBwaHhDbGljaywgXCJjbGlja1wiKSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LCBmYWxzZSlcbiAgfVxuXG4gIG1heWJlU2Nyb2xsKHNjcm9sbCkge1xuICAgIGlmKHR5cGVvZihzY3JvbGwpID09PSBcIm51bWJlclwiKXtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBzY3JvbGwpXG4gICAgICB9KSAvLyB0aGUgYm9keSBuZWVkcyB0byByZW5kZXIgYmVmb3JlIHdlIHNjcm9sbC5cbiAgICB9XG4gIH1cblxuICBkaXNwYXRjaEV2ZW50KGV2ZW50LCBwYXlsb2FkID0ge30pe1xuICAgIERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgYHBoeDoke2V2ZW50fWAsIHtkZXRhaWw6IHBheWxvYWR9KVxuICB9XG5cbiAgZGlzcGF0Y2hFdmVudHMoZXZlbnRzKXtcbiAgICBldmVudHMuZm9yRWFjaCgoW2V2ZW50LCBwYXlsb2FkXSkgPT4gdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50LCBwYXlsb2FkKSlcbiAgfVxuXG4gIHdpdGhQYWdlTG9hZGluZyhpbmZvLCBjYWxsYmFjayl7XG4gICAgRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBcInBoeDpwYWdlLWxvYWRpbmctc3RhcnRcIiwge2RldGFpbDogaW5mb30pXG4gICAgbGV0IGRvbmUgPSAoKSA9PiBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIFwicGh4OnBhZ2UtbG9hZGluZy1zdG9wXCIsIHtkZXRhaWw6IGluZm99KVxuICAgIHJldHVybiBjYWxsYmFjayA/IGNhbGxiYWNrKGRvbmUpIDogZG9uZVxuICB9XG5cbiAgcHVzaEhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIHRhcmdldEVsKXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIEJyb3dzZXIucmVkaXJlY3QoaHJlZikgfVxuXG4gICAgdGhpcy53aXRoUGFnZUxvYWRpbmcoe3RvOiBocmVmLCBraW5kOiBcInBhdGNoXCJ9LCBkb25lID0+IHtcbiAgICAgIHRoaXMubWFpbi5wdXNoTGlua1BhdGNoKGhyZWYsIHRhcmdldEVsLCBsaW5rUmVmID0+IHtcbiAgICAgICAgdGhpcy5oaXN0b3J5UGF0Y2goaHJlZiwgbGlua1N0YXRlLCBsaW5rUmVmKVxuICAgICAgICBkb25lKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIGxpbmtSZWYgPSB0aGlzLnNldFBlbmRpbmdMaW5rKGhyZWYpKXtcbiAgICBpZighdGhpcy5jb21taXRQZW5kaW5nTGluayhsaW5rUmVmKSl7IHJldHVybiB9XG5cbiAgICBCcm93c2VyLnB1c2hTdGF0ZShsaW5rU3RhdGUsIHt0eXBlOiBcInBhdGNoXCIsIGlkOiB0aGlzLm1haW4uaWR9LCBocmVmKVxuICAgIERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgXCJwaHg6bmF2aWdhdGVcIiwge2RldGFpbDoge3BhdGNoOiB0cnVlLCBocmVmLCBwb3A6IGZhbHNlfX0pXG4gICAgdGhpcy5yZWdpc3Rlck5ld0xvY2F0aW9uKHdpbmRvdy5sb2NhdGlvbilcbiAgfVxuXG4gIGhpc3RvcnlSZWRpcmVjdChocmVmLCBsaW5rU3RhdGUsIGZsYXNoKXtcbiAgICAvLyBjb252ZXJ0IHRvIGZ1bGwgaHJlZiBpZiBvbmx5IHBhdGggcHJlZml4XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiBCcm93c2VyLnJlZGlyZWN0KGhyZWYsIGZsYXNoKSB9XG4gICAgaWYoL15cXC8kfF5cXC9bXlxcL10rLiokLy50ZXN0KGhyZWYpKXtcbiAgICAgIGxldCB7cHJvdG9jb2wsIGhvc3R9ID0gd2luZG93LmxvY2F0aW9uXG4gICAgICBocmVmID0gYCR7cHJvdG9jb2x9Ly8ke2hvc3R9JHtocmVmfWBcbiAgICB9XG4gICAgbGV0IHNjcm9sbCA9IHdpbmRvdy5zY3JvbGxZXG4gICAgdGhpcy53aXRoUGFnZUxvYWRpbmcoe3RvOiBocmVmLCBraW5kOiBcInJlZGlyZWN0XCJ9LCBkb25lID0+IHtcbiAgICAgIHRoaXMucmVwbGFjZU1haW4oaHJlZiwgZmxhc2gsIChsaW5rUmVmKSA9PiB7XG4gICAgICAgIGlmKGxpbmtSZWYgPT09IHRoaXMubGlua1JlZil7XG4gICAgICAgICAgQnJvd3Nlci5wdXNoU3RhdGUobGlua1N0YXRlLCB7dHlwZTogXCJyZWRpcmVjdFwiLCBpZDogdGhpcy5tYWluLmlkLCBzY3JvbGw6IHNjcm9sbH0sIGhyZWYpXG4gICAgICAgICAgRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBcInBoeDpuYXZpZ2F0ZVwiLCB7ZGV0YWlsOiB7aHJlZiwgcGF0Y2g6IGZhbHNlLCBwb3A6IGZhbHNlfX0pXG4gICAgICAgICAgdGhpcy5yZWdpc3Rlck5ld0xvY2F0aW9uKHdpbmRvdy5sb2NhdGlvbilcbiAgICAgICAgfVxuICAgICAgICBkb25lKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHJlcGxhY2VSb290SGlzdG9yeSgpe1xuICAgIEJyb3dzZXIucHVzaFN0YXRlKFwicmVwbGFjZVwiLCB7cm9vdDogdHJ1ZSwgdHlwZTogXCJwYXRjaFwiLCBpZDogdGhpcy5tYWluLmlkfSlcbiAgfVxuXG4gIHJlZ2lzdGVyTmV3TG9jYXRpb24obmV3TG9jYXRpb24pe1xuICAgIGxldCB7cGF0aG5hbWUsIHNlYXJjaH0gPSB0aGlzLmN1cnJlbnRMb2NhdGlvblxuICAgIGlmKHBhdGhuYW1lICsgc2VhcmNoID09PSBuZXdMb2NhdGlvbi5wYXRobmFtZSArIG5ld0xvY2F0aW9uLnNlYXJjaCl7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50TG9jYXRpb24gPSBjbG9uZShuZXdMb2NhdGlvbilcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgYmluZEZvcm1zKCl7XG4gICAgbGV0IGl0ZXJhdGlvbnMgPSAwXG4gICAgbGV0IGV4dGVybmFsRm9ybVN1Ym1pdHRlZCA9IGZhbHNlXG5cbiAgICAvLyBkaXNhYmxlIGZvcm1zIG9uIHN1Ym1pdCB0aGF0IHRyYWNrIHBoeC1jaGFuZ2UgYnV0IHBlcmZvcm0gZXh0ZXJuYWwgc3VibWl0XG4gICAgdGhpcy5vbihcInN1Ym1pdFwiLCBlID0+IHtcbiAgICAgIGxldCBwaHhTdWJtaXQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwic3VibWl0XCIpKVxuICAgICAgbGV0IHBoeENoYW5nZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIikpXG4gICAgICBpZighZXh0ZXJuYWxGb3JtU3VibWl0dGVkICYmIHBoeENoYW5nZSAmJiAhcGh4U3VibWl0KXtcbiAgICAgICAgZXh0ZXJuYWxGb3JtU3VibWl0dGVkID0gdHJ1ZVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZS50YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgIHZpZXcuZGlzYWJsZUZvcm0oZS50YXJnZXQpXG4gICAgICAgICAgLy8gc2FmYXJpIG5lZWRzIG5leHQgdGlja1xuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgaWYoRE9NLmlzVW5sb2FkYWJsZUZvcm1TdWJtaXQoZSkpeyB0aGlzLnVubG9hZCgpIH1cbiAgICAgICAgICAgIGUudGFyZ2V0LnN1Ym1pdCgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LCB0cnVlKVxuXG4gICAgdGhpcy5vbihcInN1Ym1pdFwiLCBlID0+IHtcbiAgICAgIGxldCBwaHhFdmVudCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJzdWJtaXRcIikpXG4gICAgICBpZighcGh4RXZlbnQpe1xuICAgICAgICBpZihET00uaXNVbmxvYWRhYmxlRm9ybVN1Ym1pdChlKSl7IHRoaXMudW5sb2FkKCkgfVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgZS50YXJnZXQuZGlzYWJsZWQgPSB0cnVlXG4gICAgICB0aGlzLndpdGhpbk93bmVycyhlLnRhcmdldCwgdmlldyA9PiB7XG4gICAgICAgIEpTLmV4ZWMoXCJzdWJtaXRcIiwgcGh4RXZlbnQsIHZpZXcsIGUudGFyZ2V0LCBbXCJwdXNoXCIsIHtzdWJtaXR0ZXI6IGUuc3VibWl0dGVyfV0pXG4gICAgICB9KVxuICAgIH0sIGZhbHNlKVxuXG4gICAgZm9yKGxldCB0eXBlIG9mIFtcImNoYW5nZVwiLCBcImlucHV0XCJdKXtcbiAgICAgIHRoaXMub24odHlwZSwgZSA9PiB7XG4gICAgICAgIGxldCBwaHhDaGFuZ2UgPSB0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIilcbiAgICAgICAgbGV0IGlucHV0ID0gZS50YXJnZXRcbiAgICAgICAgbGV0IGlucHV0RXZlbnQgPSBpbnB1dC5nZXRBdHRyaWJ1dGUocGh4Q2hhbmdlKVxuICAgICAgICBsZXQgZm9ybUV2ZW50ID0gaW5wdXQuZm9ybSAmJiBpbnB1dC5mb3JtLmdldEF0dHJpYnV0ZShwaHhDaGFuZ2UpXG4gICAgICAgIGxldCBwaHhFdmVudCA9IGlucHV0RXZlbnQgfHwgZm9ybUV2ZW50XG4gICAgICAgIGlmKCFwaHhFdmVudCl7IHJldHVybiB9XG4gICAgICAgIGlmKGlucHV0LnR5cGUgPT09IFwibnVtYmVyXCIgJiYgaW5wdXQudmFsaWRpdHkgJiYgaW5wdXQudmFsaWRpdHkuYmFkSW5wdXQpeyByZXR1cm4gfVxuXG4gICAgICAgIGxldCBkaXNwYXRjaGVyID0gaW5wdXRFdmVudCA/IGlucHV0IDogaW5wdXQuZm9ybVxuICAgICAgICBsZXQgY3VycmVudEl0ZXJhdGlvbnMgPSBpdGVyYXRpb25zXG4gICAgICAgIGl0ZXJhdGlvbnMrK1xuICAgICAgICBsZXQge2F0OiBhdCwgdHlwZTogbGFzdFR5cGV9ID0gRE9NLnByaXZhdGUoaW5wdXQsIFwicHJldi1pdGVyYXRpb25cIikgfHwge31cbiAgICAgICAgLy8gQnJvd3NlcnMgc2hvdWxkIGFsd2F5cyBmaXJlIGF0IGxlYXN0IG9uZSBcImlucHV0XCIgZXZlbnQgYmVmb3JlIGV2ZXJ5IFwiY2hhbmdlXCJcbiAgICAgICAgLy8gSWdub3JlIFwiY2hhbmdlXCIgZXZlbnRzLCB1bmxlc3MgdGhlcmUgd2FzIG5vIHByaW9yIFwiaW5wdXRcIiBldmVudC5cbiAgICAgICAgLy8gVGhpcyBjb3VsZCBoYXBwZW4gaWYgdXNlciBjb2RlIHRyaWdnZXJzIGEgXCJjaGFuZ2VcIiBldmVudCwgb3IgaWYgdGhlIGJyb3dzZXIgaXMgbm9uLWNvbmZvcm1pbmcuXG4gICAgICAgIGlmKGF0ID09PSBjdXJyZW50SXRlcmF0aW9ucyAtIDEgJiYgdHlwZSA9PT0gXCJjaGFuZ2VcIiAmJiBsYXN0VHlwZSA9PT0gXCJpbnB1dFwiKXsgcmV0dXJuIH1cblxuICAgICAgICBET00ucHV0UHJpdmF0ZShpbnB1dCwgXCJwcmV2LWl0ZXJhdGlvblwiLCB7YXQ6IGN1cnJlbnRJdGVyYXRpb25zLCB0eXBlOiB0eXBlfSlcblxuICAgICAgICB0aGlzLmRlYm91bmNlKGlucHV0LCBlLCB0eXBlLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZGlzcGF0Y2hlciwgdmlldyA9PiB7XG4gICAgICAgICAgICBET00ucHV0UHJpdmF0ZShpbnB1dCwgUEhYX0hBU19GT0NVU0VELCB0cnVlKVxuICAgICAgICAgICAgaWYoIURPTS5pc1RleHR1YWxJbnB1dChpbnB1dCkpe1xuICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUVsZW1lbnQoaW5wdXQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBKUy5leGVjKFwiY2hhbmdlXCIsIHBoeEV2ZW50LCB2aWV3LCBpbnB1dCwgW1wicHVzaFwiLCB7X3RhcmdldDogZS50YXJnZXQubmFtZSwgZGlzcGF0Y2hlcjogZGlzcGF0Y2hlcn1dKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9LCBmYWxzZSlcbiAgICB9XG4gICAgdGhpcy5vbihcInJlc2V0XCIsIChlKSA9PiB7XG4gICAgICBsZXQgZm9ybSA9IGUudGFyZ2V0XG4gICAgICBET00ucmVzZXRGb3JtKGZvcm0sIHRoaXMuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKSlcbiAgICAgIGxldCBpbnB1dCA9IEFycmF5LmZyb20oZm9ybS5lbGVtZW50cykuZmluZChlbCA9PiBlbC50eXBlID09PSBcInJlc2V0XCIpXG4gICAgICAvLyB3YWl0IHVudGlsIG5leHQgdGljayB0byBnZXQgdXBkYXRlZCBpbnB1dCB2YWx1ZVxuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaW5wdXRcIiwge2J1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IGZhbHNlfSkpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBkZWJvdW5jZShlbCwgZXZlbnQsIGV2ZW50VHlwZSwgY2FsbGJhY2spe1xuICAgIGlmKGV2ZW50VHlwZSA9PT0gXCJibHVyXCIgfHwgZXZlbnRUeXBlID09PSBcImZvY3Vzb3V0XCIpeyByZXR1cm4gY2FsbGJhY2soKSB9XG5cbiAgICBsZXQgcGh4RGVib3VuY2UgPSB0aGlzLmJpbmRpbmcoUEhYX0RFQk9VTkNFKVxuICAgIGxldCBwaHhUaHJvdHRsZSA9IHRoaXMuYmluZGluZyhQSFhfVEhST1RUTEUpXG4gICAgbGV0IGRlZmF1bHREZWJvdW5jZSA9IHRoaXMuZGVmYXVsdHMuZGVib3VuY2UudG9TdHJpbmcoKVxuICAgIGxldCBkZWZhdWx0VGhyb3R0bGUgPSB0aGlzLmRlZmF1bHRzLnRocm90dGxlLnRvU3RyaW5nKClcblxuICAgIHRoaXMud2l0aGluT3duZXJzKGVsLCB2aWV3ID0+IHtcbiAgICAgIGxldCBhc3luY0ZpbHRlciA9ICgpID0+ICF2aWV3LmlzRGVzdHJveWVkKCkgJiYgZG9jdW1lbnQuYm9keS5jb250YWlucyhlbClcbiAgICAgIERPTS5kZWJvdW5jZShlbCwgZXZlbnQsIHBoeERlYm91bmNlLCBkZWZhdWx0RGVib3VuY2UsIHBoeFRocm90dGxlLCBkZWZhdWx0VGhyb3R0bGUsIGFzeW5jRmlsdGVyLCAoKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHNpbGVuY2VFdmVudHMoY2FsbGJhY2spe1xuICAgIHRoaXMuc2lsZW5jZWQgPSB0cnVlXG4gICAgY2FsbGJhY2soKVxuICAgIHRoaXMuc2lsZW5jZWQgPSBmYWxzZVxuICB9XG5cbiAgb24oZXZlbnQsIGNhbGxiYWNrKXtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZSA9PiB7XG4gICAgICBpZighdGhpcy5zaWxlbmNlZCl7IGNhbGxiYWNrKGUpIH1cbiAgICB9KVxuICB9XG59XG5cbmNsYXNzIFRyYW5zaXRpb25TZXQge1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHRoaXMudHJhbnNpdGlvbnMgPSBuZXcgU2V0KClcbiAgICB0aGlzLnBlbmRpbmdPcHMgPSBbXVxuICB9XG5cbiAgcmVzZXQoKXtcbiAgICB0aGlzLnRyYW5zaXRpb25zLmZvckVhY2godGltZXIgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKVxuICAgICAgdGhpcy50cmFuc2l0aW9ucy5kZWxldGUodGltZXIpXG4gICAgfSlcbiAgICB0aGlzLmZsdXNoUGVuZGluZ09wcygpXG4gIH1cblxuICBhZnRlcihjYWxsYmFjayl7XG4gICAgaWYodGhpcy5zaXplKCkgPT09IDApe1xuICAgICAgY2FsbGJhY2soKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnB1c2hQZW5kaW5nT3AoY2FsbGJhY2spXG4gICAgfVxuICB9XG5cbiAgYWRkVHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCBvbkRvbmUpe1xuICAgIG9uU3RhcnQoKVxuICAgIGxldCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmFuc2l0aW9ucy5kZWxldGUodGltZXIpXG4gICAgICBvbkRvbmUoKVxuICAgICAgdGhpcy5mbHVzaFBlbmRpbmdPcHMoKVxuICAgIH0sIHRpbWUpXG4gICAgdGhpcy50cmFuc2l0aW9ucy5hZGQodGltZXIpXG4gIH1cblxuICBwdXNoUGVuZGluZ09wKG9wKXsgdGhpcy5wZW5kaW5nT3BzLnB1c2gob3ApIH1cblxuICBzaXplKCl7IHJldHVybiB0aGlzLnRyYW5zaXRpb25zLnNpemUgfVxuXG4gIGZsdXNoUGVuZGluZ09wcygpe1xuICAgIGlmKHRoaXMuc2l6ZSgpID4gMCl7IHJldHVybiB9XG4gICAgbGV0IG9wID0gdGhpcy5wZW5kaW5nT3BzLnNoaWZ0KClcbiAgICBpZihvcCl7XG4gICAgICBvcCgpXG4gICAgICB0aGlzLmZsdXNoUGVuZGluZ09wcygpXG4gICAgfVxuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUEscURBQUFBLFNBQUE7QUFBQSxLQUFDLFNBQVVDLFNBQVEsU0FBUztBQUN4QixhQUFPLFlBQVksWUFBWSxPQUFPRCxZQUFXLGNBQWMsUUFBUSxPQUFPLElBQzlFLE9BQU8sV0FBVyxjQUFjLE9BQU8sTUFBTSxPQUFPLENBQUMsU0FBUyxHQUFHLE9BQU8sS0FDdkVDLFVBQVMsT0FBTyxlQUFlLGNBQWMsYUFBYUEsV0FBVSxNQUFNLFFBQVFBLFFBQU8sT0FBTyxDQUFDLENBQUM7QUFBQSxJQUN2RyxHQUFHLFNBQU8sU0FBVUMsVUFBUztBQUFFO0FBRTNCLFVBQUksb0NBQW9DLFNBQVUsR0FBRztBQUNuRCxlQUFPLEVBQUUsY0FBYyxnQkFBZ0IsS0FBSztBQUFBLE1BQzlDO0FBRUEsVUFBSSwwQkFBMEI7QUFBQSxRQUM1QixNQUFNO0FBQUEsUUFDTixlQUFlLENBQUM7QUFBQSxRQUNoQixnQkFBZ0IsQ0FBQztBQUFBLFFBQ2pCLFNBQVMsQ0FBQztBQUFBLFFBQ1YsZUFBZTtBQUFBLE1BQ2pCO0FBa0JBLFVBQUksZ0JBQWdCLFNBQVMsR0FBRyxHQUFHO0FBQy9CLHdCQUFnQixPQUFPLGtCQUNsQixFQUFFLFdBQVcsQ0FBQyxFQUFFLGFBQWEsU0FBUyxTQUFVQyxJQUFHQyxJQUFHO0FBQUUsVUFBQUQsR0FBRSxZQUFZQztBQUFBLFFBQUcsS0FDMUUsU0FBVUQsSUFBR0MsSUFBRztBQUFFLG1CQUFTLEtBQUtBO0FBQUcsZ0JBQUksT0FBTyxVQUFVLGVBQWUsS0FBS0EsSUFBRyxDQUFDO0FBQUcsY0FBQUQsR0FBRSxDQUFDLElBQUlDLEdBQUUsQ0FBQztBQUFBLFFBQUc7QUFDcEcsZUFBTyxj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QyxFQUFFLEtBQUssSUFBSTtBQUFBLEVBQzNCLEVBQUMsQ0FBQztBQUNKO0FBTUEsSUFBSSxZQUFZLFNBQ2IsY0FBYyx5QkFBeUIsRUFDdkMsYUFBYSxTQUFTO0FBQ3pCLElBQUksYUFBYSxJQUFJLFdBQVcsU0FBUyxRQUFRO0FBQUEsRUFDL0MsUUFBUSxFQUFFLGFBQWEsVUFBVTtBQUNuQyxDQUFDO0FBR0QsV0FBVyxRQUFRO0FBQ25CLE9BQU8sYUFBYTtBQUtwQixjQUFBQyxRQUFPLE9BQU8sRUFBRSxXQUFXLEVBQUUsR0FBRyxPQUFPLEdBQUcsYUFBYSxvQkFBb0IsQ0FBQztBQUM1RSxPQUFPLGlCQUFpQiwwQkFBMEIsQ0FBQyxTQUFTLGNBQUFBLFFBQU8sS0FBSyxDQUFDO0FBQ3pFLE9BQU8saUJBQWlCLHlCQUF5QixDQUFDLFNBQVMsY0FBQUEsUUFBTyxLQUFLLENBQUM7IiwKICAibmFtZXMiOiBbIm1vZHVsZSIsICJnbG9iYWwiLCAiZXhwb3J0cyIsICJkIiwgImIiLCAiX19hc3NpZ24iLCAiTWFza0hpc3RvcnkiLCAiTWFza01vZGVsIiwgIkV2ZW50TGlzdGVuZXIiLCAiTWFza2l0byIsICJyZXF1aXJlX2luZGV4X3VtZCIsICJtb2R1bGUiLCAiZ2xvYmFsIiwgImV4cG9ydHMiLCAiX19hc3NpZ24iLCAiaXNFbXB0eSIsICJfYSIsICJfYiIsICJkb2N1bWVudCIsICJfYyIsICJtYXNraXRvTnVtYmVyT3B0aW9uc0dlbmVyYXRvciIsICJtb2R1bGUiLCAid2luZG93IiwgImRvY3VtZW50IiwgInRvcGJhciIsICJDdXN0b21FdmVudCIsICJjbG9zdXJlIiwgImxpdmVTb2NrZXQiLCAiY2xvc3VyZSIsICJ0b3BiYXIiXQp9Cg==
